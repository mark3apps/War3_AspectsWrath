udg_PLAYERGRPallied = nil
udg_PLAYERGRPfederation = nil
udg_RevivableHeros = nil
udg_TempReal = 0.0
udg_ReviveTimers = {}
udg_ReviveTimerWindows = {}
udg_PLAYERcomputers = {}
udg_DM_CasterLoc = nil
udg_DM_TempGroup = nil
udg_AT_Units = nil
udg_AT_Units_Picked = nil
udg_TC_Player = nil
udg_StartCameras = {}
udg_PLAYERGRPalliedUsers = nil
udg_PLAYERGRPfederationUsers = nil
udg_UNIT_pickedHero = {}
udg_UNIT_Bases = {}
udg_UNIT_Healing = {}
udg_BOOL_AIHealing = __jarray(false)
udg_INT_TeamNumber = __jarray(0)
udg_UNIT_AI_PickedDest = {}
udg_UNIT_AI_CurHero = nil
udg_REAL_AI_Distance = 0.0
udg_BOOL_AI_Alive = __jarray(false)
udg_INT_RandTemp = 0
udg_BOOL_AI_Casting = __jarray(false)
udg_REAL_AI_PreviousLife = __jarray(0.0)
udg_REAL_AI_DamageTaken = __jarray(0.0)
udg_BOOL_AI_Fleeing = __jarray(false)
udg_REAL_AI_PreviousLife2 = __jarray(0.0)
udg_REAL_AI_DamageTakenAverage = __jarray(0.0)
udg_GRP_AI_HeroesAroundHero = nil
udg_BOOL_AI_AttackingHero = __jarray(false)
udg_POINT_AI_PursueStart = {}
udg_INT_AI_Player = 0
udg_TEMP_Pos_Hero = nil
udg_TEMP_Pos2 = nil
udg_SPAWN_NumberOfUnits = __jarray(0)
udg_SPAWN_UnitType = __jarray(0)
udg_SPAWN_LevelStart = __jarray(0)
udg_SPAWN_OVER_UnitTypes = __jarray(0)
udg_SPAWN_OVER_RegionStart = {}
udg_SPAWN_OVER_RegionEnd = {}
udg_SPAWN_LoopPlayer = 0
udg_SPAWN_LoopUnitTypes = 0
udg_SPAWN_TMP_posSTART = nil
udg_SPAWN_TMP_TeamNumber = 0
udg_SPAWN_TMP_NumOfUnitsREAL = 0
udg_TEMP_IntLoop1 = 0
udg_TMP_INT_SpawnRegion = 0
udg_TMP_INT_SpawnUnitTypes = 0
udg_SPAWN_OVER_UnitCondition = {}
udg_ALL_PLAYERS = nil
udg_TIMER_Attack = nil
udg_Doom_Warden = nil
udg_Doom_WardenPickedSides = false
udg_BloodlustGroup = nil
udg_Bloodlust_AttackSpeed = __jarray(0.0)
udg_UnleashRage_Group = nil
udg_BrawlerMana = __jarray(0.0)
udg_DrainLifeCasters = nil
udg_DrainLifeTargets = nil
udg_TEMP_Unit = nil
udg_TEMP_Int = 0
udg_drainTime = __jarray(0)
udg_TEMP_UnitGroup = nil
udg_TEMP_Pos_Spell = nil
udg_GRP_AI_Creeps = nil
udg_BOOL_AI_UpdateDest = __jarray(false)
udg_UserPlayers = nil
udg_AI_PursueHero = {}
udg_AI_TargetHeroPoint = {}
udg_EventTimer = nil
udg_DL_Index = 0
udg_DL_Caster = {}
udg_DL_Counter = __jarray(0.0)
udg_DL_Loop = 0
udg_UR_Loop = 0
udg_UR_Counter = __jarray(0.0)
udg_UR_Index = 0
udg_UR_Caster = {}
udg_Mana_Overload_Researched = __jarray(0)
udg_Frost_Attack_Researched = __jarray(false)
udg_TEMP_Real = 0.0
udg_Creep_Team = __jarray(0)
udg_Creep_Unit = {}
udg_Creep_Start = {}
udg_Creep_Index = 0
udg_Creep_Timer = __jarray(0.0)
udg_Creep_Unit_Type = __jarray(0)
udg_Event_Count = __jarray(0)
udg_Event_Counter = 0
udg_Event_Unit_Type = 0
udg_FA_Index = 0
udg_FA_Loop = 0
udg_FA_Caster = {}
udg_FA_StartPoint = {}
udg_FA_Facing = __jarray(0.0)
udg_FA_Counter = __jarray(0.0)
udg_FA_Distance = __jarray(0.0)
udg_FA_Duration = __jarray(0.0)
udg_JD_Integers = __jarray(0)
udg_JD_TempPoint = {}
udg_JDA_Unit = nil
udg_JD_Distances = __jarray(0.0)
udg_JDA_TargetPoint = nil
udg_JD_ReachedDistance = __jarray(0.0)
udg_JD_SpeedUnits = __jarray(0.0)
udg_JDA_Speed = 0.0
udg_JD_Unit = {}
udg_JD_Angle = __jarray(0.0)
udg_JD_Effect = __jarray("")
udg_JDA_SpecialEffect = ""
udg_JD_Animations = __jarray("")
udg_JDA_Animation = ""
udg_JD_TreesDestroy = __jarray(false)
udg_JDA_DestroyTrees_Dash = false
udg_JD_HighSettings = __jarray(0.0)
udg_JDA_JumpHigh_Distance = 0.0
udg_JDA_AnimationSpeed = 0.0
udg_JD_Group = nil
udg_JD_RealTimer = __jarray(0.0)
udg_JD_JumpHigh = __jarray(0.0)
udg_JDA_Collusion = false
udg_TEMP_Real_2 = 0.0
udg_TEMP_Player = nil
udg_TEMP_UnitGroup2 = nil
udg_TEMP_Int2 = 0
udg_SB_Caster = nil
udg_Spell_LOC_Spell = nil
udg_Spell_LOC_Cast = nil
udg_Spell_Counter = 0.0
udg_Spell_Duration = 0.0
udg_Spell_Level = 0
udg_Spell_Distance = 0.0
udg_Spell_Speed = 0.0
udg_Spell_Phase = 0
udg_Attack_Hash = nil
udg_Attack_Unit_Group = nil
udg_Spell_Unit_Target = nil
udg_Spell_Player = nil
udg_Attack_Interval = 0.0
udg_Hero_Levels = __jarray(0)
udg_FA_Level = 0
udg_Gates_Open = nil
udg_Gates_Closed = nil
udg_TEMP_Region = nil
udg_TEMP_Int3 = 0
udg_Inspired_Hash = nil
udg_Inspired_UnitGroup = nil
udg_Inspired_Interval = 0.0
udg_CALC_Level_Factor = 0.0
udg_CALC_Base = 0.0
udg_CALC_Constant = 0.0
udg_CALC_Previous_Value = 0.0
udg_CALC_LOOP = 0
udg_CALC_ITERATIONS = 0
udg_CALC_RESULT = 0.0
udg_Spell_Caster = nil
udg_Paradox_HASH = nil
udg_Paradox_INTERVAL = 0.0
udg_Paradox_GROUP = nil
udg_TimeTravel_HASH = nil
udg_TimeTravel_GROUP = nil
udg_TimeTravel_INTERVAL = 0.0
udg_Spell_Damage = 0.0
udg_UNIT_Bases_Teleport = {}
udg_TEMP_A_REAL = __jarray(0.0)
udg_TEMP_A_INT = __jarray(0)
udg_TEMP_A_UNIT = {}
udg_Count = 0
udg_playersAll = nil
udg_summoningStone = nil
udg_TalentControlPreventReset = __jarray(false)
udg_Talent__Event = 0.0
udg_Talent__Unit = nil
udg_Talent__UnitCode = 0
udg_Talent__Choice = nil
udg_Talent__Level = 0
udg_Talent__Button = 0
gg_rct_Left_Start = nil
gg_rct_Left_Hero = nil
gg_rct_Camp_Top = nil
gg_rct_Left_Tree = nil
gg_rct_Left_Workshop = nil
gg_rct_Left_Arcane = nil
gg_rct_Right_Hero = nil
gg_rct_Right_Start = nil
gg_rct_Right_Tree = nil
gg_rct_Right_Arcane = nil
gg_rct_Right_Workshop = nil
gg_rct_Camp_Bottom = nil
gg_rct_Left_Orc = nil
gg_rct_Right_Orc = nil
gg_rct_Center_Events = nil
gg_rct_Furbolg_Left = nil
gg_rct_Furbolg_Right = nil
gg_rct_Left_Start_Bottom = nil
gg_rct_Left_Start_Top = nil
gg_rct_Right_Start_Top = nil
gg_rct_Big_Bottom_Left = nil
gg_rct_Big_Middle_Left = nil
gg_rct_Big_Top_Left = nil
gg_rct_Left_Castle = nil
gg_rct_Left_City = nil
gg_rct_Right_City = nil
gg_rct_Right_Castle = nil
gg_rct_Left_High_Elves = nil
gg_rct_Left_Shipyard = nil
gg_rct_Right_Shipyard = nil
gg_rct_Right_Start_Bottom = nil
gg_rct_Right_High_Elves = nil
gg_rct_Naga_Right = nil
gg_rct_Naga_Left = nil
gg_rct_Murloc_Left = nil
gg_rct_Murloc_Right = nil
gg_rct_Left_Elemental_Start = nil
gg_rct_Front_Town_Left = nil
gg_rct_City_Elves_Left = nil
gg_rct_Blacksmith_Left = nil
gg_rct_Front_City_Right = nil
gg_rct_City_Elves_Right = nil
gg_rct_Blacksmith_Right = nil
gg_rct_Arcane_Hero_Right = nil
gg_rct_Arcane_Hero_Left = nil
gg_rct_Murloc_Gate_Left = nil
gg_rct_Murloc_Gate_Right = nil
gg_rct_Big_Top_Right = nil
gg_rct_Big_Middle_Right = nil
gg_rct_Big_Bottom_Right = nil
gg_rct_Big_Bottom_Left_Center = nil
gg_rct_Big_Bottom_Right_Center = nil
gg_rct_Big_Top_Right_Center = nil
gg_rct_Big_Top_Left_Center = nil
gg_rct_Big_Middle_Right_Center = nil
gg_rct_Aspect_of_Forest_Left = nil
gg_rct_Aspect_of_Forest_Left_Gate = nil
gg_rct_Aspect_of_Forest_Right_Gate = nil
gg_rct_Arcane_Left_Top = nil
gg_rct_Arcane_Left_Bottom = nil
gg_rct_Arcane_Right_Top = nil
gg_rct_Arcane_Right_Bottom = nil
gg_rct_Zombie_End_Left = nil
gg_rct_Zombie_End_Right = nil
gg_rct_Death_Gate_Left = nil
gg_rct_Death_Gate_Right = nil
gg_rct_Elf_Base_Right = nil
gg_rct_Elf_Base_Left = nil
gg_rct_Undead_Right = nil
gg_rct_Undead_Left = nil
gg_rct_Human_Shipyard_Left = nil
gg_rct_Human_Shipyard_Right = nil
gg_rct_Right_Everything = nil
gg_rct_Left_Everything = nil
gg_rct_Left_Mage_Base = nil
gg_rct_Right_Mage_Base = nil
gg_rct_Murloc_Spawn_Left = nil
gg_rct_Murloc_Spawn_Right = nil
gg_rct_Right_Start_Middle = nil
gg_rct_Zombie_Mid_Left = nil
gg_rct_Zombie_Mid_Right = nil
gg_rct_Aspect_of_Forest_Left_Mid = nil
gg_rct_Aspect_of_Forest_Right_Mid = nil
gg_rct_Aspect_of_Forest_Right = nil
gg_rct_Right_Elemental_Start = nil
gg_rct_Left_Start_Middle = nil
gg_rct_Big_Middle_Left_Center = nil
gg_cam_baseLeftStart = nil
gg_cam_intro06 = nil
gg_cam_intro01 = nil
gg_cam_intro02 = nil
gg_cam_intro03 = nil
gg_cam_intro04 = nil
gg_cam_intro05 = nil
gg_cam_baseRightStart = nil
gg_cam_intro07 = nil
gg_cam_intro08 = nil
gg_cam_intro09 = nil
gg_cam_intro10 = nil
gg_cam_intro11 = nil
gg_cam_intro12 = nil
gg_cam_intro13 = nil
gg_snd_PurgeTarget1 = nil
gg_snd_BattleNetTick = nil
gg_snd_CreepAggroWhat1 = nil
gg_snd_Error = nil
gg_snd_MapPing = nil
gg_snd_Warning = nil
gg_snd_GateEpicDeath = nil
gg_trg_Level100 = nil
gg_trg_fogofwar = nil
gg_trg_testing = nil
gg_trg_FUNC_Calculate_Level_Factor = nil
gg_trg_Open_Gate_Right_Murloc = nil
gg_trg_Open_Gate_Left_Murloc = nil
gg_trg_Open_Gate_Right_Aspect_of_Death = nil
gg_trg_Open_Gate_Left_Aspect_of_Death = nil
gg_trg_Open_Gate_Left_Aspect_of_Forest = nil
gg_trg_Open_Gate_Right_Aspect_of_Forest = nil
gg_trg_Creep_Dies_Init = nil
gg_trg_Creep_Revive_Count = nil
gg_trg_Armor_Hardening = nil
gg_trg_Slam = nil
gg_trg_Shade_Strength_Copy = nil
gg_trg_Mana_Overload_Research = nil
gg_trg_Frost_Attack_Research = nil
gg_trg_Feedback = nil
gg_trg_Shade_Strength = nil
gg_trg_Swift_Moves = nil
gg_trg_Swift_Attacks = nil
gg_trg_Attribute_Upgrade = nil
gg_trg_INIT_Gates = nil
gg_trg_Toggle_Gate = nil
gg_trg_Gate_Dies = nil
gg_trg_Start_Event = nil
gg_trg_Event_Count = nil
gg_trg_DW_Ancient_Chaos = nil
gg_trg_Doom_Warden_End = nil
gg_trg_Footman_at_Max_Mana = nil
gg_trg_Unit_Upgrades = nil
gg_trg_Elder_Ent_Movement = nil
gg_trg_Zombie_Infect = nil
gg_trg_Upgrade_to_Fel_Warlock = nil
gg_trg_Elf_Boat_Dies = nil
gg_trg_Wildhammer_Building_Dies = nil
gg_trg_Human_Boat_Dies = nil
gg_trg_Chain_Lightning = nil
gg_trg_Energy_Tower = nil
gg_trg_Watch_Tower_Mana_Shield = nil
gg_trg_Shipyard_Left_End = nil
gg_trg_Brawler_No_Mana = nil
gg_trg_Brawler_Rage_GUI = nil
gg_trg_Drain_Start = nil
gg_trg_Drain_Loop = nil
gg_trg_Unleash_Rage_Start = nil
gg_trg_Unleash_Rage = nil
gg_trg_Falling_Strike_CAST = nil
gg_trg_Jump_System_1 = nil
gg_trg_Jump_System_2 = nil
gg_trg_Actions_to_apply = nil
gg_trg_Sample_Spell_Jump = nil
gg_trg_FA_Start = nil
gg_trg_FA_Loop = nil
gg_trg_Shifter_Bladestorm_START = nil
gg_trg_Paradox_INIT = nil
gg_trg_Paradox_CAST = nil
gg_trg_Paradox_LOOP = nil
gg_trg_Chrono_Atrophy_CAST = nil
gg_trg_Time_Travel_INIT = nil
gg_trg_Time_Travel_CAST = nil
gg_trg_Time_Travel_LOOP = nil
gg_trg_Attack_INIT = nil
gg_trg_Attack_CAST = nil
gg_trg_Attack_LOOP = nil
gg_trg_Hash_INIT = nil
gg_trg_Inspire_Start = nil
gg_trg_Inspire_LOOP = nil
gg_trg_Inspire_DIE = nil
gg_trg_Bolster = nil
gg_trg_Level_Up_Team = nil
gg_trg_Revive_Hero = nil
gg_trg_Revive_Hero_Timer = nil
gg_trg_End_Of_Game_Left = nil
gg_trg_End_Of_Game_Right = nil
gg_trg_Melee_Initialization = nil
gg_trg_baseAndHeals = nil
gg_unit_h003_0015 = nil
gg_unit_e003_0058 = nil
gg_unit_n001_0048 = nil
gg_unit_n001_0049 = nil
gg_unit_o001_0078 = nil
gg_unit_h006_0074 = nil
gg_unit_nmh1_0783 = nil
gg_unit_h003_0007 = nil
gg_unit_o001_0075 = nil
gg_unit_hars_0293 = nil
gg_unit_n00B_0038 = nil
gg_unit_nntt_0135 = nil
gg_unit_h006_0055 = nil
gg_unit_h00E_0033 = nil
gg_unit_eshy_0120 = nil
gg_unit_nntt_0132 = nil
gg_unit_hshy_0011 = nil
gg_unit_hvlt_0406 = nil
gg_unit_eshy_0047 = nil
gg_unit_h00E_0081 = nil
gg_unit_hars_0303 = nil
gg_unit_nheb_0036 = nil
gg_unit_e003_0014 = nil
gg_unit_nheb_0109 = nil
gg_unit_n00K_0477 = nil
gg_unit_n00B_0364 = nil
gg_unit_h014_0017 = nil
gg_unit_n00B_0399 = nil
gg_unit_hshy_0212 = nil
gg_unit_n00K_0802 = nil
gg_unit_hvlt_0207 = nil
gg_unit_n00B_0102 = nil
gg_unit_hars_0355 = nil
gg_unit_hars_0292 = nil
gg_unit_h014_0158 = nil
gg_unit_nmh1_0735 = nil
gg_unit_u001_0097 = nil
gg_unit_u001_0098 = nil
gg_unit_ndh2_0359 = nil
gg_unit_h002_0699 = nil
gg_unit_ndh2_0876 = nil
function InitGlobals()
    local i = 0
    udg_PLAYERGRPallied = CreateForce()
    udg_PLAYERGRPfederation = CreateForce()
    udg_RevivableHeros = CreateGroup()
    udg_TempReal = 0.0
    i = 0
    while (true) do
        if ((i > 24)) then break end
        udg_ReviveTimers[i] = CreateTimer()
        i = i + 1
    end
    udg_DM_TempGroup = CreateGroup()
    udg_AT_Units = CreateGroup()
    udg_AT_Units_Picked = CreateGroup()
    udg_PLAYERGRPalliedUsers = CreateForce()
    udg_PLAYERGRPfederationUsers = CreateForce()
    i = 0
    while (true) do
        if ((i > 2)) then break end
        udg_UNIT_Bases[i] = CreateGroup()
        i = i + 1
    end
    i = 0
    while (true) do
        if ((i > 2)) then break end
        udg_UNIT_Healing[i] = CreateGroup()
        i = i + 1
    end
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_BOOL_AIHealing[i] = false
        i = i + 1
    end
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_INT_TeamNumber[i] = 0
        i = i + 1
    end
    udg_REAL_AI_Distance = 0.0
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_BOOL_AI_Alive[i] = false
        i = i + 1
    end
    udg_INT_RandTemp = 0
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_BOOL_AI_Casting[i] = false
        i = i + 1
    end
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_REAL_AI_PreviousLife[i] = 0.0
        i = i + 1
    end
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_REAL_AI_DamageTaken[i] = 0.0
        i = i + 1
    end
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_BOOL_AI_Fleeing[i] = false
        i = i + 1
    end
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_REAL_AI_PreviousLife2[i] = 0.0
        i = i + 1
    end
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_REAL_AI_DamageTakenAverage[i] = 0.0
        i = i + 1
    end
    udg_GRP_AI_HeroesAroundHero = CreateGroup()
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_BOOL_AI_AttackingHero[i] = false
        i = i + 1
    end
    udg_INT_AI_Player = 0
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_SPAWN_NumberOfUnits[i] = 0
        i = i + 1
    end
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_SPAWN_LevelStart[i] = 0
        i = i + 1
    end
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_SPAWN_OVER_UnitTypes[i] = 0
        i = i + 1
    end
    udg_SPAWN_LoopPlayer = 0
    udg_SPAWN_LoopUnitTypes = 0
    udg_SPAWN_TMP_TeamNumber = 0
    udg_SPAWN_TMP_NumOfUnitsREAL = 0
    udg_TEMP_IntLoop1 = 0
    udg_TMP_INT_SpawnRegion = 0
    udg_TMP_INT_SpawnUnitTypes = 0
    udg_ALL_PLAYERS = CreateForce()
    udg_TIMER_Attack = CreateTimer()
    udg_Doom_WardenPickedSides = false
    udg_BloodlustGroup = CreateGroup()
    i = 0
    while (true) do
        if ((i > 12)) then break end
        udg_Bloodlust_AttackSpeed[i] = 0.0
        i = i + 1
    end
    udg_UnleashRage_Group = CreateGroup()
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_BrawlerMana[i] = 150.00
        i = i + 1
    end
    udg_DrainLifeCasters = CreateGroup()
    udg_DrainLifeTargets = CreateGroup()
    udg_TEMP_Int = 0
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_drainTime[i] = 0
        i = i + 1
    end
    udg_TEMP_UnitGroup = CreateGroup()
    udg_GRP_AI_Creeps = CreateGroup()
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_BOOL_AI_UpdateDest[i] = false
        i = i + 1
    end
    udg_UserPlayers = CreateForce()
    udg_EventTimer = CreateTimer()
    udg_DL_Index = 0
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_DL_Counter[i] = 0.0
        i = i + 1
    end
    udg_DL_Loop = 0
    udg_UR_Loop = 0
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_UR_Counter[i] = 0.0
        i = i + 1
    end
    udg_UR_Index = 0
    i = 0
    while (true) do
        if ((i > 12)) then break end
        udg_Mana_Overload_Researched[i] = 0
        i = i + 1
    end
    i = 0
    while (true) do
        if ((i > 12)) then break end
        udg_Frost_Attack_Researched[i] = false
        i = i + 1
    end
    udg_TEMP_Real = 0.0
    i = 0
    while (true) do
        if ((i > 8)) then break end
        udg_Creep_Team[i] = 0
        i = i + 1
    end
    udg_Creep_Index = 0
    i = 0
    while (true) do
        if ((i > 8)) then break end
        udg_Creep_Timer[i] = 0.0
        i = i + 1
    end
    i = 0
    while (true) do
        if ((i > 0)) then break end
        udg_Event_Count[i] = 0
        i = i + 1
    end
    udg_Event_Counter = 0
    udg_FA_Index = 0
    udg_FA_Loop = 0
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_FA_Facing[i] = 0.0
        i = i + 1
    end
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_FA_Counter[i] = 0.0
        i = i + 1
    end
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_FA_Distance[i] = 0.0
        i = i + 1
    end
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_FA_Duration[i] = 0.0
        i = i + 1
    end
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_JD_Integers[i] = 0
        i = i + 1
    end
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_JD_Distances[i] = 0.0
        i = i + 1
    end
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_JD_ReachedDistance[i] = 0.0
        i = i + 1
    end
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_JD_SpeedUnits[i] = 0.0
        i = i + 1
    end
    udg_JDA_Speed = 0.0
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_JD_Angle[i] = 0.0
        i = i + 1
    end
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_JD_Effect[i] = ""
        i = i + 1
    end
    udg_JDA_SpecialEffect = ""
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_JD_Animations[i] = ""
        i = i + 1
    end
    udg_JDA_Animation = ""
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_JD_TreesDestroy[i] = false
        i = i + 1
    end
    udg_JDA_DestroyTrees_Dash = false
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_JD_HighSettings[i] = 0.0
        i = i + 1
    end
    udg_JDA_JumpHigh_Distance = 0.0
    udg_JDA_AnimationSpeed = 0.0
    udg_JD_Group = CreateGroup()
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_JD_RealTimer[i] = 0.0
        i = i + 1
    end
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_JD_JumpHigh[i] = 0.0
        i = i + 1
    end
    udg_JDA_Collusion = false
    udg_TEMP_Real_2 = 0.0
    udg_TEMP_UnitGroup2 = CreateGroup()
    udg_TEMP_Int2 = 0
    udg_Spell_Counter = 0.0
    udg_Spell_Duration = 0.0
    udg_Spell_Level = 0
    udg_Spell_Distance = 0.0
    udg_Spell_Speed = 0.0
    udg_Spell_Phase = 0
    udg_Attack_Unit_Group = CreateGroup()
    udg_Attack_Interval = 0.10
    i = 0
    while (true) do
        if ((i > 0)) then break end
        udg_Hero_Levels[i] = 0
        i = i + 1
    end
    udg_FA_Level = 0
    udg_Gates_Open = CreateGroup()
    udg_Gates_Closed = CreateGroup()
    udg_TEMP_Int3 = 0
    udg_Inspired_UnitGroup = CreateGroup()
    udg_Inspired_Interval = 0.0
    udg_CALC_Level_Factor = 0.0
    udg_CALC_Base = 0.0
    udg_CALC_Constant = 0.0
    udg_CALC_Previous_Value = 0.0
    udg_CALC_LOOP = 0
    udg_CALC_ITERATIONS = 0
    udg_CALC_RESULT = 0.0
    udg_Paradox_INTERVAL = 0.0
    udg_Paradox_GROUP = CreateGroup()
    udg_TimeTravel_GROUP = CreateGroup()
    udg_TimeTravel_INTERVAL = 0.0
    udg_Spell_Damage = 0.0
    i = 0
    while (true) do
        if ((i > 2)) then break end
        udg_UNIT_Bases_Teleport[i] = CreateGroup()
        i = i + 1
    end
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_TEMP_A_REAL[i] = 0.0
        i = i + 1
    end
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_TEMP_A_INT[i] = 0
        i = i + 1
    end
    udg_Count = 0
    udg_playersAll = CreateForce()
    i = 0
    while (true) do
        if ((i > 1)) then break end
        udg_TalentControlPreventReset[i] = false
        i = i + 1
    end
    udg_Talent__Event = 0.0
    udg_Talent__Level = 0
    udg_Talent__Button = 0
end

--Buggy Has to be fixxed. Disallows Starting the map


--[[
TalentPreMadeChoice 1.2a
by Tasyen

Contains Predefined ChoiceCreations

API
=========
TalentChoiceCreateStats( strAdd,  agiAdd,  intAdd )
Create a new Choice which adds Str, agi and int.
The Choice is added to the last created Tier.
This also generates Main-Text showing the stats gained.
If you wana add pre Text do it as shown below
choice.Text = "your Text" .. choice.Text

TalentChoiceCreateStr( add )
TalentChoiceCreateAgi( add )
TalentChoiceCreateInt( add )

TalentChoiceCreateSustain(lifeAdd, lifeRegAdd, manaAdd, manaRegAdd, armorAdd)

TalentChoiceCreateImproveWeapon( weaponIndex,  damageAdd,  cooldownAdd )

TalentChoiceCreateImproveSpell(spell, manaCostAdd, cooldownAdd, rangeAdd, unitDurAdd, heroDurAdd, missileSpeedAdd, radiusAdd, castTimeAdd)

TalentChoiceCreateAddSpells( spell1,  spell2,  spell3 )
creates a new choice add it to the last created Tier and pushes spell1, spell2, and spell3 onto the choice.
spell2 and spell3 are only added if they are not 0.

TalentChoiceCreateAddSpell( spell,  useButtonInfos )
this choice will add 1 , if useButtonInfos is used then text, HeadLine and Icon are taken from the spell

TalentChoiceCreateReplaceSpell( oldSpell,  newSpell )

=======================
--]]
function TalentPreMadeChoiceStrings()
    Talent.Strings.AddSpellFirst = "Learn:"
    Talent.Strings.AddSpellFirstSeperator = " "
    Talent.Strings.AddSpellSeperator = ", "

    Talent.Strings.ImproveSpellFirst = ""
    Talent.Strings.ImproveSpellSeperatorFirst = ""
    Talent.Strings.ImproveSpellSeperator = ", "
    Talent.Strings.ImproveSpellManaCost = "Manacost-Change"
    Talent.Strings.ImproveSpellCoolDown = "Cooldown-Change"
    Talent.Strings.ImproveSpellRange = "Range-Change"
    Talent.Strings.ImproveSpellRadius = "Radius-Change"
    Talent.Strings.ImproveSpellDurHero = "Hero-Duration-Change"
    Talent.Strings.ImproveSpellDurUnit = "Unit-Duration-Change"
    Talent.Strings.ImproveSpellMissile = "MissleSpeed-Change"
    Talent.Strings.ImproveSpellCastTime = "CastTime-Change"

    Talent.Strings.ImproveWeaponFirst = "Weapon: "
    Talent.Strings.ImproveWeaponSeperatorFirst = ""
    Talent.Strings.ImproveWeaponSeperator = ", "
    Talent.Strings.ImproveWeaponDamage = GetLocalizedString("COLON_DAMAGE")
    Talent.Strings.ImproveWeaponCooldown = GetLocalizedString("COLON_SPEED")

    Talent.Strings.SustainFirst = ""
    Talent.Strings.SustainSeperatorFirst = ""
    Talent.Strings.SustainSeperator = ", "
    Talent.Strings.SustainLife = "Life-Bonus "
    Talent.Strings.SustainLifeReg = "LifeReg-Bonus "
    Talent.Strings.SustainMana = "Mana-Bonus "
    Talent.Strings.SustainManaReg = "ManaReg-Bonus "
    Talent.Strings.SustainArmor = GetLocalizedString("COLON_ARMOR")
    
    Talent.Strings.HeroStatsFirst = ""
    Talent.Strings.HeroStatsSeperator = ", "
    Talent.Strings.HeroStatsSeperatorFirst = ""
    Talent.Strings.HeroStatsStr = GetLocalizedString("COLON_STRENGTH")
    Talent.Strings.HeroStatsAgi = GetLocalizedString("COLON_AGILITY")
    Talent.Strings.HeroStatsInt = GetLocalizedString("COLON_INTELLECT")
end
function TalentChoiceStatsLearn()
	SetHeroStr(udg_Talent__Unit, GetHeroStr(udg_Talent__Unit,false) + udg_Talent__Choice.Str,true)
	SetHeroAgi(udg_Talent__Unit, GetHeroAgi(udg_Talent__Unit,false) + udg_Talent__Choice.Agi,true)
	SetHeroInt(udg_Talent__Unit, GetHeroInt(udg_Talent__Unit,false) + udg_Talent__Choice.Int,true)
end
function TalentChoiceStatsReset()
	SetHeroStr(udg_Talent__Unit, GetHeroStr(udg_Talent__Unit,false) - udg_Talent__Choice.Str,true)
	SetHeroAgi(udg_Talent__Unit, GetHeroAgi(udg_Talent__Unit,false) - udg_Talent__Choice.Agi,true)
	SetHeroInt(udg_Talent__Unit, GetHeroInt(udg_Talent__Unit,false) - udg_Talent__Choice.Int,true)
end
function TalentChoiceSustainLearn()
	BlzSetUnitMaxHP(udg_Talent__Unit, BlzGetUnitMaxHP(udg_Talent__Unit) + udg_Talent__Choice.BonusLife)
	BlzSetUnitMaxMana(udg_Talent__Unit, BlzGetUnitMaxMana(udg_Talent__Unit) + udg_Talent__Choice.BonusMana)
	BlzSetUnitArmor(udg_Talent__Unit, BlzGetUnitArmor(udg_Talent__Unit) + udg_Talent__Choice.BonusArmor)
	BlzSetUnitRealField(udg_Talent__Unit, UNIT_RF_HIT_POINTS_REGENERATION_RATE, BlzGetUnitRealField(udg_Talent__Unit, UNIT_RF_HIT_POINTS_REGENERATION_RATE) + udg_Talent__Choice.BonusLifeReg)
	BlzSetUnitRealField(udg_Talent__Unit, UNIT_RF_MANA_REGENERATION, BlzGetUnitRealField(udg_Talent__Unit, UNIT_RF_MANA_REGENERATION) + udg_Talent__Choice.BonusManaReg)
	SetUnitState(udg_Talent__Unit, UNIT_STATE_LIFE, GetUnitState(udg_Talent__Unit,UNIT_STATE_LIFE) + udg_Talent__Choice.BonusLife)
	SetUnitState(udg_Talent__Unit, UNIT_STATE_MANA, GetUnitState(udg_Talent__Unit,UNIT_STATE_MANA) + udg_Talent__Choice.BonusMana)
end
function TalentChoiceSustainReset()
	BlzSetUnitMaxHP(udg_Talent__Unit, BlzGetUnitMaxHP(udg_Talent__Unit) - udg_Talent__Choice.BonusLife)
	BlzSetUnitMaxMana(udg_Talent__Unit, BlzGetUnitMaxMana(udg_Talent__Unit) - udg_Talent__Choice.BonusMana)
	BlzSetUnitArmor(udg_Talent__Unit, BlzGetUnitArmor(udg_Talent__Unit) - udg_Talent__Choice.BonusArmor)
	BlzSetUnitRealField(udg_Talent__Unit, UNIT_RF_HIT_POINTS_REGENERATION_RATE, BlzGetUnitRealField(udg_Talent__Unit, UNIT_RF_HIT_POINTS_REGENERATION_RATE) - udg_Talent__Choice.BonusLifeReg)
	BlzSetUnitRealField(udg_Talent__Unit, UNIT_RF_MANA_REGENERATION, BlzGetUnitRealField(udg_Talent__Unit, UNIT_RF_MANA_REGENERATION) - udg_Talent__Choice.BonusManaReg)
end

function TalentChoiceImproveWeaponLearn()
	BlzSetUnitAttackCooldown(udg_Talent__Unit, BlzGetUnitAttackCooldown(udg_Talent__Unit, udg_Talent__Choice.WeaponIndex) + udg_Talent__Choice.BonusCooldown, udg_Talent__Choice.WeaponIndex)
	BlzSetUnitBaseDamage(udg_Talent__Unit, BlzGetUnitBaseDamage(udg_Talent__Unit, udg_Talent__Choice.WeaponIndex) + udg_Talent__Choice.BonusDamage, udg_Talent__Choice.WeaponIndex)
end
function TalentChoiceImproveWeaponReset()
	BlzSetUnitAttackCooldown(udg_Talent__Unit, BlzGetUnitAttackCooldown(udg_Talent__Unit, udg_Talent__Choice.WeaponIndex) - udg_Talent__Choice.BonusCooldown, udg_Talent__Choice.WeaponIndex)
	BlzSetUnitBaseDamage(udg_Talent__Unit, BlzGetUnitBaseDamage(udg_Talent__Unit, udg_Talent__Choice.WeaponIndex) - udg_Talent__Choice.BonusDamage, udg_Talent__Choice.WeaponIndex)
end
function TalentChoiceCreateStats(strAdd, agiAdd, intAdd)
    local choice = TalentHeroCreateChoiceEx()
    
	choice.OnLearn = TalentChoiceStatsLearn
	choice.OnReset = TalentChoiceStatsReset
	choice.Str = strAdd
	choice.Agi = agiAdd
	choice.Int = intAdd
	
    choice.Text = Talent.Strings.HeroStatsFirst
    local seperator = Talent.Strings.HeroStatsSeperatorFirst
    local seperator2 = Talent.Strings.HeroStatsSeperator
    if strAdd ~= 0 then	choice.Text = choice.Text.. seperator .. Talent.Strings.HeroStatsStr .. strAdd seperator = seperator2 end
	if agiAdd ~= 0 then choice.Text = choice.Text.. seperator .. Talent.Strings.HeroStatsAgi .. agiAdd seperator = seperator2 end
	if intAdd ~= 0 then choice.Text = choice.Text.. seperator .. Talent.Strings.HeroStatsInt .. intAdd seperator = seperator2 end
	return choice
end
function TalentChoiceCreateStr( add )
	return TalentChoiceCreateStats(add,0,0)
end
function TalentChoiceCreateAgi( add )
	return TalentChoiceCreateStats(0,add,0)
end
function TalentChoiceCreateInt( add )
	return TalentChoiceCreateStats(0,0,add)
end
function TalentChoiceCreateSustain(lifeAdd, lifeRegAdd, manaAdd, manaRegAdd, armorAdd)
	local choice = TalentHeroCreateChoiceEx()
	choice.OnLearn = TalentChoiceSustainLearn
	choice.OnReset = TalentChoiceSustainReset
	choice.BonusLife = lifeAdd
	choice.BonusLifeReg = lifeRegAdd
	choice.BonusMana = manaAdd
	choice.BonusManaReg = manaRegAdd
	choice.BonusArmor = armorAdd

    choice.Text = Talent.Strings.SustainFirst
    local seperator = Talent.Strings.SustainSeperatorFirst
    local seperator2 = Talent.Strings.SustainSeperator
    if armorAdd ~= 0 then choice.Text = choice.Text.. seperator .. Talent.Strings.SustainArmor .. armorAdd seperator = seperator2 end
	if lifeAdd ~= 0 then choice.Text = choice.Text.. seperator .. Talent.Strings.SustainLife .. lifeAdd seperator = seperator2 end
    if lifeRegAdd ~= 0 then choice.Text = choice.Text.. seperator .. Talent.Strings.SustainLifeReg .. lifeRegAdd seperator = seperator2 end
    if manaAdd ~= 0 then choice.Text = choice.Text.. seperator .. Talent.Strings.SustainMana .. manaAdd seperator = seperator2 end
    if manaRegAdd ~= 0 then choice.Text = choice.Text.. seperator .. Talent.Strings.SustainManaReg .. manaRegAdd seperator = seperator2 end

	return choice
end
function TalentChoiceCreateImproveWeapon( weaponIndex,  damageAdd,  cooldownAdd )
	local choice = TalentHeroCreateChoiceEx()
	choice.OnLearn = TalentChoiceImproveWeaponLearn
	choice.OnReset = TalentChoiceImproveWeaponReset
	choice.WeaponIndex = weaponIndex
	choice.BonusDamage = damageAdd
	choice.BonusCooldown = cooldownAdd

    choice.Text = Talent.Strings.ImproveWeaponFirst
    local seperator = Talent.Strings.ImproveWeaponSeperatorFirst
    if damageAdd ~= 0 then choice.Text = choice.Text.. seperator .. Talent.Strings.ImproveWeaponDamage .. damageAdd seperator = Talent.Strings.ImproveWeaponSeperator end
    if cooldownAdd ~= 0 then choice.Text = choice.Text.. seperator .. Talent.Strings.ImproveWeaponCooldown .. cooldownAdd end
	return choice
end

function TalentChoiceImproveSpellLearn()
    local spell = BlzGetUnitAbility(udg_Talent__Unit, udg_Talent__Choice.Spell)
    
    BlzSetAbilityIntegerField(spell, ABILITY_IF_MISSILE_SPEED, BlzGetAbilityIntegerField(spell, ABILITY_IF_MISSILE_SPEED) + udg_Talent__Choice.Speed)
    for level = 0, BlzGetAbilityIntegerField(spell,ABILITY_IF_LEVELS), 1 do
        BlzSetAbilityIntegerLevelField(spell, ABILITY_ILF_MANA_COST, level, BlzGetAbilityIntegerLevelField(spell, ABILITY_ILF_MANA_COST, level) + udg_Talent__Choice.Mana)
        BlzSetAbilityRealLevelField(spell, ABILITY_RLF_DURATION_NORMAL, level, BlzGetAbilityRealLevelField(spell, ABILITY_RLF_DURATION_NORMAL, level) + udg_Talent__Choice.DurUnit)
        BlzSetAbilityRealLevelField(spell, ABILITY_RLF_DURATION_HERO, level, BlzGetAbilityRealLevelField(spell, ABILITY_RLF_DURATION_HERO, level) + udg_Talent__Choice.DurHero)
        BlzSetAbilityRealLevelField(spell, ABILITY_RLF_COOLDOWN, level, BlzGetAbilityRealLevelField(spell, ABILITY_RLF_COOLDOWN, level) + udg_Talent__Choice.Cool)
        BlzSetAbilityRealLevelField(spell, ABILITY_RLF_AREA_OF_EFFECT, level, BlzGetAbilityRealLevelField(spell, ABILITY_RLF_AREA_OF_EFFECT, level) + udg_Talent__Choice.Area)
        BlzSetAbilityRealLevelField(spell, ABILITY_RLF_CAST_RANGE, level, BlzGetAbilityRealLevelField(spell, ABILITY_RLF_CAST_RANGE, level) + udg_Talent__Choice.Range)
        BlzSetAbilityRealLevelField(spell, ABILITY_RLF_CASTING_TIME, level, BlzGetAbilityRealLevelField(spell, ABILITY_RLF_CASTING_TIME, level) + udg_Talent__Choice.CastTime)
    end
end
function TalentChoiceImproveSpellReset()
    local spell = BlzGetUnitAbility(udg_Talent__Unit, udg_Talent__Choice.Spell)
    
    BlzSetAbilityIntegerField(spell, ABILITY_IF_MISSILE_SPEED, BlzGetAbilityIntegerField(spell, ABILITY_IF_MISSILE_SPEED) - udg_Talent__Choice.Speed)
    for level = 0, BlzGetAbilityIntegerField(spell,ABILITY_IF_LEVELS), 1 do
        BlzSetAbilityIntegerLevelField(spell, ABILITY_ILF_MANA_COST, level, BlzGetAbilityIntegerLevelField(spell, ABILITY_ILF_MANA_COST, level) - udg_Talent__Choice.Mana)
        BlzSetAbilityRealLevelField(spell, ABILITY_RLF_DURATION_NORMAL, level, BlzGetAbilityRealLevelField(spell, ABILITY_RLF_DURATION_NORMAL, level) - udg_Talent__Choice.DurUnit)
        BlzSetAbilityRealLevelField(spell, ABILITY_RLF_DURATION_HERO, level, BlzGetAbilityRealLevelField(spell, ABILITY_RLF_DURATION_HERO, level) - udg_Talent__Choice.DurHero)
        BlzSetAbilityRealLevelField(spell, ABILITY_RLF_COOLDOWN, level, BlzGetAbilityRealLevelField(spell, ABILITY_RLF_COOLDOWN, level) - udg_Talent__Choice.Cool)
        BlzSetAbilityRealLevelField(spell, ABILITY_RLF_AREA_OF_EFFECT, level, BlzGetAbilityRealLevelField(spell, ABILITY_RLF_AREA_OF_EFFECT, level) - udg_Talent__Choice.Area)
        BlzSetAbilityRealLevelField(spell, ABILITY_RLF_CAST_RANGE, level, BlzGetAbilityRealLevelField(spell, ABILITY_RLF_CAST_RANGE, level) - udg_Talent__Choice.Range)
        BlzSetAbilityRealLevelField(spell, ABILITY_RLF_CASTING_TIME, level, BlzGetAbilityRealLevelField(spell, ABILITY_RLF_CASTING_TIME, level) - udg_Talent__Choice.CastTime)
    end
end
function TalentChoiceCreateImproveSpell(spell, manaCostAdd, cooldownAdd, rangeAdd, unitDurAdd, heroDurAdd, missileSpeedAdd, radiusAdd, castTimeAdd)
	local choice = TalentHeroCreateChoiceEx()
	choice.OnLearn = TalentChoiceImproveSpellLearn
	choice.OnReset = TalentChoiceImproveSpellReset
	choice.Spell = spell
	choice.Mana = manaCostAdd
    choice.Cool = cooldownAdd
    choice.Range = rangeAdd
    choice.DurUnit = unitDurAdd
    choice.DurHero = heroDurAdd
    choice.Speed = missileSpeedAdd
    choice.Area = radiusAdd
    choice.CastTime = castTimeAdd

    choice.Text = Talent.Strings.ImproveSpellFirst
    local seperator = Talent.Strings.ImproveSpellSeperatorFirst
    local seperator2 = Talent.Strings.ImproveSpellSeperator
    if manaCostAdd ~= 0 then choice.Text = choice.Text .. seperator .. Talent.Strings.ImproveSpellManaCost .. manaCostAdd seperator = seperator2 end
    if cooldownAdd ~= 0 then choice.Text = choice.Text .. seperator .. Talent.Strings.ImproveSpellCoolDown .. cooldownAdd seperator = seperator2 end
    if rangeAdd ~= 0 then choice.Text = choice.Text .. seperator .. Talent.Strings.ImproveSpellRange .. rangeAdd seperator = seperator2 end
    if unitDurAdd ~= 0 then choice.Text = choice.Text .. seperator .. Talent.Strings.ImproveSpellDurUnit .. unitDurAdd seperator = seperator2 end
    if heroDurAdd ~= 0 then choice.Text = choice.Text .. seperator .. Talent.Strings.ImproveSpellDurHero .. heroDurAdd seperator = seperator2 end
    if missileSpeedAdd ~= 0 then choice.Text = choice.Text .. seperator .. Talent.Strings.ImproveSpellMissile .. missileSpeedAdd seperator = seperator2 end
    if radiusAdd ~= 0 then choice.Text = choice.Text .. seperator .. Talent.Strings.ImproveSpellRadius .. radiusAdd seperator = seperator2 end
    if castTimeAdd ~= 0 then choice.Text = choice.Text .. seperator .. Talent.Strings.ImproveSpellCastTime .. castTimeAdd seperator = seperator2 end
	return choice
end
function TalentChoiceCreateAddSpell( spell,  useButtonInfos )
	local choice = TalentHeroCreateChoiceEx()
	TalentChoiceAddAbilityEx(spell, 0)
	
	if useButtonInfos then
		choice.Text = BlzGetAbilityExtendedTooltip(spell,0)
		choice.Head = BlzGetAbilityTooltip(spell,0)
		choice.Icon = BlzGetAbilityIcon(spell)
	end
	return choice
end
function TalentChoiceCreateReplaceSpell( oldSpell,  newSpell )
	local choice = TalentHeroCreateChoiceEx()
	TalentChoiceAddAbilityEx(newSpell, oldSpell)
	return choice
end
function TalentChoiceCreateAddSpells(...)
    local arg = {...} -- get the variable arguments, for some reason it adds an addtional entry at the end.
    local choice = TalentHeroCreateChoiceEx()
    choice.Text = Talent.Strings.AddSpellFirst

    for i = 1, #arg - 1, 1 do
        TalentChoiceAddAbilityEx(arg[i], 0)
        if i == 1 then
			choice.Text = choice.Text .. Talent.Strings.AddSpellFirstSeperator .. GetObjectName(arg[i]).."|r"
        else
			choice.Text = choice.Text .. Talent.Strings.AddSpellSeperator .. GetObjectName(arg[i]).."|r"
		end
	end
	return choice
end

-- in 1.31 and upto 1.32.9 PTR (when I wrote this). Frames are not correctly saved and loaded, breaking the game.
-- This runs all functions added to it with a 0s delay after the game was loaded.
do
    local data = {}
    local real = MarkGameStarted
    local timer
    
    function FrameLoaderAdd(func)
        table.insert(data, func)
    end
    function MarkGameStarted()
        real()
        local trigger = CreateTrigger()
        timer = CreateTimer()
        TriggerRegisterGameEvent(trigger, EVENT_GAME_LOADED)
        TriggerAddAction(trigger, function()
            TimerStart(timer, 0, false, function()
                for _,v in ipairs(data) do v() end
            end)
            
        end)
    end
end
--[[
Talent Lui 1.34b
By Tasyen
===========================================================================
Talent provides at wanted Levels a choice from a collection (Tier), from which the user picks one.
Tiers are unitType specific (a paladin has different Choices then a demon hunter), This also includes the Levels obtaining them.
One can  choices by Events or one can bind Code beeing executed when picking a choice.
Regardless using Events or binded , creating a reset (revert picking a choice) is quite easy.
Talent is mui.
===========================================================================
function TalentMacroDo(unit, text)
    executes a bunch of Picks/Resets for unit
    "-U123" ->Unlearn all, Pick 1, Pick 2, Pick 3
    "-112"  -> Pick 1, Pick 1, Pick 2, s has to start with "-"
    Each done action will evoke events/actions.

function TalentGetMacro(unit)
    returns the text to be used inside TalentMacroDo to pick the current Picks.
	the use of this function is to save Talentpicks in files.

function TalentAddUnitSheet(unitSheetFunction)
    unitSheetFunction will be called when the game started.

function TalentHeroCopy(unitCode, copyOrigin)
    units of unitCode will use the Talents of copyOrigin.

function TalentHeroCreate(unitCode)
    Create a plan for units of that Type has to be done before adding choices/tiers.
    This should be the first Talent related action inside a unitSheetFunction. Copies should not use this.

function TalentHeroCreateTier(unitCode, level)
    Creates for unitCode at level an tier.

function TalentHeroCreateChoice(unitCode) returns table
    Adds to the tier with the highest level of that unitCode an new choice, should be the last created one.
    Returns the new choice

function TalentHeroCreateChoiceAtLevel(unitCode, level) returns table
    calls TalentHeroCreate if needed.
    Creates a tier if needed and creates a new choice to it.
    Returns the new choice

function TalentChoiceAddAbility(choice, gainedAbility, lostAbility) 
    when picking choice the unit gains gainedAbility and loses loseAbility with loseAbility = 0 no ability is lost.
    This behavior can be altered much with Settings.

wrappers they use what you last mentioned for removed arguments from the not-Ex versions.
function TalentHeroCreateTierEx(level)
function TalentHeroCreateChoiceEx()
function TalentHeroCreateChoiceAtLevelEx(level)
function TalentChoiceAddAbilityEx(gainedAbility, lostAbility)
function TalentMacroDoEx(player, text)
    wrapper for current TalentTarget of player
function TalentGetMacroEx(player)

function TalentGetUnitCode(unitCode)
    returns the unitCode beeing used inside Talent.

function TalentAddUnit(unit)
    Manualy add an Unit to Talent, use this when The autodetection is disabled.
function TalentAddSelection(unit)
    Manualy check for choices.

===========================================================================
Variables inside Events and Code Binding:
===========================================================================
udg_Talent__Unit 		= the unit doing the choice
udg_Talent__UnitCode 	= the unitCode the unit is using
udg_Talent__Choice 		= selected choice its a table.
udg_Talent__Level 		= the level from which this choice/Tier is.
udg_Talent__Button		= the Index of the Button used, 1 to Settings.BoxOptionMaxCount.
                        , this variable is needed for Event based Talent usage.
===========================================================================
Event:
===========================================================================
To identyfy a choice in an Event use udg_Talent__UnitCode, udg_Talent__Level and udg_Talent__Button.
Inside condition check for heroType, to use the correct talent tree for this Event.
        udg_Talent__UnitCode equal to (==) "wanted orignal Type"
Now create ifs one for each udg_Talent__Level that tree has. (it is the level of the tier picked from). 
Inside this ifs check the Button beeing used: udg_Talent__Button equal (==) 1  -> yes, do actions of Level x Button 1
Create another one with udg_Talent__Button equal (==) 2 -> yes, do actions of Level x, Button 2.
You can skip Button Ifs not beeing used for that hero-Class on that Level.

udg_Talent__Event
    1 => on Choice.
        after the Auotskills are added
    2 => Tier aviable, does only when there is no choice for this hero yet, Reset does not trigger this event.
    3 => Finished all choices of its hero Type.
    -1 => on Reset for each choice reseted.
        before the autoskills are removed

Events can be indivudal (de)activaded inside Settings
===========================================================================
Choice Data
===========================================================================
choice.OnLearn    = when that choice is picked (function)
choice.OnReset    = when that choice is lost (function)
choice.Head       = The Title shown
choice.Text       = The description of this choice
choice.Icon       = The Icon shown
choice.Abilities  = a table with paris of gained/lost abilities

inside the action udg_Talent__Choice.Head would give the headText.
=====

 --]]
 do
    local Settings = { UnitSheet = {}}
    globals = {}
    
    Talent = {
        Trigger = {},
        Strings = {}
    }
    TalentBox = {
        Trigger = {},
        Frame = {},
        Control = {},
        OptionTitlePrefix = __jarray(""),
        OptionTitleSufix = __jarray("")
    }
    do
        Talent.Strings.ButtonResetTooltip = "Unlearn choosen Talents from this Level and higher Levels.|nCan also be used to relearn Talents from this level upwards."
        Talent.Strings.ButtonResetText = "(Un)Learn"
        Talent.Strings.TitleLevel = "Talent Level: "
        Talent.Strings.ButtonShowText = "Show Talent"
        Talent.Strings.NoTalentUser = "No Talent User"
        TalentBox.OptionTitlePrefix[1] = "|cffffcc00"    --Prefix for first option Title
        TalentBox.OptionTitleSufix[1] = ""    --Prefix for first option
        TalentBox.OptionTitlePrefix[2] = "|cffff00cc"
        TalentBox.OptionTitlePrefix[3] = "|cffcccccc"
    end
    do	    
        --AutoDetectUnitsEvent (true) will create an " enters map"  for Talent.Trigger.AutoDetect
        --AutoDetectUnitsInit (true) will enum all units on the map at 0.0s and add all units having TalentData to Talent.
        Settings.AutoDetectUnitsEvent = true
        Settings.AutoDetectUnitsInit = true
        --When you disabled both you have to manualy add Units to Talent.
        

        Settings.CloseWhenNoChoice = true
        Settings.AutoCloseWithoutSelection = true

        --Increases the Level of abilities gained by choices, if the  is already owned.
        Settings.ImproveAbilities = true 
        
        --(true) only add the new  if the  has the to replaced Ability
        Settings.ReplacedAbilityRequiered = true
        
        --Throw an Event when an  picks a choiceTalent
        Settings.ThrowEventPick = true

        --Throw an Event when an  gains a choice to pick a talent
        Settings.ThrowEventAvailable = true

        --Throw an Event when an  resets a choice
        Settings.ThrowEventReset = true
        
        --Throw an Event when an  picked the last Talent of its unitType.
        Settings.ThrowEventFinish = true

        --With false the unlearn Button won't exist
        --TalentBox.Control[GetConvertedPlayerId(player)].PreventResetButton = true will prevent player to use reset/Relearn button.
        Settings.BoxHaveResetButton = true

        --MaxAmount of Options shown in the UI of one tier.
        --The Buttons start with 1 and include Settings.BoxOptionMaxCount
        --One could still learn the Choice when a chat command would be provided.
        Settings.BoxOptionMaxCount = 6
        
        --Amount of LevelBoxes, if an  got more tiers there will be a page control.
        --if you want lest more boxes you might change TalentBoxLevelSizeX & TalentBoxLevelSizeY
        Settings.BoxLevelAmount = 5

        Settings.BoxLevelSizeX = 0.02 --sane values are below 0.05
        Settings.BoxLevelSizeY = 0.02 --sane values are below 0.05<

        --Bigger Options allow bigger texts, but also take more space of the screen, which reduces the possible amount of showing options in one tier.
        --XSize of an option in the TalentBox
        Settings.BoxOptionSizeX = 0.25
        --YSize of an option in the TalentBox, shouldn't be smaller than 0.04, when using Font 0.0085
        Settings.BoxOptionSizeY = 0.045

        Settings.BoxResetSizeX = 0.07
        Settings.BoxResetSizeY = 0.025
        
        --IconSize, should be smaller than TalentBoxOptionSizeY
        Settings.BoxOptionIconSize = 0.028

        --YSpace between 2 options, + values increases the space between, - values reduces they can also overlap.
        Settings.BoxOption2OptionGap = -0.005
        --YSpace between Title and option at the top.
        Settings.BoxOption2TitleGap = 0.05
        --YSpace between LevelBoxes and option at the bottom
        Settings.BoxOption2BottomGap = 0.0
        --The total y size varies with amount of shown options.
        Settings.BoxBaseSizeY = 0.02
        
        --Default Position of the TalentBox
        Settings.BoxPosX = 0.005
        Settings.BoxPosY = 0.2
        Settings.BoxPosType = FRAMEPOINT_BOTTOMLEFT

        --Default Position for the ShowTalentBoxButton
        Settings.BoxShowButtonPosX = 0.00
        Settings.BoxShowButtonPosY = 0.18
        Settings.BoxShowButtonPosType = FRAMEPOINT_BOTTOMLEFT
    end

	function TalentHeroLevel2SelectionIndex(unitCode, level)
		local count = 0
		if not Talent[unitCode]["Tier"][level] then --The level has no tier?
			return -1
		end
        
        for i = 1, Talent[unitCode].MaxLevel
        do
			if i > level then break end
			if Talent[unitCode]["Tier"][i] then
				count = count + 1
			end
		end
		return count
	end
	function TalentMacroDo(unit, text)
		if SubString(text, 0, 1) ~= "-" then --Invalid macro, macro has to start with "-"
			return
        end
        local sLength = StringLength(text)
        for i = 0, sLength
        do
            local char =  SubString(text, i, i + 1)
            if char == "U" or char == "u" then
                while (TalentResetDo(unit)) do end
			end
			local charAsInt  = S2I(char)
			if charAsInt > 0 then
				TalentPickDo(unit, charAsInt)
			end
		end
	end
    function TalentMacroDoEx(player, text)
        TalentMacroDo(TalentBox.Control[player].Target, text)
    end
    function TalentGetMacro(unit)
        local text = "-U"
        for int = 1, TalentUnitGetSelectionsDone(unit) do
            text = text .. Talent[unit].SelectionsDone[int].ButtonNr
        end
        return text
    end
    function TalentGetMacroEx(player)
        return TalentGetMacro(TalentBox.Control[player].Target)
    end
    function TalentHeroCreate(unitCode)
        Talent[unitCode] = { Tier = {}, Page = {}, MaxLevel = 0 }
        Talent.LastUsedUnitCode = unitCode
    end
    function TalentGetUnitCode(unitCode)
        --if that unitCode has data check if it has copyData
        if Talent[unitCode] and Talent[unitCode].Copy then return TalentGetUnitCode(Talent[unitCode].Copy) end
        return unitCode
    end
    function TalentHeroCopy(unitCode, copyOrigin)
        Talent[unitCode] = {Copy = copyOrigin}
    end
    function TalentHeroCreateTier(unitCode, level)
        Talent[unitCode]["Tier"][level] = {}
        Talent[unitCode].MaxLevel = IMaxBJ(Talent[unitCode].MaxLevel, level)
        Talent.LastUsedUnitCode = unitCode
        table.insert(Talent[unitCode].Page, level)
    end
    function TalentHeroCreateTierEx(level) TalentHeroCreateTier(Talent.LastUsedUnitCode, level) end

    function TalentHeroCreateChoiceAtLevel(unitCode, level)
        if not Talent[unitCode] then TalentHeroCreate(unitCode) end
        if not Talent[unitCode]["Tier"][level] then --create not existing Tier
            Talent[unitCode]["Tier"][level] = {}
            Talent[unitCode].MaxLevel = IMaxBJ(Talent[unitCode].MaxLevel, level)
        end
        local choice = { Abilities = {}, Icon = "", Text = "", Head = "" }
        Talent.LastUsedUnitCode = unitCode
        Talent.LastUsedChoice = choice
        table.insert(Talent[unitCode]["Tier"][level], choice) --add new choice
        return choice
    end
    function TalentHeroCreateChoiceAtLevelEx(level) return TalentHeroCreateChoiceAtLevel(Talent.LastUsedUnitCode, level) end

    function TalentHeroCreateChoice(unitCode) --adds a choice to the highest Level Tier for that hero.
        local choice = { Abilities = {}, Icon = "", Text = "", Head = "" }
        Talent.LastUsedUnitCode = unitCode
        Talent.LastUsedChoice = choice
        table.insert(Talent[unitCode]["Tier"][Talent[unitCode].MaxLevel], choice) --add new choice
        return choice
    end
    function TalentHeroCreateChoiceEx() return TalentHeroCreateChoice(Talent.LastUsedUnitCode) end
    
    function TalentChoiceAddAbility(choice, gainedAbility, lostAbility)
        table.insert(choice.Abilities, {gainedAbility, lostAbility})
    end
    function TalentChoiceAddAbilityEx(gainedAbility, lostAbility) TalentChoiceAddAbility(Talent.LastUsedChoice, gainedAbility, lostAbility) end

    function TalentUnitAddSelectionDone(unit, level, buttonNr)
        if not Talent[unit] then TalentAddUnit(unit) end
        Talent[unit].SelectionsDoneCount = Talent[unit].SelectionsDoneCount + 1
        Talent[unit].MaxLevel = IMaxBJ(Talent[unit].MaxLevel, level)
        Talent[unit].SelectionsDone[Talent[unit].SelectionsDoneCount] = {
            Level = level,
            ButtonNr = buttonNr,
            UnLearned = false}
        --table.insert(Talent[unit].SelectionsDone, {Level = level, ButtonNr = buttonNr})
        
    end
    function TalentUnitGetButtonUsed(unit, level)
        for k,v in pairs(Talent[unit].SelectionsDone)
        do
            if v.Level == level then return v.ButtonNr end
        end
        return 0
    end
    function TalentUnitGetSelectionsDone(unit)
        return Talent[unit].SelectionsDoneCount
    end
    
    function TalentUnitGetCurrentLevel(unit)
        if Talent[unit] then
            return Talent[unit].CurrentLevel
        else
            return 0
        end
    end
    
    function TalentUnitSetCurrentLevel(unit, level)
        Talent[unit].CurrentLevel = level
    end
    function TalentUnitSetHasChoice(unit, flag)
        Talent[unit].HasChoice = flag
    end
    function TalentAddSkill(unit, skillGained, newLevel)
		local skillGainedLevel = GetUnitAbilityLevel(unit, skillGained)
		if skillGainedLevel == 0 then --Already got skillGained?
			UnitAddAbility(unit, skillGained)
			UnitMakeAbilityPermanent(unit, true, skillGained)
			SetUnitAbilityLevel(unit, skillGained, newLevel)
		elseif Settings.ImproveAbilities then--Can upgrade Levels?
			SetUnitAbilityLevel(unit, skillGained, skillGainedLevel + 1)
		end
	end
	function TalentRemoveSkill(unit, skillLost)
		local skillLostLevel = GetUnitAbilityLevel(unit, skillLost)
		if Settings.ImproveAbilities and skillLostLevel > 1 then --Can Decrease Level?
			skillLostLevel = skillLostLevel - 1
			SetUnitAbilityLevel(unit, skillLost, skillLostLevel)
		else
			UnitRemoveAbility(unit, skillLost)
		end
	end
	function TalentReplaceSkill(unit, skillReplaced, skillGained)
		local skillReplacedLevel = GetUnitAbilityLevel(unit, skillReplaced)
		if not Settings.ReplacedAbilityRequiered or skillReplacedLevel ~= 0 then
			TalentRemoveSkill(unit, skillReplaced)
			if skillGained and skillGained > 0 then
				TalentAddSkill(unit, skillGained, skillReplacedLevel)
			end
		end
    end
    function TalentAddUnit(unit)
        if not Talent[unit] then
        Talent[unit] = {
            SelectionsDone = {},
            SelectionsDoneCount = 0,
            CurrentLevel = 0,
            HasChoice = false,
            MaxLevel = 0
        }
        end
    end
    function TalentAddSelection(unit)
		local tierGained
		local unitCode = TalentGetUnitCode(GetUnitTypeId(unit))
        local currentLevel = IMaxBJ(GetHeroLevel(unit), GetUnitLevel(unit))
        local lastSelection = TalentUnitGetCurrentLevel(unit)

        -- Only show 1 SelectionContainer at the same time.
        if Talent[unit].HasChoice then return end
        for level = lastSelection, currentLevel, 1 do
            if Talent[unitCode]["Tier"][level] then
                if level > currentLevel then break end
                if level > lastSelection then
                    TalentUnitSetCurrentLevel(unit, level)
                    TalentUnitSetHasChoice(unit, true)
                    TalentBoxSetTier(level, GetOwningPlayer(unit))
                    if Settings.ThrowEventAvailable then --Throw Selection Event
                        udg_Talent__Choice = nil
                        udg_Talent__Unit = unit
                        udg_Talent__UnitCode = unitCode
                        udg_Talent__Level = level		
                        globals.udg_Talent__Event = 0.0
                        globals.udg_Talent__Event = 2.0
                        globals.udg_Talent__Event = 0.0
                    end
                    --break
                    return
                end
            end
        end
		--if this part of  is reached there is no choice avaible
        
        if not Settings.CloseWhenNoChoice then
            TalentBoxSetTier(Talent[unit].CurrentLevel, GetOwningPlayer(unit))
        elseif GetLocalPlayer() == GetTriggerPlayer() then
            BlzFrameSetVisible(TalentBox.Frame.Box, false)
            BlzFrameSetVisible(TalentBox.Frame.Show, true)
        end
	end

    function TalentPickDo(unit, buttonNr)
		local unitCode 		    = TalentGetUnitCode(GetUnitTypeId(unit))
        local tierLevel 		= Talent[unit].CurrentLevel
        local tier 			    = Talent[unitCode]["Tier"][tierLevel]
        local choice 		    = tier[buttonNr]
        if not Talent[unit].HasChoice or not choice then --Requiers to have a Choice
			return false
        end

        for k, v in pairs(choice.Abilities) do
            local skillGained   = v[1]
            local skillReplaced = v[2]

            if skillReplaced and skillReplaced > 0 then --Replaces?
				TalentReplaceSkill(unit, skillReplaced, skillGained)
            else
				TalentAddSkill(unit, skillGained,1)
			end
        end

        --Load Data for Action/Event
        udg_Talent__Unit = unit
        udg_Talent__UnitCode = unitCode
        udg_Talent__Button = buttonNr
        udg_Talent__Choice = choice
        udg_Talent__Level = tierLevel
        --print(GetObjectName(udg_Talent__UnitCode), "Level: "..udg_Talent__Level,"ButtonNr: "..udg_Talent__Button)
        if choice.OnLearn then choice.OnLearn() end
        if Settings.ThrowEventPick then --Throw Selection Event
            globals.udg_Talent__Event = 0.0
            globals.udg_Talent__Event = 1.0
            globals.udg_Talent__Event = 0.0
        end
		
        --Save Choice don
        TalentUnitAddSelectionDone(unit, tierLevel, buttonNr)
        --Unmark having a selection.
        TalentUnitSetHasChoice(unit, false)
        
		--Last choice for this heroType?
        if Talent[unitCode].MaxLevel == tierLevel then
            --Throw Finish Choices Event.
            if Settings.ThrowEventFinish then
                globals.udg_Talent__Event = 0.0
				globals.udg_Talent__Event = 3.0
				globals.udg_Talent__Event = 0.0
			end
            TalentBoxUpdate(GetTriggerPlayer())
            if Settings.CloseWhenNoChoice and GetLocalPlayer() == GetTriggerPlayer() then
                BlzFrameSetVisible(TalentBox.Frame.Box, false)
                BlzFrameSetVisible(TalentBox.Frame.Show, true)
            end
		else
			--Check for further choices.
			TalentAddSelection(unit)
        end
        return true
    end
    
    function TalentResetDo(unit)
        if Talent[unit].SelectionsDoneCount <= 0 then return false end --No selections done -> skip the rest.
        local lastSelection      = Talent[unit].SelectionsDone[Talent[unit].SelectionsDoneCount]
        local unitCode 		    = TalentGetUnitCode(GetUnitTypeId(unit))
        local buttonNr          = lastSelection.ButtonNr
        local tierLevel 		= lastSelection.Level
        local tier 			    = Talent[unitCode]["Tier"][tierLevel]
        local choice 		    = tier[buttonNr]
        
        --Load Data for Action/Event
        udg_Talent__Unit = unit
        udg_Talent__UnitCode = unitCode
        udg_Talent__Button = buttonNr
        udg_Talent__Choice = choice
        udg_Talent__Level = tierLevel
        --print(GetObjectName(udg_Talent__UnitCode), "Level: "..udg_Talent__Level,"ButtonNr: "..udg_Talent__Button)
        if choice.OnReset then choice.OnReset() end
        
        --Remove Autoadded Skills
        for k, v in pairs(choice.Abilities)do
            local skillGained   = v[1]
            local skillReplaced = v[2]
            if skillReplaced and skillReplaced > 0 then --Replaces?
				TalentReplaceSkill(unit, skillGained, skillReplaced)
			else
				TalentRemoveSkill(unit, skillGained)
			end
        end
        lastSelection.UnLearned = true
        Talent[unit].SelectionsDoneCount = Talent[unit].SelectionsDoneCount - 1
        TalentUnitSetCurrentLevel(unit, tierLevel)
        TalentUnitSetHasChoice(unit, true)
        if Settings.ThrowEventReset then	--Throw a  that this choice is going to be lost.
            globals.udg_Talent__Event = 0.0
            globals.udg_Talent__Event = -1.0
            globals.udg_Talent__Event = 0.0
        end
        return true
    end
   
    function TalentBoxShowEmpty(player)
		local frameSizeY = 0.08
		local frameSizeX = Settings.BoxOptionSizeX + 0.05
		local optionSizeY = Settings.BoxOptionSizeY
        TalentBox.Control[player].LevelsCurrent = 0
        
		if GetLocalPlayer() == player then
            BlzFrameSetVisible(TalentBox.Frame.Option.Parent, false)
            BlzFrameSetVisible(TalentBox.Frame.Level.Parent, false)
            
			BlzFrameSetSize(TalentBox.Frame.Box, frameSizeX, frameSizeY)
			BlzFrameSetText(TalentBox.Frame.BoxTitle, Talent.Strings.NoTalentUser)
		end
	end
    
	function TalentBoxSetTier(level, player)
        local unit = TalentBox.Control[player].Target
        if unit == nil then return end
        local unitCode = TalentGetUnitCode(GetUnitTypeId(unit))
		local buttonused = TalentUnitGetButtonUsed(unit, level)
		local enable = GetPlayerAlliance(GetOwningPlayer(unit), player, ALLIANCE_SHARED_CONTROL) and Talent[unit].CurrentLevel == level and Talent[unit].HasChoice
        local frameSizeY = Settings.BoxBaseSizeY + Settings.BoxOption2TitleGap + Settings.BoxOption2BottomGap + RMaxBJ(Settings.BoxResetSizeY, Settings.BoxLevelSizeY)
		local frameSizeX = Settings.BoxOptionSizeX + 0.05
		local optionSizeY = Settings.BoxOptionSizeY
        TalentBox.Control[player].LevelsCurrent = level
        --print("TalentBoxSetTier", player, level)
		if GetLocalPlayer() == player then
            BlzFrameSetVisible(TalentBox.Frame.Option.Parent, true)
            --BlzFrameSetVisible(TalentBox.Frame.Level.Parent, true)
            for i = Settings.BoxOptionMaxCount, 1, -1
            do

                local choice = Talent[unitCode]["Tier"][level][i]
                --print(i, choice)
                if choice then
                    --print(choice.Text, choice.Icon, choice.Head)
					BlzFrameSetVisible(TalentBox.Frame.Option[i].Frame, true)
					BlzFrameSetText(TalentBox.Frame.Option[i].TextText, choice.Text)
					BlzFrameSetTexture( TalentBox.Frame.Option[i].Icon, choice.Icon, 0, true)
                    BlzFrameSetText(TalentBox.Frame.Option[i].Title, TalentBox.OptionTitlePrefix[i] .. choice.Head .. TalentBox.OptionTitleSufix[i] )
                    if i < Settings.BoxOptionMaxCount and i > 1 then
                        frameSizeY = frameSizeY + optionSizeY + Settings.BoxOption2OptionGap
                    else
                        frameSizeY = frameSizeY + optionSizeY
                    end
				else
					BlzFrameSetVisible(TalentBox.Frame.Option[i].Frame, false)
				end
				BlzFrameSetEnable(TalentBox.Frame.Option[i].Frame, enable)
            end
            --has something selected for this tier this unit has earlier selected something and that earlier selected one is not Unlearned
            --TalentHeroLevel2SelectionIndex(unitCode, level) > 0 has to be done to avoid nil pointers.
            if buttonused > 0 and TalentHeroLevel2SelectionIndex(unitCode, level) > 0 and not Talent[unit].SelectionsDone[TalentHeroLevel2SelectionIndex(unitCode, level)].UnLearned then
                BlzFrameSetVisible(TalentBox.Frame.Selected,true)
				BlzFrameClearAllPoints(TalentBox.Frame.Selected)
				--BlzFrameSetParent(TalentBox.Frame.Selected, TalentBox.Frame.Option[buttonused].Frame)
				BlzFrameSetAllPoints(TalentBox.Frame.Selected, TalentBox.Frame.Option[buttonused].Frame)
			else
				BlzFrameSetVisible(TalentBox.Frame.Selected,false)
			end
			BlzFrameSetSize(TalentBox.Frame.Box, frameSizeX, frameSizeY)
            BlzFrameSetText(TalentBox.Frame.BoxTitle, Talent.Strings.TitleLevel .. level)
            if Settings.BoxHaveResetButton then BlzFrameSetEnable(TalentBox.Frame.Reset, TalentUnitGetCurrentLevel(unit) >= level and not TalentBox.Control[player].PreventResetButton and not udg_TalentControlPreventReset[GetConvertedPlayerId(player)])  end
		end
	end

    function TalentBoxUpdate(player)
        local unit = TalentBox.Control[player].Target
		TalentBoxSetTier(TalentUnitGetCurrentLevel(unit), player)
	end

    local function TalentBoxUpdateLevelBoxes(player, levelStart)
        local unitCode = TalentGetUnitCode(GetUnitTypeId(TalentBox.Control[player].Target))
        local count = 0
        
        if Talent[unitCode] then
            local level = levelStart
            local finalLevel = Talent[unitCode].MaxLevel
            if level > finalLevel then level = 1 end
            if level < 1 then level = 1 end
            while (level <= finalLevel) do
                if Talent[unitCode]["Tier"][level] then --Have tier on that Level?
                    count = count + 1
                    TalentBox.Control[player].Levels[count] = level
                    TalentBox.Control[player].MaxLevel = level
                    if GetLocalPlayer() == player then
                        BlzFrameSetText(TalentBox.Frame.Level[count], I2S(level))
                        BlzFrameSetVisible(TalentBox.Frame.Level[count], true)	
                    end
                    if count >= Settings.BoxLevelAmount  then break end
                end
                level = level + 1
            end
            BlzFrameSetVisible(TalentBox.Frame.Level.Parent, count > 1) --when there is only one level to choose from hide the levels
            
            if GetLocalPlayer() == player and levelStart <= 1 then -- only Local Player and update only at first page
                BlzFrameSetVisible(TalentBox.Frame.PageDown, TalentBox.Control[player].MaxLevel < finalLevel)
                BlzFrameSetVisible(TalentBox.Frame.PageUp, TalentBox.Control[player].MaxLevel < finalLevel)
            end
            TalentBoxSetTier(TalentBox.Control[player].Levels[1], player)
        else
            if GetLocalPlayer() == player then
                BlzFrameSetVisible(TalentBox.Frame.PageDown, false)
                BlzFrameSetVisible(TalentBox.Frame.PageUp, false)
            end
        end
        for i = count + 1, Settings.BoxLevelAmount, 1 do
            --print("hide", i)
			BlzFrameSetVisible(TalentBox.Frame.Level[i], false)
        end
        
	end

	local function TalentBoxUpdateLevelBoxesDown(player, levelStart)
		local count = Settings.BoxLevelAmount + 1
		local level = levelStart
		local unitCode = TalentGetUnitCode(GetUnitTypeId(TalentBox.Control[player].Target))
		local finalLevel = Talent[unitCode].MaxLevel
        local first = true

        if level < 1 then level = finalLevel end
        if TalentHeroLevel2SelectionIndex(unitCode, level) < Settings.BoxLevelAmount then count = TalentHeroLevel2SelectionIndex(unitCode, level) + 1  end
        while (level > 0 and count > 1) do
            if Talent[unitCode]["Tier"][level] then --Have tier on that Level?
                count = count - 1
                TalentBox.Control[player].Levels[count] = level
                if first then
                    TalentBox.Control[player].MaxLevel = TalentBox.Control[player].Levels[count]
                    first = false
                end
                if GetLocalPlayer() == player then
                    BlzFrameSetText(TalentBox.Frame.Level[count], level)
                    BlzFrameSetVisible(TalentBox.Frame.Level[count], true)
                end
            end
            level = level - 1
        end
        TalentBoxSetTier(TalentBox.Control[player].MaxLevel, player)
	end

	--Shows the TalentBox and sets the target for activePlayer.
    function TalentBoxShow(target, activePlayer)
        --print("Select", GetUnitName(target))
        TalentBox.Control[activePlayer].Target = target -- used look

        if Talent[target] then
            TalentBoxUpdateLevelBoxes(activePlayer, 0)
            --TalentBoxSetTier(TalentUnitGetCurrentLevel(target), activePlayer)
            if Settings.BoxHaveResetButton then
                BlzFrameSetVisible(TalentBox.Frame.Reset, GetPlayerAlliance(GetOwningPlayer(TalentBox.Control[activePlayer].Target), activePlayer, ALLIANCE_SHARED_CONTROL))
            end
        else
            TalentBoxShowEmpty(activePlayer)
            if Settings.BoxHaveResetButton then
                BlzFrameSetVisible(TalentBox.Frame.Reset, false)
            end
        end
	end

    local function FrameLoseFocus()
        if GetLocalPlayer() == GetTriggerPlayer() then
            BlzFrameSetEnable(BlzGetTriggerFrame(), false)
            BlzFrameSetEnable(BlzGetTriggerFrame(), true)
        end
    end

    function TalentBoxCreate()
        BlzLoadTOCFile("war3mapimported\\talentbox.toc")
        TalentBox.Frame = {}
        TalentBox.Frame.Box = BlzCreateFrameByType("Dialog", "TalentBox", BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), "ScriptDialog", 0)
        TalentBox.Frame.BoxTitle = BlzCreateFrameByType("TEXT", "TalentBoxTitle", TalentBox.Frame.Box, "TalentBoxTitle", 0)
        TalentBox.Frame.Option = {}
        TalentBox.Frame.Option.Parent = BlzCreateFrameByType("FRAME", "TalentBoxOptionParent", TalentBox.Frame.Box, "", 0)
        TalentBox.Frame.Level = {}
        TalentBox.Frame.Level.Parent = BlzCreateFrameByType("FRAME", "TalentBoxLevelParent", TalentBox.Frame.Box, "", 0)
        TalentBox.Frame.Selected = BlzCreateFrame("TalentHighlight", TalentBox.Frame.Box, 0, 0)
		TalentBox.Frame.PageUp = BlzCreateFrame("TalentButtonUp", TalentBox.Frame.Level.Parent, 0, 0)
		TalentBox.Frame.PageDown =  BlzCreateFrame("TalentButtonDown", TalentBox.Frame.Level.Parent, 0, 0)
		
		TalentBox.Frame.Close = BlzCreateFrameByType("GLUETEXTBUTTON", "TalentCloseButton",TalentBox.Frame.Box, "ScriptDialogButton", 0)
		TalentBox.Frame.Show = BlzCreateFrameByType("GLUETEXTBUTTON", "TalentShowButton", BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), "ScriptDialogButton", 0)
    
		BlzFrameSetSize(TalentBox.Frame.Show, 0.05, 0.05)
		BlzFrameSetText(TalentBox.Frame.Show, Talent.Strings.ButtonShowText)
		BlzFrameSetAbsPoint(TalentBox.Frame.Show, Settings.BoxShowButtonPosType, Settings.BoxShowButtonPosX, Settings.BoxShowButtonPosY)
		
		BlzFrameSetPoint(TalentBox.Frame.BoxTitle, FRAMEPOINT_TOP, TalentBox.Frame.Box, FRAMEPOINT_TOP, 0.0, -0.03)
		BlzFrameSetText(TalentBox.Frame.BoxTitle, Talent.Strings.TitleLevel)
		
        
        BlzFrameSetText(TalentBox.Frame.Close, "X")
		BlzFrameSetSize(TalentBox.Frame.Close, 0.035, 0.035)

		BlzFrameSetVisible(TalentBox.Frame.Selected, false)

		BlzFrameSetAbsPoint(TalentBox.Frame.Box, Settings.BoxPosType, Settings.BoxPosX, Settings.BoxPosY)
        
        BlzTriggerRegisterFrameEvent(TalentBox.Trigger.PageDown, TalentBox.Frame.PageDown, FRAMEEVENT_CONTROL_CLICK)
        BlzTriggerRegisterFrameEvent(TalentBox.Trigger.PageUp, TalentBox.Frame.PageUp, FRAMEEVENT_CONTROL_CLICK)
        BlzTriggerRegisterFrameEvent(TalentBox.Trigger.Close, TalentBox.Frame.Close, FRAMEEVENT_CONTROL_CLICK)
        BlzTriggerRegisterFrameEvent(TalentBox.Trigger.Show, TalentBox.Frame.Show, FRAMEEVENT_CONTROL_CLICK)
        
        for i = 1, Settings.BoxOptionMaxCount do
            local fh = BlzCreateFrame("TalentBoxItem", TalentBox.Frame.Option.Parent, 0, i)
            TalentBox.Frame.Option[i] = {}
            TalentBox.Frame.Option[i].Frame = fh
            TalentBox.Frame.Option[i].InfoText = BlzGetFrameByName("TalentBoxItemInfoText", i)
            TalentBox.Frame.Option[i].TextText = BlzGetFrameByName("TalentBoxItemTextText", i)
            TalentBox.Frame.Option[i].Title = BlzGetFrameByName("TalentBoxItemTitle", i)
            TalentBox.Frame.Option[i].Icon = BlzGetFrameByName("TalentBoxItemIcon", i)
            TalentBox.Frame[fh] = i --remember this is button i
            if i > 1 then
			    BlzFrameSetPoint(fh, FRAMEPOINT_BOTTOM, TalentBox.Frame.Option[i - 1].Frame, FRAMEPOINT_TOP, 0, Settings.BoxOption2OptionGap)
            end
			BlzFrameSetEnable(TalentBox.Frame.Option[i].InfoText, false)
			BlzFrameSetEnable(TalentBox.Frame.Option[i].TextText, false)
			BlzFrameSetEnable(TalentBox.Frame.Option[i].Title, false)
			BlzFrameSetSize(fh, Settings.BoxOptionSizeX, Settings.BoxOptionSizeY)
			BlzFrameSetSize(TalentBox.Frame.Option[i].Icon, Settings.BoxOptionIconSize, Settings.BoxOptionIconSize)
			BlzTriggerRegisterFrameEvent(TalentBox.Trigger.Choice, fh, FRAMEEVENT_CONTROL_CLICK)

		end
		
		BlzFrameSetPoint(TalentBox.Frame.Option[1].Frame, FRAMEPOINT_BOTTOMLEFT, TalentBox.Frame.Box, FRAMEPOINT_BOTTOMLEFT, 0.025, 0.0235 + Settings.BoxOption2BottomGap + RMaxBJ(Settings.BoxLevelSizeY, Settings.BoxResetSizeY))
        
        --BlzFrameSetVisible(BlzGetFrameByName("TalentHighlight", 1), false) --was ist das? warum 1, 0 ist der freie.
		
		BlzFrameSetPoint(TalentBox.Frame.Close, FRAMEPOINT_TOPRIGHT, TalentBox.Frame.Box, FRAMEPOINT_TOPRIGHT, 0.0, 0)
		
        
        for i = 1, Settings.BoxLevelAmount do
            local fh = BlzCreateFrame("TalentBoxLevelButton", TalentBox.Frame.Level.Parent, 0, i)
            TalentBox.Frame.Level[i] = fh
            TalentBox.Frame[fh] = i --remember this is button i
            if i > 1 then
                BlzFrameSetPoint(fh, FRAMEPOINT_BOTTOMLEFT,TalentBox.Frame.Level[i - 1] , FRAMEPOINT_BOTTOMRIGHT, 0,0)
            end
			BlzFrameSetSize(fh, Settings.BoxLevelSizeX, Settings.BoxLevelSizeY)
			BlzTriggerRegisterFrameEvent(TalentBox.Trigger.LevelBox, fh, FRAMEEVENT_CONTROL_CLICK)
		end
		BlzFrameSetPoint(TalentBox.Frame.Level[1], FRAMEPOINT_BOTTOMLEFT, TalentBox.Frame.Box, FRAMEPOINT_BOTTOMLEFT, 0.027,0.0235)
		
		BlzFrameSetVisible(TalentBox.Frame.Box, false)
		
		BlzFrameSetPoint(TalentBox.Frame.PageDown, FRAMEPOINT_BOTTOMLEFT, TalentBox.Frame.Level[Settings.BoxLevelAmount], FRAMEPOINT_BOTTOMRIGHT, 0, 0.0005)
		BlzFrameSetPoint(TalentBox.Frame.PageUp, FRAMEPOINT_BOTTOM, TalentBox.Frame.PageDown, FRAMEPOINT_TOP, 0, -0.0005)
		
		if Settings.BoxHaveResetButton then
			
            TalentBox.Frame.Reset = BlzCreateFrameByType("GLUETEXTBUTTON", "TalentResetButton",TalentBox.Frame.Box, "ScriptDialogButton", 0)
            TalentBox.Frame.ResetToolTip = BlzCreateFrame("TalentBoxTextArea", TalentBox.Frame.Box, 0, 0)
			BlzFrameSetPoint(TalentBox.Frame.ResetToolTip, FRAMEPOINT_LEFT, TalentBox.Frame.Box, FRAMEPOINT_RIGHT, 0.03,0)
			BlzFrameSetSize(TalentBox.Frame.ResetToolTip, 0.22, 0.09)
			BlzFrameSetText(TalentBox.Frame.ResetToolTip, Talent.Strings.ButtonResetTooltip)
			BlzFrameSetTooltip(TalentBox.Frame.Reset, TalentBox.Frame.ResetToolTip)
			BlzFrameSetText(TalentBox.Frame.Reset, Talent.Strings.ButtonResetText)
            BlzFrameSetSize(TalentBox.Frame.Reset, Settings.BoxResetSizeX, Settings.BoxResetSizeY)
            BlzFrameSetPoint(TalentBox.Frame.Reset, FRAMEPOINT_BOTTOMRIGHT, TalentBox.Frame.Box, FRAMEPOINT_BOTTOMRIGHT, -0.027, 0.0235)
            BlzTriggerRegisterFrameEvent(TalentBox.Trigger.Reset, TalentBox.Frame.Reset, FRAMEEVENT_CONTROL_CLICK)
            
			
		end
		
    end

	function TalentInit()
        Talent.Trigger.LevelUp = CreateTrigger()
        TriggerRegisterAnyUnitEventBJ(Talent.Trigger.LevelUp, EVENT_PLAYER_HERO_LEVEL, nil)
		TriggerAddAction(Talent.Trigger.LevelUp, function() TalentAddSelection(GetTriggerUnit()) end)
        
		--Get Choices on Entering Map for lvl 1.
        if Settings.AutoDetectUnitsEvent then
            Talent.Trigger.AutoDetect = CreateTrigger()
            TriggerRegisterEnterRectSimple(Talent.Trigger.AutoDetect, GetPlayableMapRect())
            TriggerAddAction(Talent.Trigger.AutoDetect, function() TalentAddUnit(GetTriggerUnit()) TalentAddSelection(GetTriggerUnit()) end)
            TriggerAddCondition(Talent.Trigger.AutoDetect, Condition( function() return Talent[TalentGetUnitCode(GetUnitTypeId(GetTriggerUnit()))] ~= nil end))
        end
        
        
        TalentBox.Trigger.Choice = CreateTrigger()
        TriggerAddAction(TalentBox.Trigger.Choice, function()
            local fh = BlzGetTriggerFrame()
            local index = TalentBox.Frame[fh]
            local player = GetTriggerPlayer()
            if GetLocalPlayer() == player then
                BlzFrameSetEnable(fh, false)
                BlzFrameSetEnable(fh, true)
            end
            TalentPickDo(TalentBox.Control[player].Target, index)
            TalentBoxUpdate(player)
        end)

        TalentBox.Trigger.LevelBox = CreateTrigger()
        TriggerAddAction(TalentBox.Trigger.LevelBox, function()
            local player = GetTriggerPlayer()
            local fh = BlzGetTriggerFrame()
            local index = TalentBox.Frame[fh]
            TalentBoxSetTier(TalentBox.Control[player].Levels[index], player)
        end)
        TalentBox.Trigger.PageDown = CreateTrigger()
        
        TriggerAddAction(TalentBox.Trigger.PageDown, function()
            TalentBoxUpdateLevelBoxesDown(GetTriggerPlayer(), TalentBox.Control[GetTriggerPlayer()].Levels[1]-1)            
        end)
        
        TalentBox.Trigger.PageUp = CreateTrigger()

        TriggerAddAction(TalentBox.Trigger.PageUp, function()
            TalentBoxUpdateLevelBoxes(GetTriggerPlayer(), TalentBox.Control[GetTriggerPlayer()].MaxLevel + 1)            
        end)

        TalentBox.Trigger.Select = CreateTrigger()
        TriggerRegisterAnyUnitEventBJ(TalentBox.Trigger.Select, EVENT_PLAYER_UNIT_SELECTED)
        TriggerAddAction(TalentBox.Trigger.Select, function()
            TalentBoxShow(GetTriggerUnit(), GetTriggerPlayer())
        end)
        

        TalentBox.Trigger.Close = CreateTrigger()
        
		TriggerAddAction(TalentBox.Trigger.Close, function()
            if GetLocalPlayer() == GetTriggerPlayer() then
                BlzFrameSetVisible(TalentBox.Frame.Box, false)
                BlzFrameSetVisible(TalentBox.Frame.Show, true)
            end
        end)
        TriggerAddAction(TalentBox.Trigger.Close, FrameLoseFocus)

        
        TalentBox.Trigger.Show = CreateTrigger()
		TriggerAddAction(TalentBox.Trigger.Show, function()
            if GetLocalPlayer() == GetTriggerPlayer() then
                BlzFrameSetVisible(TalentBox.Frame.Box, true)
                BlzFrameSetVisible(TalentBox.Frame.Show, false)
                TalentBoxUpdate(GetTriggerPlayer())
            end
        end)
        
		--TriggerAddAction(TalentBox.Trigger.Choice, FrameLoseFocus)
		TriggerAddAction(TalentBox.Trigger.LevelBox, FrameLoseFocus)
		TriggerAddAction(TalentBox.Trigger.PageDown, FrameLoseFocus)
		TriggerAddAction(TalentBox.Trigger.PageUp, FrameLoseFocus)
        

        TalentBox.Trigger.Reset = CreateTrigger()
        TriggerAddAction(TalentBox.Trigger.Reset, function()
            
            local player = GetTriggerPlayer()
            local unit = TalentBox.Control[player].Target
            local shownLevel = TalentBox.Control[player].LevelsCurrent
            local selectedCount = TalentUnitGetSelectionsDone(unit)
            local selectedLevel = 0
            if selectedCount > 0 then selectedLevel = Talent[unit].SelectionsDone[selectedCount].Level end

           -- print("selectedCount", selectedCount)
           -- print("selectedLevel", selectedLevel)
            --print("shownLevel", shownLevel)
            if selectedLevel >= shownLevel  then 
                --print("Reset")
                while(TalentUnitGetSelectionsDone(unit) > 0 and Talent[unit].SelectionsDone[TalentUnitGetSelectionsDone(unit)].Level >= shownLevel)
                do
                    --print("Reset", Talent[unit].SelectionsDone[TalentUnitGetSelectionsDone(unit)].Level)
                    TalentResetDo(TalentBox.Control[player].Target)
                end
            else
                --if TalentUnitGetCurrentLevel(unit) < shownLevel then print("lower talents not selected") end --Has to be avoided by disabling the option to do this in this case
                
                --learn reseted talents from the shown level to the max Level learned.
                for k, v in pairs(Talent[unit].SelectionsDone) do
                    if v.Level <= Talent[unit].MaxLevel and v.Level >= shownLevel then
                        --print("ReLearn", "Level: "..v.Level, "ButtonNr: "..v.ButtonNr)
                        TalentPickDo(TalentBox.Control[player].Target, v.ButtonNr)
                    end
                end                 
            end
            TalentBoxUpdate(player)
        end)
        TriggerAddAction(TalentBox.Trigger.Reset, FrameLoseFocus)

        
		
    end
    
    --Adds an function to the queue beeing executed as soon the game started.
    function TalentAddUnitSheet(unitSheetFunction)
        table.insert(Settings.UnitSheet, unitSheetFunction)
    end

    --Calls all unitSheetFunctions Added as soon the game starts.
    do
        local real = MarkGameStarted
     function MarkGameStarted()
            real()
            xpcall(function()
        TalentInit()
        TalentBoxCreate()
        if FrameLoaderAdd then FrameLoaderAdd(TalentBoxCreate) end
        --create needed tables for players
        for i = 0, bj_MAX_PLAYER_SLOTS - 1, 1 do
            TalentBox.Control[Player(i)] = {}
            TalentBox.Control[Player(i)].Levels = {}
            TalentBox.Control[Player(i)].PreventResetButton = false
        end
        if TalentPreMadeChoiceStrings then TalentPreMadeChoiceStrings() end
        --call all added UnitSheets
        for k,v in pairs(Settings.UnitSheet)
        do
            v()
        end

        if Settings.AutoDetectUnitsInit then
            --Add possible choices to all Units having the Talent book.
            local g = CreateGroup()
            GroupEnumUnitsInRect (g, GetPlayableMapRect(), nil)
            ForGroup(g, function()
                if Talent[TalentGetUnitCode(GetUnitTypeId(GetEnumUnit()))] ~= nil then
                    TalentAddUnit(GetEnumUnit())
                    TalentAddSelection(GetEnumUnit())
                end
            end)
            --cleanup
		    DestroyGroup(g)
        end
        
        
        Settings.UnitSheet = nil
    end,print)
     end
    end
    if Settings.AutoCloseWithoutSelection then
        TalentBox.Control.SelectionCheckGroup = CreateGroup()
        TalentBox.Control.SelectionCheckTimer = CreateTimer()
        TimerStart(TalentBox.Control.SelectionCheckTimer,0.1, true, function() 
            GroupEnumUnitsSelected(TalentBox.Control.SelectionCheckGroup, GetLocalPlayer(), nil)
            if FirstOfGroup(TalentBox.Control.SelectionCheckGroup) == nil then
                BlzFrameSetVisible(TalentBox.Frame.Box, false)
                BlzFrameSetVisible(TalentBox.Frame.Show, true)            
            end            
        end)
    end
end

--[[
HeroSelector V1.5b

------
function HeroSelector.unitCreated(player, unit, isRandom)
    this function is called when an unit is picked, add here you actions that have to be done for the picked unit

function HeroSelector.buttonSelected(player, unitCode)
    this function is called when an player selects an button, this is not the picking.

function HeroSelector.unitBaned(player, unitCode)
    this function is called when a player bans an unitCode.

function HeroSelector.repick(unit[, player])
    if player is skiped unit owner sees the selection
    this will remove the unit from the game.
    Adds thie unitcode of the unit to the randompool

function HeroSelector.autoDetectCategory(unitCode)
    this called on every unit added. It is a good place for simple automatic categorizes, on default it categorizes melee as 1 and ranged as 2.

function HeroSelector.initHeroes()
    this function will be called before anything is created, when not using GUI to setup data you could add the selectable heroes here.

How use the Selection grid?
Each hero can only be once in the grid. When using HeroSelector.addUnit it will add a new slot. There are HeroSelector.ButtonColCount*HeroSelector.ButtonRowCount slots.
3 rows with 4 cols would result into:
01 02 03 04
05 06 07 08
09 10 11 12

When you want to leave fields in the grid empty use HeroSelector.addUnit(0) or HeroSelector.addUnit().
There is a GUI setup which works with indexes, not set indexes will be empty fields.
------
function HeroSelector.setUnitReq(unitCode, who)
    adds an requirement: can be a player, a force, a teamNumber, a race, a table {techcode, level}, skip who or nil will remove an requirment.
    Only when the local player fullfills than he can click the button.
    calling this will not update the selected buttonIndex of players nor does this update the clickability.
    To update the clickability when setting requirments after the Box was created use HeroSelector.update() and deselect indexes
    won't work when the unitCode wasn't added yet.
    
function HeroSelector.addUnit([unitCode, onlyRandom, requirement])
    can be called without arguments to hava a empty slot calling it with 0 has the same effect
    requirement works like who in HeroSelector.setUnitReq.

function HeroSelector.setUnitCategory(unitCode, category)
    sets the category of an added Option.
    Category should be a power 2 number. 1 2 4 8 16 32 ....

function HeroSelector.addUnitCategory(unitCode, category)
    Keeps previous setings untouched

function HeroSelector.addCategory(icon, text)
    icon is the enabled image, text is the tooltip text.

function HeroSelector.show(flag, [who])
    Shows/Hides HeroSelector to who
    flag = true show it, false = hide it
    who can be a player, a force, a teamNumber, a race or nothing = anyone
    teamNumbers are the warcraft 3 given teamNumbers starting with 0 for team 1.
    the force is expected to be kept alive

function HeroSelector.setFrameText(frame, text[, who])
function HeroSelector.setTitleText(text[, who])
function HeroSelector.setBanButtonText(text[, who])
function HeroSelector.setAcceptButtonText(text[, who])

function HeroSelector.enablePick(flag[, who])
    enable/disable the accept/random button also makes them visible for that players and hides the ban Button.
    
function HeroSelector.enableBan(flag[, who])
    enable/disable the ban button also makes accept/random invisible for that players and shows the ban Button.

function HeroSelector.forceRandom([who])
    wrapper for doRandom for player

function HeroSelector.forcePick([who])
    forces to pick what currently is selected, if that fails doRandom

function HeroSelector.buttonRequirementDone(unitCode, player)

function HeroSelector.deselectButtons([buttonIndex])
    deselect selected buttons for all players with 0 or nil
    when an index is given only this specific buttonIndex

function HeroSelector.update()
    reDo possible selection, textures and enability for all heroButtons.

function HeroSelector.destroy()
    destroys and nil HeroSelector

function HeroSelector.getDisabledIcon(icon)
    ReplaceableTextures\CommandButtons\BTNHeroPaladin.tga -> ReplaceableTextures\CommandButtonsDisabled\DISBTNHeroPaladin.tga

function HeroSelector.showFrame(frame, flag[, who])
function HeroSelector.includesPlayer(who, player)
function HeroSelector.disableButtonIndex(buttonIndex[, teamNr])
function HeroSelector.enableButtonIndex(unitCode, buttonIndex[, teamNr])
function HeroSelector.counterChangeUnitCode(unitCode, add, player)
function HeroSelector.frameLoseFocus(frame)
function HeroSelector.rollOption(player, includeRandomOnly, exculdedIndex, category)
--]]
HeroSelector = {}

--Box
HeroSelector.BoxFrameName           = "HeroSelectorRaceBox" --this is the background box being created
HeroSelector.BoxPosX                = 0.3
HeroSelector.BoxPosY                = 0.4
HeroSelector.BoxPosPoint            = FRAMEPOINT_CENTER
HeroSelector.AutoShow               = true --(true) shows the box and the Selection at 0.0 for all players
--Unique Picks
HeroSelector.UnitCount              = 5 --each hero is in total allowed to be picked this amount of times (includes random, repicking allows a hero again).
HeroSelector.UnitCountPerTeam       = 3 --Each Team is allowed to pick this amount of each unitType
HeroSelector.ToManyTooltip          = "OUTOFSTOCKTOOLTIP"
--Ban
HeroSelector.DelayBanUntilPick      = false --(true) baning will not be applied instantly, instead it is applied when HeroSelector.enablePick is called the next time.
--Category
HeroSelector.Category = {
    --Icon path, tooltip Text (tries to localize)
    {"ReplaceableTextures\\CommandButtons\\BTNSteelMelee", "Melee"},                 --1, automatic detected when adding an unit
    {"ReplaceableTextures\\CommandButtons\\BTNHumanMissileUpOne", "Ranged"},         --2, automatic detected when adding an unit
    {"ReplaceableTextures\\CommandButtons\\BTNGauntletsOfOgrePower", "Tank"},        --4
    {"ReplaceableTextures\\CommandButtons\\BTNSlippersOfAgility", "Assassin"},       --8
    {"ReplaceableTextures\\CommandButtons\\BTNMantleOfIntelligence", "Mage"}         --16
}
HeroSelector.CategoryAffectRandom   = true  --(false) random will not care about selected category
HeroSelector.CategoryMultiSelect    = false --(false) deselect other category when selecting one, (true) can selected multiple categories and all heroes having any of them are not filtered.
HeroSelector.CategorySize           = 0.02  --the size of the Category Button
HeroSelector.CategorySpaceX         = 0.0008 --space between 2 category Buttons, it is meant to need only one line of Categoryy Buttons.
HeroSelector.CategoryFilteredAlpha  = 45     -- Alpha value of Heroes being filtered by unselected categories
HeroSelector.CategoryAutoDetectHero = true  -- Will create and remove added Heroes to setup the Category for the primary Attribute Str(4) Agi(8) Int(16)   

--Indicator
HeroSelector.IndicatorPathPick      = "UI\\Feedback\\Autocast\\UI-ModalButtonOn.mdl" --this model is used by the indicator during picking
HeroSelector.IndicatorPathBan       = "war3mapImported\\HeroSelectorBan.mdl" --this model is used by the indicator during baning
--Grid
HeroSelector.SpaceBetweenX          = 0.008 --space between 2 buttons in one row
HeroSelector.SpaceBetweenY          = 0.008 --space between 2 rows
HeroSelector.ButtonColCount         = 3 --amount of buttons in one row
HeroSelector.ButtonRowCount         = 1 --amount of rows
HeroSelector.ChainedButtons         = true --(true) connect to the previous button/ or row, (false) have a offset to the box topLeft in this moving a button has no effect on other buttons.
--Button
HeroSelector.ButtonSize             = 0.036 --size of each button
HeroSelector.ButtonBlendAll         = false --(true) when a hero icon uses transparenzy
HeroSelector.EmptyButtonPath        = "UI\\Widgets\\EscMenu\\Human\\blank-background.blp"
--Ban Button
HeroSelector.BanButtonTextPrefix    = "|cffcf2084" --Prefix Text for the Ban Button
HeroSelector.BanButtonText          = "CHAT_ACTION_BAN" --tries to get a Localized String
HeroSelector.BanButtonSizeX         = 0.13
HeroSelector.BanButtonSizeY         = 0.03
HeroSelector.BanTooltip             = "DISALLOWED"
HeroSelector.BanIgnoreRequirment    = true -- (true) Ban is not restricted by Requirments
--Accept Button
HeroSelector.AcceptButtonTextPrefix = ""
HeroSelector.AcceptButtonText       = "ACCEPT"
HeroSelector.AcceptButtonSizeX      = 0.085
HeroSelector.AcceptButtonSizeY      = 0.03
HeroSelector.AcceptButtonIsShown    = true
HeroSelector.AcceptButtonAnchor     = FRAMEPOINT_BOTTOMRIGHT --places the Accept button with which Point to the bottom, with right he is at the left
--Random Button
HeroSelector.RandomButtonTextPrefix = ""
HeroSelector.RandomButtonText       = "RANDOM" --tries Localizing
HeroSelector.RandomButtonSizeX      = 0.085
HeroSelector.RandomButtonSizeY      = 0.03
HeroSelector.RandomButtonIsShown    = true
HeroSelector.RandomButtonAnchor     = FRAMEPOINT_BOTTOMLEFT
HeroSelector.RandomButtonPick       = false --(true) pressing the random button will pick the option. (false) pressing the random button will select a button, random only heroes can not be selected, but that does not matter. This weak random and randomonly should not be combined.
--Tooltip
HeroSelector.TooltipPrefix          = "|cffffcc00"
HeroSelector.TooltipOffsetX         = 0
HeroSelector.TooltipOffsetY         = 0
HeroSelector.TooltipPoint           = FRAMEPOINT_BOTTOM --pos the Tooltip with which Point
HeroSelector.TooltipRelativePoint   = FRAMEPOINT_TOP --pos the Tooltip to which Point of the Relative
HeroSelector.TooltipRelativIsBox    = false          --(true) use the box as anchor, (false) use the button as anchor
HeroSelector.TooltipRequires        = "QUESTCOMPONENTS"

--Border
HeroSelector.BorderSize = {}
HeroSelector.BorderSize[RACE_HUMAN]     = 0.029 --border size seen by Race Human, this is needed cause the borders are different in size.
HeroSelector.BorderSize[RACE_ORC]       = 0.029
HeroSelector.BorderSize[RACE_UNDEAD]    = 0.035
HeroSelector.BorderSize[RACE_NIGHTELF]  = 0.035
HeroSelector.BorderSize[RACE_DEMON]     = 0.024

--This runs before the box is created with that the system has the needed data right when it is needed.
--you can add units somewhere else but it is done after the box was created you have to use the update function to update the textures of shown buttons
function HeroSelector.initHeroes()
    --create categories setuped in config
    local categories = HeroSelector.Category
    HeroSelector.Category = {}

    for i = 1, #categories do
        HeroSelector.addCategory(categories[i][1], categories[i][2])
    end

    --HeroSelector.addUnit("Hgam", true, 0) --antonidas is an only random Hero that can only be randomed by team 0 (for users 1).
    --HeroSelector.addUnit("Eevi", true, 1) --evil Illidan is an only random Hero that can only be randomed by team 1 (for users 2).
    
    --Adds requirments
    --when you have a ban phase it might be better to add the requirments after the ban phase is over, otherwise one can only ban own options.
    --human only work for human, as nightelf only for Nightelf
    --HeroSelector.setUnitReq('Hpal', RACE_HUMAN)
    --HeroSelector.setUnitReq('Hamg', RACE_HUMAN)
    --HeroSelector.setUnitReq('Hblm', RACE_HUMAN)
    --HeroSelector.setUnitReq('Hmkg', RACE_HUMAN)
    --HeroSelector.setUnitReq('Ofar', RACE_ORC)
    --HeroSelector.setUnitReq('Oshd', RACE_ORC)
    --HeroSelector.setUnitReq('Otch', RACE_ORC)
    --HeroSelector.setUnitReq('Obla', RACE_ORC)
    --HeroSelector.setUnitReq('Emoo', RACE_NIGHTELF)
    --HeroSelector.setUnitReq('Edem', RACE_NIGHTELF)
    --HeroSelector.setUnitReq('Ekee', RACE_NIGHTELF)
    --HeroSelector.setUnitReq('Ewar', RACE_NIGHTELF)
    --HeroSelector.setUnitReq('Udea', RACE_UNDEAD)
    --HeroSelector.setUnitReq('Ulic', RACE_UNDEAD)
    --HeroSelector.setUnitReq('Udre', RACE_UNDEAD)
    --HeroSelector.setUnitReq('Ucrl', RACE_UNDEAD)
    
    local categoryMelee = 1 --autodetected
    local categoryRanged = 2 --autodetected
    local categoryTank = 4
    local categoryAssassin = 8
    local categoryMage = 16

    HeroSelector.addUnitCategory(hero.brawler.four, categoryTank)
    HeroSelector.addUnitCategory(hero.tactition.four, categoryTank)
    HeroSelector.addUnitCategory(hero.shiftMaster.four, categoryAssassin)
    HeroSelector.addUnitCategory(hero.manaAddict.four, categoryMage)
    HeroSelector.addUnitCategory(hero.timeMage.four, categoryMage)

    --HeroSelector.addUnit(hero.brawler.four)
    --HeroSelector.addUnit(hero.tactition.four)
    HeroSelector.addUnit(hero.shiftMaster.four)
    HeroSelector.addUnit(hero.manaAddict.four)
    HeroSelector.addUnit(hero.timeMage.four)


end

function HeroSelector.autoDetectCategory(unitCode)
    if IsUnitIdType(unitCode, UNIT_TYPE_MELEE_ATTACKER) then
        HeroSelector.UnitData[unitCode].Category = 1
    elseif IsUnitIdType(unitCode, UNIT_TYPE_RANGED_ATTACKER) then
        HeroSelector.UnitData[unitCode].Category = 2
    end
    if HeroSelector.CategoryAutoDetectHero and IsUnitIdType(unitCode, UNIT_TYPE_HERO) then
        local unit = CreateUnit(Player(bj_PLAYER_NEUTRAL_EXTRA), unitCode, 0, 0, 270)
        local primaryAttribute = BlzGetUnitIntegerField(unit, UNIT_IF_PRIMARY_ATTRIBUTE)
        RemoveUnit(unit)
        if ConvertHeroAttribute(primaryAttribute) == HERO_ATTRIBUTE_STR then
            HeroSelector.UnitData[unitCode].Category = HeroSelector.UnitData[unitCode].Category + 4
        elseif ConvertHeroAttribute(primaryAttribute) == HERO_ATTRIBUTE_AGI then
            HeroSelector.UnitData[unitCode].Category = HeroSelector.UnitData[unitCode].Category + 8
        elseif ConvertHeroAttribute(primaryAttribute) == HERO_ATTRIBUTE_INT then 
            HeroSelector.UnitData[unitCode].Category = HeroSelector.UnitData[unitCode].Category + 16
        end
    end
end

--what happens to the unit being picked, player is the one having pressed the button
function HeroSelector.unitCreated(player, unit, isRandom)
    bj_lastCreatedUnit = unit
    if isRandom then
        --randomed
    else
        --picked
    end

    hero:setupHero(unit)

    -- Setup AI
    if (GetPlayerController(player) == MAP_CONTROL_COMPUTER) then
        ai:initHero(unit)
        hero:levelUp(unit)
    end

    ShowUnitHide(unit)
    HeroSelector.enablePick(false, player) --only one pick for this player
    --print(GetPlayerName(player),"picks",GetUnitName(unit))
end

--happens when the banButton is pressed, player is the one having pressed the button
function HeroSelector.unitBaned(player, unitCode)
    HeroSelector.enableBan(false, player) --only one ban
    --print(GetPlayerName(player),"bans",GetObjectName(unitCode))
end

function HeroSelector.buttonSelected(player, unitCode)
    --player who pressed the button
    --unitCode the unitCode selected
    --this is not picked.

    --print(GetPlayerName(player),"selects",GetObjectName(unitCode))
end

function HeroSelector.repick(unit, player)
    UnitRemoveBuffsBJ(bj_REMOVEBUFFS_ALL, unit) --this is done to undo metamorph
    local unitCode = GetUnitTypeId(unit)
    if unitCode == 0 then return end

    HeroSelector.counterChangeUnitCode(unitCode, -1, player)

    if not player then
        player = GetOwningPlayer(unit)
    end
    HeroSelector.show(true, player)
    HeroSelector.enablePick(true, player)
    RemoveUnit(unit)
end
--=====
--code start
--=====
BlzLoadTOCFile("war3mapImported\\HeroSelector.toc") --ex/import also "HeroSelector.fdf"
HeroSelector.HeroButtons  = {} --the clickable Buttons
HeroSelector.UnitData = {} --all avaiable selections
HeroSelector.UnitDataPool = {} -- all possible random values
HeroSelector.Trigger = {}
HeroSelector.CategoryButton = {}

HeroSelector.Events = {}
HeroSelector.Frames = {}
HeroSelector.BanDelayed = {}
HeroSelector.CategoryClickTrigger = CreateTrigger()
HeroSelector.Trigger[HeroSelector.CategoryClickTrigger] = TriggerAddAction(HeroSelector.CategoryClickTrigger, function()
    local button = BlzGetTriggerFrame()
    local category = HeroSelector.CategoryButton[button]
    HeroSelector.frameLoseFocus(BlzGetTriggerFrame())
    local player = GetTriggerPlayer()
    local playerData = HeroSelector.Category[player] 
    if not playerData then
        playerData = 0
    end
    --has this category already?
    if BlzBitAnd(playerData, category.Value) ~= 0 then
        --yes, unable
        playerData = playerData - category.Value
        if GetLocalPlayer() == player then
            BlzFrameSetTexture(category.Icon, category.TextureDisabled, 0, true)
            BlzFrameSetTexture(category.IconPushed, category.TextureDisabled, 0, true)
        end

    else
        if not HeroSelector.CategoryMultiSelect and HeroSelector.CategoryButton[player]  then
            local lastCategory = HeroSelector.CategoryButton[player]
            BlzFrameSetTexture(lastCategory.Icon, lastCategory.TextureDisabled, 0, true)
            BlzFrameSetTexture(lastCategory.IconPushed, lastCategory.Texture, 0, true)
            if playerData ~= 0 then
                playerData = 0
            end
        end
        
        --no, enable
        playerData = playerData + category.Value
        if GetLocalPlayer() == player then
            BlzFrameSetTexture(category.Icon, category.Texture, 0, true)
            BlzFrameSetTexture(category.IconPushed, category.Texture, 0, true)
        end
        HeroSelector.CategoryButton[player] = category
    end
    
    HeroSelector.Category[player] = playerData

    if GetLocalPlayer() == player then
        --update all buttons
        --buttons not having at least 1 selected category becomes partly transparent
        for buttonIndex, value in ipairs(HeroSelector.HeroButtons)
        do
            local button = HeroSelector.HeroButtons[buttonIndex].Frame
            local unitCode = HeroSelector.UnitData[buttonIndex]
            if unitCode and unitCode > 0 then
                if playerData == 0 or BlzBitAnd(HeroSelector.UnitData[unitCode].Category, playerData) > 0 then
                    BlzFrameSetAlpha(button, 255)
                else
                    BlzFrameSetAlpha(button, HeroSelector.CategoryFilteredAlpha)
                end
            end
        end
    end
end)
function HeroSelector.getDisabledIcon(icon)
    --ReplaceableTextures\CommandButtons\BTNHeroPaladin.tga -> ReplaceableTextures\CommandButtonsDisabled\DISBTNHeroPaladin.tga

    if icon == nil then return "" end
    if string.sub(icon,35,35) ~= "\\" then return icon end --this string has not enough chars return it
    --string.len(icon) < 35 then return icon end --this string has not enough chars return it
    local prefix = string.sub(icon, 1, 34)
    local sufix = string.sub(icon, 36)
    return prefix .."Disabled\\DIS"..sufix
end

function HeroSelector.updateTooltip(unitCode)
    local tooltipFrame = HeroSelector.HeroButtons[HeroSelector.UnitData[unitCode].Index].Tooltip 
    local unitData = HeroSelector.UnitData[unitCode]
    if unitData.Count > HeroSelector.UnitCount then
        BlzFrameSetText(tooltipFrame, HeroSelector.TooltipPrefix..GetObjectName(unitCode).."\n|r("..GetLocalizedString(HeroSelector.BanTooltip)..")")
    else
        if unitData.Count == HeroSelector.UnitCount or unitData.InTeam[GetPlayerTeam(GetLocalPlayer())] >= HeroSelector.UnitCountPerTeam then
            BlzFrameSetText(tooltipFrame, HeroSelector.TooltipPrefix..GetObjectName(unitCode).."\n|r("..GetLocalizedString(HeroSelector.ToManyTooltip)..")")
        elseif not HeroSelector.buttonRequirementDone(unitCode, GetLocalPlayer()) then
            BlzFrameSetText(tooltipFrame, HeroSelector.TooltipPrefix..GetObjectName(unitCode).."\n|r("..GetLocalizedString(HeroSelector.TooltipRequires)..")")
        else
            BlzFrameSetText(tooltipFrame, HeroSelector.TooltipPrefix..GetObjectName(unitCode))
        end
    end
end

function HeroSelector.addCategory(icon, text)
    if HeroSelector.CategoryHighest then
        HeroSelector.CategoryHighest = HeroSelector.CategoryHighest*2
    else
        HeroSelector.CategoryHighest = 1
    end
    
    local newObject = {}
    table.insert(HeroSelector.Category, newObject)
    newObject.Value = HeroSelector.CategoryHighest
    newObject.Texture = icon
    newObject.TextureDisabled = HeroSelector.getDisabledIcon(icon)
    newObject.Text = text
    
    if HeroSelector.Box then
        local box = HeroSelector.Box
        local lastButton = HeroSelector.CategoryButton[#HeroSelector.CategoryButton]
        local button = BlzCreateFrame("HeroSelectorCategoryButton", box, 0, 0)
        icon = BlzGetFrameByName("HeroSelectorCategoryButtonIcon", 0)
        local iconPushed = BlzGetFrameByName("HeroSelectorCategoryButtonIconPushed", 0)
        local tooltip = BlzCreateFrame("HeroSelectorText", box, 0, 0)
        if text ~= nil then
            BlzFrameSetText(tooltip, GetLocalizedString(text))
        end
        
        newObject.Text = tooltip --when this is reached overwritte textframe with the tooltip
        BlzFrameSetTooltip(button, tooltip)
        BlzFrameSetPoint(tooltip, FRAMEPOINT_BOTTOM, button, FRAMEPOINT_TOP, 0, 0)
        BlzFrameSetSize(button, 0.02, 0.02)
        BlzFrameSetTexture(icon, newObject.TextureDisabled, 0, true)
        BlzFrameSetTexture(iconPushed, newObject.TextureDisabled, 0, true)
        HeroSelector.CategoryButton[button] = newObject
        BlzTriggerRegisterFrameEvent(HeroSelector.CategoryClickTrigger, button, FRAMEEVENT_CONTROL_CLICK)
        newObject.Icon = icon
        newObject.IconPushed = iconPushed
        newObject.Button = button

        if not lastButton then
            local titleSize = 0.015
            local borderSize = HeroSelector.BorderSize[GetPlayerRace(GetLocalPlayer())]
            local y = -borderSize - titleSize - 0.01
            local x = borderSize
            BlzFrameSetPoint(button, FRAMEPOINT_TOPLEFT, box, FRAMEPOINT_TOPLEFT, x, y)
        else
            BlzFrameSetPoint(button, FRAMEPOINT_LEFT, lastButton, FRAMEPOINT_RIGHT, 0, 0)
        end
        table.insert(HeroSelector.CategoryButton, button)
        table.insert(HeroSelector.Frames, tooltip)
        table.insert(HeroSelector.Frames, icon)
        table.insert(HeroSelector.Frames, button)
    end
end

function HeroSelector.addUnit(unitCode, onlyRandom, requirement)
    --no unitCode => empty field
    if not unitCode or unitCode == 0 then
        table.insert(HeroSelector.UnitData, 0)
    else
        --'Hpal' -> number?
        if type(unitCode) == "string" then
            unitCode = FourCC(unitCode)
        end

        --Such an object Exist?
        if GetObjectName(unitCode) == "" then print(('>I4'):pack(unitCode), "is not an valid Object") return end
        
        --only unique
        if HeroSelector.UnitData[unitCode] then return end
        HeroSelector.UnitDataPool[unitCode] = true -- add to random

        HeroSelector.UnitData[unitCode] = {Index = 0, Count = 0, InTeam = __jarray(0), Category = 0, Requirment = HeroSelector.convertReq(requirement), RequirmentData = requirement}
        HeroSelector.autoDetectCategory(unitCode)
        if not onlyRandom then
            table.insert(HeroSelector.UnitData, unitCode)
            HeroSelector.UnitData[unitCode].Index = #HeroSelector.UnitData   --remember the index for the unitCode
        end
      
        
    end

end

function HeroSelector.setFrameText(frame, text, who)
    if HeroSelector.includesPlayer(who, GetLocalPlayer()) then
        BlzFrameSetText(HeroSelector.Title, text)
    end
end

function HeroSelector.setTitleText(text, who)
    HeroSelector.setFrameText(HeroSelector.Title, text, who)
end
function HeroSelector.setAcceptButtonText(text, who)
    HeroSelector.setFrameText(HeroSelector.AcceptButton, text, who)
end
function HeroSelector.setBanButtonText(text, who)
    HeroSelector.setFrameText(HeroSelector.BanButton, text, who)
end

function HeroSelector.isPlayerRace(unitCode, player)
    return HeroSelector.UnitData[unitCode].RequirmentData == GetPlayerRace(player) 
end
function HeroSelector.IsPlayerForce(unitCode, player)
    return BlzForceHasPlayer(HeroSelector.UnitData[unitCode].RequirmentData, player)
end
function HeroSelector.IsPlayerTeamNr(unitCode, player)
    return HeroSelector.UnitData[unitCode].RequirmentData == GetPlayerTeam(player)
end
function HeroSelector.isPlayer(unitCode, player)
    return HeroSelector.UnitData[unitCode].RequirmentData == player
end
function HeroSelector.HasPlayerTechLevel(unitCode, player)
    return GetPlayerTechCount(player, HeroSelector.UnitData[unitCode].RequirmentData[1], true) >= HeroSelector.UnitData[unitCode].RequirmentData[2]
end

function HeroSelector.convertReq(who)
    if not who then
        return nil
    elseif type(who) == "number" then
        return HeroSelector.IsPlayerTeamNr
    elseif type(who) == "table" then
        return HeroSelector.HasPlayerTechLevel
    elseif tostring(who):sub(1, 5) == "race:" then
        return HeroSelector.isPlayerRace
    elseif tostring(who):sub(1, 7) == "player:" then
        return HeroSelector.isPlayer
    elseif tostring(who):sub(1, 6) == "force:" then
        return HeroSelector.IsPlayerForce
    end
    return nil
end

function HeroSelector.setUnitReq(unitCode, who)
    if type(unitCode) == "string" then
        unitCode = FourCC(unitCode)
    end
    --Such an object Exist?
    if not HeroSelector.UnitData[unitCode] then return end

    HeroSelector.UnitData[unitCode].RequirmentData = who
    HeroSelector.UnitData[unitCode].Requirment = HeroSelector.convertReq(who)
end
function HeroSelector.setUnitCategory(unitCode, category)
    if type(unitCode) == "string" then
        unitCode = FourCC(unitCode)
    end
    --Such an object Exist?
    if not HeroSelector.UnitData[unitCode] then return end

    HeroSelector.UnitData[unitCode].Category = category
end
function HeroSelector.addUnitCategory(unitCode, category)
    if type(unitCode) == "string" then
        unitCode = FourCC(unitCode)
    end
    --Such an object Exist?
    if not HeroSelector.UnitData[unitCode] then return end

    HeroSelector.UnitData[unitCode].Category = BlzBitOr(category, HeroSelector.UnitData[unitCode].Category)
end

function HeroSelector.deselectButtons(buttonIndex)
    if buttonIndex and buttonIndex > 0 then
        if HeroSelector.HeroButtons[GetLocalPlayer()] == buttonIndex then
            BlzFrameSetVisible(HeroSelector.SelectedIndikator, false)
        end
        for index= 0, GetBJMaxPlayers() - 1,1 do
            if HeroSelector.HeroButtons[Player(index)] == buttonIndex then
                HeroSelector.HeroButtons[Player(index)] = 0 
            end
        end
    else
        for index= 0, GetBJMaxPlayers() - 1,1 do
            HeroSelector.HeroButtons[Player(index)] = 0 
        end
        BlzFrameSetVisible(HeroSelector.SelectedIndikator, false)
    end
end

function HeroSelector.buttonRequirementDone(unitCode, player)
    --true when no requirement is set or the requirment call is successful
    return not HeroSelector.UnitData[unitCode].Requirment or HeroSelector.UnitData[unitCode].Requirment(unitCode, player)
end

function HeroSelector.disableButtonIndex(buttonIndex, teamNr)
    if buttonIndex > 0 then
        if HeroSelector.includesPlayer(teamNr, GetLocalPlayer()) then
            BlzFrameSetEnable(HeroSelector.HeroButtons[buttonIndex].Frame, false)
        end
        if HeroSelector.HeroButtons[GetLocalPlayer()] == buttonIndex then
            BlzFrameSetVisible(HeroSelector.SelectedIndikator, false)
        end

        --deselect this Button from all players or the team
        for index= 0, GetBJMaxPlayers() - 1,1 do
            local player = Player(index)
            if (not teamNr or teamNr == GetPlayerTeam(player)) and HeroSelector.HeroButtons[player] == buttonIndex then
                HeroSelector.HeroButtons[player] = 0                
            end
        end
    end
end

function HeroSelector.enableButtonIndex(unitCode, buttonIndex, teamNr)
    if buttonIndex > 0 and (not teamNr or teamNr == GetPlayerTeam(GetLocalPlayer())) then
        BlzFrameSetEnable(HeroSelector.HeroButtons[buttonIndex].Frame, true and (HeroSelector.BanIgnoreRequirment and BlzFrameIsVisible(HeroSelector.BanButton)) or HeroSelector.buttonRequirementDone(unitCode, GetLocalPlayer()))
    end
end

function HeroSelector.counterChangeUnitCode(unitCode, add, player)
    if not HeroSelector.UnitData[unitCode] then HeroSelector.UnitData[unitCode] = {Count = 0, InTeam = __jarray(0)} end
    local buttonIndex = HeroSelector.UnitData[unitCode].Index
    if not buttonIndex  then buttonIndex = 0 end

    local teamNr = GetPlayerTeam(player)
    
    HeroSelector.UnitData[unitCode].InTeam[teamNr] = HeroSelector.UnitData[unitCode].InTeam[teamNr] + add
    HeroSelector.UnitData[unitCode].Count = HeroSelector.UnitData[unitCode].Count + add

    if HeroSelector.UnitData[unitCode].Count >= HeroSelector.UnitCount then
        --disable for all
        HeroSelector.disableButtonIndex(buttonIndex)
    else
        --enable for all
        HeroSelector.enableButtonIndex(unitCode, buttonIndex)
        if HeroSelector.UnitData[unitCode].InTeam[teamNr] >= HeroSelector.UnitCountPerTeam  then
            --disable for this team
            HeroSelector.disableButtonIndex(buttonIndex, teamNr)
        end
    end
    HeroSelector.updateTooltip(unitCode)
end
function HeroSelector.rollOption(player, includeRandomOnly, exculdedIndex, category)
    if not exculdedIndex then exculdedIndex = 0 end
    if not category then category = 0 end
    local teamNr = GetPlayerTeam(player)
    local options = {}
    for unitCode, value in pairs(HeroSelector.UnitDataPool)
    do
        
        local allowed = true
        --total limited reached?
        if HeroSelector.UnitData[unitCode].Count >= HeroSelector.UnitCount then
            allowed = false
            --print(GetObjectName(unitCode))
            --print("rejected total limit")
        end
        --team limited reached?
        if allowed and HeroSelector.UnitData[unitCode].InTeam[teamNr] >= HeroSelector.UnitCountPerTeam  then
            --print(GetObjectName(unitCode))
            --print("rejected team limit")
            allowed = false
        end
        --allow randomOnly?
        if allowed and not includeRandomOnly and HeroSelector.UnitData[unitCode].Index == 0  then
            --print(GetObjectName(unitCode))
            --print("rejected random only")
            allowed = false
        end
        --this index is excluded? This can make sure you get another button.
        if allowed and HeroSelector.UnitData[unitCode].Index > 0 and HeroSelector.UnitData[unitCode].Index == exculdedIndex then
            --print(GetObjectName(unitCode))
            --print("rejected exclude")
            allowed = false
        end
        --fullfills the requirement?
        if allowed and not HeroSelector.buttonRequirementDone(unitCode, player) then
            --print(GetObjectName(unitCode))
            --print("rejected requirement")
            allowed = false
        end
        --when having an given an category only allow options having that category atleast partly
        if allowed and category and category > 0 and BlzBitAnd(category, HeroSelector.UnitData[unitCode].Category) == 0 then
            --print(GetObjectName(unitCode))
            --print("  rejected category", category, HeroSelector.UnitData[unitCode].Category)
            allowed = false
        end

        if allowed then
            table.insert(options, unitCode)
        end
    end
    --nothing is allwoed?
    if #options == 0 then return nil end

    return options[GetRandomInt(1, #options)]
end
function HeroSelector.doRandom(player)
    local category = 0
    if HeroSelector.CategoryAffectRandom then category = HeroSelector.Category[player] end
    local unitCode = HeroSelector.rollOption(player, true, 0, category)
    if not unitCode then return end
    local unit = CreateUnit(player, unitCode, 0, 0, 0)
    
    HeroSelector.counterChangeUnitCode(unitCode, 1, player)
    HeroSelector.unitCreated(player, unit, true)
end

function HeroSelector.doPick(player)
    --pick what currently is selected, returns true on success returns false when something went wrong,
    if not HeroSelector.HeroButtons[player] then return false end
    local buttonIndex = HeroSelector.HeroButtons[player]
    if buttonIndex <= 0 then return false end --reject nothing selected
    local unitCode = HeroSelector.UnitData[buttonIndex]
    if not HeroSelector.buttonRequirementDone(unitCode, player) then return false end --requirment fullfilled
    local unit = CreateUnit(player, unitCode, 0, 0, 0)
    
    HeroSelector.counterChangeUnitCode(unitCode, 1, player)
    HeroSelector.unitCreated(player, unit)
    return true
end

function HeroSelector.forceRandom(who)
    --this is a wrapper for doRandom allowing different dataTypes
    if not who then
        for index= 0, GetBJMaxPlayers() - 1,1 do
            local player = Player(index)
            if GetPlayerSlotState(player) == PLAYER_SLOT_STATE_PLAYING then
                HeroSelector.doRandom(Player(index)) 
            end
        end
    elseif type(who) == "number" then
        for index= 0, GetBJMaxPlayers() - 1,1 do
            local player = Player(index)
            if GetPlayerSlotState(player) == PLAYER_SLOT_STATE_PLAYING then
                if GetPlayerTeam(player) == who then
                    HeroSelector.doRandom(player)
                end
            end
        end
    elseif tostring(who):sub(1, 5) == "race:" then
        for index= 0, GetBJMaxPlayers() - 1,1 do
            local player = Player(index)
            if GetPlayerSlotState(player) == PLAYER_SLOT_STATE_PLAYING then
                if GetPlayerRace(player) == who then
                    HeroSelector.doRandom(player) 
                end
            end
        end
    elseif tostring(who):sub(1, 7) == "player:" then
        HeroSelector.doRandom(who)
    elseif tostring(who):sub(1, 6) == "force:"then
        ForForce(who, function() HeroSelector.doRandom(GetEnumPlayer()) end)
    end
end

function HeroSelector.forcePick(who)
    if not who then
        for index= 0, GetBJMaxPlayers() - 1,1 do
            local player = Player(index)
            if GetPlayerSlotState(player) == PLAYER_SLOT_STATE_PLAYING then
                if not HeroSelector.doPick(player) then --do picking, when that fails doRandom
                    HeroSelector.doRandom(player)
                end
            end
        end
    elseif type(who) == "number" then
        for index= 0, GetBJMaxPlayers() - 1,1 do
            local player = Player(index)
            if GetPlayerSlotState(player) == PLAYER_SLOT_STATE_PLAYING then
                if GetPlayerTeam(player) == who then
                    if not HeroSelector.doPick(player) then
                        HeroSelector.doRandom(player) 
                    end
                end
            end
        end
    elseif tostring(who):sub(1, 5) == "race:" then
        for index= 0, GetBJMaxPlayers() - 1,1 do
            local player = Player(index)
            if GetPlayerSlotState(player) == PLAYER_SLOT_STATE_PLAYING then
                if GetPlayerRace(player) == who then
                    if not HeroSelector.doPick(player) then
                        HeroSelector.doRandom(player) 
                    end
                end
            end
        end
    elseif tostring(who):sub(1, 7) == "player:" then
        if not HeroSelector.doPick(who) then
            HeroSelector.doRandom(who) 
        end
    elseif tostring(who):sub(1, 6) == "force:" then
        ForForce(who, function()
            local player = GetEnumPlayer()
            if not HeroSelector.doPick(player) then
                HeroSelector.doRandom(player) 
            end 
        end)
    end
end

function HeroSelector.includesPlayer(who, player)
    if not who then --there is no who -> everyone
        return true
    elseif type(who) == "number" and GetPlayerTeam(player) == who then
        return true
    elseif tostring(who):sub(1, 5) == "race:" and GetPlayerRace(player) == who  then
        return true
    elseif tostring(who):sub(1, 7) == "player:" and player == who then
        return true
    elseif tostring(who):sub(1, 6) == "force:" and BlzForceHasPlayer(who, player) then
        return true
    end
    return false
end

function HeroSelector.enablePick(flag, who)
    for index = #HeroSelector.BanDelayed, 1, -1
    do
        local ban = table.remove(HeroSelector.BanDelayed)
        HeroSelector.counterChangeUnitCode(ban[1], HeroSelector.UnitCount + 1, ban[2])
    end

    if HeroSelector.includesPlayer(who, GetLocalPlayer()) then
        BlzFrameSetVisible(HeroSelector.AcceptButton, true and HeroSelector.AcceptButtonIsShown)
        BlzFrameSetVisible(HeroSelector.RandomButton, true and HeroSelector.RandomButtonIsShown)
        BlzFrameSetVisible(HeroSelector.BanButton, false)
        BlzFrameSetEnable(HeroSelector.AcceptButton, flag)
        BlzFrameSetEnable(HeroSelector.RandomButton, flag)
        BlzFrameSetModel(HeroSelector.SelectedIndikator, HeroSelector.IndicatorPathPick, 0)
        if HeroSelector.BanIgnoreRequirment then HeroSelector.update() end
    end
    
end

function HeroSelector.enableBan(flag, who)  
    if HeroSelector.includesPlayer(who, GetLocalPlayer()) then
        BlzFrameSetVisible(HeroSelector.AcceptButton, false)
        BlzFrameSetVisible(HeroSelector.RandomButton, false)
        BlzFrameSetVisible(HeroSelector.BanButton, true)
        BlzFrameSetEnable(HeroSelector.BanButton, flag)
        BlzFrameSetModel(HeroSelector.SelectedIndikator, HeroSelector.IndicatorPathBan, 0)
        if HeroSelector.BanIgnoreRequirment then HeroSelector.update() end
    end    
end

function HeroSelector.destroy()
    for key, value in ipairs(HeroSelector.Frames)
    do
        BlzDestroyFrame(value)
    end
    HeroSelector.Frames = nil
    for key, value in ipairs(HeroSelector.HeroButtons)
    do
        BlzDestroyFrame(value.Tooltip)
        BlzDestroyFrame(value.Icon)
        BlzDestroyFrame(value.IconDisabled)
        BlzDestroyFrame(value.Frame)
    end
    HeroSelector.HeroButtons = nil
    for key, value in ipairs(HeroSelector.Trigger)
    do
        TriggerRemoveAction(value, HeroSelector.Trigger[value])
        DestroyTrigger(value)
    end
    HeroSelector.Trigger = nil

    BlzDestroyFrame(HeroSelector.SelectedIndikator)
    
    HeroSelector.UnitData = nil
    HeroSelector.BorderSize = nil
    HeroSelector.Events = nil
    HeroSelector = nil
    
end

function HeroSelector.frameLoseFocus(frame)
    if BlzFrameGetEnable(frame) then
        BlzFrameSetEnable(frame, false)
        BlzFrameSetEnable(frame, true)
    end
end

function HeroSelector.actionPressHeroButton()
    local button = BlzGetTriggerFrame()
    local player = GetTriggerPlayer()
    local buttonIndex = HeroSelector.HeroButtons[button]
    local unitCode = HeroSelector.UnitData[buttonIndex]
    HeroSelector.HeroButtons[player] = buttonIndex
    if GetLocalPlayer() == player then
        HeroSelector.frameLoseFocus(BlzGetTriggerFrame())
    end
    if GetLocalPlayer() == player then
        BlzFrameSetVisible(HeroSelector.SelectedIndikator, true)
        
        BlzFrameSetPoint(HeroSelector.SelectedIndikator, FRAMEPOINT_TOPLEFT, button, FRAMEPOINT_TOPLEFT, -0.001, 0.001)
        BlzFrameSetPoint(HeroSelector.SelectedIndikator, FRAMEPOINT_BOTTOMRIGHT, button, FRAMEPOINT_BOTTOMRIGHT, -0.0012, -0.0016)
    end
    HeroSelector.buttonSelected(player, unitCode)
end

function HeroSelector.actionRandomButton()
    local player = GetTriggerPlayer()
    HeroSelector.frameLoseFocus(BlzGetTriggerFrame())
    if HeroSelector.RandomButtonPick then
        HeroSelector.doRandom(player)
    else
        local unitCode = HeroSelector.rollOption(player, false, HeroSelector.HeroButtons[player], HeroSelector.Category[player])
        if unitCode and GetLocalPlayer() == player then
            local buttonIndex = HeroSelector.UnitData[unitCode].Index
            BlzFrameClick(HeroSelector.HeroButtons[buttonIndex].Frame)
        end
    end
end

function HeroSelector.actionAcceptButton()
    HeroSelector.frameLoseFocus(BlzGetTriggerFrame())
    HeroSelector.doPick(GetTriggerPlayer())
end

function HeroSelector.actionBanButton()
    local player = GetTriggerPlayer()
    HeroSelector.frameLoseFocus(BlzGetTriggerFrame())
    if not HeroSelector.HeroButtons[player] then return end
    local buttonIndex = HeroSelector.HeroButtons[player]
    if buttonIndex <= 0 then return end --reject nothing selected
    local unitCode = HeroSelector.UnitData[buttonIndex]
    if not HeroSelector.DelayBanUntilPick then
        HeroSelector.counterChangeUnitCode(unitCode, HeroSelector.UnitCount + 1, player)
    else
        table.insert(HeroSelector.BanDelayed, {unitCode, player})
    end
    HeroSelector.unitBaned(player, unitCode)
end

function HeroSelector.update()
    for buttonIndex, value in ipairs(HeroSelector.HeroButtons)
    do
        --have data for this button?
        if HeroSelector.UnitData[buttonIndex] and HeroSelector.UnitData[buttonIndex] > 0 then
            local unitCode = HeroSelector.UnitData[buttonIndex]
            if HeroSelector.UnitData[unitCode].Count >= HeroSelector.UnitCount then
                --disable for all
                HeroSelector.disableButtonIndex(buttonIndex)
            else
                --enable for all
                HeroSelector.enableButtonIndex(unitCode, buttonIndex)
                for teamNr, inTeamCount in pairs(HeroSelector.UnitData[unitCode].InTeam) do
                    if HeroSelector.UnitData[unitCode].InTeam[teamNr] >= HeroSelector.UnitCountPerTeam  then
                        --disable for this team
                        HeroSelector.disableButtonIndex(buttonIndex, teamNr)
                    end
                end
            end
            BlzFrameSetTexture(value.Icon, BlzGetAbilityIcon(unitCode), 0, HeroSelector.ButtonBlendAll)
            BlzFrameSetTexture(value.IconPushed, BlzGetAbilityIcon(unitCode), 0, HeroSelector.ButtonBlendAll)
            BlzFrameSetTexture(value.IconDisabled, HeroSelector.getDisabledIcon(BlzGetAbilityIcon(unitCode)), 0, HeroSelector.ButtonBlendAll)
            --BlzFrameSetText(value.Tooltip, HeroSelector.TooltipPrefix..GetObjectName(unitCode))
            HeroSelector.updateTooltip(unitCode)
            
        else
            --no, make it unclickable and empty
            BlzFrameSetEnable(value.Frame, false)
            BlzFrameSetTexture(value.Icon, HeroSelector.EmptyButtonPath, 0, true)
            BlzFrameSetTexture(value.IconPushed, HeroSelector.EmptyButtonPath, 0, true)
            BlzFrameSetTexture(value.IconDisabled, HeroSelector.EmptyButtonPath, 0, true)
        end
    end
end

function HeroSelector.showFrame(frame, flag, who)
    if HeroSelector.includesPlayer(who, GetLocalPlayer()) then
        BlzFrameSetVisible(frame, flag)
    end
end

function HeroSelector.show(flag, who)
    HeroSelector.showFrame(HeroSelector.Box, flag, who)
end

do
    local backUp = MarkGameStarted
    function MarkGameStarted()
        backUp()
        backUp = nil
    HeroSelector.initHeroes()    
    --for key, value in ipairs(HeroSelector.UnitData)
    --do
--        print(key, ('>I4'):pack(value), GetObjectName(value))
    --end

    local titleSize = 0.015
    local buttonSize = HeroSelector.ButtonSize
    local borderSize = HeroSelector.BorderSize[GetPlayerRace(GetLocalPlayer())]
    local colCount = HeroSelector.ButtonColCount
    local rowCount = HeroSelector.ButtonRowCount
    local box = BlzCreateFrame(HeroSelector.BoxFrameName, BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), 0, 0)
    --local boxTitle = BlzCreateFrame(HeroSelector.BoxFrameName, box, 0, 0)
    local boxBottom = BlzCreateFrame("HeroSelectorRaceTopBox", box, 0, 0)
    local titel = BlzCreateFrame("HeroSelectorTitle", box, 0, 0)
    local onClickTrigger = CreateTrigger()
    HeroSelector.Trigger[onClickTrigger] = TriggerAddAction(onClickTrigger, HeroSelector.actionPressHeroButton)
    HeroSelector.Title = titel
    local indicatorParent = BlzCreateFrameByType("BUTTON", "MyHeroIndikatorParent", box, "", 0)
    HeroSelector.SelectedIndikator = BlzCreateFrameByType("SPRITE", "MyHeroIndikator", indicatorParent, "", 0)
    BlzFrameSetLevel(indicatorParent, 9)

    BlzFrameSetModel(HeroSelector.SelectedIndikator, HeroSelector.IndicatorPathPick, 0)
    BlzFrameSetScale(HeroSelector.SelectedIndikator, buttonSize/0.036) --scale the model to the button size.
    

    --BlzFrameSetPoint(boxTitle, FRAMEPOINT_TOPLEFT, box, FRAMEPOINT_TOPLEFT, 0, -(titleSize - 0.003 + 0.9*borderSize))
    --BlzFrameSetPoint(boxTitle, FRAMEPOINT_BOTTOMRIGHT, box, FRAMEPOINT_TOPRIGHT, 0, - 0.9*borderSize - titleSize - 0.003 -HeroSelector.CategorySize)
    --BlzFrameSetSize(boxTitle, 0.01, 0.1)
    -- human UI size differs much, needs other numbers
    if GetPlayerRace(GetLocalPlayer()) == RACE_HUMAN then
        BlzFrameSetPoint(boxBottom, FRAMEPOINT_TOPLEFT, box, FRAMEPOINT_TOPLEFT, borderSize*0.055, - 0.9*borderSize - titleSize - 0.003 -HeroSelector.CategorySize)
        BlzFrameSetPoint(boxBottom, FRAMEPOINT_TOPRIGHT, box, FRAMEPOINT_TOPRIGHT, -borderSize*0.055, - 0.9*borderSize - titleSize - 0.003 -HeroSelector.CategorySize)
    else
        BlzFrameSetPoint(boxBottom, FRAMEPOINT_TOPLEFT, box, FRAMEPOINT_TOPLEFT, borderSize*0.25, - 0.9*borderSize - titleSize - 0.003 -HeroSelector.CategorySize)
        BlzFrameSetPoint(boxBottom, FRAMEPOINT_TOPRIGHT, box, FRAMEPOINT_TOPRIGHT, -borderSize*0.25, - 0.9*borderSize - titleSize - 0.003 -HeroSelector.CategorySize)
    end
    BlzFrameSetSize(boxBottom, 0.01, 0.1)
    
    
    BlzFrameSetVisible(HeroSelector.SelectedIndikator, false)
    BlzFrameSetAbsPoint(box, HeroSelector.BoxPosPoint, HeroSelector.BoxPosX, HeroSelector.BoxPosY)   
    BlzFrameSetSize(box, borderSize*2 + buttonSize*colCount + HeroSelector.SpaceBetweenX*(colCount-1), borderSize*2 + buttonSize*rowCount + HeroSelector.SpaceBetweenY*(rowCount - 1) + titleSize + HeroSelector.CategorySize + 0.0145)
    BlzFrameSetTextAlignment(titel, TEXT_JUSTIFY_MIDDLE, TEXT_JUSTIFY_CENTER)
    BlzFrameSetPoint(titel, FRAMEPOINT_TOP, box, FRAMEPOINT_TOP, 0, -borderSize*0.6)
    BlzFrameSetSize(titel, BlzFrameGetWidth(box) - borderSize*2, 0.03)
    
    BlzFrameSetText(titel, "Hero Selection")

    local rowRemaining = colCount
    if colCount*rowCount < #HeroSelector.UnitData then
        print("FieldCount:",colCount*rowCount, "HeroCount",#HeroSelector.UnitData)
    end
    local y = -borderSize - titleSize - 0.0125 - HeroSelector.CategorySize
    local x = borderSize
    for buttonIndex = 1, colCount*rowCount, 1 do
        local button = BlzCreateFrame("HeroSelectorButton", box, 0, buttonIndex)
        local icon = BlzGetFrameByName("HeroSelectorButtonIcon", buttonIndex)
        local iconPushed = BlzGetFrameByName("HeroSelectorButtonIconPushed", buttonIndex)
        local iconDisabled = BlzGetFrameByName("HeroSelectorButtonIconDisabled", buttonIndex)
        local tooltipBox = BlzCreateFrame("HeroSelectorTextBox", box, 0, buttonIndex)
        local tooltip = BlzCreateFrame("HeroSelectorText", tooltipBox, 0, buttonIndex)
        BlzFrameSetTooltip(button, tooltipBox)
        if not HeroSelector.TooltipRelativIsBox then
            BlzFrameSetPoint(tooltip, HeroSelector.TooltipPoint, button, HeroSelector.TooltipRelativePoint, HeroSelector.TooltipOffsetX ,HeroSelector.TooltipOffsetY)
        else
            BlzFrameSetPoint(tooltip, HeroSelector.TooltipPoint, box, HeroSelector.TooltipRelativePoint, HeroSelector.TooltipOffsetX ,HeroSelector.TooltipOffsetY)
        end
        BlzFrameSetPoint(tooltipBox, FRAMEPOINT_BOTTOMLEFT, tooltip, FRAMEPOINT_BOTTOMLEFT, -0.007, -0.007)
        BlzFrameSetPoint(tooltipBox, FRAMEPOINT_TOPRIGHT, tooltip, FRAMEPOINT_TOPRIGHT, 0.007, 0.007)
        table.insert(HeroSelector.Events, BlzTriggerRegisterFrameEvent(onClickTrigger, button, FRAMEEVENT_CONTROL_CLICK))
        BlzFrameSetSize(button, buttonSize, buttonSize)
        if HeroSelector.UnitData[buttonIndex] and HeroSelector.UnitData[buttonIndex] > 0 then
            local unitCode = HeroSelector.UnitData[buttonIndex]
            BlzFrameSetTexture(icon, BlzGetAbilityIcon(unitCode), 0, HeroSelector.ButtonBlendAll)
            BlzFrameSetTexture(iconPushed, BlzGetAbilityIcon(unitCode), 0, HeroSelector.ButtonBlendAll)
            BlzFrameSetTexture(iconDisabled, HeroSelector.getDisabledIcon(BlzGetAbilityIcon(unitCode)), 0, HeroSelector.ButtonBlendAll)
            BlzFrameSetText(tooltip, HeroSelector.TooltipPrefix..GetObjectName(unitCode))
            BlzFrameSetEnable(button, HeroSelector.buttonRequirementDone(unitCode, GetLocalPlayer()))
        else
            BlzFrameSetEnable(button, false)
            BlzFrameSetTexture(icon, HeroSelector.EmptyButtonPath, 0, true)
            BlzFrameSetTexture(iconPushed, HeroSelector.EmptyButtonPath, 0, true)
            BlzFrameSetTexture(iconDisabled, HeroSelector.EmptyButtonPath, 0, true)
        end
        local heroButton = {}
        HeroSelector.HeroButtons[buttonIndex] = heroButton
        heroButton.Frame = button
        heroButton.Icon = icon
        heroButton.IconPushed = icon
        heroButton.IconDisabled = iconDisabled
        heroButton.Tooltip = tooltip

        HeroSelector.HeroButtons[button] = buttonIndex
        if HeroSelector.ChainedButtons then --buttons are connected to the previous one or the previous row
            if buttonIndex == 1 then
                BlzFrameSetPoint(button, FRAMEPOINT_TOPLEFT, box, FRAMEPOINT_TOPLEFT, borderSize, y)
            elseif rowRemaining <= 0 then
                BlzFrameSetPoint(button, FRAMEPOINT_TOPLEFT, HeroSelector.HeroButtons[buttonIndex - colCount].Frame, FRAMEPOINT_BOTTOMLEFT, 0, -HeroSelector.SpaceBetweenY)
                rowRemaining = colCount
            else
                BlzFrameSetPoint(button, FRAMEPOINT_LEFT, HeroSelector.HeroButtons[buttonIndex - 1].Frame, FRAMEPOINT_RIGHT, HeroSelector.SpaceBetweenX, 0)
            end
        else --buttons have an offset to the TopLeft of the box
            if rowRemaining <= 0 then
                x = borderSize
                rowRemaining = colCount
                y = y - HeroSelector.SpaceBetweenY - buttonSize
            elseif buttonIndex ~= 1 then
                x = x + buttonSize + HeroSelector.SpaceBetweenX
            end
            BlzFrameSetPoint(button, FRAMEPOINT_TOPLEFT, box, FRAMEPOINT_TOPLEFT, x, y)
        end
        rowRemaining = rowRemaining - 1
    end
    local y = -0.9*borderSize - titleSize - 0.0025
    local x = borderSize*0.65
    --create category buttons added before the box was created
    for buttonIndex, value in ipairs(HeroSelector.Category)
    do
        local button = BlzCreateFrame("HeroSelectorCategoryButton", box, 0, 0)
        local icon = BlzGetFrameByName("HeroSelectorCategoryButtonIcon", 0)
        local iconPushed = BlzGetFrameByName("HeroSelectorCategoryButtonIconPushed", 0)
        local tooltipBox = BlzCreateFrame("HeroSelectorTextBox", box, 0, buttonIndex)
        local tooltip = BlzCreateFrame("HeroSelectorText", tooltipBox, 0, buttonIndex)
        BlzFrameSetPoint(tooltipBox, FRAMEPOINT_BOTTOMLEFT, tooltip, FRAMEPOINT_BOTTOMLEFT, -0.007, -0.007)
        BlzFrameSetPoint(tooltipBox, FRAMEPOINT_TOPRIGHT, tooltip, FRAMEPOINT_TOPRIGHT, 0.007, 0.007)
        BlzFrameSetText(tooltip, GetLocalizedString(value.Text))
        value.Text = tooltip
        BlzFrameSetPoint(tooltip, FRAMEPOINT_BOTTOM, button, FRAMEPOINT_TOP, 0, 0.007)
        BlzFrameSetTooltip(button, tooltipBox)
        BlzFrameSetSize(button, HeroSelector.CategorySize, HeroSelector.CategorySize)
        BlzFrameSetTexture(icon, value.TextureDisabled, 0, true)
        BlzFrameSetTexture(iconPushed, value.TextureDisabled, 0, true)
        HeroSelector.CategoryButton[button] = value
        BlzTriggerRegisterFrameEvent(HeroSelector.CategoryClickTrigger, button, FRAMEEVENT_CONTROL_CLICK)
        value.Icon = icon
        value.IconPushed = iconPushed
        value.Button = button

        local lastButton = HeroSelector.CategoryButton[buttonIndex - 1]
        if not lastButton then
            BlzFrameSetPoint(button, FRAMEPOINT_TOPLEFT, box, FRAMEPOINT_TOPLEFT, x, y)
        else
            BlzFrameSetPoint(button, FRAMEPOINT_LEFT, lastButton, FRAMEPOINT_RIGHT, HeroSelector.CategorySpaceX, 0)
        end
        table.insert(HeroSelector.CategoryButton, button)
        table.insert(HeroSelector.Frames, tooltip)
        table.insert(HeroSelector.Frames, icon)
        table.insert(HeroSelector.Frames, button)
    end

    local acceptButton = BlzCreateFrame("HeroSelectorTextButton", box, 0, 0)
    local acceptTrigger = CreateTrigger()
    local randomButton = BlzCreateFrame("HeroSelectorTextButton", box, 0, 1)
    local randomTrigger = CreateTrigger()
    local banButton = BlzCreateFrame("HeroSelectorTextButton", box, 0, 2)
    local banTrigger = CreateTrigger()
    HeroSelector.Trigger[acceptTrigger] = TriggerAddAction(acceptTrigger, HeroSelector.actionAcceptButton)
    HeroSelector.Trigger[randomTrigger] = TriggerAddAction(randomTrigger, HeroSelector.actionRandomButton)
    HeroSelector.Trigger[banTrigger] = TriggerAddAction(banTrigger, HeroSelector.actionBanButton)
    table.insert(HeroSelector.Events, BlzTriggerRegisterFrameEvent(acceptTrigger, acceptButton, FRAMEEVENT_CONTROL_CLICK))
    table.insert(HeroSelector.Events, BlzTriggerRegisterFrameEvent(randomTrigger, randomButton, FRAMEEVENT_CONTROL_CLICK))
    table.insert(HeroSelector.Events, BlzTriggerRegisterFrameEvent(banTrigger, banButton, FRAMEEVENT_CONTROL_CLICK))
    BlzFrameSetSize(acceptButton, HeroSelector.AcceptButtonSizeX, HeroSelector.AcceptButtonSizeY)
    BlzFrameSetSize(randomButton, HeroSelector.RandomButtonSizeX, HeroSelector.RandomButtonSizeY)
    BlzFrameSetSize(banButton, HeroSelector.BanButtonSizeX, HeroSelector.BanButtonSizeY)

    --OK, READY, ACCEPT
    BlzFrameSetText(acceptButton, HeroSelector.AcceptButtonTextPrefix .. GetLocalizedString(HeroSelector.AcceptButtonText))
    BlzFrameSetText(randomButton, HeroSelector.RandomButtonTextPrefix .. GetLocalizedString(HeroSelector.RandomButtonText))
    BlzFrameSetText(banButton, HeroSelector.BanButtonTextPrefix .. GetLocalizedString(HeroSelector.BanButtonText))
    BlzFrameSetPoint(acceptButton, HeroSelector.AcceptButtonAnchor, box, FRAMEPOINT_BOTTOM, 0, 0)
    BlzFrameSetPoint(randomButton, HeroSelector.RandomButtonAnchor, box, FRAMEPOINT_BOTTOM, 0, 0)
    BlzFrameSetPoint(banButton, FRAMEPOINT_BOTTOM, box, FRAMEPOINT_BOTTOM, 0, 0)
    HeroSelector.AcceptButton = acceptButton
    HeroSelector.RandomButton = randomButton
    HeroSelector.BanButton = banButton
    BlzFrameSetVisible(banButton, false)
    BlzFrameSetVisible(acceptButton, HeroSelector.AcceptButtonIsShown)
    BlzFrameSetVisible(randomButton, HeroSelector.RandomButtonIsShown)

    table.insert(HeroSelector.Trigger, randomTrigger)
    table.insert(HeroSelector.Trigger, acceptTrigger)
    table.insert(HeroSelector.Trigger, onClickTrigger)
    table.insert(HeroSelector.Trigger, banTrigger)
    table.insert(HeroSelector.Frames, randomButton)
    table.insert(HeroSelector.Frames, acceptButton)
    table.insert(HeroSelector.Frames, titel)
    table.insert(HeroSelector.Frames, box)
    table.insert(HeroSelector.Frames, banButton)
    table.insert(HeroSelector.Frames, indicatorParent)
    
    HeroSelector.Box = box
    if not HeroSelector.AutoShow then
        BlzFrameSetVisible(box, false)
    else
        HeroSelector.AutoShow = nil
    end
    --clean of globals
    HeroSelector.BoxPosPoint = nil
    HeroSelector.BoxPosX = nil
    HeroSelector.BoxPosY = nil
    HeroSelector.AcceptButtonTextPrefix = nil
    HeroSelector.RandomButtonTextPrefix = nil
    HeroSelector.BanButtonTextPrefix = nil
    if TeamViewer then TeamViewer.Init() end
    if HeroInfo then HeroInfo.Init() end
    end 
end
--TeamViewer 1.3b
--Plugin for HeroSelector by Tasyen
--It shows the selection of Teams in groups
--Default setup could be suited for 2 team games

TeamViewer = {}

TeamViewer.ShowNonAllies        = true --show non allies
TeamViewer.UpdateNonAllies      = false --update the image of non allies when the select or pick
--position when TeamViewer.ShowNonAllies = false or when a TeamPos is not set
TeamViewer.TeamPosX             = 0.02
TeamViewer.TeamPosY             = 0.5
TeamViewer.TeamPosGapY          = 0.015
TeamViewer.TeamPosLeft2Right    = true --(true) button is left and text is right, (false) button is right and text ist left
--how big are the Faces
TeamViewer.ButtonSize           = 0.03
TeamViewer.ButtonAlphaSelected  = 150
TeamViewer.ButtonDefaultIcon    = "UI\\Widgets\\EscMenu\\Human\\quest-unknown.blp"
TeamViewer.CategoryButtonSize   = 0.015 --size of the CategoryButtons below an players name
TeamViewer.CategoryButtonGap    = 0.002 -- space between 2 CategoryButtons

--used when ShowNonAllies = true
--warcraft 3 Teams start with 0
TeamViewer.TeamPos = {}
TeamViewer.TeamPos[0] = {}
--abs positions on the screen
TeamViewer.TeamPos[0].X = 0.02
TeamViewer.TeamPos[0].Y = 0.5
TeamViewer.TeamPos[0].GapY = 0.015
TeamViewer.TeamPos[0].Left2Right = true

TeamViewer.TeamPos[1] = {}
TeamViewer.TeamPos[1].X = 0.75
TeamViewer.TeamPos[1].Y = 0.5
TeamViewer.TeamPos[1].Left2Right = false

TeamViewer.Frames = {} --this is used to destroy all frames created by TeamViewer.
TeamViewer.HasPicked = {}
TeamViewer.BackupSelected = HeroSelector.buttonSelected
TeamViewer.BackupCreated = HeroSelector.unitCreated
TeamViewer.BackupRepick = HeroSelector.repick
TeamViewer.BackupDestroy = HeroSelector.destroy

function TeamViewer.AllowPlayer(player)
    return IsPlayerInForce(player, udg_playersAll)
end

function oppositeFramePoint(framepoint)
    if framepoint == FRAMEPOINT_BOTTOM then return FRAMEPOINT_TOP
    elseif framepoint == FRAMEPOINT_TOP then return FRAMEPOINT_BOTTOM
    elseif framepoint == FRAMEPOINT_TOPLEFT then return FRAMEPOINT_BOTTOMRIGHT
    elseif framepoint == FRAMEPOINT_TOPRIGHT then return FRAMEPOINT_BOTTOMLEFT
    elseif framepoint == FRAMEPOINT_LEFT then return FRAMEPOINT_RIGHT
    elseif framepoint == FRAMEPOINT_RIGHT then return FRAMEPOINT_LEFT
    elseif framepoint == FRAMEPOINT_CENTER then return FRAMEPOINT_CENTER
    elseif framepoint == FRAMEPOINT_BOTTOMLEFT then return FRAMEPOINT_TOPRIGHT
    elseif framepoint == FRAMEPOINT_BOTTOMRIGHT then return FRAMEPOINT_TOPLEFT
    else return framepoint
    end
end

function HeroSelector.destroy()
    for key, value in pairs(TeamViewer.Frames)
    do
        BlzDestroyFrame(value)
    end
    TeamViewer.BackupDestroy() 
    TeamViewer = nil    
end
function TeamViewer.PosFirstFrame(movingFrame, relativFrame, left2Right)
    if left2Right then
        --BlzFrameSetPoint(movingFrame, FRAMEPOINT_TOPLEFT, relativFrame, FRAMEPOINT_BOTTOMRIGHT, 0, 0)
        BlzFrameSetPoint(movingFrame, FRAMEPOINT_TOPLEFT, relativFrame, FRAMEPOINT_BOTTOMLEFT, 0, 0)
    else
        BlzFrameSetPoint(movingFrame, FRAMEPOINT_TOPRIGHT, relativFrame, FRAMEPOINT_BOTTOMRIGHT, 0, 0)
    end
end
function TeamViewer.PosFrame(movingFrame, relativFrame, left2Right)
    if left2Right then
        BlzFrameSetPoint(movingFrame, FRAMEPOINT_TOPLEFT, relativFrame, FRAMEPOINT_TOPRIGHT, TeamViewer.CategoryButtonGap, 0)
    else
        BlzFrameSetPoint(movingFrame, FRAMEPOINT_TOPRIGHT, relativFrame, FRAMEPOINT_TOPLEFT, -TeamViewer.CategoryButtonGap, 0)
    end
end
function TeamViewer.Init()
    local buttonTrigger = CreateTrigger()
    TriggerAddAction(buttonTrigger, function()
        local frame = BlzGetTriggerFrame()
        HeroSelector.frameLoseFocus(frame)
        TeamViewer.ButtonClicked(GetTriggerPlayer(), TeamViewer[frame])        
    end)

    for index= 0, GetBJMaxPlayers() - 1,1 do
        local player = Player(index)
        if TeamViewer.AllowPlayer(player) then
            local teamNr = GetPlayerTeam(player)
            if not TeamViewer[teamNr] then TeamViewer[teamNr] = {} end
            table.insert(TeamViewer[teamNr], player)
            
            local createContext = 1000 + index
            --local playerFrame = BlzCreateFrameByType("FRAME", "TeamViewerPlayerFrame", HeroSelector.Box, "", createContext)
            local playerFrame = BlzCreateFrame("HeroSelectorTextBox", HeroSelector.Box, 0, createContext)
            local colorFrame = BlzCreateFrameByType("BACKDROP", "", playerFrame, "", createContext)
            local button = BlzCreateFrame("HeroSelectorButton", playerFrame, 0, createContext)
            local textFrame = BlzCreateFrame("HeroSelectorText", playerFrame, 0, createContext) -- do not the buttons child, else it is affected by Alpha change
            local icon = BlzGetFrameByName("HeroSelectorButtonIcon", createContext)
            local iconPushed = BlzGetFrameByName("HeroSelectorButtonIconPushed", createContext)
            local iconDisabled = BlzGetFrameByName("HeroSelectorButtonIconDisabled", createContext)
            local tooltipBox = BlzCreateFrame("HeroSelectorTextBox", button, 0, createContext)
            local tooltip = BlzCreateFrame("HeroSelectorText", tooltipBox, 0, createContext)
            local left2Right = nil
            BlzTriggerRegisterFrameEvent(buttonTrigger, button, FRAMEEVENT_CONTROL_CLICK)
            BlzFrameSetSize(playerFrame, 0.11 + TeamViewer.ButtonSize, TeamViewer.ButtonSize + TeamViewer.CategoryButtonSize + 0.001)
            BlzFrameSetPoint(colorFrame, FRAMEPOINT_TOPLEFT, playerFrame, FRAMEPOINT_TOPLEFT, 0.005, -0.0035)
            BlzFrameSetPoint(colorFrame, FRAMEPOINT_TOPRIGHT, playerFrame, FRAMEPOINT_TOPRIGHT, -0.005, -0.0035)
            BlzFrameSetSize(colorFrame, 0, 0.003)
            
            local colorIndex = GetHandleId(GetPlayerColor(player))
            if colorIndex < 10 then
                BlzFrameSetTexture(colorFrame, "ReplaceableTextures\\TeamColor\\TeamColor0"..colorIndex, 0, false)
            else
                 BlzFrameSetTexture(colorFrame, "ReplaceableTextures\\TeamColor\\TeamColor"..colorIndex, 0, false)
            end

            if TeamViewer.ShowNonAllies and TeamViewer.TeamPos[teamNr] then
                left2Right = TeamViewer.TeamPos[teamNr].Left2Right
            else
                left2Right = TeamViewer.TeamPosLeft2Right
            end
            BlzFrameSetSize(button, TeamViewer.ButtonSize, TeamViewer.ButtonSize)
            BlzFrameSetSize(textFrame, 0.105 - TeamViewer.ButtonSize, 0.013)
            if #TeamViewer[teamNr] == 1 then
                if TeamViewer.ShowNonAllies and TeamViewer.TeamPos[teamNr] then
                    BlzFrameSetAbsPoint(button, FRAMEPOINT_BOTTOMLEFT, TeamViewer.TeamPos[teamNr].X, TeamViewer.TeamPos[teamNr].Y)
                else
                    BlzFrameSetAbsPoint(button,  FRAMEPOINT_BOTTOMLEFT, TeamViewer.TeamPosX, TeamViewer.TeamPosY)
                end
            else
                local prevTeamPlayer = TeamViewer[teamNr][#TeamViewer[teamNr] - 1]

                if TeamViewer.TeamPos[teamNr].GapY then
                    BlzFrameSetPoint(button, FRAMEPOINT_TOPLEFT, TeamViewer[prevTeamPlayer].Button, FRAMEPOINT_BOTTOMLEFT, 0, -TeamViewer.TeamPos[teamNr].GapY)
                else
                    BlzFrameSetPoint(button, FRAMEPOINT_TOPLEFT, TeamViewer[prevTeamPlayer].Button, FRAMEPOINT_BOTTOMLEFT, 0, -TeamViewer.TeamPosGapY)
                end
            end
            TeamViewer.PosFrame(textFrame, button, left2Right)
            if left2Right then
                BlzFrameSetPoint(tooltip, FRAMEPOINT_BOTTOMLEFT, button, FRAMEPOINT_TOPLEFT, 0, 0.007)
                BlzFrameSetPoint(playerFrame, FRAMEPOINT_TOPLEFT, button, FRAMEPOINT_TOPLEFT, -0.007, 0.007)
            else
                BlzFrameSetPoint(tooltip, FRAMEPOINT_BOTTOMRIGHT, button, FRAMEPOINT_TOPRIGHT, 0, 0.007)
                BlzFrameSetPoint(playerFrame, FRAMEPOINT_TOPRIGHT, button, FRAMEPOINT_TOPRIGHT, 0.007, 0.007)
                BlzFrameSetTextAlignment(textFrame, TEXT_JUSTIFY_TOP, TEXT_JUSTIFY_RIGHT)
            end
            BlzFrameSetPoint(tooltipBox, FRAMEPOINT_BOTTOMLEFT, tooltip, FRAMEPOINT_BOTTOMLEFT, -0.007, -0.007)
            BlzFrameSetPoint(tooltipBox, FRAMEPOINT_TOPRIGHT, tooltip, FRAMEPOINT_TOPRIGHT, 0.007, 0.007)
            BlzFrameSetText(textFrame, GetPlayerName(player))
            BlzFrameSetTooltip(button, tooltipBox)
            BlzFrameSetTexture(icon, TeamViewer.ButtonDefaultIcon, 0, true)
            BlzFrameSetTexture(iconPushed, TeamViewer.ButtonDefaultIcon, 0, true)
            table.insert(TeamViewer.Frames, button)
            table.insert(TeamViewer.Frames, textFrame)
            table.insert(TeamViewer.Frames, icon)
            table.insert(TeamViewer.Frames, iconDisabled)
            table.insert(TeamViewer.Frames, tooltip)
            table.insert(TeamViewer.Frames, playerFrame)

            TeamViewer[player] = {}
            TeamViewer[player].PlayerFrame = playerFrame
            TeamViewer[player].Text = textFrame
            TeamViewer[player].Button = button
            TeamViewer[button] = player
            TeamViewer[player].Icon = icon
            TeamViewer[player].IconPushed = iconPushed
            TeamViewer[player].IconDisabled = iconDisabled
            TeamViewer[player].Tooltip = tooltip
            TeamViewer[player].Category = {}
            local prevCategoryButton = nil
            --print("Pre HeroSelector.Category")
            for key, value in ipairs(HeroSelector.Category)
            do
                --print("Index",key)
                local categoryButton = {}
                categoryButton.Button = BlzCreateFrameByType("BUTTON", "", playerFrame, "", 0)
                categoryButton.Icon = BlzCreateFrameByType("BACKDROP", "", categoryButton.Button, "", 0)
                categoryButton.TooltipBox = BlzCreateFrame("HeroSelectorTextBox", categoryButton.Button, 0, createContext)
                categoryButton.Tooltip = BlzCreateFrame("HeroSelectorText", categoryButton.TooltipBox, 0, key)
                BlzFrameSetPoint(categoryButton.TooltipBox, FRAMEPOINT_BOTTOMLEFT, categoryButton.Tooltip, FRAMEPOINT_BOTTOMLEFT, -0.007, -0.007)
                BlzFrameSetPoint(categoryButton.TooltipBox, FRAMEPOINT_TOPRIGHT, categoryButton.Tooltip, FRAMEPOINT_TOPRIGHT, 0.007, 0.007)
                BlzFrameSetText(categoryButton.Tooltip, BlzFrameGetText(value.Text))
                BlzFrameSetTooltip(categoryButton.Button, categoryButton.TooltipBox)
                BlzFrameSetAllPoints(categoryButton.Icon, categoryButton.Button)
                BlzFrameSetPoint(categoryButton.Tooltip, FRAMEPOINT_BOTTOM, categoryButton.Button, FRAMEPOINT_TOP, 0, 0.007)
                BlzFrameSetSize(categoryButton.Button, 0.015, 0.015)
                BlzFrameSetTexture(categoryButton.Icon, value.Texture, 0, true)
                BlzFrameSetVisible(categoryButton.Button, false)

                table.insert(TeamViewer[player].Category, categoryButton)
                table.insert(TeamViewer.Frames, categoryButton.Button)
                table.insert(TeamViewer.Frames, categoryButton.Icon)
                table.insert(TeamViewer.Frames, categoryButton.Tooltip)
                
            end
            

            --When showning only allies, hide non allies
            if not TeamViewer.ShowNonAllies and not IsPlayerAlly(player, GetLocalPlayer()) then
                BlzFrameSetVisible(playerFrame, false)
            end
        end
    end
end

function TeamViewer.ButtonClicked(clickingPlayer, targetPlayer)
    print(GetPlayerName(clickingPlayer),"Clicked",GetPlayerName(targetPlayer))
end

function HeroSelector.buttonSelected(player, unitCode)

    TeamViewer.BackupSelected(player, unitCode)
    
    if not TeamViewer.HasPicked[player] then
        local teamNr = GetPlayerTeam(player)
        if TeamViewer.UpdateNonAllies or IsPlayerAlly(GetLocalPlayer(), player) then
            BlzFrameSetText(TeamViewer[player].Tooltip, GetObjectName(unitCode))
            BlzFrameSetTexture(TeamViewer[player].Icon, BlzGetAbilityIcon(unitCode), 0, true)
            BlzFrameSetTexture(TeamViewer[player].IconPushed, BlzGetAbilityIcon(unitCode), 0, true)
            BlzFrameSetAlpha(TeamViewer[player].Button, TeamViewer.ButtonAlphaSelected)
            local category = 1
            local prevCategoryButton = nil
            local left2Right = nil
            if TeamViewer.ShowNonAllies and TeamViewer.TeamPos[teamNr] then
                left2Right = TeamViewer.TeamPos[teamNr].Left2Right
            else
                left2Right = TeamViewer.TeamPosLeft2Right
            end
            for key, value in ipairs(HeroSelector.Category)
            do
                local categoryButton = TeamViewer[player].Category[key]
                BlzFrameClearAllPoints(categoryButton.Button)
                if BlzBitAnd(category, HeroSelector.UnitData[unitCode].Category) > 0 then
                    
                    BlzFrameSetVisible(categoryButton.Button, true)
                    
                    if TeamViewer.ShowNonAllies and TeamViewer.TeamPos[teamNr] then
                        if not prevCategoryButton then
                            --TeamViewer.PosFirstFrame(categoryButton.Button, TeamViewer[player].Button, left2Right)
                            TeamViewer.PosFirstFrame(categoryButton.Button, TeamViewer[player].Text, left2Right)
                            --TeamViewer[player].Text
                        else
                            TeamViewer.PosFrame(categoryButton.Button, prevCategoryButton, left2Right)
                        end
                    else
                        if not prevCategoryButton then
                            TeamViewer.PosFirstFrame(categoryButton.Button, TeamViewer[player].Button, left2Right)
                        else
                            TeamViewer.PosFrame(categoryButton.Button, prevCategoryButton, left2Right)
                        end
                    end
                    
                    prevCategoryButton = categoryButton.Button
                else
                    BlzFrameSetVisible(categoryButton.Button, false)
                end
                category = category + category                
            end
        end
    end
end

function HeroSelector.unitCreated(player, unit, isRandom)
    TeamViewer.BackupCreated(player, unit, isRandom)
    if not player then player = GetOwningPlayer(unit) end
    if TeamViewer.UpdateNonAllies or IsPlayerAlly(GetLocalPlayer(), player) then
        BlzFrameSetText(TeamViewer[player].Tooltip, GetUnitName(unit))
        BlzFrameSetTexture(TeamViewer[player].Icon, BlzGetAbilityIcon(GetUnitTypeId(unit)), 0, true)
        BlzFrameSetTexture(TeamViewer[player].IconPushed, BlzGetAbilityIcon(GetUnitTypeId(unit)), 0, true)
        BlzFrameSetAlpha(TeamViewer[player].Button, 255)
    end
    TeamViewer.HasPicked[player] = true
end

function HeroSelector.repick(unit, player)
    TeamViewer.BackupRepick(unit, player)
    if not player then player = GetOwningPlayer(unit) end
    if TeamViewer.UpdateNonAllies or IsPlayerAlly(GetLocalPlayer(), player) then
        BlzFrameSetText(TeamViewer[player].Tooltip, "")
        BlzFrameSetTexture(TeamViewer[player].Icon, TeamViewer.ButtonDefaultIcon, 0, true)
        BlzFrameSetTexture(TeamViewer[player].IconPushed, TeamViewer.ButtonDefaultIcon, 0, true)
        BlzFrameSetAlpha(TeamViewer[player].Button, 255)
    end
    TeamViewer.HasPicked[player] = false
end

--HeroInfo 1.1a
--Plugin for HeroInfo by Tasyen
--This Creates a TextArea which displays the name and the Extended tooltip of selected units.

HeroInfo = {}
--TextArea
HeroInfo.DescHeroNamePrefix     = "|cffffcc00"   --added before the Units Name
HeroInfo.DescHeroNameSufix      = "|r"           --added after the units Name
HeroInfo.TextAreaSizeX          = 0.2
HeroInfo.TextAreaSizeY          = 0.2
HeroInfo.TextAreaOffsetX        = 0
HeroInfo.TextAreaOffsetY        = 0
HeroInfo.TextAreaPoint          = FRAMEPOINT_TOPLEFT --pos the Tooltip with which Point
HeroInfo.TextAreaRelativePoint  = FRAMEPOINT_TOPRIGHT --pos the Tooltip to which Point of the Relative
HeroInfo.TextAreaRelativeGame   = false --(false) relativ to box, (true) relativ to GameUI
HeroInfo.BackupSelected         = HeroSelector.buttonSelected
HeroInfo.BackupDestroy          = HeroSelector.destroy

function HeroSelector.destroy()
    BlzDestroyFrame(HeroInfo.TextArea)
    HeroInfo.BackupDestroy()
    HeroInfo = nil
end

function HeroInfo.Init()
    HeroInfo.TextArea = BlzCreateFrame("HeroSelectorTextArea", HeroSelector.Box, 0, 0)    
    BlzFrameSetSize(HeroInfo.TextArea , HeroInfo.TextAreaSizeX, HeroInfo.TextAreaSizeY)
    if not HeroInfo.TextAreaRelativeGame then
        BlzFrameSetPoint(HeroInfo.TextArea, HeroInfo.TextAreaPoint, HeroSelector.Box, HeroInfo.TextAreaRelativePoint, HeroInfo.TextAreaOffsetX, HeroInfo.TextAreaOffsetY)
    else
        BlzFrameSetPoint(HeroInfo.TextArea, HeroInfo.TextAreaPoint, BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), HeroInfo.TextAreaRelativePoint, HeroInfo.TextAreaOffsetX, HeroInfo.TextAreaOffsetY)
    end
end

function HeroSelector.buttonSelected(player, unitCode)
    HeroInfo.BackupSelected(player, unitCode)

    if GetLocalPlayer() == player then
        BlzFrameSetText(HeroInfo.TextArea, HeroInfo.DescHeroNamePrefix .. GetObjectName(unitCode).. HeroInfo.DescHeroNameSufix)
        BlzFrameAddText(HeroInfo.TextArea, BlzGetAbilityExtendedTooltip(unitCode,0))
    end
end
function init_Abilities()

    -- Init Vars
    ability = {}

    --
    --  Shifter
    --

    -- Switch
    function ability.switch()

        local u

        local g = CreateGroup()
        local p = GetSpellTargetLoc()
        local castingUnit = GetTriggerUnit()
        local castingPlayer = GetOwningPlayer(castingUnit)

        g = GetUnitsInRangeOfLocAll(200, p)
        RemoveLocation(p)

        local xOrig = GetUnitX(castingUnit)
        local yOrig = GetUnitY(castingUnit)

        while true do
            u = GroupPickRandomUnit(g)
            if u == nil then
                BlzEndUnitAbilityCooldown(castingUnit, hero.switch.id)
                local abilitymana = BlzGetAbilityManaCost(hero.switch.id,
                                        GetUnitAbilityLevel(castingUnit, hero.switch.id))
                SetUnitManaBJ(castingUnit, GetUnitState(castingUnit, UNIT_STATE_MANA) + abilitymana)
                print("added ability and mana back")

                break
            end

            if IsUnitIllusion(u) and GetOwningPlayer(u) == castingPlayer then

                local xIll = GetUnitX(u)
                local yIll = GetUnitY(u)

                AddSpecialEffect("Abilities/Spells/Orc/MirrorImage/MirrorImageMissile.mdl", xIll, yIll)
                DestroyEffect(GetLastCreatedEffectBJ())
                AddSpecialEffect("Abilities/Spells/Orc/MirrorImage/MirrorImageMissile.mdl", xOrig, yOrig)
                DestroyEffect(GetLastCreatedEffectBJ())

                PolledWait(.1)

                SetUnitX(castingUnit, xIll)
                SetUnitX(u, xOrig)
                SetUnitY(castingUnit, yIll)
                SetUnitY(u, yOrig)

                SelectUnitForPlayerSingle(castingUnit, castingPlayer)

                break
            end

            GroupRemoveUnit(g, u)
        end
        DestroyGroup(g)
    end

    --
    -- Mana Addict
    --

    -- Mana Explosion
    function ability.manaExplosion()

        local u, new, distance, angle, uX, uY, uNewX, uNewY, newDistance, sfx
        local g = CreateGroup()

        local castingUnit = GetTriggerUnit()
        local castingPlayer = GetOwningPlayer(castingUnit)

        -- Get Spell Info
        local castX = GetUnitX(castingUnit)
        local castY = GetUnitY(castingUnit)
        local castL = GetUnitLoc(castingUnit)
        local spellLevel = GetUnitAbilityLevel(castingUnit, hero.manaExplosion.id)
        local manaStart = GetUnitState(castingUnit, UNIT_STATE_MANA)
        local manaSpell = manaStart * 0.1
        local manaLeft = manaStart - manaSpell
        local manaPercent = GetUnitManaPercent(castingUnit) / 100

        -- Set up Spell Variables
        local duration = (0.4 * manaPercent) + 0.2
        local factor = 1
        local tick = 0.04
        local damageFull = manaSpell * (spellLevel * 0.2 + 0.8)
        local aoe = (100 + (spellLevel * 40)) * manaPercent + 200

        -- Prep Spell
        SetUnitManaBJ(castingUnit, manaLeft)

        g = GetUnitsInRangeOfLocAll(aoe, castL)

        -- Filter Out all of the units that don't matter

        ForGroup(g, function()
            u = GetEnumUnit()

            if not IsUnitType(u, UNIT_TYPE_STRUCTURE) and not IsUnitType(u, UNIT_TYPE_FLYING) and
                not IsUnitType(u, UNIT_TYPE_MAGIC_IMMUNE) and not IsUnitType(u, UNIT_TYPE_RESISTANT) and
                IsUnitAliveBJ(u) and not IsUnitAlly(u, GetOwningPlayer(castingUnit)) then
                sfx = AddSpecialEffectTarget("Abilities/Spells/Undead/DarkRitual/DarkRitualTarget.mdl", u, "chest")
                DestroyEffect(sfx)
            else
                GroupRemoveUnit(g, u)
            end

        end)

        pushbackUnits(g, castingUnit, castX, castY, aoe, damageFull, tick, duration, factor)
        DestroyGroup(g)
    end

    -- Mana Explosion
    function ability.manaBomb()

        local xNew, yNew, l, u, sfx
        local g = CreateGroup()
        local distance = 0

        -- Caster vars
        local castingUnit = GetTriggerUnit()
        local x = GetUnitX(castingUnit)
        local y = GetUnitY(castingUnit)
        local player = GetOwningPlayer(castingUnit)

        -- Ability Vars
        local xCast = GetSpellTargetX()
        local yCast = GetSpellTargetY()
        local lCast = Location(xCast, yCast)
        local xBomb = x
        local yBomb = y
        local level = GetUnitAbilityLevel(castingUnit, hero.manaBomb.id)
        local mana = GetUnitState(castingUnit, UNIT_STATE_MANA)
        local distanceTotal = distanceBetweenCoordinates(x, y, xCast, yCast)
        local angle = angleBetweenCoordinates(x, y, xCast, yCast)

        -- Constants
        local bombSpeed = 35 + 5 * level
        local damage = (mana * (0.3 + 0.1 * level)) + 100 * level
        local damageAftershock = 25 + 25 * level
        local duration = 0.5
        local durationExplosion = 0.3
        local aoe = 200
        local aoeExplosion = 100
        local bombTick = 0.1
        local explosionTick = 0.04

        local loopTimes = durationExplosion / explosionTick
        local damageTick = damage / loopTimes

        -- Move the Bomb Forward
        while distance + 150 <= distanceTotal do

            xBomb, yBomb = polarProjectionCoordinates(xBomb, yBomb, bombSpeed, angle)
            distance = distanceBetweenCoordinates(x, y, xBomb, yBomb)

            l = Location(xBomb, yBomb)
            sfx = AddSpecialEffectLoc("Abilities/Spells/Undead/DeathandDecay/DeathandDecayDamage.mdl", l)
            DestroyEffect(sfx)
            RemoveLocation(l)

            PolledWait(bombTick)
        end

        PolledWait(0.3)

        -- Explode the Bomb
        sfx = AddSpecialEffectLoc("Flamestrike Mystic I.mdx", lCast)
        DestroyEffect(sfx)
        sfx = AddSpecialEffectLoc("Units/NightElf/Wisp/WispExplode.mdl", lCast)
        DestroyEffect(sfx)

        for i = 1, loopTimes do

            g = GetUnitsInRangeOfLocAll(aoe, lCast)
            while true do
                u = FirstOfGroup(g)
                if u == nil then
                    break
                end

                if not IsUnitType(u, UNIT_TYPE_STRUCTURE) and not IsUnitType(u, UNIT_TYPE_FLYING) and
                    not IsUnitType(u, UNIT_TYPE_MAGIC_IMMUNE) and not IsUnitType(u, UNIT_TYPE_RESISTANT) and
                    IsUnitAliveBJ(u) and not IsUnitAlly(u, GetOwningPlayer(castingUnit)) then

                    UnitDamageTargetBJ(castingUnit, u, damageTick, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC)

                    if i == 1 then
                        sfx = AddSpecialEffectTarget("Abilities/Spells/Undead/DarkRitual/DarkRitualTarget.mdl", u,
                                  "chest")
                        DestroyEffect(sfx)
                    end
                end

                GroupRemoveUnit(g, u)
            end
            DestroyGroup(g)

            PolledWait(explosionTick)
        end

        -- Start the Aftershock
        g = GetUnitsInRangeOfLocAll(aoe, lCast)
        RemoveLocation(lCast)

        ForGroup(g, function()
            u = GetEnumUnit()

            if not IsUnitType(u, UNIT_TYPE_STRUCTURE) and not IsUnitType(u, UNIT_TYPE_FLYING) and
                not IsUnitType(u, UNIT_TYPE_MAGIC_IMMUNE) and not IsUnitType(u, UNIT_TYPE_RESISTANT) and
                IsUnitAliveBJ(u) and not IsUnitAlly(u, GetOwningPlayer(castingUnit)) then

            else
                GroupRemoveUnit(g, u)
            end

        end)

        pushbackUnits(g, castingUnit, xCast, yCast, aoe, damageAftershock, explosionTick, duration, 0.2)
        DestroyGroup(g)

    end

    function ability.unleashMana()
        local u, uTarget, unitCount, sfx1
        local g = CreateGroup()
        local dummy = FourCC("h01H")
        local dummySpell = FourCC("A005")

        -- Caster vars
        local castingUnit = GetTriggerUnit()
        local x = GetUnitX(castingUnit)
        local y = GetUnitY(castingUnit)
        local l = Location(x, y)
        local player = GetOwningPlayer(castingUnit)

        -- Ability Vars
        local level = GetUnitAbilityLevel(castingUnit, hero.unleashMana.id)
        local mana = GetUnitState(castingUnit, UNIT_STATE_MANA)
        local damageMissles = 60 + (60 * level - 60)

        local aoeMissles = 800 + 100 * level

        local duration = 15
        local tick = 0.15

        currentOrder = OrderId2String(GetUnitCurrentOrder(castingUnit))

        sfx1 = AddSpecialEffectLoc("Mana Storm.mdx", l)
        BlzSetSpecialEffectScale(sfx1, 0.75)

        PolledWait(0.5)

        while duration > 0 and mana > 0 and currentOrder == hero.unleashMana.order do

            g = GetUnitsInRangeOfLocAll(aoeMissles, l)
            ForGroup(g, function()
                u = GetEnumUnit()

                if not IsUnitType(u, UNIT_TYPE_STRUCTURE) and not IsUnitType(u, UNIT_TYPE_FLYING) and
                    not IsUnitType(u, UNIT_TYPE_MAGIC_IMMUNE) and not IsUnitType(u, UNIT_TYPE_RESISTANT) and
                    IsUnitAliveBJ(u) and not IsUnitAlly(u, GetOwningPlayer(castingUnit)) then
                else
                    GroupRemoveUnit(g, u)
                end
            end)

            unitCount = CountUnitsInGroup(g)
            if unitCount > 3 then
                unitCount = 3
            end

            -- Shoot the Missles
            for i = 1, unitCount do
                SetUnitState(castingUnit, UNIT_STATE_MANA, mana - 2)
                mana = GetUnitState(castingUnit, UNIT_STATE_MANA)

                uTarget = GroupPickRandomUnit(g)
                u = CreateUnit(player, dummy, x, y, 0)
                UnitApplyTimedLife(u, FourCC("BTLF"), 0.4)
                BlzSetUnitBaseDamage(u, damageMissles, 0)
                BlzSetUnitBaseDamage(castingUnit, damageMissles, 0)
                IssueTargetOrder(u, "attack", uTarget)
            end
            DestroyGroup(g)

            currentOrder = OrderId2String(GetUnitCurrentOrder(castingUnit))

            duration = duration - tick
            PolledWait(tick)
        end

        DestroyEffect(sfx1)
        RemoveLocation(l)

        if currentOrder == hero.unleashMana.order then
            IssueImmediateOrder(castingUnit, "stop")
        end

    end

    function ability.soulBind()
        local u
        local g = CreateGroup()

        -- Caster vars
        local castingUnit = GetTriggerUnit()
        local player = GetOwningPlayer(castingUnit)

        -- Ability Vars
        local level = GetUnitAbilityLevel(castingUnit, hero.soulBind.id)
        local xCast = GetSpellTargetX()
        local yCast = GetSpellTargetY()
        local lCast = Location(xCast, yCast)

        local aoe = valueFactor(level, 150, 1, 20, 0)

        g = GetUnitsInRangeOfLocAll(aoe, lCast)
        RemoveLocation(lCast)

        while true do
            u = FirstOfGroup(g)
            if u == nil then
                break
            end

            if not IsUnitType(u, UNIT_TYPE_STRUCTURE) and not IsUnitType(u, UNIT_TYPE_MAGIC_IMMUNE) and IsUnitAliveBJ(u) then
                indexer:addKey(u, "soulBind", castingUnit)
                indexer:addKey(u, "soulBindLevel", level)
            end

            GroupRemoveUnit(g, u)
        end
        DestroyGroup(g)

    end

    function ability.DEATH_soulBind()

        local u, mana, sfx

        local dyingUnit = BlzGetEventDamageTarget()
        local lDyingUnit = GetUnitLoc(dyingUnit)

        local castingUnit = indexer:getKey(dyingUnit, "soulBind")
        local level = indexer:getKey(dyingUnit, "soulBindLevel")
        local player = GetOwningPlayer(castingUnit)

        local distance = distanceBetweenUnits(dyingUnit, castingUnit)

        if distance < 2000 then
            u = CreateUnitAtLoc(player, FourCC("e00D"), lDyingUnit, 0)

            while distance > 100 and IsUnitAliveBJ(castingUnit) do
                IssueTargetOrder(u, "attack", castingUnit)
                distance = distanceBetweenUnits(u, castingUnit)
                PolledWait(0.1)
            end

            KillUnit(u)

            mana = GetUnitState(castingUnit, UNIT_STATE_MANA)
            SetUnitState(castingUnit, UNIT_STATE_MANA, mana + valueFactor(level, 20, 1, 5, 0))

            sfx = AddSpecialEffectTarget("Abilities/Spells/Other/Charm/CharmTarget.mdl", castingUnit, "chest")
            DestroyEffect(sfx)

        end
        RemoveLocation(lDyingUnit)
    end

    --
    -- Init Triggers
    --

    -- EVENT Spell Effects Starts
    function ability.Init_SpellEffectTrig()

        -- Add Abilities
        ability.spellEffect = {}
        ability.spellEffect[hero.switch.id] = hero.switch.name
        ability.spellEffect[hero.manaExplosion.id] = hero.manaExplosion.name
        ability.spellEffect[hero.manaBomb.id] = hero.manaBomb.name
        ability.spellEffect[hero.unleashMana.id] = hero.unleashMana.name
        ability.spellEffect[hero.soulBind.id] = hero.soulBind.name

        local t = CreateTrigger()
        TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
        TriggerAddAction(t, function()
            local abilityId = GetSpellAbilityId()
            local abilityName = ability.spellEffect[abilityId]

            -- If the Ability ID is a match, find the function
            if not (abilityName == nil) then

                try(function()
                    ability[abilityName]()
                end, "Ability Cast")
            end

        end)
    end

    -- EVENT Unit Dies with Buff
    function ability.Init_SpellUnitDie()

        -- Add Buffs
        ability.buff = {}
        ability.buff[1] = {
            name = "DEATH_" .. hero.soulBind.name,
            id = hero.soulBind.buff
        }

        local t = CreateTrigger()
        TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DAMAGED)
        TriggerAddAction(t, function()

            if GetUnitState(BlzGetEventDamageTarget(), UNIT_STATE_LIFE) - GetEventDamage() < 0 then
                local dyingUnit = BlzGetEventDamageTarget()

                for i = 1, #ability.buff do

                    if UnitHasBuffBJ(dyingUnit, ability.buff[i].id) then
                        ability[ability.buff[i].name]()
                    end
                end
            end
        end)

    end

    ability.Init_SpellEffectTrig()
    ability.Init_SpellUnitDie()
end

--
-- Location Class
-----------------
function init_locationClass()

	loc_Class = {}

	loc_Class.new = function()
		local self = {}
		self.regions = {}

		---Add a new location
		---@param name string
		---@param rect rect
		---@param nextRect rect
		---@param allied boolean
		function self:add(name, rect, nextRect, allied)
			nextRect = nextRect or ""
			allied = allied or false
			self[name] = {
				centerX = GetRectCenterX(rect),
				centerY = GetRectCenterY(rect),
				minX = GetRectMinX(rect),
				maxX = GetRectMaxX(rect),
				minY = GetRectMinY(rect),
				maxY = GetRectMaxY(rect)
			}
			self[name].reg = CreateRegion()
			RegionAddRect(self[name].reg, rect)

			self[name].rect = rect
			self[name].name = name

			self.regions[GetHandleId(self[name].rect)] = name
			self.regions[GetHandleId(self[name].reg)] = name

			if nextRect ~= "" then
				TriggerRegisterEnterRegionSimple(Trig_moveToNext, self[name].reg)
				self[name].next = nextRect
				self[name].allied = allied
				self[name].fed = not allied
			end
		end

		function self:getRandomXY(name)
			local region = self[name]
			return GetRandomReal(region.minX, region.maxX), GetRandomReal(region.minY, region.maxY)
		end

		function self:getRegion(region)
			local regionName = self.regions[GetHandleId(region)]
			return self[regionName]
		end

		return self
	end

end

--
-- AI Classes
-----------------
function init_aiClass()
	-- Create the table for the class definition
	ai_Class = {}

	-- Define the new() function
	ai_Class.new = function()
		local self = {}

		self.heroes = {}
		self.heroGroup = CreateGroup()
		self.heroOptions = {
			"heroA", "heroB", "heroC", "heroD", "heroE", "heroF", "heroG", "heroH", "heroI", "heroJ", "heroK", "heroL"
		}
		self.count = 0
		self.loop = 1
		self.tick = 1

		function self:isAlive(i) return self[i].alive end

		function self:countOfHeroes() return self.count end

		function self:initHero(heroUnit)
			self.count = self.count + 1
			self.tick = (1.00 + (self.count * 0.1)) / self.count

			local i = self.heroOptions[self.count]
			print("Name: " .. i)

			table.insert(self.heroes, i)

			self[i] = {}

			self[i].unit = heroUnit
			GroupAddUnit(self.heroGroup, self[i].unit)

			self[i].id = GetUnitTypeId(heroUnit)
			self[i].four = CC2Four(self[i].id)
			self[i].name = hero[self[i].four]

			self[i].player = GetOwningPlayer(heroUnit)
			self[i].playerNumber = GetConvertedPlayerId(GetOwningPlayer(heroUnit))

			if self[i].playerNumber > 6 then
				self[i].teamNumber = 2
				self[i].teamName = "federation"
				self[i].teamNameEnemy = "allied"
			else
				self[i].teamNumber = 1
				self[i].teamName = "allied"
				self[i].teamNameEnemy = "federation"
			end

			print("Team Number: " .. self[i].teamNumber)

			self[i].heroesFriend = CreateGroup()
			self[i].heroesEnemy = CreateGroup()
			self[i].lifeHistory = {0.00, 0.00, 0.00}

			indexer:add(self[i].unit)
			indexer:addKey(self[i].unit, "heroName", i)
			indexer:addKey(self[i].unit, "heroNumber", self.count)

			self[i].alive = false
			self[i].fleeing = false
			self[i].casting = false
			self[i].castingDuration = -10.00
			self[i].castingDanger = false
			self[i].order = nil
			self[i].castingUlt = false
			self[i].chasing = false
			self[i].defending = false
			self[i].defendingFast = false
			self[i].lowLife = false
			self[i].highDamage = false
			self[i].updateDest = false

			self[i].regionAttacking = nil

			self[i].unitHealing = nil
			self[i].unitAttacking = nil
			self[i].unitDefending = nil
			self[i].unitChasing = nil

			if self[i].four == hero.brawler.four then -- Brawler
				self[i].healthFactor = 1.00
				self[i].manaFactor = 0.02

				self[i].lifeHighPercent = 65.00
				self[i].lifeLowPercent = 20.00
				self[i].lifeLowNumber = 400.00

				self[i].highDamageSingle = 17.00
				self[i].highDamageAverage = 25.00

				self[i].powerBase = 500.00
				self[i].powerLevel = 200.00

				self[i].clumpCheck = true
				self[i].clumpRange = 100.00
				self[i].intelRange = 1100.00
				self[i].closeRange = 500.00

				self[i].strats = {"aggressive", "defensive", "passive"}

			elseif self[i].four == hero.manaAddict.four then -- Mana Addict
				self[i].healthFactor = 1.00
				self[i].manaFactor = 0.75

				self[i].lifeHighPercent = 85.00
				self[i].lifeLowPercent = 25.00
				self[i].lifeLowNumber = 300.00

				self[i].highDamageSingle = 3.00
				self[i].highDamageAverage = 18.00

				self[i].powerBase = 700.00
				self[i].powerLevel = 220.00

				self[i].clumpCheck = true
				self[i].clumpRange = 100.00
				self[i].intelRange = 1000.00
				self[i].closeRange = 400.00

				self[i].strats = {"aggressive", "defensive", "passive"}

			elseif self[i].four == hero.tactition.four then -- Tactition
				self[i].healthFactor = 1.00
				self[i].manaFactor = 0.20

				self[i].lifeHighPercent = 75.00
				self[i].lifeLowPercent = 20.00
				self[i].lifeLowNumber = 350.00

				self[i].highDamageSingle = 17.00
				self[i].highDamageAverage = 25.00

				self[i].powerBase = 500.00
				self[i].powerLevel = 200.00
				self[i].clumpCheck = true
				self[i].clumpRange = 250.00
				self[i].intelRange = 1000.00
				self[i].closeRange = 400.00

				self[i].strats = {"aggressive", "defensive", "passive"}

			elseif self[i].four == hero.timeMage.four then -- Time Mage
				self[i].healthFactor = 1.00
				self[i].manaFactor = 0.10

				self[i].lifeHighPercent = 85.00
				self[i].lifeLowPercent = 25.00
				self[i].lifeLowNumber = 350.00

				self[i].highDamageSingle = 8.00
				self[i].highDamageAverage = 17.00

				self[i].powerBase = 750.00
				self[i].powerLevel = 250.00

				self[i].clumpCheck = true
				self[i].clumpRange = 250.00
				self[i].intelRange = 1100.00
				self[i].closeRange = 700.00

				self[i].strats = {"aggressive", "defensive", "passive"}

			elseif self[i].four == hero.shiftMaster.four then -- Shifter
				self[i].healthFactor = 1.00
				self[i].manaFactor = 0.15

				self[i].lifeHighPercent = 70.00
				self[i].lifeLowPercent = 25.00
				self[i].lifeLowNumber = 350.00

				self[i].highDamageSingle = 17.00
				self[i].highDamageAverage = 25.00

				self[i].powerBase = 500.00
				self[i].powerLevel = 200.00

				self[i].clumpCheck = true
				self[i].clumpRange = 100.00
				self[i].intelRange = 1100.00
				self[i].closeRange = 400.00

				self[i].strats = {"aggressive", "defensive", "passive"}
			end

			local randI = GetRandomInt(1, #self[i].strats)
			self[i].strat = self[i].strats[randI]

			-- TESTING
			-- self[i].strat = "aggressive"
			-- TESTING

			print(self[i].strat)
		end

		-- Update Intel
		function self:updateIntel(i)
			-- Only run if the hero is alive
			if (self[i].alive == true) then
				-- Update info about the AI Hero
				self[i].x = GetUnitX(self[i].unit)
				self[i].y = GetUnitY(self[i].unit)
				self[i].life = GetWidgetLife(self[i].unit)
				self[i].lifePercent = GetUnitLifePercent(self[i].unit)
				self[i].lifeMax = GetUnitState(self[i].unit, UNIT_STATE_MAX_LIFE)
				self[i].mana = GetUnitState(self[i].unit, UNIT_STATE_MANA)
				self[i].manaPercent = GetUnitManaPercent(self[i].unit)
				self[i].manaMax = GetUnitState(self[i].unit, UNIT_STATE_MAX_MANA)
				self[i].level = GetHeroLevel(self[i].unit)
				self[i].currentOrder = OrderId2String(GetUnitCurrentOrder(self[i].unit))

				-- Reset Intel
				self[i].countUnit = 0
				self[i].countUnitFriend = 0
				self[i].countUnitFriendClose = 0
				self[i].countUnitEnemy = 0
				self[i].countUnitEnemyClose = 0
				self[i].powerFriend = 0.00
				self[i].powerEnemy = 0.00

				self[i].unitPowerFriend = nil
				self[i].unitPowerEnemy = nil

				self[i].clumpFriend = nil
				self[i].clumpFriendNumber = 0
				self[i].clumpFriendPower = 0.00
				self[i].clumpEnemy = nil
				self[i].clumpEnemyNumber = 0
				self[i].clumpEnemyPower = 0.00
				self[i].clumpBoth = nil
				self[i].clumpBothNumber = 0
				self[i].clumpBothPower = 0.00

				GroupClear(self[i].heroesFriend)
				GroupClear(self[i].heroesEnemy)

				-- Units around Hero
				local g = CreateGroup()
				local clump = CreateGroup()
				local unitPower = 0.00
				local unitPower = 0.00
				local unitLife = 0.00
				local unitX
				local unitY
				local unitDistance = 0.00
				local unitRange = 0.00
				local unitPowerRangeMultiplier = 0.00
				local u
				local clumpUnit
				local powerAllyTemp, powerAllyNumTemp, powerEnemyTemp, powerEnemyNumTemp

				GroupEnumUnitsInRange(g, self[i].x, self[i].y, self[i].intelRange, nil)

				-- Enumerate through group

				while true do
					u = FirstOfGroup(g)
					if (u == nil) then break end

					-- Unit is alive and not the hero
					if (IsUnitAliveBJ(u) == true and u ~= self[i].unit) then
						self[i].countUnit = self[i].countUnit + 1

						-- Get Unit Details
						unitLife = GetUnitLifePercent(u)
						unitRange = BlzGetUnitWeaponRealField(u, UNIT_WEAPON_RF_ATTACK_RANGE, 0)

						unitX = GetUnitX(u)
						unitY = GetUnitY(u)
						unitDistance = distanceBetweenCoordinates(unitX, unitY, self[i].x, self[i].y)

						-- Get Unit Power
						if (IsUnitType(u, UNIT_TYPE_HERO) == true) then -- is Hero
							unitPower = I2R((GetHeroLevel(u) * 75))

							if IsUnitAlly(u, self[i].player) then -- Add to hero Group
								GroupAddUnit(self[i].heroesFriend, u)
							else
								GroupAddUnit(self[i].heroesEnemy, u)
							end
						else -- Unit is NOT a hero
							unitPower = I2R(GetUnitPointValue(u))
						end

						-- Power range modifier
						if unitDistance < unitRange then
							unitPowerRangeMultiplier = 1.00
						else
							unitPowerRangeMultiplier = 300.00 / (unitDistance - unitRange + 300.00)
						end

						if IsUnitAlly(u, self[i].player) == true then
							-- Update count
							self[i].countUnitFriend = self[i].countUnitFriend + 1
							if unitDistance <= self[i].closeRange then self[i].countUnitFriendClose = self[i].countUnitFriendClose + 1 end

							-- Check to see if unit is the most powerful friend
							if unitPower > self[i].powerFriend then self[i].unitPowerFriend = u end

							-- Relative Power
							self[i].powerFriend = self[i].powerFriend + (unitPower * (unitLife / 100.00) * unitPowerRangeMultiplier)
						else
							-- Update Count
							self[i].countUnitEnemy = self[i].countUnitEnemy + 1
							if unitDistance <= self[i].closeRange then self[i].countUnitEnemyClose = self[i].countUnitEnemyClose + 1 end

							-- Check to see if unit is the most powerful Enemy
							if unitPower > self[i].powerEnemy then self[i].unitPowerEnemy = u end

							-- Relative Power
							self[i].powerEnemy = self[i].powerEnemy + (unitPower * (unitLife / 100.00) * unitPowerRangeMultiplier)
						end

						if self[i].clumpCheck == true then
							powerAllyTemp = 0
							powerEnemyTemp = 0
							powerAllyNumTemp = 0
							powerEnemyNumTemp = 0
							clump = CreateGroup()

							GroupEnumUnitsInRange(clump, unitX, unitY, self[i].clumpRange, nil)

							while true do
								clumpUnit = FirstOfGroup(clump)
								if clumpUnit == nil then break end

								if IsUnitAliveBJ(clumpUnit) and IsUnitType(clumpUnit, UNIT_TYPE_STRUCTURE) == false then
									if IsUnitAlly(clumpUnit, self[i].player) then
										powerAllyTemp = powerAllyTemp + SquareRoot(I2R(GetUnitPointValue(clumpUnit)))
										powerAllyNumTemp = powerAllyNumTemp + 1
									else
										powerEnemyTemp = powerEnemyTemp + SquareRoot(I2R(GetUnitPointValue(clumpUnit)))
										powerEnemyNumTemp = powerEnemyNumTemp + 1
									end
								end

								GroupRemoveUnit(clump, clumpUnit)
							end
							DestroyGroup(clump)

							if powerAllyNumTemp > self[i].clumpFriendNumber then self[i].clumpFriendNumber = powerAllyNumTemp end

							if powerEnemyNumTemp > self[i].clumpEnemyNumber then self[i].clumpEnemyNumber = powerEnemyNumTemp end

							if powerAllyTemp > self[i].clumpFriendPower then
								self[i].clumpFriendPower = powerAllyTemp
								self[i].clumpFriend = u
							end

							if powerEnemyTemp > self[i].clumpEnemyPower then
								self[i].clumpEnemyPower = powerEnemyTemp
								self[i].clumpEnemy = u
							end

							if (powerAllyTemp + powerEnemyTemp) > self[i].clumpBothPower then
								self[i].clumpBothPower = powerAllyTemp + powerEnemyTemp
								self[i].clumpBoth = u
							end
						end
					end

					GroupRemoveUnit(g, u)
				end
				DestroyGroup(g)

				-- Find how much damage the Hero is taking
				self[i].lifeHistory[#self[i].lifeHistory + 1] = self[i].lifePercent

				if #self[i].lifeHistory > 5 then table.remove(self[i].lifeHistory, 1) end

				self[i].clumpBothNumber = self[i].clumpFriendNumber + self[i].clumpEnemyNumber
				self[i].percentLifeSingle = self[i].lifeHistory[#self[i].lifeHistory - 1] -
								                            self[i].lifeHistory[#self[i].lifeHistory]
				self[i].percentLifeAverage = self[i].lifeHistory[1] - self[i].lifeHistory[#self[i].lifeHistory]

				-- Figure out the Heroes Weighted Life
				self[i].weightedLife = (self[i].life * self[i].healthFactor) + (self[i].mana * self[i].manaFactor)
				self[i].weightedLifeMax = (self[i].lifeMax * self[i].healthFactor) + (self[i].manaMax * self[i].manaFactor)
				self[i].weightedLifePercent = (self[i].weightedLife / self[i].weightedLifeMax) * 100.00

				-- Get the Power Level of the surrounding Units
				self[i].powerEnemy = (self[i].powerEnemy * (((100.00 - self[i].weightedLifePercent) / 20.00) + 0.50))
				self[i].powerCount = self[i].powerEnemy - self[i].powerFriend

				-- Raise Hero Confidence Level
				self[i].powerBase = self[i].powerBase + (0.25 * I2R(self[i].level))
				self[i].powerHero = self[i].powerBase + (self[i].powerLevel * I2R(self[i].level))

				-- print(self[i].currentOrder)
				-- print("Clump Enemy: " .. R2S(self[i].clumpEnemyPower))
				-- print("Clump Both: " .. R2S(self[i].clumpBothPower))
				-- print("Clump: " .. GetUnitName(self[i].clumpBoth))
				-- print("Enemies Nearby: " .. self[i].countUnitEnemy)
				-- print("Power Clump Enemy: " .. self[i].powerEnemy)
				-- print("Hero Power: " .. R2S(self[i].powerHero))
				-- print("Power Level: " .. R2S(self[i].powerCount))
			end
		end

		function self:CleanUp(i)
			if (self[i].currentOrder ~= "move" and (self[i].lowLife or self[i].fleeing)) then self:ACTIONtravelToHeal(i) end

			if (self[i].currentOrder ~= "attack" and self[i].currentOrder ~= "move" and self[i].lowLife == false and
							self[i].casting == false) then self:ACTIONtravelToDest(i) end
		end

		-- AI Run Specifics
		function self:STATEAbilities(i)

			if self[i].name == "manaAddict" then
				self:manaAddictAI(i)
			elseif self[i].name == "brawler" then
				self:brawlerAI(i)
			elseif self[i].name == "shiftMaster" then
				self:shiftMasterAI(i)
			elseif self[i].name == "tactition" then
				self:tactitionAI(i)
			elseif self[i].name == "timeMage" then
				self:timeMageAI(i)
			end
		end

		-- Check to see if Hero should try to upgrade
		function self:STATEUpgrade(i)
			local randInt = GetRandomInt(1, 40)

			if randInt == 10 then hero:upgrade(i) end
		end

		function self:STATEDefend(i)
			if self[i].alive and not self[i].lowLife and not self[i].fleeing and not self[i].casting and not self[i].defending then
				local baseCountDanger = CountUnitsInGroup(base[self[i].teamName].gDanger)
				if baseCountDanger > 0 then
					local u, id, defend, unitCount, danger, selectedId, distanceToBase
					local g = CreateGroup()

					GroupAddGroup(base[self[i].teamName].gDanger, g)
					local danger = 0
					local selectedId = nil
					while true do
						u = FirstOfGroup(g)
						if u == nil then break end

						id = GetHandleId(u)
						if base[id].danger > danger then
							danger = base[id].danger
							selectedId = id
						end

						GroupRemoveUnit(g, u)
					end
					DestroyGroup(g)

					id = selectedId

					if self[i].strat == "defensive" and danger > 40 then
						self[i].defending = true
					elseif self[i].strat == "passive" and danger > 120 then
						self[i].defending = true
					elseif self[i].strat == "aggressive" and danger > 400 then
						self[i].defending = true
					end

					if self[i].defending then
						self[i].unitDefending = base[id].unit
						distanceToBase = distanceBetweenCoordinates(self[i].x, self[i].y, base[id].x, base[id].y)

						if distanceToBase > 3500 then self[i].defendingFast = true end

						self:ACTIONtravelToDest(i)
						print("Defending: " .. GetUnitName(self[i].unitDefending))
					end
				end
			end
		end

		function self:STATEDefending(i)
			if self[i].defending then

				local id = GetHandleId(self[i].unitDefending)
				if base[id].danger <= 0 or not IsUnitAliveBJ(self[i].unitDefending) then
					self[i].defending = false
					self[i].defendingFast = false
					self[i].unitDefending = nil
					self:ACTIONattackBase(i)
					print("Stop Defending")

				else
					local distanceToBase = distanceBetweenCoordinates(self[i].x, self[i].y, base[id].x, base[id].y)
					local teleportCooldown = BlzGetUnitAbilityCooldownRemaining(self[i].unit, hero.item.teleportation.abilityId)

					if distanceToBase < 2500 and self[i].defendingFast then
						self[i].defendingFast = false
						self:ACTIONtravelToDest(i)

					elseif distanceToBase > 4000 and teleportCooldown == 0 then
						self:ACTIONtravelToDest(i)
					end
				end
			end
		end

		-- AI has Low Health
		function self:STATELowHealth(i)
			if (self[i].weightedLifePercent < self[i].lifeLowPercent or self[i].weightedLife < self[i].lifeLowNumber) and
							self[i].lowLife == false then
				print("Low Health")
				self[i].lowLife = true
				self[i].fleeing = false
				self[i].chasing = false
				self[i].defending = false
				self[i].highdamage = false
				self[i].updateDest = false

				if self[i].castingDanger == false then
					self[i].casting = false
					self[i].castingCounter = -10.00
					self:ACTIONtravelToHeal(i)
				end
			end
		end

		-- AI Has High Health
		function self:STATEHighHealth(i)
			if self[i].alive == true and self[i].lowLife == true and self[i].weightedLifePercent > self[i].lifeHighPercent then
				print("High Health")
				self[i].lowLife = false
				self[i].fleeing = false

				-- Reward the AI For doing good
				self[i].lifeLowPercent = self[i].lifeLowPercent - 1.00
				self[i].lifeHighPercent = self[i].lifeHighPercent - 1.00

				if self[i].defending then
					self:ACTIONtravelToDest(i)
				else
					local rand = GetRandomInt(1, 3)
					if rand == 1 then
						self:ACTIONattackBase(i)
					else
						self:ACTIONtravelToDest(i)
					end
				end
			end
		end

		-- AI is Dead
		function self:STATEDead(i)
			if self[i].alive == true and IsUnitAliveBJ(self[i].unit) == false then
				print("Dead")
				self[i].alive = false
				self[i].lowLife = false
				self[i].fleeing = false
				self[i].chasing = false
				self[i].defending = false
				self[i].highdamage = false
				self[i].updateDest = false
				self[i].casting = false
				self[i].castingUlt = false
				self[i].defending = false
				self[i].defendingFast = false
				self[i].castingCounter = -10.00

				-- Punish the AI for screwing up.  IT WILL FEAR DEATH!!!
				self[i].lifeLowPercent = self[i].lifeLowPercent + 4.00
				self[i].powerBase = self[i].powerBase / 2

				if self[i].lifeHighPercent < 98.00 then self[i].lifeHighPercent = self[i].lifeHighPercent + 2.00 end
			end
		end

		-- AI has Revived
		function self:STATERevived(i)
			if self[i].alive == false and IsUnitAliveBJ(self[i].unit) == true then
				print("Revived")
				self[i].alive = true
				self:ACTIONattackBase(i)
			end
		end

		-- AI Fleeing
		function self:STATEFleeing(i)
			if (self[i].powerHero < self[i].powerCount or self[i].percentLifeSingle > self[i].highDamageSingle or
							self[i].percentLifeAverage > self[i].highDamageAverage) and self[i].lowLife == false and self[i].fleeing == false then
				print("Flee")
				self[i].fleeing = true

				if self[i].castingDanger == false then
					self[i].casting = false
					self[i].castingCounter = -10.00
					self:ACTIONtravelToHeal(i)
				end
			end
		end

		-- AI Stop Fleeing
		function self:STATEStopFleeing(i)
			if self[i].powerHero > self[i].powerCount and self[i].percentLifeSingle <= 0.0 and self[i].percentLifeAverage <=
							self[i].highDamageAverage and self[i].lowLife == false and self[i].fleeing == true then
				print("Stop Fleeing")
				self[i].fleeing = false

				self:ACTIONtravelToDest(i)
			end
		end

		-- AI Casting Spell
		function self:STATEcastingSpell(i)
			if self[i].casting == true then

				if self[i].castingDuration > 0.00 then
					print("Casting Spell: " .. self[i].spellCast.name .. " - " .. self[i].castingDuration)

					self[i].castingDuration = self[i].castingDuration - (self.tick * self.count)
				else
					print("Stopped Cast")
					self[i].casting = false
					self[i].castingDuration = 0
					self[i].spellCast = {}
					self[i].castingDanger = false
					self:ACTIONtravelToDest(i)
				end
			end
		end

		--
		-- ACTIONS
		--

		function self:castSpell(i, spellCast, danger)

			if not self[i].casting then
				danger = danger or false
				if spellCast ~= nil then
					if (self[i].fleeing == true or self[i].lowhealth == true) and danger == false then
						self:ACTIONtravelToDest(i)
					else
						print("Spell Cast")
						self[i].casting = true

						if danger then self[i].castingDanger = true end

						self[i].spellCast = spellCast

						if self[i].spellCast.instant then
							self[i].castingDuration = 1
						else
							self[i].castingDuration = self[i].spellCast.castTime[1]
						end

					end
				end
			end
		end

		function self:ACTIONtravelToHeal(i)
			local healDistance = 100000000.00
			local healDistanceNew = 0.00
			local unitX, unitY, u
			local g = CreateGroup()

			GroupAddGroup(base[self[i].teamName].gHealing, g)
			while true do
				u = FirstOfGroup(g)
				if u == nil then break end

				unitX = GetUnitX(u)
				unitY = GetUnitY(u)
				healDistanceNew = distanceBetweenCoordinates(self[i].x, self[i].y, unitX, unitY)

				if healDistanceNew < healDistance then
					healDistance = healDistanceNew
					self[i].unitHealing = u
				end

				GroupRemoveUnit(g, u)
			end
			DestroyGroup(g)

			unitX = GetUnitX(self[i].unitHealing)
			unitY = GetUnitY(self[i].unitHealing)

			-- print("x:" .. unitX .. "y:" .. unitY)

			IssuePointOrder(self[i].unit, "move", unitX, unitY)
		end

		function self:ACTIONtravelToDest(i)
			local unitX, unitY

			if not self[i].casting then
				if self[i].lowLife == true or self[i].fleeing == true then
					unitX = GetUnitX(self[i].unitHealing)
					unitY = GetUnitY(self[i].unitHealing)
					IssuePointOrder(self[i].unit, "move", unitX, unitY)

				elseif self[i].defending then
					unitX = GetUnitX(self[i].unitDefending)
					unitY = GetUnitY(self[i].unitDefending)

					if not self:teleportCheck(i, unitX, unitY) then
						if self[i].defendingFast == true then
							IssuePointOrder(self[i].unit, "move", unitX, unitY)
						else
							IssuePointOrder(self[i].unit, "attack", unitX, unitY)
						end
					end

				else
					if not IsUnitAliveBJ(self[i].unitAttacking) then
						self:ACTIONattackBase(i)
						return
					end
					unitX = GetUnitX(self[i].unitAttacking)
					unitY = GetUnitY(self[i].unitAttacking)
					if not self:teleportCheck(i, unitX, unitY) then IssuePointOrder(self[i].unit, "attack", unitX, unitY) end
				end
			end

		end

		function self:ACTIONattackBase(i)

			if not self[i].casting then
				local regionAdvantage = 0
				local regions = {"top", "middle", "bottom"}
				local regionsPick = {}
				local baseAdvantage

				if self[i].strat == "aggressive" then
					baseAdvantage = self[i].teamName
				elseif self[i].strat == "defensive" then
					baseAdvantage = self[i].teamNameEnemy
				end

				if self[i].strat == "passive" then
					self[i].regionAttacking = regions[GetRandomInt(1, #regions)]
				else
					for a = 1, 3 do
						if regionAdvantage < base[regions[a]][baseAdvantage].advantage then
							regionAdvantage = base[regions[a]][baseAdvantage].advantage
							self[i].regionAttacking = regions[a]

							regionsPick = {}
							table.insert(regionsPick, regions[a])

						elseif regionAdvantage == base[regions[a]][baseAdvantage].advantage then

							table.insert(regionsPick, regions[a])

						end
					end

					if #regionsPick > 1 then self[i].regionAttacking = regionsPick[GetRandomInt(1, #regionsPick)] end

				end

				self[i].unitAttacking = GroupPickRandomUnit(base[self[i].regionAttacking][self[i].teamNameEnemy].g)

				local unitX = GetUnitX(self[i].unitAttacking)
				local unitY = GetUnitY(self[i].unitAttacking)
				print("Attacking: " .. self[i].regionAttacking .. " Base: " .. GetUnitName(self[i].unitAttacking))

				if not self:teleportCheck(i, unitX, unitY) then IssuePointOrder(self[i].unit, "attack", unitX, unitY) end
			end
		end

		function self:getHeroData(unit) return self[indexer:get(unit).heroName] end

		-- Teleport Stuff
		function self:teleportCheck(i, destX, destY)
			local destDistance = 100000000.00
			local destDistanceNew = 0.00
			local unitX, unitY, u
			local teleportUnit
			local g = CreateGroup()
			local heroUnit = self[i].unit

			local distanceOrig = distanceBetweenCoordinates(self[i].x, self[i].y, destX, destY)
			local teleportCooldown = BlzGetUnitAbilityCooldownRemaining(heroUnit, hero.item.teleportation.abilityId)

			if teleportCooldown == 0 and UnitHasItemOfTypeBJ(heroUnit, hero.item.teleportation.id) then

				GroupAddGroup(base[self[i].teamName].gTeleport, g)
				while true do
					u = FirstOfGroup(g)
					if u == nil then break end

					unitX = GetUnitX(u)
					unitY = GetUnitY(u)
					destDistanceNew = distanceBetweenCoordinates(destX, destY, unitX, unitY)

					if destDistanceNew < destDistance then
						destDistance = destDistanceNew
						teleportUnit = u
					end

					GroupRemoveUnit(g, u)
				end
				DestroyGroup(g)

				if distanceOrig - 2000 > destDistanceNew then

					print("Teleporting")

					-- PingMinimap(unitX, unitY, 15)

					UnitUseItemTarget(heroUnit, GetItemOfTypeFromUnitBJ(heroUnit, hero.item.teleportation.id), teleportUnit)

					self:castSpell(i, hero.item.teleportation)

					return true
				else
					return false
				end
			else
				return false
			end

		end

		-- Hero AI

		function self:manaAddictAI(i)
			local curSpell

			--  Always Cast
			-------

			-- Mana Shield
			if self[i].casting then return false end

			curSpell = hero:spell(self[i], "manaShield")
			if curSpell.castable == true and curSpell.hasBuff == false then
				print(curSpell.name)
				IssueImmediateOrder(self[i].unit, curSpell.order)
				self:castSpell(i, curSpell)
				return true
			end

			--  Cast available all the time
			-------
			-- Mana Drain
			curSpell = hero:spell(self[i], "manaExplosion")
			if self[i].countUnitEnemyClose > 3 and self[i].manaPercent < 90.00 and curSpell.castable == true then
				print(curSpell.name)
				IssueImmediateOrder(self[i].unit, curSpell.order)
				self:castSpell(i, curSpell)
				return true
			end

			-- Normal Cast
			--------

			if self[i].lowLife == false and self[i].fleeing == false then
				-- Frost Nova
				curSpell = hero:spell(self[i], "manaBomb")
				if self[i].clumpEnemyPower >= 40 and curSpell.castable == true and curSpell.manaLeft > 80 then
					print(curSpell.name)
					IssuePointOrder(self[i].unit, curSpell.order, GetUnitX(self[i].clumpEnemy), GetUnitY(self[i].clumpEnemy))
					self:castSpell(i, curSpell)
					return true
				end
			end
		end

		function self:brawlerAI(i)
			local curSpell

			if self[i].casting == false then end
		end

		-- Shift Master Spell AI
		function self:shiftMasterAI(i)
			local curSpell

			if not self[i].casting then

				-- Custom Intel
				local g = CreateGroup()
				local gUnits = CreateGroup()
				local gIllusions = CreateGroup()
				local u, uTemp, unitsNearby
				local illusionsNearby = 0

				-- Find all Nearby Illusions
				GroupEnumUnitsInRange(g, self[i].x, self[i].y, 600.00, nil)

				GroupAddGroup(g, gIllusions)
				while true do
					u = FirstOfGroup(g)
					if (u == nil) then break end

					if IsUnitIllusion(u) then illusionsNearby = illusionsNearby + 1 end
					GroupRemoveUnit(g, u)
				end
				DestroyGroup(g)

				if self[i].fleeing or self[i].lowLife then

					-- Check if there are illusions Nearby
					if illusionsNearby > 0 then
						curSpell = hero:spell(self[i], "switch")
						if curSpell.castable and curSpell.manaLeft > 0 and not self[i].casting then
							print(curSpell.name)

							u = GroupPickRandomUnit(gIllusions)
							GroupEnumUnitsInRange(gUnits, GetUnitX(u), GetUnitY(u), 350, nil)
							unitsNearby = 0
							while true do
								uTemp = FirstOfGroup(g)
								if (uTemp == nil) then break end

								if not IsUnitAlly(uTemp, GetOwningPlayer(self[i].unit)) then unitsNearby = unitsNearby + 1 end

								GroupRemoveUnit(g, uTemp)
							end
							DestroyGroup(g)

							if unitsNearby < self[i].countUnitEnemyClose then
								IssuePointOrderById(self[i].unit, oid.reveal, GetUnitX(u), GetUnitY(u))
							end
						end
					end

					curSpell = hero:spell(self[i], "shift")
					if curSpell.castable == true and curSpell.manaLeft > 0 then
						print(curSpell.name)
						IssueImmediateOrder(self[i].unit, curSpell.order)
						self:castSpell(i, curSpell)
					end
				end

				-- Normal Cast Spells
				if self[i].casting == false and self[i].lowLife == false and self[i].fleeing == false then

					-- Shift
					curSpell = hero:spell(self[i], "shift")
					if self[i].countUnitEnemyClose >= 2 and curSpell.castable == true and curSpell.manaLeft > 45 then
						print(curSpell.name)

						IssueImmediateOrder(self[i].unit, curSpell.order)
						self:castSpell(i, curSpell)
					end

					-- Falling Strike
					curSpell = hero:spell(self[i], "fallingStrike")
					if (self[i].powerEnemy > 250.00 or self[i].clumpEnemyPower > 80.00) and curSpell.castable == true and
									curSpell.manaLeft > 45 then
						print(curSpell.name)

						if self[i].powerEnemy > 250.00 then
							IssuePointOrder(self[i].unit, curSpell.order, GetUnitX(self[i].unitPowerEnemy), GetUnitY(self[i].unitPowerEnemy))
						else
							IssuePointOrder(self[i].unit, curSpell.order, GetUnitX(self[i].clumpEnemy), GetUnitY(self[i].clumpEnemy))
						end

						self:castSpell(i, curSpell)
					end

					-- Shift Storm
					curSpell = hero:spell(self[i], "shiftStorm")
					if self[i].countUnitEnemy >= 6 and curSpell.castable == true and curSpell.manaLeft > 30 then
						print(curSpell.name)
						IssueImmediateOrder(self[i].unit, curSpell.order)
						self:castSpell(i, curSpell)
					end
				end

				-- Clean up custom Intel
				DestroyGroup(gIllusions)
			end
		end

		function self:tactitionAI(i)
			local curSpell, u

			-- Iron Defense
			curSpell = hero:spell(self[i], "ironDefense")
			if self[i].countUnitEnemy >= 2 and curSpell.castable == true and curSpell.manaLeft > 20 and self[i].lifePercent < 80 and
							not self[i].casting then
				print(curSpell.name)
				IssueImmediateOrder(self[i].unit, curSpell.order)
				self:castSpell(i, curSpell)
			end

			if not self[i].fleeing and not self[i].lowLife then
				-- Bolster
				curSpell = hero:spell(self[i], "bolster")
				if self[i].countUnitFriendClose >= 1 and curSpell.castable == true and curSpell.manaLeft > 50 and
								not self[i].casting then
					print(curSpell.name)
					IssueImmediateOrder(self[i].unit, curSpell.order)
					self:castSpell(i, curSpell)
				end

				-- Attack!
				curSpell = hero:spell(self[i], "attack")
				if CountUnitsInGroup(self[i].heroesEnemy) > 0 and curSpell.castable == true and curSpell.manaLeft > 40 and
								not self[i].casting then

					print(curSpell.name)
					u = GroupPickRandomUnit(self[i].heroesEnemy)
					IssuePointOrder(self[i].unit, curSpell.order, GetUnitX(u), GetUnitY(u))
					IssueImmediateOrder(self[i].unit, curSpell.order)
					self:castSpell(i, curSpell)
				end
			end
		end

		function self:timeMageAI(i)
			if self[i].casting then return end

			local curSpell, x, y, u

			if not self[i].fleeing and not self[i].lowLife then

				-- chrono Atrophy
				curSpell = hero:spell(self[i], "chronoAtrophy")
				if self[i].clumpBothNumber >= 7 and curSpell.castable and curSpell.manaLeft > 30 then
					print(curSpell.name)

					x = GetUnitX(self[i].clumpBoth)
					y = GetUnitY(self[i].clumpBoth)
					IssuePointOrder(self[i].unit, curSpell.order, x, y)
					self:castSpell(i, curSpell)
					return
				end

				-- Decay
				curSpell = hero:spell(self[i], "decay")
				if CountUnitsInGroup(self[i].heroesEnemies) > 0 and curSpell.castable == true and curSpell.manaLeft > 20 then
					print(curSpell.name)

					u = GroupPickRandomUnit(self[i].heroesEnemies)
					IssuePointOrder(self[i].unit, curSpell.order, GetUnitX(u), GetUnitY(u))
					self:castSpell(i, curSpell)
					return
				end

				-- Time Travel
				curSpell = hero:spell(self[i], "timeTravel")
				if self[i].clumpBothNumber >= 4 and curSpell.castable and curSpell.manaLeft > 30 then
					print(curSpell.name)

					x = GetUnitX(self[i].clumpBoth)
					y = GetUnitY(self[i].clumpBoth)
					IssuePointOrder(self[i].unit, curSpell.order, x, y)
					self:castSpell(i, curSpell)
					return
				end
			end
		end

		return self
	end
end

--
-- Hero Skills / Abilities Class
-----------------
function init_heroClass()
	-- Create Class Definition
	hero_Class = {}

	-- Define new() function
	hero_Class.new = function()
		local self = {}

		self.players = {}
		for i = 1, 12 do self.players[i] = {picked = false} end

		self.items = {"teleportation", "tank"}
		self.item = {}

		self.item.teleportation = {
			name = "teleportation",
			properName = "Teleport",
			four = "I000",
			id = FourCC("I000"),
			abilityFour = "A01M",
			abilityId = FourCC("A01M"),
			order = "",
			instant = false,
			castTime = {6}
		}

		self.item.tank = {name = "tank", properName = "Tank", four = "I005", id = FourCC("I005"), order = "", instant = true}

		self.item.mage = {name = "mage", properName = "Mage", four = "I006", id = FourCC("I006"), order = "", instant = true}

		self.item[self.item.teleportation.id] = self.item[self.item.teleportation.name]
		self.item[self.item.tank.id] = self.item[self.item.tank.name]
		self.item[self.item.mage.id] = self.item[self.item.mage.name]

		self.heroes = {"brawler", "manaAddict", "shiftMaster", "tactition", "timeMage"}

		self.E001 = "brawler"
		self.brawler = {}
		self.brawler.four = "E001"
		self.brawler.fourAlter = "h00I"
		self.brawler.id = FourCC(self.brawler.four)
		self.brawler.idAlter = FourCC(self.brawler.fourAlter)
		self.brawler.spellLearnOrder = {"unleashRage", "drain", "warstomp", "bloodlust"}
		self.brawler.upgrades = {}
		self.brawler.startingSpells = {}
		self.brawler.permanentSpells = {}
		self.brawler.startingItems = {"teleportation", "tank"}
		self.drain = {
			name = "drain",
			properName = "Drain",
			four = "A01Y",
			id = FourCC("A01Y"),
			buff = 0,
			order = "stomp",
			ult = false,
			instant = false,
			castTime = {6, 6, 6, 6, 6, 6}
		}
		self.bloodlust = {
			name = "bloodlust",
			properName = "Bloodlust",
			four = "A007",
			id = FourCC("A007"),
			buff = 0,
			order = "stomp",
			ult = false,
			instant = true
		}
		self.warstomp = {
			name = "warstomp",
			properName = "War Stomp",
			four = "A002",
			id = FourCC("A002"),
			buff = 0,
			order = "stomp",
			ult = false,
			instant = true
		}
		self.unleashRage = {
			name = "unleashRage",
			properName = "Unleassh Rage",
			four = "A029",
			id = FourCC("A029"),
			buff = 0,
			order = "stomp",
			ult = true,
			instant = false,
			castTime = {6, 6, 6, 6, 6, 6}
		}

		self[self.drain.four] = self.drain.name
		self[self.bloodlust.four] = self.bloodlust.name
		self[self.warstomp.four] = self.warstomp.name
		self[self.unleashRage.four] = self.unleashRage.name

		self.H009 = "tactition"
		self.tactition = {}
		self.tactition.four = "H009"
		self.tactition.fourAlter = "h00Y"
		self.tactition.id = FourCC(self.tactition.four)
		self.tactition.idAlter = FourCC(self.tactition.fourAlter)
		self.tactition.spellLearnOrder = {"inspire", "raiseBanner", "ironDefense", "bolster", "attack"}
		self.tactition.startingSpells = {"raiseBanner"}
		self.brawler.upgrades = {}
		self.tactition.permanentSpells = {}
		self.tactition.startingItems = {"teleportation", "tank"}
		self.ironDefense = {
			name = "ironDefense",
			properName = "Iron Defense",
			four = "A019",
			id = FourCC("A019"),
			buff = 0,
			order = "roar",
			ult = false,
			instant = true
		}
		self.raiseBanner = {
			name = "raiseBanner",
			properName = "Raise Banner",
			four = "A01I",
			id = FourCC("A01I"),
			buff = 0,
			order = "healingward",
			ult = false,
			instant = true
		}
		self.attack = {
			name = "attack",
			properName = "Attack!",
			four = "A01B",
			id = FourCC("A01B"),
			buff = 0,
			order = "fingerofdeath",
			ult = false,
			instant = true
		}
		self.bolster = {
			name = "bolster",
			properName = "Bolster",
			four = "A01Z",
			id = FourCC("A01Z"),
			buff = 0,
			order = "tranquility",
			ult = false,
			instant = true
		}
		self.inspire = {
			name = "inspire",
			properName = "Inspire",
			four = "A042",
			id = FourCC("A042"),
			buff = 0,
			order = "channel",
			ult = true,
			instant = true
		}

		self[self.ironDefense.four] = self.ironDefense.name
		self[self.raiseBanner.four] = self.raiseBanner.name
		self[self.attack.four] = self.attack.name
		self[self.bolster.four] = self.bolster.name
		self[self.inspire.four] = self.inspire.name

		self.E002 = "shiftMaster"
		self.shiftMaster = {}
		self.shiftMaster.four = "E002"
		self.shiftMaster.fourAlter = "h00Q"
		self.shiftMaster.id = FourCC(self.shiftMaster.four)
		self.shiftMaster.idAlter = FourCC(self.shiftMaster.fourAlter)
		self.shiftMaster.spellLearnOrder = {"shiftStorm", "felForm", "switch", "fallingStrike", "shift"}
		self.shiftMaster.startingSpells = {"shift"}
		self.brawler.upgrades = {"shadeStrength", "swiftMoves", "swiftAttacks"}

		self.shiftMaster.permanentSpells = {
			"felForm", "fallingStrike", "shadeStrength", "swiftMoves", "swiftAttacks", "attributeStiftMaster"
		}
		self.shiftMaster.startingItems = {"teleportation", "tank"}
		self.attributeStiftMaster = {
			name = "attributeStiftMaster",
			properName = "Attribute Bonus",
			four = "A031",
			id = FourCC("A031"),
			buff = 0,
			order = "",
			ult = false
		}
		self.shadeStrength = {
			name = "shadeStrength",
			properName = "Shade Strength",
			four = "A037",
			id = FourCC("A037"),
			buff = 0,
			order = "",
			ult = false
		}
		self.swiftMoves = {
			name = "swiftMoves",
			properName = "Swift Moves",
			four = "A056",
			id = FourCC("A056"),
			buff = 0,
			order = "",
			ult = false
		}
		self.swiftAttacks = {
			name = "swiftAttacks",
			properName = "Swift Attacks",
			four = "A030",
			id = FourCC("A030"),
			buff = 0,
			order = "",
			ult = false
		}

		self.switch = {
			name = "switch",
			properName = "Switch",
			four = "A03U",
			id = FourCC("A03U"),
			buff = 0,
			order = "reveal",
			ult = false,
			instant = true
		}

		self.shift = {
			name = "shift",
			properName = "Shift",
			four = "A03T",
			id = FourCC("A03T"),
			buff = 0,
			order = "berserk",
			ult = false,
			instant = true
		}

		self.fallingStrike = {
			name = "fallingStrike",
			properName = "Falling Strike",
			four = "A059",
			id = FourCC("A059"),
			buff = 0,
			order = "thunderbolt",
			ult = false,
			instant = false,
			castTime = {1.5, 1.5, 1.5, 1.5, 1.5, 1.5}
		}

		self.shiftStorm = {
			name = "shiftStorm",
			properName = "Shift Storm",
			four = "A03C",
			id = FourCC("A03C"),
			buff = 0,
			order = "channel",
			ult = true,
			instant = true
		}

		self.felForm = {
			name = "felForm",
			properName = "Fel Form",
			four = "A02Y",
			id = FourCC("A02Y"),
			buff = 0,
			order = "metamorphosis",
			ult = true,
			instant = true
		}

		self[self.switch.four] = self.switch.name
		self[self.shift.four] = self.shift.name
		self[self.fallingStrike.four] = self.fallingStrike.name
		self[self.shiftStorm.four] = self.shiftStorm.name
		self[self.felForm.four] = self.felForm.name

		self.H00R = "manaAddict"
		self.manaAddict = {}
		self.manaAddict.four = "H00R"
		self.manaAddict.fourAlter = "h00B"
		self.manaAddict.id = FourCC(self.manaAddict.four)
		self.manaAddict.idAlter = FourCC(self.manaAddict.fourAlter)
		self.manaAddict.spellLearnOrder = {"starfall", "manaShield", "manaExplosion", "manaBomb", "soulBind"}
		self.manaAddict.startingSpells = {"manaShield"}
		self.manaAddict.permanentSpells = {}
		self.manaAddict.startingItems = {"teleportation", "mage"}
		self.manaShield = {
			name = "manaShield",
			properName = "Mana Shield",
			four = "A001",
			id = FourCC("A001"),
			buff = FourCC("BNms"),
			order = "manashieldon",
			ult = false,
			instant = true
		}
		self.manaBomb = {
			name = "manaBomb",
			properName = "Mana bomb",
			four = "A03P",
			id = FourCC("A03P"),
			buff = 0,
			order = "flamestrike",
			ult = false,
			instant = true
		}
		self.manaExplosion = {
			name = "manaExplosion",
			properName = "Mana Explosion",
			four = "A018",
			id = FourCC("A018"),
			buff = 0,
			order = "thunderclap",
			ult = false,
			instant = true
		}
		self.soulBind = {
			name = "soulBind",
			properName = "Soul Bind",
			four = "A015",
			id = FourCC("A015"),
			buff = FourCC("B00F"),
			order = "custerrockets",
			ult = false,
			instant = true
		}
		self.unleashMana = {
			name = "unleashMana",
			properName = "Unleash Mana",
			four = "A03S",
			id = FourCC("A03S"),
			buff = 0,
			order = "starfall",
			ult = true,
			instant = false,
			castTime = {15, 15, 15, 15, 15, 15}
		}

		self[self.manaShield.four] = self.manaShield.name
		self[self.manaBomb.four] = self.manaBomb.name
		self[self.manaExplosion.four] = self.manaExplosion.name
		self[self.soulBind.four] = self.soulBind.name
		self[self.unleashMana.four] = self.unleashMana.name

		self.H00J = "timeMage"
		self.timeMage = {}
		self.timeMage.four = "H00J"
		self.timeMage.fourAlter = "h00Z"
		self.timeMage.id = FourCC(self.timeMage.four)
		self.timeMage.idAlter = FourCC(self.timeMage.fourAlter)
		self.timeMage.spellLearnOrder = {"paradox", "timeTravel", "chronoAtrophy", "decay"}
		self.timeMage.startingSpells = {}
		self.timeMage.permanentSpells = {}
		self.timeMage.startingItems = {"teleportation", "mage"}
		self.chronoAtrophy = {
			name = "chronoAtrophy",
			properName = "Chrono Atrophy",
			four = "A04K",
			id = FourCC("A04K"),
			buff = 0,
			order = "flamestrike",
			ult = false,
			instant = true
		}
		self.decay = {
			name = "decay",
			properName = "Decay",
			four = "A032",
			id = FourCC("A032"),
			buff = 0,
			order = "shadowstrike",
			ult = false,
			instant = true
		}
		self.timeTravel = {
			name = "timeTravel",
			properName = "Time Travel",
			four = "A04P",
			id = FourCC("A04P"),
			buff = 0,
			order = "clusterrockets",
			ult = false,
			instant = true
		}
		self.paradox = {
			name = "paradox",
			properName = "Paradox",
			four = "A04N",
			id = FourCC("A04N"),
			buff = 0,
			order = "tranquility",
			ult = true,
			instant = false,
			castTime = {10, 10, 10}
		}

		self[self.chronoAtrophy.four] = self.chronoAtrophy.name
		self[self.decay.four] = self.decay.name
		self[self.timeTravel.four] = self.timeTravel.name
		self[self.paradox.four] = self.paradox.name

		function self:spell(heroUnit, spellName)
			local spellDetails = self[spellName]
			spellDetails.level = self:level(heroUnit, spellName)
			spellDetails.cooldown = self:cooldown(heroUnit, spellName)
			spellDetails.hasBuff = self:hasBuff(heroUnit, spellName)
			spellDetails.mana = self:mana(heroUnit, spellName, spellDetails.level)
			spellDetails.manaLeft = heroUnit.mana - spellDetails.mana

			if spellDetails.level > 0 and spellDetails.cooldown == 0 and spellDetails.manaLeft >= 0 then
				spellDetails.castable = true
			else
				spellDetails.castable = false
			end

			-- print(spellName .. " : " .. spellDetails.level)
			-- print("Castable: " .. tostring(spellDetails.castable))

			return spellDetails
		end

		function self:level(heroUnit, spellName) return GetUnitAbilityLevel(heroUnit.unit, self[spellName].id) end

		function self:cooldown(heroUnit, spellName)
			return BlzGetUnitAbilityCooldownRemaining(heroUnit.unit, self[spellName].id)
		end

		function self:mana(heroUnit, spellName, level)
			return BlzGetUnitAbilityManaCost(heroUnit.unit, self[spellName].id, level)
		end

		function self:hasBuff(heroUnit, spellName)
			if self[spellName].buff == 0 then
				return false
			else
				return UnitHasBuffBJ(heroUnit.unit, self[spellName].buff)
			end
		end

		function self:levelUp(unit)
			local heroFour = CC2Four(GetUnitTypeId(unit))
			local heroName = self[heroFour]
			local heroLevel = GetHeroLevel(unit)
			local heroPlayer = GetOwningPlayer(unit)
			local spells = self[heroName]

			AdjustPlayerStateBJ(50, heroPlayer, PLAYER_STATE_RESOURCE_LUMBER)
			SetPlayerTechResearchedSwap(FourCC("R005"), heroLevel - 1, heroPlayer)
			
			if (ModuloInteger(heroLevel, 4) == 0) then
				SetPlayerTechResearchedSwap(FourCC("R006"), heroLevel / 4, heroPlayer)
			end

			-- Remove Ability Points
			if (heroLevel < 15 and ModuloInteger(heroLevel, 2) ~= 0) then
				ModifyHeroSkillPoints(unit, bj_MODIFYMETHOD_SUB, 1)
			elseif (heroLevel < 25 and heroLevel >= 15 and ModuloInteger(heroLevel, 3) ~= 0) then
				ModifyHeroSkillPoints(unit, bj_MODIFYMETHOD_SUB, 1)
			elseif (heroLevel >= 25 and ModuloInteger(heroLevel, 4) ~= 0) then
				ModifyHeroSkillPoints(unit, bj_MODIFYMETHOD_SUB, 1)
			end

			print("Level Up, " .. heroFour .. " Level: " .. heroLevel)

			-- Learn Skill if the Hero is owned by a Computer
			if GetPlayerController(heroPlayer) == MAP_CONTROL_COMPUTER then
				local unspentPoints = GetHeroSkillPoints(unit)

				print("Unspent Abilities: " .. unspentPoints)

				if unspentPoints > 0 then
					for i = 1, #spells.spellLearnOrder do
						SelectHeroSkill(unit, self[spells.spellLearnOrder[i]].id)

						if GetHeroSkillPoints(unit) == 0 then return end
					end
				end
			end
		end

		function self:upgrade(unit) IssueUpgradeOrderByIdBJ(udg_AI_PursueHero[0], FourCC("R00D")) end

		function self:setupHero(unit)
			local heroFour = CC2Four(GetUnitTypeId(unit))
			local heroName = self[heroFour]
			local player = GetOwningPlayer(unit)
			local playerNumber = GetConvertedPlayerId(player)
			local heroLevel = GetHeroLevel(unit)
			local spells = self[heroName]
			local picked, u, x, y, newAlter
			local g = CreateGroup()

			self.players[playerNumber] = {}

			-- Get home Base Location
			if playerNumber < 7 then
				x = GetRectCenterX(gg_rct_Left_Castle)
				y = GetRectCenterY(gg_rct_Left_Castle)
			else
				x = GetRectCenterX(gg_rct_Right_Castle)
				y = GetRectCenterY(gg_rct_Right_Castle)
			end

			-- Move hero to home base
			SetUnitPosition(unit, x, y)

			-- Give the hero the required Skill points for the spells
			ModifyHeroSkillPoints(unit, bj_MODIFYMETHOD_SET, #spells.startingSpells + 1)
			for i = 1, #spells.startingSpells do
				picked = self[spells.startingSpells[i]]

				-- Have the hero learn the spell
				SelectHeroSkill(unit, picked.id)
			end

			-- Add the Permanent Spells for the Hero
			for i = 1, #spells.permanentSpells do
				picked = self[spells.permanentSpells[i]]

				-- Make the Spell Permanent
				UnitMakeAbilityPermanent(unit, true, picked.id)
			end

			-- Give the Hero starting Items
			for i = 1, #spells.startingItems do
				picked = self.item[spells.startingItems[i]]

				-- Make the Spell Permanent
				UnitAddItemById(unit, picked.id)
			end

			-- Set up Alter
			g = GetUnitsOfPlayerAndTypeId(player, FourCC("halt"))
			while true do
				u = FirstOfGroup(g)
				if u == nil then break end

				-- Replace Unit Alter
				ReplaceUnitBJ(u, self[heroName].idAlter, bj_UNIT_STATE_METHOD_MAXIMUM)
				newAlter = GetLastReplacedUnitBJ()
				GroupRemoveUnit(g, u)
			end
			DestroyGroup(g)

			self.players[playerNumber].picked = true
			self.players[playerNumber].cameraLock = false
			self.players[playerNumber].alter = newAlter
			self.players[playerNumber].hero = unit
		end

		return self
	end
end

--
-- Unit Indexer Class
-----------------
function init_indexerClass()
	indexer_Class = {}

	indexer_Class.new = function()
		local self = {}

		self.data = {}

		function self:add(unit, order)
			order = order or "attack"
			local unitId = GetHandleId(unit)

			if self.data[unitId] == nil then
				local x = GetUnitX(unit)
				local y = GetUnitY(unit)

				self.data[unitId] = {}
				self.data[unitId] = {xSpawn = x, ySpawn = y, order = order, unit = unit, sfx = {}}
			end
		end

		function self:updateEnd(unit, x, y)
			local unitId = GetHandleId(unit)
			self.data[unitId].xEnd = x
			self.data[unitId].yEnd = y
		end

		function self:order(unit, order)

			local unitId = GetHandleId(unit)
			local alliedForce = IsUnitInForce(unit, udg_PLAYERGRPallied)
			local p
			local x = self.data[unitId].xEnd
			local y = self.data[unitId].yEnd
			order = order or self.data[unitId].order

			if self.data[unitId].xEnd == nil or self.data[unitId].yEnd == nil then

				if RectContainsUnit(gg_rct_Big_Top_Left, unit) or RectContainsUnit(gg_rct_Big_Top_Left_Center, unit) or
								RectContainsUnit(gg_rct_Big_Top_Right_Center, unit) or RectContainsUnit(gg_rct_Big_Top_Right, unit) then

					if alliedForce then
						p = GetRandomLocInRect(gg_rct_Right_Start_Top)
					else
						p = GetRandomLocInRect(gg_rct_Left_Start_Top)
					end

				elseif RectContainsUnit(gg_rct_Big_Middle_Left, unit) or RectContainsUnit(gg_rct_Big_Middle_Left_Center, unit) or
								RectContainsUnit(gg_rct_Big_Middle_Right_Center, unit) or RectContainsUnit(gg_rct_Big_Middle_Right, unit) then

					if alliedForce then
						p = GetRandomLocInRect(gg_rct_Right_Start)
					else
						p = GetRandomLocInRect(gg_rct_Left_Start)
					end

				else

					if alliedForce then
						p = GetRandomLocInRect(gg_rct_Right_Start_Bottom)
					else
						p = GetRandomLocInRect(gg_rct_Left_Start_Bottom)
					end
				end

				x = GetLocationX(p)
				y = GetLocationY(p)
				RemoveLocation(p)

				self.data[unitId].xEnd = x
				self.data[unitId].yEnd = y
			end

			-- Issue Order
			IssuePointOrder(unit, order, x, y)
			QueuedTriggerClearBJ()
		end

		function self:addKey(unit, key, value)
			value = value or 0
			local unitId = GetHandleId(unit)
			self.data[unitId][key] = value
		end

		function self:getKey(unit, key)
			local unitId = GetHandleId(unit)
			return self.data[unitId][key]
		end

		function self:get(unit)
			local unitId = GetHandleId(unit)
			return self.data[unitId]
		end

		function self:set(unit, data)
			local unitId = GetHandleId(unit)
			self.data[unitId] = data
		end

		function self:remove(unit)
			self.data[GetHandleId(unit)] = nil
			return true
		end

		return self
	end
end

--
-- Spawn Class
-----------------
function init_spawnClass()
	-- Create the table for the class definition
	spawn_Class = {}

	-- Define the new() function
	spawn_Class.new = function()
		local self = {}

		self.bases = {}
		self.baseCount = 0
		self.timer = CreateTimer()
		self.cycleInterval = 1.00
		self.baseInterval = 0.5
		self.waveInterval = 10.00

		self.creepLevel = 1
		self.creepLevelTimer = CreateTimer()

		self.wave = 1
		self.base = ""
		self.baseI = 0
		self.indexer = ""
		self.alliedBaseAlive = false
		self.fedBaseAlive = false
		self.unitInWave = false
		self.unitInLevel = true
		self.numOfUnits = 0
		self.unitType = ""

		---Add a new Base
		---@param baseName string
		---@param alliedStart rect
		---@param alliedEnd rect
		---@param alliedCondition unit
		---@param fedStart rect
		---@param fedEnd rect
		---@param fedCondition unit
		function self:addBase(baseName, alliedStart, alliedEnd, alliedCondition, fedStart, fedEnd, fedCondition)
			-- Add all of the info the base and add the base name to the base list
			self[baseName] = {
				allied = {startPoint = alliedStart, endPoint = alliedEnd, condition = alliedCondition},
				fed = {startPoint = fedStart, endPoint = fedEnd, condition = fedCondition},
				units = {}
			}
			table.insert(self.bases, baseName)
			self.baseCount = self.baseCount + 1
		end

		---comment
		---@param baseName string
		---@param unitType unittype
		---@param numOfUnits integer
		---@param waves table
		---@param levelStart integer
		---@param levelEnd integer
		function self:addUnit(baseName, unitType, numOfUnits, waves, levelStart, levelEnd)
			table.insert(self[baseName].units,
			             {unitType = unitType, numOfUnits = numOfUnits, waves = waves, level = {levelStart, levelEnd}})
		end

		function self:unitCount() return #self[self.base].units end

		function self:isUnitInWave()
		
			local waves = self[self.base].units[self.indexer].waves

			for index, value in ipairs(waves) do
				if value == self.wave then
					self.unitInWave = true
					return true
				end
			end

			self.unitInWave = false
			return true
		end

		function self:isUnitInLevel()
			local levelStart = self[self.base].units[self.indexer].level[1]
			local levelEnd = self[self.base].units[self.indexer].level[2]

			if (self.creepLevel >= levelStart and self.creepLevel <= levelEnd) then
				self.unitInLevel = true
			else
				self.unitInLevel = false
			end
		end

		function self:baseAlive()
			self.alliedBaseAlive = IsUnitAliveBJ(self[self.base].allied.condition)
			self.fedBaseAlive = IsUnitAliveBJ(self[self.base].fed.condition)
		end

		function self:checkSpawnUnit()
			self:baseAlive(self.base)
			self:isUnitInWave()
			self:isUnitInLevel()
			self.numOfUnits = self[self.base].units[self.indexer].numOfUnits
			self.unitType = self[self.base].units[self.indexer].unitType
		end

		function self:spawnUnits()
			local pStart, xStart, yStart, pDest, xDest, yDest, spawnedUnit

			for i = 1, self:unitCount(self.base) do
				self.indexer = i
				self:checkSpawnUnit()

				if self.unitInWave and self.unitInLevel then

					for n = 1, self.numOfUnits do

						--DisableTrigger(Trig_UnitEntersMap)

						

						if self.alliedBaseAlive then
							xStart, yStart = loc:getRandomXY(self[self.base].allied.startPoint)
							xDest, yDest = loc:getRandomXY(self[self.base].allied.endPoint)

							spawnedUnit = CreateUnit(Player(GetRandomInt(18, 20)), FourCC(self.unitType), xStart, yStart, bj_UNIT_FACING)
							--QueuedTriggerClearInactiveBJ()
							--print(GetUnitName(spawnedUnit) .. " Created")
							indexer:add(spawnedUnit)
							indexer:updateEnd(spawnedUnit, xDest, yDest)
							--indexer:order(spawnedUnit)
						end

						if self.fedBaseAlive then
							xStart, yStart = loc:getRandomXY(self[self.base].fed.startPoint)
							xDest, yDest = loc:getRandomXY(self[self.base].fed.endPoint)

							spawnedUnit = CreateUnit(Player(GetRandomInt(21, 23)), FourCC(self.unitType), xStart, yStart, bj_UNIT_FACING)
							--QueuedTriggerClearInactiveBJ()
							--print(GetUnitName(spawnedUnit) .. " Created")
							indexer:add(spawnedUnit)
							indexer:updateEnd(spawnedUnit, xDest, yDest)
							--indexer:order(spawnedUnit)
						end

						
						--EnableTrigger(Trig_UnitEntersMap)
						

						--PolledWait(0.1)
					end
				end
			end
		end

		-- Run the Spawn Loop
		function self:loopSpawn()
			-- Iterate everything up
			self.baseI = self.baseI + 1

			if (self.baseI > self.baseCount) then
				self.baseI = 0
				self.wave = self.wave + 1

				if self.wave > 10 then
					self.wave = 1
					StartTimerBJ(self.timer, false, self.cycleInterval)
				else
					StartTimerBJ(self.timer, false, self.waveInterval)
				end

				return true
			else
				StartTimerBJ(self.timer, false, self.baseInterval)
			end

			-- Find the Base to Spawn Next
			self.base = self.bases[self.baseI]

			-- Spawn the Units at the selected Base
			DisableTrigger(Trig_UnitEntersMap)
			self:spawnUnits()
			EnableTrigger(Trig_UnitEntersMap)
		end

		function self:upgradeCreeps()
			self.creepLevel = self.creepLevel + 1

			if self.creepLevel >= 12 then
				DisableTrigger(self.Trig_upgradeCreeps)
			else
				StartTimerBJ(self.creepLevelTimer, false, (50 + (10 * self.creepLevel)))
			end

			DisplayTimedTextToForce(GetPlayersAll(), 10, "Creeps Upgrade.  Level: " .. self.creepLevel)
		end

		-- Start the Spawn Loop
		function self:startSpawn()
			-- Start Spawn Timer
			StartTimerBJ(self.timer, false, 1)
			StartTimerBJ(self.creepLevelTimer, false, 90)

			TriggerRegisterTimerExpireEvent(Trig_spawnLoop, self.timer)
			TriggerRegisterTimerExpireEvent(Trig_upgradeCreeps, self.creepLevelTimer)
		end

		--
		-- Class Triggers
		--

		return self
	end
end

function init_baseClass()

	base = {}

	base.all = {g = CreateGroup(), unitsTotal = 0, unitsAlive = 0}

	base.allied = {
		unitsTotal = 0,
		unitsAlive = 0,
		advantage = 0,
		gTeleport = CreateGroup(),
		gDanger = CreateGroup(),
		gHealing = CreateGroup()
	}
	base.federation = {
		unitsTotal = 0,
		unitsAlive = 0,
		advantage = 0,
		gTeleport = CreateGroup(),
		gDanger = CreateGroup(),
		gHealing = CreateGroup()
	}

	base.top = {
		allied = {g = CreateGroup(), unitsTotal = 0, unitsAlive = 0, advantage = 0},
		federation = {g = CreateGroup(), unitsTotal = 0, unitsAlive = 0, advantage = 0}
	}
	base.middle = {
		allied = {g = CreateGroup(), unitsTotal = 0, unitsAlive = 0, advantage = 0},
		federation = {g = CreateGroup(), unitsTotal = 0, unitsAlive = 0, advantage = 0}
	}
	base.bottom = {
		allied = {g = CreateGroup(), unitsTotal = 0, unitsAlive = 0, advantage = 0},
		federation = {g = CreateGroup(), unitsTotal = 0, unitsAlive = 0, advantage = 0}
	}

	---Add a base to the map
	---@param unit unit
	---@param importance integer
	---@param mainBase unit
	---@param update boolean
	---@param teleport boolean
	---@param healing boolean
	function base.add(unit, importance, mainBase, update, teleport, healing)

		local teamNumber, regionName, teamName, allied, federation
		local handleId = GetHandleId(unit)
		local x = GetUnitX(unit)
		local y = GetUnitY(unit)
		local name = GetUnitName(unit)
		local player = GetOwningPlayer(unit)
		local lifePercent = GetUnitLifePercent(unit)
		local mana = GetUnitState(unit, UNIT_STATE_MANA)
		local idType = GetUnitTypeId(unit)
		local fourType = CC2Four(idType)

		if IsPlayerInForce(player, udg_PLAYERGRPallied) then
			teamNumber = 1
			teamName = "allied"
		else
			teamNumber = 2
			teamName = "federation"
		end

		-- Add to Region Specific Buildings
		if IsUnitInRegion(bottomRegion, unit) then
			regionName = "bottom"
		elseif IsUnitInRegion(middleRegion, unit) then
			regionName = "middle"
		elseif IsUnitInRegion(topRegion, unit) then
			regionName = "top"
		end

		if update then
			-- Add to ALL Unit Group
			GroupAddUnit(base.all.g, unit)

			-- Add to HEALING Unit Group
			-- if healing then
			GroupAddUnit(base[teamName].gHealing, unit)
			-- end

			-- Add to REGION Unit Group
			GroupAddUnit(base[regionName][teamName].g, unit)
		end

		-- Add to TELEPORT Unit Group
		if teleport then GroupAddUnit(base[teamName].gTeleport, unit) end

		-- Set Importance
		base[regionName][teamName].unitsTotal = base[regionName][teamName].unitsTotal + importance
		base[regionName][teamName].unitsAlive = base[regionName][teamName].unitsAlive + importance
		base[teamName].unitsTotal = base[teamName].unitsTotal + importance
		base[teamName].unitsAlive = base[teamName].unitsAlive + importance
		base.all.unitsTotal = base.all.unitsTotal + importance
		base.all.unitsAlive = base.all.unitsAlive + importance

		-- Get TEAM Advantage
		allied = base.allied.unitsAlive / base.allied.unitsTotal
		federation = base.federation.unitsAlive / base.federation.unitsTotal
		base.allied.advantage = allied - federation
		base.federation.advantage = federation - allied

		-- Get REGION Advantage
		allied = (base[regionName].allied.unitsAlive / base[regionName].allied.unitsTotal) * 100
		federation = (base[regionName].federation.unitsAlive / base[regionName].federation.unitsTotal) * 100

		base[regionName].allied.advantage = allied - federation
		base[regionName].federation.advantage = federation - allied

		-- Add Building to Table
		base[handleId] = {
			x = x,
			y = y,
			name = name,
			unit = unit,
			importance = importance,
			lifePercent = lifePercent,
			unitsFriendly = 0,
			unitsEnemy = 0,
			unitsCount = 0,
			danger = 0,
			update = update,
			idType = idType,
			fourType = fourType,
			handleId = handleId,
			mainBase = mainBase,
			regionName = regionName,
			teamName = teamName,
			mana = mana
		}
	end

	---Update the selected Base
	---@param unit unit
	---@return boolean
	function base.update(unit)
		local u, heroLevel

		local unitsFriendly = 0
		local unitsEnemy = 0
		local unitsCount = 0

		local handleId = GetHandleId(unit)

		if base[handleId].update == false then return true end

		local l = Location(base[handleId].x, base[handleId].y)
		local teamName = base[handleId].teamName

		local g = CreateGroup()
		g = GetUnitsInRangeOfLocAll(900, l)
		while true do
			u = FirstOfGroup(g)
			if u == nil then break end

			-- Calculate Danger Levels
			if IsUnitAliveBJ(u) then
				if IsUnitAlly(u, GetOwningPlayer(unit)) then
					if IsUnitType(u, UNIT_TYPE_HERO) then
						unitsFriendly = unitsFriendly + 3 * GetHeroLevel(u)
					else
						unitsFriendly = unitsFriendly + GetUnitLevel(u)
					end
				else
					if IsUnitType(u, UNIT_TYPE_HERO) then
						unitsEnemy = unitsEnemy + 3 * GetHeroLevel(u)
					else
						unitsEnemy = unitsEnemy + GetUnitLevel(u)
					end
				end
			end

			GroupRemoveUnit(g, u)
		end
		DestroyGroup(g)

		-- Check if Unit is in Danger
		if IsUnitInGroup(unit, base[teamName].gDanger) then
			if unitsEnemy == 0 then
				GroupRemoveUnit(base[teamName].gDanger, unit)
				GroupAddUnit(base[teamName].gHealing, unit)
			end

			CreateCorpse()

		else
			if unitsEnemy > 0 then
				GroupAddUnit(base[teamName].gDanger, unit)
				GroupRemoveUnit(base[teamName].gHealing, unit)
			end
		end

		-- Heal Units as needed
		if unitsEnemy == 0 and unitsFriendly > 0 and base[handleId].mana > 50 then
			if IsUnitInGroup(unit, base[teamName].gHealing) and BlzGetUnitAbilityCooldownRemaining(unit, FourCC("A027")) == 0 then

				g = GetUnitsInRangeOfLocAll(500, l)

				while true do
					u = FirstOfGroup(g)
					if u == nil then break end

					if IsUnitType(u, UNIT_TYPE_HERO) and IsUnitAlly(u, GetOwningPlayer(unit)) then
						if not UnitHasBuffBJ(u, FourCC("Brej")) and (GetUnitLifePercent(u) < 95 or GetUnitManaPercent(u) < 95) then

							SetUnitAbilityLevel(unit, FourCC("A027"), spawn.creepLevel)
							IssueTargetOrder(unit, "rejuvination", u)
							break
						end
					end

					GroupRemoveUnit(g, u)
				end

				DestroyGroup(g)
			end
		end
		RemoveLocation(l)

		base[handleId].lifePercent = GetUnitLifePercent(unit)
		base[handleId].mana = GetUnitState(unit, UNIT_STATE_MANA)
		base[handleId].unitsFriendly = unitsFriendly
		base[handleId].unitsEnemy = unitsEnemy
		base[handleId].unitsCount = unitsEnemy - unitsFriendly
		base[handleId].danger = base[handleId].unitsCount * (((100 - base[handleId].lifePercent) / 10) + 1) *
						                        base[handleId].importance

		-- print(base[handleId].name .. " Allies:" .. base[handleId].unitsFriendly .. " Enemies: " .. base[handleId].unitsEnemy)
	end

	---Notify System that Base has died
	---@param unit unit
	function base.died(unit)
		local allied, federation, u
		local handleId = GetHandleId(unit)
		local regionName = base[handleId].regionName
		local teamName = base[handleId].teamName
		local teleport = base[handleId].teleport
		local importance = base[handleId].importance
		local x = base[handleId].x
		local y = base[handleId].y
		local name = base[handleId].name

		-- Remove Unit from ALL Group
		GroupRemoveUnit(base.all.g, unit)

		-- Remove Unit from REGION Group
		if IsUnitInGroup(unit, base[regionName][teamName].g) then GroupRemoveUnit(base[regionName][teamName].g, unit) end

		if IsUnitInGroup(unit, base[teamName].gDanger) then GroupRemoveUnit(base[teamName].gDanger, unit) end

		if IsUnitInGroup(unit, base[teamName].gHealing) then GroupRemoveUnit(base[teamName].gDanger, unit) end

		-- Remove Unit from TELEPORT Group
		if teleport then GroupRemoveUnit(base[teamName].gTeleport, unit) end

		-- Adjust Region importance
		base[regionName][teamName].unitsAlive = base[regionName][teamName].unitsAlive - importance
		base[teamName].unitsAlive = base[teamName].unitsAlive - importance
		base.all.unitsAlive = base.all.unitsAlive - importance

		-- Get TEAM Advantage
		allied = (base.allied.unitsAlive / base.allied.unitsTotal) * 100
		federation = (base.federation.unitsAlive / base.federation.unitsTotal) * 100
		base.allied.advantage = allied - federation
		base.federation.advantage = federation - allied

		-- Get REGION Advantage
		allied = (base[regionName].allied.unitsAlive / base[regionName].allied.unitsTotal) * 100
		federation = (base[regionName].federation.unitsAlive / base[regionName].federation.unitsTotal) * 100

		base[regionName].allied.advantage = allied - federation
		base[regionName].federation.advantage = federation - allied

		PlaySound("Sound/Interface/Warning.flac")

		if teamName == "federation" then

			for i = 6, 11 do SetPlayerHandicapXPBJ(Player(i), GetPlayerHandicapXPBJ(Player(i)) + 10) end

			print("FEDERATION Base has Fallen!")
			u = CreateUnit(Player(20), FourCC("h00W"), x, y, bj_UNIT_FACING)

		else
			for i = 0, 5 do SetPlayerHandicapXPBJ(Player(i), GetPlayerHandicapXPBJ(Player(i)) + 10) end

			print("ALLIED Base has Fallen!")

			u = CreateUnit(Player(23), FourCC("h00W"), x, y, bj_UNIT_FACING)
		end

		print(name .. " has been razed.")
		PingMinimap(x, y, 15)
		base.add(u, 0, false, false, true)

	end

end

function init_gateClass()

	gate = {}
	gate.types = {}
	gate.typeIds = {}
	gate.g = CreateGroup()
	gate.gClosed = CreateGroup()
	gate.gOpen = CreateGroup()

	---Add a new Gate Type
	---@param unitTypeClosed unittype
	---@param unitTypeOpen unittype
	---@param rotation real
	---@return boolean
	function gate.addType(unitTypeClosed, unitTypeOpen, rotation)

		local data = {unitTypeClosed = FourCC(unitTypeClosed), unitTypeOpen = FourCC(unitTypeOpen), rotation = rotation}

		gate.types[FourCC(unitTypeOpen)] = data
		gate.types[FourCC(unitTypeClosed)] = data

		table.insert(gate.typeIds, unitTypeOpen)
		table.insert(gate.typeIds, unitTypeClosed)

		return true
	end

	---Add a new Gate to be monitored
	---@param unit unit
	---@param owningPlayer player
	function gate.add(unit, owningPlayer)

		local playerForce, facingAngle
		local unitTypeClosed ---@type unittype
		local unitTypeOpen ---@type unittype
		local unitType = GetUnitTypeId(unit)
		local x = GetUnitX(unit)
		local y = GetUnitY(unit)

		-- Find if unit is Allied or Fed
		if IsPlayerInForce(owningPlayer, udg_PLAYERGRPallied) then
			playerForce = "allied"
		else
			playerForce = "federation"
		end

		facingAngle = gate.types[unitType].rotation
		unitTypeOpen = gate.types[unitType].unitTypeOpen
		unitTypeClosed = gate.types[unitType].unitTypeClosed

		if playerForce == "federation" then
			facingAngle = facingAngle + 180

			if facingAngle >= 360 then facingAngle = facingAngle - 360 end
		end

		RemoveUnit(unit)
		unit = CreateUnit(owningPlayer, unitTypeOpen, x, y, facingAngle)

		-- Play animation
		SetUnitAnimation(unit, "Death Alternate 1")

		GroupAddUnit(gate.g, unit)
		GroupAddUnit(gate.gOpen, unit)

		local unitId = GetHandleId(unit)
		gate[unitId] = {}
		gate[unitId].force = playerForce
		gate[unitId].unitTypeClosed = unitTypeClosed
		gate[unitId].unitTypeOpen = unitTypeOpen
		gate[unitId].x = x
		gate[unitId].y = y
		gate[unitId].facing = facingAngle

	end

	---Update all Gates
	function gate.update()

		local gGates = CreateGroup()
		GroupAddGroup(gate.g, gGates)

		local pickedUnit = FirstOfGroup(gGates)
		while pickedUnit ~= nil do
			local u
			local heroes = 0
			local enemies = 0
			local unit = pickedUnit
			local info = gate[GetHandleId(unit)] ---@type table
			local g = CreateGroup()
			local l = GetUnitLoc(unit)

			g = GetUnitsInRangeOfLocAll(700, l)

			while true do
				u = FirstOfGroup(g)
				if u == nil then break end

				if not IsUnitAlly(u, GetOwningPlayer(unit)) and IsUnitAliveBJ(u) then enemies = enemies + 1 end

				if IsUnitType(u, UNIT_TYPE_HERO) and IsUnitAlly(u, GetOwningPlayer(unit)) then heroes = heroes + 1 end

				GroupRemoveUnit(g, u)
			end
			DestroyGroup(g)

			-- print("Enemies:" .. enemies .. " Heroes: " .. heroes)

			if enemies > 0 and heroes == 0 and IsUnitInGroup(unit, gate.gOpen) then
				GroupRemoveUnit(gate.gOpen, unit)
				GroupRemoveUnit(gate.g, unit)
				gate[GetHandleId(unit)] = {}

				SetUnitTimeScale(unit, -1)
				PolledWait(0.667)

				-- Replace Gate with Closed Gate
				DisableTrigger(gate.Trig_gateDies)
				ReplaceUnitBJ(unit, info.unitTypeClosed, bj_UNIT_STATE_METHOD_RELATIVE)
				EnableTrigger(gate.Trig_gateDies)

				unit = GetLastReplacedUnitBJ()
				gate[GetHandleId(unit)] = info
				GroupAddUnit(gate.gClosed, unit)
				GroupAddUnit(gate.g, unit)

			elseif (enemies == 0 or heroes > 0) and IsUnitInGroup(unit, gate.gClosed) then
				GroupRemoveUnit(gate.gClosed, unit)
				GroupRemoveUnit(gate.g, unit)
				gate[GetHandleId(unit)] = {}

				-- Replace Gate with Opened Gate
				DisableTrigger(gate.Trig_gateDies)
				ReplaceUnitBJ(unit, info.unitTypeOpen, bj_UNIT_STATE_METHOD_RELATIVE)
				EnableTrigger(gate.Trig_gateDies)

				unit = GetLastReplacedUnitBJ()
				gate[GetHandleId(unit)] = info
				GroupAddUnit(gate.gOpen, unit)
				GroupAddUnit(gate.g, unit)

				-- Play animation
				SetUnitAnimation(unit, "Death Alternate 1")

			end

			GroupRemoveUnit(gGates, pickedUnit)
			pickedUnit = FirstOfGroup(gGates)
		end
		DestroyGroup(gGates)

		-- print("--")
	end

	--
	--  TRIGGERS
	--

	function gate.InitTrig_update()
		local t = CreateTrigger()
		TriggerRegisterTimerEventPeriodic(t, 2.5)
		TriggerAddAction(t, function() try(function() gate.update() end, "Update") end)
	end

	function gate.InitTrig_hitAnim()
		local t = CreateTrigger()
		TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
		TriggerAddAction(t, function()

			local triggerUnit = GetAttackedUnitBJ()
			local unitId = GetUnitTypeId(triggerUnit)

			if gate.types[unitId] ~= nil then
				PolledWait(0.2)
				QueueUnitAnimation(triggerUnit, "Stand Hit")
			end

		end)
	end

	function gate.InitTrig_dies()
		gate.Trig_gateDies = CreateTrigger()
		TriggerRegisterAnyUnitEventBJ(gate.Trig_gateDies, EVENT_PLAYER_UNIT_DEATH)
		TriggerAddAction(gate.Trig_gateDies, function()

			try(function()
				local dyingUnit = GetDyingUnit()

				if IsUnitInGroup(dyingUnit, gate.g) then
					local x = GetUnitX(dyingUnit)
					local y = GetUnitY(dyingUnit)
					local unitType = GetUnitTypeId(dyingUnit)
					local owningPlayer = GetOwningPlayer(dyingUnit)

					local facingAngle = gate.types[unitType].rotation
					local unitTypeOpen = gate.types[unitType].unitTypeOpen

					-- Remove Traces of Unit
					GroupRemoveUnit(gate.g, dyingUnit)
					RemoveUnit(dyingUnit)

					if not IsPlayerInForce(owningPlayer, udg_PLAYERGRPallied) then
						facingAngle = facingAngle + 180

						if facingAngle >= 360 then facingAngle = facingAngle - 360 end
					end

					unit = CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE), unitTypeOpen, x, y, facingAngle)

					-- Play Death animation
					SetUnitAnimation(unit, "Death 1")
				end
			end, "Start Delayed Triggers")
		end)
	end

	--
	-- MAIN
	--

	function gate.main()
		local unitId ---@type unittype
		local u
		local g = CreateGroup()

		try(function()
			gate.addType("h021", "h020", 0) -- Castle Gate Vertical Right
			gate.addType("h023", "h022", 90) -- Castle Gate Horizontal Botoom
			gate.addType("h01G", "h01C", 0) -- City Gate Verical Right
			gate.addType("h01B", "h01D", 180) -- City Gate Vertical Left
			gate.addType("h01S", "h01T", 90) -- City Gate Horizontal Top

			for i = 1, #gate.typeIds do
				unitId = gate.typeIds[i]

				g = GetUnitsOfTypeIdAll(FourCC(unitId))

				while true do
					u = FirstOfGroup(g)
					if u == nil then break end

					gate.add(u, GetOwningPlayer(u))

					GroupRemoveUnit(g, u)
				end
				DestroyGroup(g)
			end
		end, "add Types")

		-- Init Triggers
		gate.InitTrig_update()
		gate.InitTrig_dies()
		gate.InitTrig_hitAnim()
	end
end

cine = {}

function cine.Init()
	-- Hide UI Keep Mouse
	SetSkyModel("Environment\\Sky\\BlizzardSky\\BlizzardSky.mdl")
	BlzHideOriginFrames(true)
	BlzFrameSetVisible(BlzGetFrameByName("ConsoleUIBackdrop", 0), false)
	CinematicFilterGenericBJ(0.00, BLEND_MODE_BLEND, "ReplaceableTextures\\CameraMasks\\Black_mask.blp", 0.00, 0.00, 0.00,
	                         0.00, 0, 0, 0, 0)

	local t = CreateTrigger()
	TriggerRegisterTimerEventSingle(t, 3)

	TriggerAddAction(t, function()
		CinematicFadeBJ(bj_CINEFADETYPE_FADEIN, 3.00, "ReplaceableTextures\\CameraMasks\\Black_mask.blp", 0, 0, 0, 0)

		-- Lock Cam
		local startCams = {gg_cam_intro01, gg_cam_intro02, gg_cam_intro03, gg_cam_intro04, gg_cam_intro05, gg_cam_intro06, gg_cam_intro07, gg_cam_intro08, gg_cam_intro09, gg_cam_intro10, gg_cam_intro11}

		for i = 0, 11, 1 do
			local camChoice = GetRandomInt(1, #startCams)
			CameraSetupApplyForPlayer(true, startCams[camChoice], Player(i), 0)
			local camX = CameraSetupGetDestPositionX(startCams[camChoice])
			local camY = CameraSetupGetDestPositionY(startCams[camChoice])

			local unit = CreateUnit(Player(19), FourCC("h01Z"), camX, camY, bj_UNIT_FACING)
			UnitApplyTimedLife(unit, FourCC("BTLF"), 20)

			SetCameraTargetControllerNoZForPlayer(Player(i), unit, 0, 0, false)
		end

	end)

	function cine.finish()

		-- Reset back to normal
		CinematicFadeBJ(bj_CINEFADETYPE_FADEOUT, 1.00, "ReplaceableTextures\\CameraMasks\\Black_mask.blp", 0, 0, 0, 0)
		BlzHideOriginFrames(false)
		BlzFrameSetVisible(BlzGetFrameByName("ConsoleUIBackdrop", 0), true)

		PolledWait(1)

		for i = 0, 15, 1 do
			if i < 6 then
				CameraSetupApplyForPlayer(true, gg_cam_baseLeftStart, Player(i), 0)
			else
				CameraSetupApplyForPlayer(true, gg_cam_baseRightStart, Player(i), 0)
			end
		end

		CinematicFadeBJ(bj_CINEFADETYPE_FADEIN, 1.00, "ReplaceableTextures\\CameraMasks\\Black_mask.blp", 0, 0, 0, 0)
		FogMaskEnableOn()
		FogEnableOn()

		-- Fade back to normal

	end
end


--
-- Functions
--

---Returns the type of a warcraft object as string, e.g. "location", when inputting a location.
---@param input anyWarcraftObject
---@return string
function Wc3Type(input)
    local typeString = type(input)
    if typeString == 'number' then
        return (math.type(input) =='float' and 'real') or 'integer'
    elseif typeString == 'userdata' then
        typeString = tostring(input) --toString returns the warcraft type plus a colon and some hashstuff.
        return string.sub(typeString, 1, (string.find(typeString, ":", nil, true) or 0) -1) --string.find returns nil, if the argument is not found, which would break string.sub. So we need or as coalesce.
    else
        return typeString
    end
end


function dprint(message, level)
    level = level or 1

    if debugprint >= level then
        print("|cff00ff00[debug " .. level .. "]|r " .. tostring(message))
    end
end

function distanceBetweenCoordinates(x1, y1, x2, y2) -- Find Distance between points
    return SquareRoot(((x2 - x1) * (x2 - x1)) + ((y2 - y1) * (y2 - y1)))
end

function distanceBetweenUnits(unitA, unitB)
    return distanceBetweenCoordinates(GetUnitX(unitA), GetUnitY(unitA), GetUnitX(unitB), GetUnitY(unitB))
end

function angleBetweenCoordinates(x1, y1, x2, y2)
    return bj_RADTODEG * Atan2(y2 - y1, x2 - x1)
end

function angleBetweenUnits(unitA, unitB)
    return angleBetweenCoordinates(GetUnitX(unitA), GetUnitY(unitA), GetUnitX(unitB), GetUnitY(unitB))
end

function polarProjectionCoordinates(x, y, dist, angle)
    local newX = x + dist * Cos(angle * bj_DEGTORAD)
    local newY = y + dist * Sin(angle * bj_DEGTORAD)
    return newX, newY
end

function try(func) -- Turn on runtime logging
    local passed, data = pcall(function()
        func()
        return "func " .. " passed"
    end)
    if not passed then
        print("|cffff0000[ERROR]|r", passed, data)
    end
end

function CC2Four(num) -- Convert from Handle ID to Four Char
    return string.pack(">I4", num)
end

do
    local data = {}
    function SetTimerData(whichTimer, dat)
        data[whichTimer] = dat
    end

    -- GetData functionality doesn't even require an argument.
    function GetTimerData(whichTimer)
        if not whichTimer then
            whichTimer = GetExpiredTimer()
        end
        return data[whichTimer]
    end

    -- NewTimer functionality includes optional parameter to pass data to timer.
    function NewTimer(dat)
        local t = CreateTimer()
        if dat then
            data[t] = dat
        end
        return t
    end

    -- Release functionality doesn't even need for you to pass the expired timer.
    -- as an arg. It also returns the user data passed.
    function ReleaseTimer(whichTimer)
        if not whichTimer then
            whichTimer = GetExpiredTimer()
        end
        local dat = data[whichTimer]
        data[whichTimer] = nil
        PauseTimer(whichTimer)
        DestroyTimer(whichTimer)
        return dat
    end
end

-- Requires https://www.hiveworkshop.com/threads/lua-timerutils.316957/

do
    local oldWait = PolledWait
    function PolledWait(duration)
        local thread = coroutine.running()
        if thread then
            TimerStart(NewTimer(thread), duration, false, function()
                coroutine.resume(ReleaseTimer())
            end)
            coroutine.yield(thread)
        else
            oldWait(duration)
        end
    end

    local oldTSA = TriggerSleepAction
    function TriggerSleepAction(duration)
        PolledWait(duration)
    end

    local thread
    local oldSync = SyncSelections
    function SyncSelectionsHelper()
        local t = thread
        oldSync()
        coroutine.resume(t)
    end
    function SyncSelections()
        thread = coroutine.running()
        if thread then
            ExecuteFunc("SyncSelectionsHelper")
            coroutine.yield(thread)
        else
            oldSync()
        end
    end

    if not EnableWaits then -- Added this check to ensure compatibilitys with Lua Fast Triggers
        local oldAction = TriggerAddAction
        function TriggerAddAction(whichTrig, userAction)
            oldAction(whichTrig, function()
                coroutine.resume(coroutine.create(function()
                    userAction()
                end))
            end)
        end
    end
end

function pushbackUnits(g, castingUnit, x, y, aoe, damage, tick, duration, factor)
    local u, uX, uY, distance, angle, newDistance, uNewX, uNewY

    local loopTimes = duration / tick
    local damageTick = damage / loopTimes

    if CountUnitsInGroup(g) > 0 then
        for i = 1, loopTimes do

            ForGroup(g, function()
                u = GetEnumUnit()

                if IsUnitAliveBJ(u) then

                    if i == 1 then
                        PauseUnit(u, true)
                    end

                    uX = GetUnitX(u)
                    uY = GetUnitY(u)

                    distance = distanceBetweenCoordinates(x, y, uX, uY)
                    angle = angleBetweenCoordinates(x, y, uX, uY)

                    newDistance = ((aoe + 80) - distance) * 0.13 * factor

                    uNewX, uNewY = polarProjectionCoordinates(uX, uY, newDistance, angle)

                    -- if IsTerrainPathable(uNewX, uNewY, PATHING_TYPE_WALKABILITY) then
                    SetUnitX(u, uNewX)
                    SetUnitY(u, uNewY)
                    -- end

                    if damage > 0 then
                        UnitDamageTargetBJ(castingUnit, u, damageTick, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC)
                    end

                    if i >= loopTimes - 1 then
                        PauseUnit(u, false)
                    end
                else
                    PauseUnit(u, false)
                    GroupRemoveUnit(g, u)
                end
            end)

            PolledWait(tick)
        end
    end
    DestroyGroup(g)
end

function valueFactor(level, base, previousFactor, levelFactor, constant)

    local value = base

    if level > 1 then
        for i = 2, level do
            value = (value * previousFactor) + (i * levelFactor) + (constant)
            print(value)
        end
    end

    print(value)
    return value
end

function init_triggers()
    Trig_moveToNext = CreateTrigger()
    Trig_spawnLoop = CreateTrigger()
    Trig_upgradeCreeps = CreateTrigger()
    Trig_AutoZoom = CreateTrigger()
    Trig_UnitEntersMap = CreateTrigger()
    Trig_UnitDies = CreateTrigger()
    Trig_IssuedOrder = CreateTrigger()
    Trig_aiLoopStates = CreateTrigger()
    Trig_baseLoop = CreateTrigger()
end

function addRegions()

    -- End Rects
    loc:add("arcaneLeft", gg_rct_Left_Mage_Base, "castleLeft", false)
    loc:add("arcaneRight", gg_rct_Right_Mage_Base, "castleRight", true)
    loc:add("castleLeft", gg_rct_Left_Hero)
    loc:add("castleRight", gg_rct_Right_Hero)
    loc:add("startLeft", gg_rct_Left_Start, "castleLeft", false)
    loc:add("startRight", gg_rct_Right_Start, "castleRight", true)
    loc:add("elfLeft", gg_rct_Elf_Base_Left, "castleLeft", false)
    loc:add("elfRight", gg_rct_Elf_Base_Right, "casteRight", true)

    -- Pathing Rects
    loc:add("everythingLeft", gg_rct_Left_Everything, "castleLeft", false)
    loc:add("everythingRight", gg_rct_Right_Everything, "castleRight", true)
    loc:add("bottomLeft", gg_rct_Left_Start_Bottom, "arcaneLeft", false)
    loc:add("bottomRight", gg_rct_Right_Start_Bottom, "elfRight", true)
    loc:add("middleLeft", gg_rct_Left_Start_Middle, "startLeft", false)
    loc:add("middleRight", gg_rct_Right_Start_Middle, "startRight", true)
    loc:add("topLeft", gg_rct_Left_Start_Top, "elfLeft", false)
    loc:add("topRight", gg_rct_Right_Start_Top, "arcaneRight", true)

    -- Spawn Rects
    loc:add("sArcaneLeft", gg_rct_Left_Arcane)
    loc:add("sArcaneRight", gg_rct_Right_Arcane)
    loc:add("sArcaneHeroLeft", gg_rct_Arcane_Hero_Left)
    loc:add("sArcaneHeroRight", gg_rct_Arcane_Hero_Right)
    loc:add("sCampLeft", gg_rct_Camp_Bottom)
    loc:add("sCampRight", gg_rct_Camp_Top)
    loc:add("sCityBlacksmithLeft", gg_rct_Blacksmith_Left)
    loc:add("sCityBlacksmithRight", gg_rct_Blacksmith_Right)
    loc:add("sCityElfLeft", gg_rct_City_Elves_Left)
    loc:add("sCityElfRight", gg_rct_City_Elves_Right)
    loc:add("sCityFrontLeft", gg_rct_Front_Town_Left)
    loc:add("sCityFrontRight", gg_rct_Front_City_Right)
    loc:add("sCitySideLeft", gg_rct_Left_City)
    loc:add("sCitySideRight", gg_rct_Right_City)
    loc:add("sElementalTopLeft", gg_rct_Arcane_Left_Top)
    loc:add("sElementalTopRight", gg_rct_Arcane_Right_Top)
    loc:add("sElementalBottomLeft", gg_rct_Arcane_Left_Bottom)
    loc:add("sElementalBottomRight", gg_rct_Arcane_Right_Bottom)
    loc:add("sElfLeft", gg_rct_Left_High_Elves)
    loc:add("sElfRight", gg_rct_Right_High_Elves)
    loc:add("sElfShipyardLeft", gg_rct_Left_Shipyard)
    loc:add("sElfShipyardRight", gg_rct_Right_Shipyard)
    loc:add("sHeroLeft", gg_rct_Left_Hero)
    loc:add("sHeroRight", gg_rct_Right_Hero)
    loc:add("sHumanShipyardLeft", gg_rct_Human_Shipyard_Left)
    loc:add("sHumanShipyardRight", gg_rct_Human_Shipyard_Right)
    loc:add("sKolboldLeft", gg_rct_Furbolg_Left)
    loc:add("sKolboldRight", gg_rct_Furbolg_Right)
    loc:add("sMurlocLeft", gg_rct_Murloc_Spawn_Left)
    loc:add("sMurlocRight", gg_rct_Murloc_Spawn_Right)
    loc:add("sNagaLeft", gg_rct_Naga_Left)
    loc:add("sNagaRight", gg_rct_Naga_Right)
    loc:add("sOrcLeft", gg_rct_Left_Orc)
    loc:add("sOrcRight", gg_rct_Right_Orc)
    loc:add("sTreeLeft", gg_rct_Left_Tree)
    loc:add("sTreeRight", gg_rct_Right_Tree)
    loc:add("sWorkshopLeft", gg_rct_Left_Workshop)
    loc:add("sWorkshopRight", gg_rct_Right_Workshop)
    loc:add("sUndeadLeft", gg_rct_Undead_Left)
    loc:add("sUndeadRight", gg_rct_Undead_Right)

    -- Creep Rects
    loc:add("cForestMidLeft", gg_rct_Aspect_of_Forest_Left_Mid, "cForestLeft", true)
    loc:add("cForestLeft", gg_rct_Aspect_of_Forest_Left, "topRight", true)
    loc:add("cForestMidRight", gg_rct_Aspect_of_Forest_Right_Mid, "cForestRight", false)
    loc:add("cForestRight", gg_rct_Aspect_of_Forest_Right, "bottomLeft", false)
    loc:add("cTidesLeft", gg_rct_Murloc_Left, "topRight", true)
    loc:add("cTidesRight", gg_rct_Murloc_Right, "bottomLeft", false)
    loc:add("cDeathMidLeft", gg_rct_Zombie_Mid_Left, "cDeathLeft", true)
    loc:add("cDeathLeft", gg_rct_Zombie_End_Left, "middleRight", true)
    loc:add("cDeathMidRight", gg_rct_Zombie_Mid_Right, "cDeathRight", false)
    loc:add("cDeathRight", gg_rct_Zombie_End_Right, "middleLeft", false)
    loc:add("cStormLeft", gg_rct_Left_Elemental_Start, "bottomRight", true)
    loc:add("cStormRight", gg_rct_Right_Elemental_Start, "topLeft", false)

    -- Define Big Regions
    bottomRegion = CreateRegion()
    middleRegion = CreateRegion()
    topRegion = CreateRegion()

    RegionAddRect(bottomRegion, gg_rct_Big_Bottom_Left)
    RegionAddRect(bottomRegion, gg_rct_Big_Bottom_Left_Center)
    RegionAddRect(bottomRegion, gg_rct_Big_Bottom_Right_Center)
    RegionAddRect(bottomRegion, gg_rct_Big_Bottom_Right)

    RegionAddRect(middleRegion, gg_rct_Big_Middle_Left)
    RegionAddRect(middleRegion, gg_rct_Big_Middle_Left_Center)
    RegionAddRect(middleRegion, gg_rct_Big_Middle_Right_Center)
    RegionAddRect(middleRegion, gg_rct_Big_Middle_Right)

    RegionAddRect(topRegion, gg_rct_Big_Top_Left)
    RegionAddRect(topRegion, gg_rct_Big_Top_Left_Center)
    RegionAddRect(topRegion, gg_rct_Big_Top_Right_Center)
    RegionAddRect(topRegion, gg_rct_Big_Top_Right)
end

function addBases()

    base.add(gg_unit_h003_0015, 3, false, true, true, true) -- Allied Arcane Main
    base.add(gg_unit_h003_0007, 3, false, true, true, true) -- Federation Arcane Main

    base.add(gg_unit_h014_0017, 2, false, true, true, false) -- Allied Arcane Hero
    base.add(gg_unit_h014_0158, 2, false, true, true, false) -- Federation

    base.add(gg_unit_hars_0355, 1, false, true, true, false) -- Allied Arcane Top
    base.add(gg_unit_hars_0293, 1, false, true, true, false) -- Federation

    base.add(gg_unit_hars_0292, 1, false, true, true, false) -- Allied Arcane Bottom
    base.add(gg_unit_hars_0303, 1, false, true, true, false) -- Federation

    base.add(gg_unit_n00K_0802, 2, false, true, true, true) -- Allied Blacksmith
    base.add(gg_unit_n00K_0477, 2, false, true, true, true) -- Federation

    base.add(gg_unit_h00E_0033, 8, true, true, true, true) -- Allied Castle
    base.add(gg_unit_h00E_0081, 8, true, true, true, true) -- Federation

    base.add(gg_unit_hvlt_0207, 2, false, true, true, true) -- Allied City Elves
    base.add(gg_unit_hvlt_0406, 2, false, true, true, true) -- Federation

    base.add(gg_unit_n00B_0364, 1, false, true, true, true) -- Allied City Front
    base.add(gg_unit_n00B_0399, 1, false, true, true, true) -- Federation

    base.add(gg_unit_n00B_0102, 1, false, true, true, true) -- Allied City Side
    base.add(gg_unit_n00B_0038, 1, false, true, true, true) -- Federation

    base.add(gg_unit_ndh2_0359, 1, false, true, true, true) -- Allied Draenei
    base.add(gg_unit_ndh2_0876, 1, false, true, true, true) -- Federation

    base.add(gg_unit_nheb_0109, 3, false, true, true, true) -- Allied High Elves
    base.add(gg_unit_nheb_0036, 3, false, true, true, true) -- Federation

    base.add(gg_unit_n001_0048, 2, false, true, true, true) -- Allied Merc Camp
    base.add(gg_unit_n001_0049, 2, false, true, true, true) -- Federation

    base.add(gg_unit_h006_0074, 2, false, true, true, true) -- Allied Mine
    base.add(gg_unit_h006_0055, 2, false, true, true, true) -- Federation

    base.add(gg_unit_nmh1_0735, 1, false, true, true, false) -- Allied Murloc
    base.add(gg_unit_nmh1_0783, 1, false, true, true, false) -- Federation

    base.add(gg_unit_nntt_0135, 2, false, true, true, true) -- Allied Naga
    base.add(gg_unit_nntt_0132, 2, false, true, true, true) -- Federation

    base.add(gg_unit_e003_0058, 3, false, true, true, true) -- Allied Night Elves
    base.add(gg_unit_e003_0014, 3, false, true, true, true) -- Federation

    base.add(gg_unit_o001_0075, 2, false, true, true, true) -- Allied Orcs
    base.add(gg_unit_o001_0078, 2, false, true, true, true) -- Federation

    base.add(gg_unit_eshy_0120, 1, false, true, true, false) -- Allied Night Elf Shipyard
    base.add(gg_unit_eshy_0047, 1, false, true, true, false) -- Federation

    base.add(gg_unit_hshy_0011, 1, false, true, true, false) -- Allied Human Shipyard
    base.add(gg_unit_hshy_0212, 1, false, true, true, false) -- Federation

    base.add(gg_unit_u001_0097, 2, false, true, true, true) -- Federation Undead
    base.add(gg_unit_u001_0098, 2, false, true, true, true) -- Federation
end

function Init_luaGlobals()

    oid = {
        OFFSET = 851970,
        absorb = 852529,
        acidbomb = 852662,
        acolyteharvest = 852185,
        AImove = 851988,
        ambush = 852131,
        ancestralspirit = 852490,
        ancestralspirittarget = 852491,
        animatedead = 852217,
        antimagicshell = 852186,
        attack = 851983,
        attackground = 851984,
        attackonce = 851985,
        attributemodskill = 852576,
        auraunholy = 852215,
        auravampiric = 852216,
        autodispel = 852132,
        autodispeloff = 852134,
        autodispelon = 852133,
        autoentangle = 852505,
        autoentangleinstant = 852506,
        autoharvestgold = 852021,
        autoharvestlumber = 852022,
        avatar = 852086,
        avengerform = 852531,
        awaken = 852466,
        banish = 852486,
        barkskin = 852135,
        barkskinoff = 852137,
        barkskinon = 852136,
        battleroar = 852099,
        battlestations = 852099,
        bearform = 852138,
        berserk = 852100,
        blackarrow = 852577,
        blackarrowoff = 852579,
        blackarrowon = 852578,
        blight = 852187,
        blink = 852525,
        blizzard = 852089,
        bloodlust = 852101,
        bloodlustoff = 852103,
        bloodluston = 852102,
        board = 852043,
        breathoffire = 852580,
        breathoffrost = 852560,
        build = 851994,
        burrow = 852533,
        cannibalize = 852188,
        carrionscarabs = 852551,
        carrionscarabsinstant = 852554,
        carrionscarabsoff = 852553,
        carrionscarabson = 852552,
        carrionswarm = 852218,
        chainlightning = 852119,
        channel = 852600,
        charm = 852581,
        chemicalrage = 852663,
        cloudoffog = 852473,
        clusterrockets = 852652,
        coldarrows = 852244,
        coldarrowstarg = 852243,
        controlmagic = 852474,
        corporealform = 852493,
        corrosivebreath = 852140,
        coupleinstant = 852508,
        coupletarget = 852507,
        creepanimatedead = 852246,
        creepdevour = 852247,
        creepheal = 852248,
        creephealoff = 852250,
        creephealon = 852249,
        creepthunderbolt = 852252,
        creepthunderclap = 852253,
        cripple = 852189,
        curse = 852190,
        curseoff = 852192,
        curseon = 852191,
        cyclone = 852144,
        darkconversion = 852228,
        darkportal = 852229,
        darkritual = 852219,
        darksummoning = 852220,
        deathanddecay = 852221,
        deathcoil = 852222,
        deathpact = 852223,
        decouple = 852509,
        defend = 852055,
        detectaoe = 852015,
        detonate = 852145,
        devour = 852104,
        devourmagic = 852536,
        disassociate = 852240,
        disenchant = 852495,
        dismount = 852470,
        dispel = 852057,
        divineshield = 852090,
        doom = 852583,
        drain = 852487,
        dreadlordinferno = 852224,
        dropitem = 852001,
        drunkenhaze = 852585,
        earthquake = 852121,
        eattree = 852146,
        elementalfury = 852586,
        ensnare = 852106,
        ensnareoff = 852108,
        ensnareon = 852107,
        entangle = 852147,
        entangleinstant = 852148,
        entanglingroots = 852171,
        etherealform = 852496,
        evileye = 852105,
        faeriefire = 852149,
        faeriefireoff = 852151,
        faeriefireon = 852150,
        fanofknives = 852526,
        farsight = 852122,
        fingerofdeath = 852230,
        firebolt = 852231,
        flamestrike = 852488,
        flamingarrows = 852174,
        flamingarrowstarg = 852173,
        flamingattack = 852540,
        flamingattacktarg = 852539,
        flare = 852060,
        forceboard = 852044,
        forceofnature = 852176,
        forkedlightning = 852586,
        freezingbreath = 852195,
        frenzy = 852561,
        frenzyoff = 852563,
        frenzyon = 852562,
        frostarmor = 852225,
        frostarmoroff = 852459,
        frostarmoron = 852458,
        frostnova = 852226,
        getitem = 851981,
        gold2lumber = 852233,
        grabtree = 852511,
        harvest = 852018,
        heal = 852063,
        healingspray = 852664,
        healingward = 852109,
        healingwave = 852501,
        healoff = 852065,
        healon = 852064,
        hex = 852502,
        holdposition = 851993,
        holybolt = 852092,
        howlofterror = 852588,
        humanbuild = 851995,
        immolation = 852177,
        impale = 852555,
        incineratearrow = 852670,
        incineratearrowoff = 852672,
        incineratearrowon = 852671,
        inferno = 852232,
        innerfire = 852066,
        innerfireoff = 852068,
        innerfireon = 852067,
        instant = 852200,
        invisibility = 852069,
        itemillusion = 852274,
        lavamonster = 852667,
        lightningshield = 852110,
        load = 852046,
        loadarcher = 852142,
        loadcorpse = 852050,
        loadcorpseinstant = 852053,
        locustswarm = 852556,
        lumber2gold = 852234,
        magicdefense = 852478,
        magicleash = 852480,
        magicundefense = 852479,
        manaburn = 852179,
        manaflareoff = 852513,
        manaflareon = 852512,
        manashieldoff = 852590,
        manashieldon = 852589,
        massteleport = 852093,
        mechanicalcritter = 852564,
        metamorphosis = 852180,
        militia = 852072,
        militiaconvert = 852071,
        militiaoff = 852073,
        militiaunconvert = 852651,
        mindrot = 852565,
        mirrorimage = 852123,
        monsoon = 852591,
        mount = 852469,
        mounthippogryph = 852143,
        move = 851986,
        nagabuild = 852467,
        neutraldetectaoe = 852023,
        neutralinteract = 852566,
        neutralspell = 852630,
        nightelfbuild = 851997,
        orcbuild = 851996,
        parasite = 852601,
        parasiteoff = 852603,
        parasiteon = 852602,
        patrol = 851990,
        phaseshift = 852514,
        phaseshiftinstant = 852517,
        phaseshiftoff = 852516,
        phaseshifton = 852515,
        phoenixfire = 852481,
        phoenixmorph = 852482,
        poisonarrows = 852255,
        poisonarrowstarg = 852254,
        polymorph = 852074,
        possession = 852196,
        preservation = 852568,
        purge = 852111,
        rainofchaos = 852237,
        rainoffire = 852238,
        raisedead = 852197,
        raisedeadoff = 852199,
        raisedeadon = 852198,
        ravenform = 852155,
        recharge = 852157,
        rechargeoff = 852159,
        rechargeon = 852158,
        rejuvination = 852160,
        renew = 852161,
        renewoff = 852163,
        renewon = 852162,
        repair = 852024,
        repairoff = 852026,
        repairon = 852025,
        replenish = 852542,
        replenishlife = 852545,
        replenishlifeoff = 852547,
        replenishlifeon = 852546,
        replenishmana = 852548,
        replenishmanaoff = 852550,
        replenishmanaon = 852549,
        replenishoff = 852544,
        replenishon = 852543,
        request_hero = 852239,
        requestsacrifice = 852201,
        restoration = 852202,
        restorationoff = 852204,
        restorationon = 852203,
        resumebuild = 851999,
        resumeharvesting = 852017,
        resurrection = 852094,
        returnresources = 852020,
        revenge = 852241,
        revive = 852039,
        reveal = 852270,
        roar = 852164,
        robogoblin = 852656,
        root = 852165,
        sacrifice = 852205,
        sanctuary = 852569,
        scout = 852181,
        selfdestruct = 852040,
        selfdestructoff = 852042,
        selfdestructon = 852041,
        sentinel = 852182,
        setrally = 851980,
        shadowsight = 852570,
        shadowstrike = 852527,
        shockwave = 852125,
        silence = 852592,
        sleep = 852227,
        slow = 852075,
        slowoff = 852077,
        slowon = 852076,
        smart = 851971,
        soulburn = 852668,
        soulpreservation = 852242,
        spellshield = 852571,
        spellshieldaoe = 852572,
        spellsteal = 852483,
        spellstealoff = 852485,
        spellstealon = 852484,
        spies = 852235,
        spiritlink = 852499,
        spiritofvengeance = 852528,
        spirittroll = 852573,
        spiritwolf = 852126,
        stampede = 852593,
        standdown = 852113,
        starfall = 852183,
        stasistrap = 852114,
        steal = 852574,
        stomp = 852127,
        stoneform = 852206,
        stop = 851972,
        submerge = 852604,
        summonfactory = 852658,
        summongrizzly = 852594,
        summonphoenix = 852489,
        summonquillbeast = 852595,
        summonwareagle = 852596,
        tankdroppilot = 852079,
        tankloadpilot = 852080,
        tankpilot = 852081,
        taunt = 852520,
        thunderbolt = 852095,
        thunderclap = 852096,
        tornado = 852597,
        townbelloff = 852083,
        townbellon = 852082,
        tranquility = 852184,
        transmute = 852665,
        unavatar = 852087,
        unavengerform = 852532,
        unbearform = 852139,
        unburrow = 852534,
        uncoldarrows = 852245,
        uncorporealform = 852494,
        undeadbuild = 851998,
        undefend = 852056,
        undivineshield = 852091,
        unetherealform = 852497,
        unflamingarrows = 852175,
        unflamingattack = 852541,
        unholyfrenzy = 852209,
        unimmolation = 852178,
        unload = 852047,
        unloadall = 852048,
        unloadallcorpses = 852054,
        unloadallinstant = 852049,
        unpoisonarrows = 852256,
        unravenform = 852156,
        unrobogoblin = 852657,
        unroot = 852166,
        unstableconcoction = 852500,
        unstoneform = 852207,
        unsubmerge = 852605,
        unsummon = 852210,
        unwindwalk = 852130,
        vengeance = 852521,
        vengeanceinstant = 852524,
        vengeanceoff = 852523,
        vengeanceon = 852522,
        volcano = 852669,
        voodoo = 852503,
        ward = 852504,
        waterelemental = 852097,
        wateryminion = 852598,
        web = 852211,
        weboff = 852213,
        webon = 852212,
        whirlwind = 852128,
        windwalk = 852129,
        wispharvest = 852214,
        scrollofspeed = 852285,
        cancel = 851976,
        moveslot1 = 852002,
        moveslot2 = 852003,
        moveslot3 = 852004,
        moveslot4 = 852005,
        moveslot5 = 852006,
        moveslot6 = 852007,
        useslot1 = 852008,
        useslot2 = 852009,
        useslot3 = 852010,
        useslot4 = 852011,
        useslot5 = 852012,
        useslot6 = 852013,
        skillmenu = 852000,
        stunned = 851973,
        instant1 = 851991,
        instant2 = 851987,
        instant3 = 851975,
        instant4 = 852019,
        unknown = 851974
    }

    typeIdTable = {}
    typeIdTable[FourCC("uloc")] = true
    typeIdTable[FourCC("h000")] = true
    typeIdTable[FourCC("h00V")] = true
    typeIdTable[FourCC("h00N")] = true
    typeIdTable[FourCC("h00O")] = true
    typeIdTable[FourCC("h00M")] = true
    typeIdTable[FourCC("o006")] = true
    typeIdTable[FourCC("h01Z")] = true
    typeIdTable[FourCC("hhdl")] = true
    typeIdTable[FourCC("hpea")] = true

    ordersIgnore = {}
    ordersIgnore[oid.defend] = true
    ordersIgnore[oid.undefend] = true
    ordersIgnore[oid.frenzy] = true
    ordersIgnore[oid.berserk] = true
    ordersIgnore[oid.attack] = true
    ordersIgnore[oid.magicdefense] = true
    ordersIgnore[oid.magicundefense] = true
    ordersIgnore[oid.unknown] = true
    ordersIgnore[oid.bloodluston] = true
    ordersIgnore[oid.bloodlustoff] = true
    ordersIgnore[oid.parasiteon] = true
    ordersIgnore[oid.parasiteoff] = true
    ordersIgnore[oid.slowon] = true
    ordersIgnore[oid.slowoff] = true
    ordersIgnore[oid.flamingarrows] = true
    ordersIgnore[oid.bearform] = true

    -- Spells
    ordersIgnore[FourCC("A016")] = true -- Defend Dwarf
    ordersIgnore[FourCC("A04U")] = true -- Defend Magic
    ordersIgnore[FourCC("A041")] = true -- Defend
    ordersIgnore[FourCC("Afzy")] = true -- Footmen Charge
    ordersIgnore[FourCC("A05J")] = true -- Berserk Dwarf
    ordersIgnore[FourCC("A00J")] = true -- Charge
end

-- Spawn Set up
function spawnAddBases()
    -- addBase(baseName, alliedStart, alliedEnd, alliedCondition, fedStart, fedEnd, fedCondition, destination)

    spawn:addBase("arcane", "sArcaneLeft", "bottomRight", gg_unit_h003_0015,
                  "sArcaneRight", "topLeft", gg_unit_h003_0007)
    spawn:addBase("arcaneCreep", "sArcaneLeft", "cStormLeft", gg_unit_h003_0015,
                  "sArcaneRight", "cStormRight", gg_unit_h003_0007)
    spawn:addBase("arcaneHero", "sArcaneHeroLeft", "bottomRight",
                  gg_unit_h014_0017, "sArcaneHeroRight", "topLeft",
                  gg_unit_h014_0158)
    spawn:addBase("arcaneTop", "sElementalTopLeft", "bottomRight",
                  gg_unit_hars_0355, "sElementalTopRight", "topLeft",
                  gg_unit_hars_0293)
    spawn:addBase("arcaneBottom", "sElementalBottomLeft", "bottomRight",
                  gg_unit_hars_0292, "sElementalBottomRight", "topLeft",
                  gg_unit_hars_0303)

    spawn:addBase("blacksmith", "sCityBlacksmithLeft", "everythingRight",
                  gg_unit_n00K_0802, "sCityBlacksmithRight", "everythingLeft",
                  gg_unit_n00K_0477)

    spawn:addBase("blacksmithCreep", "sCityBlacksmithLeft", "cDeathMidLeft",
                  gg_unit_n00K_0802, "sCityBlacksmithRight", "cDeathMidRight",
                  gg_unit_n00K_0477)
    spawn:addBase("castle", "sHeroLeft", "everythingRight", gg_unit_h00E_0033,
                  "sHeroRight", "everythingLeft", gg_unit_h00E_0081)
    spawn:addBase("cityElves", "sCityElfLeft", "everythingRight",
                  gg_unit_hvlt_0207, "sCityElfRight", "everythingLeft",
                  gg_unit_hvlt_0406)
    spawn:addBase("cityFront", "sCityFrontLeft", "middleRight",
                  gg_unit_n00B_0364, "sCityFrontRight", "middleLeft",
                  gg_unit_n00B_0399)
    spawn:addBase("citySide", "sCitySideLeft", "bottomRight", gg_unit_n00B_0102,
                  "sCitySideRight", "topLeft", gg_unit_n00B_0038)
    spawn:addBase("draenei", "sKolboldLeft", "topRight", gg_unit_ndh2_0359,
                  "sKolboldRight", "bottomLeft", gg_unit_ndh2_0876)
    spawn:addBase("highElves", "sElfLeft", "topRight", gg_unit_nheb_0109,
                  "sElfRight", "bottomLeft", gg_unit_nheb_0036)
    spawn:addBase("highElvesCreep", "sElfLeft", "cForestMidLeft",
                  gg_unit_nheb_0109, "sElfRight", "cForestMidRight",
                  gg_unit_nheb_0036)
    spawn:addBase("merc", "sCampLeft", "bottomRight", gg_unit_n001_0048,
                  "sCampRight", "topLeft", gg_unit_n001_0049)
    spawn:addBase("mine", "sWorkshopLeft", "bottomRight", gg_unit_h006_0074,
                  "sWorkshopRight", "topLeft", gg_unit_h006_0055)
    spawn:addBase("naga", "sNagaLeft", "topRight", gg_unit_nntt_0135,
                  "sNagaRight", "bottomLeft", gg_unit_nntt_0132)
    spawn:addBase("murloc", "sMurlocLeft", "topRight", gg_unit_nmh1_0735,
                  "sMurlocRight", "bottomLeft", gg_unit_nmh1_0783)
    spawn:addBase("nagaCreep", "sNagaLeft", "cTidesLeft", gg_unit_nntt_0135,
                  "sNagaRight", "cTidesRight", gg_unit_nntt_0132)
    spawn:addBase("nightElves", "sTreeLeft", "topRight", gg_unit_e003_0058,
                  "sTreeRight", "bottomLeft", gg_unit_e003_0014)
    spawn:addBase("orc", "sOrcLeft", "topRight", gg_unit_o001_0075, "sOrcRight",
                  "bottomLeft", gg_unit_o001_0078)
    spawn:addBase("shipyard", "sElfShipyardLeft", "sHumanShipyardRight",
                  gg_unit_eshy_0120, "sElfShipyardRight", "sHumanShipyardLeft",
                  gg_unit_eshy_0047)
    spawn:addBase("hshipyard", "sHumanShipyardLeft", "sHumanShipyardRight",
                  gg_unit_hshy_0011, "sHumanShipyardRight",
                  "sHumanShipyardLeft", gg_unit_hshy_0212, 3)
    spawn:addBase("undead", "sUndeadLeft", "middleRight", gg_unit_u001_0097,
                  "sUndeadRight", "middleLeft", gg_unit_u001_0098)
end

function spawnAddUnits()
    -- addUnit(baseName, unitType, numOfUnits, {waves}, levelStart, levelEnd)

    -- Arcane Spawn
    spawn:addUnit("arcane", "h00C", 1, {6, 7, 8, 9, 10}, 3, 12) -- Sorcress
    spawn:addUnit("arcane", "nchp", 1, {6, 7, 8, 9, 10}, 5, 12) -- Storm Summonor

    -- Arcane Creep Spawn
    spawn:addUnit("arcaneCreep", "narg", 1, {1, 2, 3, 4}, 2, 12) -- Battle Golem
    spawn:addUnit("arcaneCreep", "hwt2", 1, {1, 3}, 3, 12) -- Water Elemental (Level 2)
    spawn:addUnit("arcaneCreep", "hwt3", 1, {2, 3}, 4, 12) -- Water Elemental (Level 3)
    spawn:addUnit("arcaneCreep", "h00K", 1, {1, 2, 3, 5}, 6, 12) -- Magi Defender

    -- Arcane Hero Sapwn
    spawn:addUnit("arcaneHero", "n00A", 1, {5}, 7, 12) -- Supreme Wizard
    spawn:addUnit("arcaneHero", "nsgg", 1, {4}, 9, 12) -- Seige Golem

    -- Arcane Top Spawn
    spawn:addUnit("arcaneTop", "narg", 2, {4, 5, 6}, 1, 12) -- Battle Golem
    spawn:addUnit("arcaneTop", "hwt2", 1, {4, 6}, 4, 12) -- Water Elemental (Level 2)
    spawn:addUnit("arcaneTop", "n018", 1, {4}, 8, 12) -- Summonor

    -- Arcane Bottom Spawn
    spawn:addUnit("arcaneBottom", "narg", 2, {1, 2, 3}, 2, 12) -- Battle Golem
    spawn:addUnit("arcaneBottom", "hwt2", 1, {1, 3}, 4, 12) -- Water Elemental (Level 2)
    spawn:addUnit("arcaneBottom", "n018", 1, {1}, 8, 12) -- Summonor

    -- Blacksmith Creep Spawn
    spawn:addUnit("blacksmithCreep", "h007", 2, {1, 2, 3, 4}, 1, 6) -- Militia
    spawn:addUnit("blacksmithCreep", "nhea", 1, {1, 2}, 3, 12) -- Archer
    spawn:addUnit("blacksmithCreep", "hspt", 1, {3, 4}, 5, 12) -- Tower Guard
    spawn:addUnit("blacksmithCreep", "h017", 1, {1, 2, 3, 4, 5}, 8, 12) -- Scarlet Commander
    spawn:addUnit("blacksmithCreep", "hcth", 1, {1, 2, 3, 4, 5}, 11, 12) -- Captian

    -- Castle Spawn
    spawn:addUnit("castle", "h00S", 1, {1, 2, 3}, 8, 12) -- Commander

    -- City Elves
    spawn:addUnit("cityElves", "n00C", 1, {1, 3, 5}, 1, 3) -- Blood Elf Archer
    spawn:addUnit("cityElves", "n00C", 1, {1, 2, 3, 4, 5, 6}, 4, 12) -- Blood Elf Archer
    spawn:addUnit("cityElves", "hspt", 1, {1, 3, 4, 5, 6}, 2, 3) -- Blood Elf Breaker
    spawn:addUnit("cityElves", "hspt", 1, {1, 2, 3, 4, 5, 6, 7}, 4, 5) -- Blood Elf Breaker
    spawn:addUnit("cityElves", "hspt", 2, {1, 2, 3, 4, 5}, 6, 12) -- Blood Elf Breaker
    spawn:addUnit("cityElves", "hmpr", 1, {1, 4}, 3, 6) -- Mystic
    spawn:addUnit("cityElves", "hmpr", 1, {1, 2, 3, 4, 5, 7}, 7, 12) -- Mystic

    -- City Front Spawn
    spawn:addUnit("cityFront", "h007", 3, {1, 2, 3, 4, 5, 6}, 1, 2) -- Militia 1
    spawn:addUnit("cityFront", "h015", 2, {1, 2, 3, 4, 5, 6}, 3, 4) -- Militia 2
    spawn:addUnit("cityFront", "hfoo", 3, {1, 2, 3, 4, 5, 6}, 5, 12) -- Footman 1
    spawn:addUnit("cityFront", "hcth", 2, {3, 4, 6}, 5, 12) -- Captian
    spawn:addUnit("cityFront", "h00L", 1, {1, 3, 5}, 6, 12) -- Knight
    spawn:addUnit("cityFront", "hmtm", 1, {1, 4}, 8, 12) -- Catapult
    spawn:addUnit("cityFront", "h00D", 1, {2}, 10, 12) -- Commander of the Guard

    -- City Side Spawn
    spawn:addUnit("citySide", "h015", 1, {6, 7, 8, 9, 10}, 1, 2) -- Militia 1
    spawn:addUnit("citySide", "hfoo", 2, {5, 6, 8, 9}, 2, 3) -- Footman 1
    spawn:addUnit("citySide", "hfoo", 3, {5, 6, 8, 9}, 4, 12) -- Footman 1
    spawn:addUnit("citySide", "h00L", 1, {6, 8}, 3, 4) -- Knight
    spawn:addUnit("citySide", "h00L", 1, {6, 7, 8, 9}, 5, 12) -- Knight
    spawn:addUnit("citySide", "h017", 1, {8, 10}, 6, 12) -- Hardend Footman
    spawn:addUnit("citySide", "n00X", 1, {4, 5, 6, 7, 8, 9}, 3, 12) -- Arbalist

    -- Draenei Spawn
    spawn:addUnit("draenei", "ndrf", 2, {5, 6, 7, 8, 9, 10}, 1, 12) -- Draenei Guardian
    spawn:addUnit("draenei", "ndrf", 1, {7, 8, 9}, 5, 12) -- Draenei Guardian
    spawn:addUnit("draenei", "ndrd", 1, {6, 7, 8, 9, 10}, 3, 12) -- Draenei Darkslayer
    spawn:addUnit("draenei", "ndrs", 1, {7, 10}, 4, 12) -- Draenei Seer
    spawn:addUnit("draenei", "n00I", 1, {5, 6, 8}, 7, 12) -- Draenei Vindicator
    spawn:addUnit("draenei", "ncat", 1, {6, 8, 10}, 6, 12) -- Draenei Demolisher

    -- -- High Elves
    spawn:addUnit("highElves", "h00T", 1, {1, 2, 3, 5}, 1, 3) -- Apprentice
    spawn:addUnit("highElves", "h00T", 1, {1, 3}, 4, 12) -- Apprentice
    spawn:addUnit("highElves", "nhea", 1, {1, 3, 5}, 2, 12) -- Archer
    spawn:addUnit("highElves", "hhes", 2, {1, 2, 3, 4}, 4, 12) -- Swordsman
    spawn:addUnit("highElves", "nemi", 1, {1, 3, 5}, 5, 12) -- Mystic
    spawn:addUnit("highElves", "nws1", 1, {1, 2, 3, 5}, 6, 12) -- Dragon Hawk
    spawn:addUnit("highElves", "h005", 1, {1, 3, 5}, 7, 12) -- High Elf Knight

    -- -- High Elves Creep
    spawn:addUnit("highElvesCreep", "h00T", 1, {1, 2, 3, 4}, 1, 2) -- Swordsman
    spawn:addUnit("highElvesCreep", "hhes", 1, {1, 2, 3, 4}, 3, 12) -- Swordsman
    spawn:addUnit("highElvesCreep", "nhea", 1, {1, 3, 5}, 2, 12) -- Archer
    spawn:addUnit("highElvesCreep", "nemi", 1, {1, 3}, 4, 12) -- Mystic
    spawn:addUnit("highElvesCreep", "h010", 2, {1, 3, 5}, 5, 12) -- Elven Guardian

    -- Merc Spawn
    spawn:addUnit("merc", "n00L", 2, {1, 2, 3, 4, 5, 6}, 1, 12) -- Rogue
    spawn:addUnit("merc", "n003", 1, {2, 3, 4, 5, 6, 7, 8}, 2, 12) -- Merc Archer
    spawn:addUnit("merc", "n002", 2, {1, 2, 3, 5, 6}, 3, 12) -- Merc
    spawn:addUnit("merc", "n008", 1, {2, 5}, 4, 12) -- Enforcer
    spawn:addUnit("merc", "nass", 1, {3, 5, 7}, 5, 12) -- Assasin
    spawn:addUnit("merc", "n005", 1, {1, 5}, 6, 12) -- Bandit Lord

    -- Mine Spawn
    spawn:addUnit("mine", "h01O", 2, {1, 2, 3, 5, 6}, 1, 1) -- Dwarven Soldiers
    spawn:addUnit("mine", "h01O", 3, {1, 2, 3, 4, 5, 6, 7}, 2, 12) -- Dwarven Soldiers
    spawn:addUnit("mine", "h001", 1, {2, 4, 6}, 2, 12) -- Morter Team
    spawn:addUnit("mine", "h008", 1, {1, 2, 3, 4, 5, 6}, 3, 12) -- Rifleman
    spawn:addUnit("mine", "h01P", 1, {1, 2, 3, 4}, 5, 12) -- Dwarven Armored Captians
    spawn:addUnit("mine", "h01E", 1, {1, 2, 3, 4}, 6, 12) -- Magi
    spawn:addUnit("mine", "hgry", 1, {1, 2, 3, 4}, 8, 12) -- Gryphon Rider
    spawn:addUnit("mine", "hmtt", 1, {2, 5}, 6, 12) -- Seige Engine
    spawn:addUnit("mine", "n00F", 1, {1, 3, 6}, 7, 12) -- Automaton

    -- Murloc Spawn
    spawn:addUnit("murloc", "nmcf", 3, {5, 6, 7, 9, 10}, 1, 12) -- Mur'gul Cliffrunner
    spawn:addUnit("murloc", "nnmg", 1, {5, 7}, 2, 12) -- Mur'gul Reaver
    spawn:addUnit("murloc", "nmsn", 1, {6, 8, 10}, 3, 12) -- Mur'gul Snarecaster
    spawn:addUnit("murloc", "nmtw", 1, {4, 8}, 6, 12) -- Mur'gul Tidewarrior

    -- Naga Spawn
    spawn:addUnit("naga", "nmyr", 1, {1, 3}, 1, 3) -- Naga Myrmidon
    spawn:addUnit("naga", "nmyr", 1, {1, 2, 3, 4}, 4, 5) -- Naga Myrmidon
    spawn:addUnit("naga", "nmyr", 1, {1, 2, 3, 4, 5, 6}, 6, 12) -- Naga Myrmidon
    spawn:addUnit("naga", "nnsw", 1, {2, 4, 6}, 3, 12) -- Naga Siren
    spawn:addUnit("naga", "nnrg", 1, {2, 5}, 6, 12) -- Naga Royal Guard
    spawn:addUnit("naga", "nhyc", 1, {1, 4}, 9, 12) -- Dragon Turtle

    -- Naga Creep Spawn
    spawn:addUnit("nagaCreep", "nmyr", 1, {1, 2, 3, 4}, 2, 12) -- Naga Myrmidon
    spawn:addUnit("nagaCreep", "nnsw", 1, {2, 4}, 3, 12) -- Naga Siren
    spawn:addUnit("nagaCreep", "nsnp", 1, {2, 3, 4, 5, 6}, 5, 12) -- Snap Dragon

    -- Night Elves Spawn
    spawn:addUnit("nightElves", "earc", 1, {1, 2, 3, 4, 5}, 1, 12) -- Ranger
    spawn:addUnit("nightElves", "e000", 1, {1, 2, 3, 4, 5}, 2, 12) -- Elite Ranger
    spawn:addUnit("nightElves", "nwat", 1, {7, 8, 9, 10}, 2, 12) -- Sentry
    spawn:addUnit("nightElves", "edry", 1, {7, 9, 10}, 3, 12) -- Dryad
    spawn:addUnit("nightElves", "edoc", 1, {6, 7, 8, 9, 10}, 4, 12) -- Druid of the Claw
    spawn:addUnit("nightElves", "e005", 1, {5, 9}, 5, 12) -- Mountain Giant
    spawn:addUnit("nightElves", "nwnr", 1, {5}, 10, 12) -- Ent

    -- Orc Spawn
    spawn:addUnit("orc", "o002", 2, {1, 3, 5, 6}, 1, 12) -- Grunt
    spawn:addUnit("orc", "o002", 1, {2, 4, 6, 7}, 3, 12) -- Grunt
    spawn:addUnit("orc", "nftr", 1, {2, 4, 6, 7}, 2, 12) -- Troll
    spawn:addUnit("orc", "nogo", 2, {2, 4, 6, 7}, 4, 12) -- Ogre
    spawn:addUnit("orc", "nw2w", 1, {3, 5, 7}, 3, 12) -- Warlock
    spawn:addUnit("orc", "owad", 1, {1, 7}, 6, 12) -- Orc Warchief

    -- Human Shipyard Spawn
    spawn:addUnit("hshipyard", "hdes", 1, {2}, 1, 2) -- Human Frigate
    spawn:addUnit("hshipyard", "hdes", 1, {2, 4}, 3, 4) -- Human Frigate
    spawn:addUnit("hshipyard", "hdes", 1, {2, 4, 6}, 5, 12) -- Human Frigate
    spawn:addUnit("hshipyard", "hbsh", 1, {3}, 6, 12) -- Human Battleship

    -- Night Elf Shipyard Spawn
    spawn:addUnit("shipyard", "edes", 1, {1}, 2, 3) -- Night Elf Frigate
    spawn:addUnit("shipyard", "edes", 1, {1, 3}, 4, 5) -- Night Elf Frigate
    spawn:addUnit("shipyard", "edes", 1, {1, 3, 6}, 6, 12) -- Night Elf Frigate
    spawn:addUnit("shipyard", "ebsh", 1, {3}, 7, 12) -- Night Elf Battleship

    -- Undead Spawn
    spawn:addUnit("undead", "ugho", 4, {6, 7, 8, 9, 10}, 1, 12) -- Ghoul
    spawn:addUnit("undead", "uskm", 1, {6, 7, 8, 9, 10}, 2, 12) -- Skeleton Mage
    spawn:addUnit("undead", "unec", 1, {5, 7, 9}, 4, 12) -- Necromancer
    spawn:addUnit("undead", "nerw", 1, {7}, 6, 12) -- Warlock
    spawn:addUnit("undead", "nfgl", 1, {6, 9}, 8, 12) -- Giant Skeleton
    spawn:addUnit("undead", "ninc", 1, {5, 7}, 3, 5) -- Infernal Contraption (Level 1)
    spawn:addUnit("undead", "ninm", 1, {5, 7}, 6, 9) -- Infernal Contraption (Level 2)
    spawn:addUnit("undead", "nina", 1, {5, 7}, 10, 12) -- Infernal Contraption (Level 3)
end

--
-- Game Action Triggers
--
-- Hero Levels Up
function Init_HeroLevelsUp()
	local t = CreateTrigger()

	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_HERO_LEVEL)
	TriggerAddAction(t, function()
		-- Get Locals
		local levelingUnit = GetLevelingUnit()

		try(function() hero:levelUp(levelingUnit) end, "hero:levelUp")
	end)
end

-- Unit Casts Spell
function Init_UnitCastsSpell()
	trig_CastSpell = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(trig_CastSpell, EVENT_PLAYER_UNIT_SPELL_CAST)

	TriggerAddAction(trig_CastSpell, function()
		local triggerUnit = GetTriggerUnit()
		local order = OrderId2String(GetUnitCurrentOrder(triggerUnit))
		local spellCast = CC2Four(GetSpellAbilityId())

		try(function() CAST_aiHero(triggerUnit, spellCast) end, "CAST_aiHero")
	end)
end

-- Unit enters the Map
function Init_UnitEntersMap()
	--DisableTrigger(Trig_UnitEntersMap)
	TriggerRegisterEnterRectSimple(Trig_UnitEntersMap, GetPlayableMapRect())
	TriggerAddAction(Trig_UnitEntersMap, function()
		local triggerUnit = GetTriggerUnit()

		if not IsUnitType(triggerUnit, UNIT_TYPE_HERO) and not IsUnitType(triggerUnit, UNIT_TYPE_STRUCTURE) then
			--print(GetUnitName(triggerUnit) .. " Entered MAP MOVED")
			indexer:add(triggerUnit)

			unitKeepMoving(triggerUnit, true)
		end
	end)
end

-- Unit Issued Target or no Target Order
function Init_IssuedOrder()

	TriggerRegisterAnyUnitEventBJ(Trig_IssuedOrder, EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
	TriggerRegisterAnyUnitEventBJ(Trig_IssuedOrder, EVENT_PLAYER_UNIT_ISSUED_ORDER)
	TriggerRegisterAnyUnitEventBJ(Trig_IssuedOrder, EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
	TriggerRegisterAnyUnitEventBJ(Trig_IssuedOrder, EVENT_PLAYER_UNIT_ISSUED_UNIT_ORDER)

	TriggerAddAction(Trig_IssuedOrder, function()
		local triggerUnit = GetTriggerUnit()
		local unitIdType = GetUnitTypeId(triggerUnit)

		unitKeepMoving(triggerUnit, false, GetIssuedOrderId())
	end)

end

-- Unit Dies
function Init_UnitDies()
	TriggerRegisterAnyUnitEventBJ(Trig_UnitDies, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddAction(Trig_UnitDies, function()

		local dieingUnit = GetTriggerUnit()

		if IsUnitInGroup(dieingUnit, base.all.g) then base.died(dieingUnit) end

		if GetUnitTypeId(dieingUnit) == FourCC("n019") then
			local u
			local player = GetOwningPlayer(dieingUnit)
			
			if player == Player(20) then
				shieldTowers.allied = shieldTowers.allied - 1

				if shieldTowers.allied == 0 then
					u = gg_unit_h003_0015
					UnitRemoveAbility(u, FourCC("A02C"))
					BlzSetUnitName(u, "Arcane Citadel |cffff0000(Vulnerable)|r")
				end
			else
				shieldTowers.fed = shieldTowers.fed - 1
				if shieldTowers.fed == 0 then
					u = gg_unit_h003_0007
					UnitRemoveAbility(u, FourCC("A02C"))
					BlzSetUnitName(u, "Arcane Citadel |cffff0000(Vulnerable)|r")
				end
			end



		end
		-- Remove Index from Unit
		if not IsUnitType(dieingUnit, UNIT_TYPE_HERO) then
			PolledWait(10)
			indexer:remove(dieingUnit)
		end

	end)
end

-- Unit Enters region (Special)
function init_MoveToNext()
	TriggerAddAction(Trig_moveToNext, function()

		local triggerUnit = GetTriggerUnit()
		local player = GetOwningPlayer(triggerUnit)
		local isAllied = IsPlayerInForce(player, udg_PLAYERGRPallied)
		local isFed = IsPlayerInForce(player, udg_PLAYERGRPfederation)

		if not IsUnitType(triggerUnit, UNIT_TYPE_HERO) then
			if isAllied or isFed then
				local region = loc:getRegion(GetTriggeringRegion())

				if (isAllied and region.allied) or (isFed and region.fed) then
					local x, y = loc:getRandomXY(region.next)
					indexer:updateEnd(triggerUnit, x, y)
					indexer:order(triggerUnit)
				end
			end
		end
	end)
end

function init_Moonwell_cast()
	local t = CreateTrigger()
	TriggerRegisterTimerEventPeriodic(t, 4)
	TriggerAddAction(t, function()

		local l, u2
		local g = CreateGroup()
		local g2 = CreateGroup()

		g = GetUnitsOfTypeIdAll(FourCC("h024"))

		local u = FirstOfGroup(g)
		while u ~= nil do

			if GetUnitManaPercent(u) > 10 and BlzGetUnitAbilityCooldownRemaining(u, oid.recharge) == 0 then

				l = GetUnitLoc(u)
				g2 = GetUnitsInRangeOfLocAll(1200, l)
				RemoveLocation(l)

				u2 = FirstOfGroup(g2)
				while u2 ~= nil do

					if IsUnitType(u2, UNIT_TYPE_STRUCTURE) and GetUnitTypeId(u2) ~= FourCC("h024") and GetUnitManaPercent(u2) < 40 and
									GetUnitState(u2, UNIT_STATE_MAX_MANA) > 0 then
						DisableTrigger(Trig_IssuedOrder)
						IssueTargetOrderById(u, oid.recharge, u2)
						EnableTrigger(Trig_IssuedOrder)
					end

					GroupRemoveUnit(g2, u2)
					u2 = FirstOfGroup(g2)
				end
				DestroyGroup(g2)

			end

			GroupRemoveUnit(g, u)
			u = FirstOfGroup(g)
		end

		DestroyGroup(g)
	end)
end

-- Update Base Buildings
function init_BaseLoop()
	TriggerRegisterTimerEventPeriodic(Trig_baseLoop, 2.5)
	TriggerAddAction(Trig_baseLoop, function()

		local u, id
		local g = CreateGroup()

		GroupAddGroup(base.all.g, g)
		while true do
			u = FirstOfGroup(g)
			if u == nil then break end

			base.update(u)

			GroupRemoveUnit(g, u)
		end
		DestroyGroup(g)
	end) 
end

do
	local real = MarkGameStarted
	function MarkGameStarted()
		real()
		local trigger = CreateTrigger()
		for i = 0, 11 do BlzTriggerRegisterPlayerKeyEvent(trigger, Player(i), OSKEY_G, 0, true) end
		TriggerAddAction(trigger, function()

			local player = GetTriggerPlayer()
			local playerDetails = hero.players[GetConvertedPlayerId(player)]
			SelectUnitForPlayerSingle(playerDetails.alter, player)
		end)

		trigger = CreateTrigger()
		for i = 0, 11 do BlzTriggerRegisterPlayerKeyEvent(trigger, Player(i), OSKEY_F, 0, true) end

		TriggerAddAction(trigger, function()

			local player = GetTriggerPlayer()
			local playerDetails = hero.players[GetConvertedPlayerId(player)]
			SelectUnitForPlayerSingle(playerDetails.hero, player)
		end)
	end
end

--
-- Trigger Functions
-----------------

---comment
---@param triggerUnit unit
---@param spellCast string
function CAST_aiHero(triggerUnit, spellCast)
	if IsUnitInGroup(triggerUnit, ai.heroGroup) then
		local heroName = indexer:getKey(triggerUnit, "heroName")
		local spellCastData = hero[hero[spellCast]]

		if spellCastData ~= nil then
			ai:castSpell(heroName, spellCastData)
			print("MANUAL CAST")
		end
	end
end

-- Order starting units to attack
function orderStartingUnits()
	local g = CreateGroup()
	local u, typeId

	g = GetUnitsInRectAll(GetPlayableMapRect())
	while true do
		u = FirstOfGroup(g)
		if u == nil then break end

		try(function()

			indexer:add(u)
			unitKeepMoving(u, true)
		end)

		GroupRemoveUnit(g, u)
	end
	DestroyGroup(g)
end

-- Tell unit to keep Attack-Moving to it's indexed destination
---comment
---@param unit unit
---@param withoutDelay boolean
function unitKeepMoving(unit, withoutDelay, orderId)
	withoutDelay = withoutDelay or false
	orderId = orderId or GetUnitCurrentOrder(unit)

	local typeId = GetUnitTypeId(unit)
	local owningPlayer = GetOwningPlayer(unit)

	if owningPlayer ~= Player(PLAYER_NEUTRAL_AGGRESSIVE) and GetUnitState(unit, UNIT_STATE_LIFE) > 0 and
					not IsUnitType(unit, UNIT_TYPE_STRUCTURE) and not IsUnitType(unit, UNIT_TYPE_HERO) and
					not UnitHasBuffBJ(unit, FourCC("B006")) and typeIdTable[typeId] == nil and ordersIgnore[orderId] == nil then

		
		if withoutDelay ~= true then
			--print("Ordering " .. GetUnitName(unit) .. " - [" .. GetHandleId(unit) .. "] - " .. OrderId2String(orderId) .. ": " ..
						      --orderId .. " - Moving With Delay")
			PolledWait(3)
		else
			--print("Ordering " .. GetUnitName(unit) .. " - [" .. GetHandleId(unit) .. "] - " .. OrderId2String(orderId) .. ": " ..
						      --orderId .. " - Moving Immediately")
		end

		indexer:order(unit, "attack")
	end
end

function init_Lua()
	debugprint = 2
	shieldTowers = {allied = 7, fed = 7}

	-- Define Classes
	try(function()
		

		Init_luaGlobals()
		cine.Init()
		init_triggers()
		init_locationClass()
		init_indexerClass()
		init_heroClass()
		init_spawnClass()
		init_aiClass()
		init_baseClass()
		init_gateClass()
	end)
	-- dprint("Classes Defined", 2)

	-- Start the Map init
	Init_Map()

	-- Init Classes
	try(function()
		loc = loc_Class.new()
		addRegions()
		addBases()

		indexer = indexer_Class.new()
		hero = hero_Class.new()
		ai = ai_Class.new()
		spawn = spawn_Class.new()

	end)

	-- dprint("Classes Initialized", 2)

	-- Init Trigger

	ConditionalTriggerExecute(gg_trg_baseAndHeals)

	-- init_AutoZoom()
	Init_HeroLevelsUp()
	Init_UnitCastsSpell()
	init_spawnTimers()
	Init_UnitEntersMap()
	--Init_finishCasting()
	Init_IssuedOrder()
	Init_UnitDies()
	init_MoveToNext()
	Init_PickingPhase()
	init_BaseLoop()
	init_Moonwell_cast()

	-- Abilities
	try(function() init_Abilities() end)

	-- dprint("Triggers Initialized", 2)

	-- Spawn Base / Unit Setup
	-- Init Trigger
	try(function()
		spawnAddBases()
		spawnAddUnits()
	end)

	-- dprint("Spawn Setup", 2)

	-- Setup Delayed Init Triggers
	init_Delayed_1()
	init_Delayed_10()

	-- dprint("Init Finished")
end

-- Init Delayed Functions 1 second after Map Init
function init_Delayed_1()
	local t = CreateTrigger()
	TriggerRegisterTimerEventSingle(t, 1)
	TriggerAddAction(t, function()

		-- dprint("AI Started", 2)

		gate.main()
		orderStartingUnits()
		spawn:startSpawn()

		-- dprint("Spawn Started", 2)

	end)
end

-- Init Delayed Functions 10 second after Map Init
function init_Delayed_10()
	local t = CreateTrigger()
	TriggerRegisterTimerEventSingle(t, 10)
	TriggerAddAction(t, function()
		try(function()

			-- Set up the Creep Event Timer
			StartTimerBJ(udg_EventTimer, false, 350.00)
		end)
	end)
end

function Init_Map()

	FogMaskEnableOff()
	FogEnableOff()
	MeleeStartingVisibility()
	udg_UserPlayers = GetPlayersByMapControl(MAP_CONTROL_USER)
	udg_ALL_PLAYERS = GetPlayersAll()

	-- Turn on Bounty
	ForForce(udg_ALL_PLAYERS, function() SetPlayerFlagBJ(PLAYER_STATE_GIVES_BOUNTY, true, GetEnumPlayer()) end)

	-- Add Computers to their group
	udg_PLAYERcomputers[1] = Player(18)
	udg_PLAYERcomputers[2] = Player(19)
	udg_PLAYERcomputers[3] = Player(20)
	udg_PLAYERcomputers[4] = Player(21)
	udg_PLAYERcomputers[5] = Player(22)
	udg_PLAYERcomputers[6] = Player(23)

	-- Create the Allied Computers
	ForceAddPlayerSimple(udg_PLAYERcomputers[1], udg_PLAYERGRPallied)
	ForceAddPlayerSimple(udg_PLAYERcomputers[2], udg_PLAYERGRPallied)
	ForceAddPlayerSimple(udg_PLAYERcomputers[3], udg_PLAYERGRPallied)

	-- Create the Federation Computers
	ForceAddPlayerSimple(udg_PLAYERcomputers[4], udg_PLAYERGRPfederation)
	ForceAddPlayerSimple(udg_PLAYERcomputers[5], udg_PLAYERGRPfederation)
	ForceAddPlayerSimple(udg_PLAYERcomputers[6], udg_PLAYERGRPfederation)

	for i = 0, 11 do
		if GetPlayerSlotState(Player(i)) == PLAYER_SLOT_STATE_PLAYING then ForceAddPlayer(udg_playersAll, Player(i)) end
	end

	-- Create the Allied Users
	ForceAddPlayerSimple(Player(0), udg_PLAYERGRPalliedUsers)
	ForceAddPlayerSimple(Player(1), udg_PLAYERGRPalliedUsers)
	ForceAddPlayerSimple(Player(2), udg_PLAYERGRPalliedUsers)
	ForceAddPlayerSimple(Player(3), udg_PLAYERGRPalliedUsers)
	ForceAddPlayerSimple(Player(4), udg_PLAYERGRPalliedUsers)
	ForceAddPlayerSimple(Player(5), udg_PLAYERGRPalliedUsers)

	-- Create the Federation Users
	ForceAddPlayerSimple(Player(6), udg_PLAYERGRPfederationUsers)
	ForceAddPlayerSimple(Player(7), udg_PLAYERGRPfederationUsers)
	ForceAddPlayerSimple(Player(8), udg_PLAYERGRPfederationUsers)
	ForceAddPlayerSimple(Player(9), udg_PLAYERGRPfederationUsers)
	ForceAddPlayerSimple(Player(10), udg_PLAYERGRPfederationUsers)
	ForceAddPlayerSimple(Player(11), udg_PLAYERGRPfederationUsers)

	-- Change the color of Player 1 and Player 2
	SetPlayerColorBJ(Player(0), PLAYER_COLOR_COAL, true)
	SetPlayerColorBJ(Player(1), PLAYER_COLOR_EMERALD, true)

	-- Change the color of the computer players to all match
	ForForce(udg_PLAYERGRPallied, function() SetPlayerColorBJ(GetEnumPlayer(), PLAYER_COLOR_RED, true) end)
	ForForce(udg_PLAYERGRPfederation, function() SetPlayerColorBJ(GetEnumPlayer(), PLAYER_COLOR_BLUE, true) end)

end

function init_aiLoopStates()
	if (ai.count > 0) then
		local t = CreateTrigger()
		TriggerRegisterTimerEventPeriodic(t, ai.tick)
		TriggerAddAction(t, function()

			-- print(" -- ")
			if ai.loop >= ai.count then
				ai.loop = 1
			else
				ai.loop = ai.loop + 1
			end

			local i = ai.heroOptions[ai.loop]
			print(i)

			try(function()
				ai:updateIntel(i)

				if ai:isAlive(i) then
					ai:STATEDead(i)
					ai:STATELowHealth(i)
					ai:STATEStopFleeing(i)
					ai:STATEFleeing(i)
					ai:STATEHighHealth(i)
					ai:STATEcastingSpell(i)
					ai:STATEDefend(i)
					ai:STATEDefending(i)
					ai:STATEAbilities(i)
					ai:CleanUp(i)
				else
					ai:STATERevived(i)
				end
				print(" --")
			end)
		end)
	end
end

function init_spawnTimers()
	-- Create Spawn Loop Trigger

	TriggerAddAction(Trig_spawnLoop, function() try(function() spawn:loopSpawn() end) end)

	TriggerAddAction(Trig_upgradeCreeps, function() try(function() spawn:upgradeCreeps() end) end)
end

--
-- Triggers
--

-- Camera Setup
function init_AutoZoom()

	-- DisableTrigger(Trig_AutoZoom)
	-- TriggerRegisterTimerEventPeriodic(Trig_AutoZoom, 3.00)
	-- TriggerAddAction(Trig_AutoZoom, function()
	-- 	local l
	-- 	local i = 1
	-- 	local ug = CreateGroup()
	-- 	print("working")
	-- 	while (i <= 12) do
	-- 		if GetLocalPlayer() == Player(i) then
	-- 			l = GetCameraTargetPositionLoc()
	-- 			ug = GetUnitsInRangeOfLocAll(1350, l)
	-- 			RemoveLocation(l)
	-- 			SetCameraFieldForPlayer(ConvertedPlayer(i), CAMERA_FIELD_TARGET_DISTANCE,
	-- 			                        (1400.00 + (1.00 * CountUnitsInGroup(ug))), 6.00)
	-- 			DestroyGroup(ug)
	-- 		end
	-- 		i = i + 1
	-- 	end
	-- 	print("Worked")
	-- end)
end

function Init_PickingPhase()
	local t = CreateTrigger()
	TriggerRegisterTimerEventPeriodic(t, 1.00)
	TriggerAddAction(t, function()

		local u, player
		local unitHero = false
		local g = CreateGroup()

		local count = (15 - GetTriggerExecCount(GetTriggeringTrigger()))

		HeroSelector.setTitleText(GetLocalizedString("DEFAULTTIMERDIALOGTEXT") .. ": " .. count)

		if count <= 5 then PlaySoundBJ(gg_snd_BattleNetTick) end

		if count <= 0 then

			ForForce(udg_playersAll, function()
				player = GetEnumPlayer()

				if not hero.players[GetConvertedPlayerId(player)].picked then
					print("picking for player " .. GetConvertedPlayerId(player))
					HeroSelector.forcePick(player)
				end

				local heroUnit = hero.players[GetConvertedPlayerId(player)].hero
				ShowUnitShow(heroUnit)
				SelectUnitForPlayerSingle(heroUnit, player)

			end)

			DisableTrigger(GetTriggeringTrigger())
			HeroSelector.destroy()

			cine.finish()

			init_aiLoopStates()
		end
	end)
end

function InitSounds()
    gg_snd_PurgeTarget1 = CreateSound("Abilities/Spells/Orc/Purge/PurgeTarget1.flac", false, true, true, 0, 0, "SpellsEAX")
    SetSoundParamsFromLabel(gg_snd_PurgeTarget1, "Purge")
    SetSoundDuration(gg_snd_PurgeTarget1, 2095)
    SetSoundVolume(gg_snd_PurgeTarget1, 127)
    gg_snd_BattleNetTick = CreateSound("Sound/Interface/BattleNetTick.flac", false, false, false, 0, 0, "DefaultEAXON")
    SetSoundParamsFromLabel(gg_snd_BattleNetTick, "ChatroomTimerTick")
    SetSoundDuration(gg_snd_BattleNetTick, 657)
    SetSoundVolume(gg_snd_BattleNetTick, 80)
    gg_snd_CreepAggroWhat1 = CreateSound("Sound/Interface/CreepAggroWhat1.flac", false, false, false, 0, 0, "DefaultEAXON")
    SetSoundParamsFromLabel(gg_snd_CreepAggroWhat1, "CreepAggro")
    SetSoundDuration(gg_snd_CreepAggroWhat1, 1784)
    SetSoundVolume(gg_snd_CreepAggroWhat1, 127)
    gg_snd_Error = CreateSound("Sound/Interface/Error.flac", false, false, false, 0, 0, "DefaultEAXON")
    SetSoundParamsFromLabel(gg_snd_Error, "InterfaceError")
    SetSoundDuration(gg_snd_Error, 614)
    SetSoundVolume(gg_snd_Error, 127)
    gg_snd_MapPing = CreateSound("Sound/Interface/MapPing.flac", false, false, false, 0, 0, "DefaultEAXON")
    SetSoundParamsFromLabel(gg_snd_MapPing, "MapPing")
    SetSoundDuration(gg_snd_MapPing, 2845)
    SetSoundVolume(gg_snd_MapPing, 127)
    gg_snd_Warning = CreateSound("Sound/Interface/Warning.flac", false, false, false, 0, 0, "DefaultEAXON")
    SetSoundParamsFromLabel(gg_snd_Warning, "Warning")
    SetSoundDuration(gg_snd_Warning, 1903)
    SetSoundVolume(gg_snd_Warning, 80)
    gg_snd_GateEpicDeath = CreateSound("Doodads/LordaeronSummer/Terrain/Gate/GateEpicDeath.flac", false, true, true, 0, 0, "DefaultEAXON")
    SetSoundParamsFromLabel(gg_snd_GateEpicDeath, "GateDeath")
    SetSoundDuration(gg_snd_GateEpicDeath, 1581)
    SetSoundVolume(gg_snd_GateEpicDeath, 127)
end

function CreateBuildingsForPlayer0()
    local p = Player(0)
    local u
    local unitID
    local t
    local life
    u = BlzCreateUnitWithSkin(p, FourCC("halt"), -24992.0, -4576.0, 270.000, FourCC("halt"))
    u = BlzCreateUnitWithSkin(p, FourCC("h023"), -24256.0, -5696.0, 270.000, FourCC("h023"))
end

function CreateBuildingsForPlayer1()
    local p = Player(1)
    local u
    local unitID
    local t
    local life
    u = BlzCreateUnitWithSkin(p, FourCC("halt"), -24992.0, -4896.0, 270.000, FourCC("halt"))
end

function CreateBuildingsForPlayer2()
    local p = Player(2)
    local u
    local unitID
    local t
    local life
    u = BlzCreateUnitWithSkin(p, FourCC("halt"), -24992.0, -5216.0, 270.000, FourCC("halt"))
end

function CreateBuildingsForPlayer3()
    local p = Player(3)
    local u
    local unitID
    local t
    local life
    u = BlzCreateUnitWithSkin(p, FourCC("halt"), -23328.0, -3552.0, 270.000, FourCC("halt"))
end

function CreateBuildingsForPlayer4()
    local p = Player(4)
    local u
    local unitID
    local t
    local life
    u = BlzCreateUnitWithSkin(p, FourCC("halt"), -23648.0, -3552.0, 270.000, FourCC("halt"))
end

function CreateBuildingsForPlayer5()
    local p = Player(5)
    local u
    local unitID
    local t
    local life
    u = BlzCreateUnitWithSkin(p, FourCC("halt"), -23968.0, -3552.0, 270.000, FourCC("halt"))
end

function CreateBuildingsForPlayer6()
    local p = Player(6)
    local u
    local unitID
    local t
    local life
    u = BlzCreateUnitWithSkin(p, FourCC("halt"), -5728.0, -5792.0, 270.000, FourCC("halt"))
end

function CreateBuildingsForPlayer7()
    local p = Player(7)
    local u
    local unitID
    local t
    local life
    u = BlzCreateUnitWithSkin(p, FourCC("halt"), -5408.0, -5792.0, 270.000, FourCC("halt"))
end

function CreateBuildingsForPlayer8()
    local p = Player(8)
    local u
    local unitID
    local t
    local life
    u = BlzCreateUnitWithSkin(p, FourCC("halt"), -5088.0, -5792.0, 270.000, FourCC("halt"))
end

function CreateBuildingsForPlayer9()
    local p = Player(9)
    local u
    local unitID
    local t
    local life
    u = BlzCreateUnitWithSkin(p, FourCC("halt"), -4064.0, -4768.0, 270.000, FourCC("halt"))
end

function CreateBuildingsForPlayer10()
    local p = Player(10)
    local u
    local unitID
    local t
    local life
    u = BlzCreateUnitWithSkin(p, FourCC("halt"), -4064.0, -4448.0, 270.000, FourCC("halt"))
end

function CreateBuildingsForPlayer11()
    local p = Player(11)
    local u
    local unitID
    local t
    local life
    u = BlzCreateUnitWithSkin(p, FourCC("halt"), -4064.0, -4128.0, 270.000, FourCC("halt"))
end

function CreateBuildingsForPlayer20()
    local p = Player(20)
    local u
    local unitID
    local t
    local life
    u = BlzCreateUnitWithSkin(p, FourCC("ncb9"), -20256.0, -7840.0, 90.000, FourCC("ncb9"))
    u = BlzCreateUnitWithSkin(p, FourCC("hgtw"), -22208.0, -3136.0, 270.000, FourCC("hgtw"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -19360.0, -4608.0, 90.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("nfv0"), -21376.0, -5408.0, 141.625, FourCC("nfv0"))
    u = BlzCreateUnitWithSkin(p, FourCC("n019"), -21504.0, -11200.0, 270.000, FourCC("n019"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncbb"), -15584.0, -5856.0, 270.000, FourCC("ncbb"))
    gg_unit_hshy_0011 = BlzCreateUnitWithSkin(p, FourCC("hshy"), -18592.0, -7392.0, 270.000, FourCC("hshy"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncb5"), -15520.0, -6240.0, 270.000, FourCC("ncb5"))
    u = BlzCreateUnitWithSkin(p, FourCC("n019"), -22912.0, -10304.0, 270.000, FourCC("n019"))
    gg_unit_h003_0015 = BlzCreateUnitWithSkin(p, FourCC("h003"), -23488.0, -11200.0, 270.000, FourCC("h003"))
    SetUnitColor(gg_unit_h003_0015, ConvertPlayerColor(3))
    u = BlzCreateUnitWithSkin(p, FourCC("n000"), -23936.0, -5376.0, 270.000, FourCC("n000"))
    gg_unit_h014_0017 = BlzCreateUnitWithSkin(p, FourCC("h014"), -20544.0, -11200.0, 270.000, FourCC("h014"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01A"), -14976.0, -6464.0, 270.000, FourCC("h01A"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01A"), -14208.0, -6400.0, 270.000, FourCC("h01A"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncbb"), -15968.0, -6752.0, 270.000, FourCC("ncbb"))
    u = BlzCreateUnitWithSkin(p, FourCC("n007"), -23104.0, -9984.0, 270.000, FourCC("n007"))
    u = BlzCreateUnitWithSkin(p, FourCC("n000"), -23168.0, -3968.0, 270.000, FourCC("n000"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00M"), -14080.0, -8448.0, 270.000, FourCC("n00M"))
    SetUnitState(u, UNIT_STATE_MANA, 260)
    u = BlzCreateUnitWithSkin(p, FourCC("n00M"), -13824.0, -7808.0, 270.000, FourCC("n00M"))
    SetUnitState(u, UNIT_STATE_MANA, 260)
    u = BlzCreateUnitWithSkin(p, FourCC("hgtw"), -22272.0, -6784.0, 270.000, FourCC("hgtw"))
    gg_unit_h00E_0033 = BlzCreateUnitWithSkin(p, FourCC("h00E"), -23936.0, -4608.0, 270.000, FourCC("h00E"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncbb"), -16992.0, -6112.0, 270.000, FourCC("ncbb"))
    u = BlzCreateUnitWithSkin(p, FourCC("o004"), -14912.0, -7744.0, 270.000, FourCC("o004"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncb2"), -16608.0, -6176.0, 270.000, FourCC("ncb2"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncb5"), -16352.0, -6560.0, 270.000, FourCC("ncb5"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncb5"), -16992.0, -7392.0, 270.000, FourCC("ncb5"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncbb"), -16864.0, -7840.0, 270.000, FourCC("ncbb"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncbb"), -16416.0, -7200.0, 270.000, FourCC("ncbb"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01C"), -14656.0, -11904.0, 360.000, FourCC("h01C"))
    gg_unit_n001_0048 = BlzCreateUnitWithSkin(p, FourCC("n001"), -15296.0, -8128.0, 270.000, FourCC("n001"))
    SetUnitColor(gg_unit_n001_0048, ConvertPlayerColor(9))
    u = BlzCreateUnitWithSkin(p, FourCC("h01U"), -13568.0, -13952.0, 45.372, FourCC("h01U"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01I"), -14656.0, -11008.0, 270.000, FourCC("h01I"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01I"), -14976.0, -12736.0, 270.000, FourCC("h01I"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01I"), -17216.0, -10688.0, 270.000, FourCC("h01I"))
    gg_unit_e003_0058 = BlzCreateUnitWithSkin(p, FourCC("e003"), -24448.0, -1792.0, 270.000, FourCC("e003"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01T"), -16192.0, -10432.0, 270.000, FourCC("h01T"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01C"), -14848.0, -13376.0, 360.000, FourCC("h01C"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01K"), -16928.0, -11040.0, 270.000, FourCC("h01K"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00X"), -17152.0, -4928.0, 270.000, FourCC("h00X"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01L"), -16480.0, -13600.0, 270.000, FourCC("h01L"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01I"), -15808.0, -13312.0, 270.000, FourCC("h01I"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -22720.0, -5824.0, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01I"), -17344.0, -12672.0, 270.000, FourCC("h01I"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00M"), -14848.0, -8448.0, 270.000, FourCC("n00M"))
    u = BlzCreateUnitWithSkin(p, FourCC("o005"), -18560.0, -960.0, 270.000, FourCC("o005"))
    u = BlzCreateUnitWithSkin(p, FourCC("o003"), -18592.0, -1440.0, 270.000, FourCC("o003"))
    u = BlzCreateUnitWithSkin(p, FourCC("hgtw"), -20352.0, -6464.0, 270.000, FourCC("hgtw"))
    gg_unit_h006_0074 = BlzCreateUnitWithSkin(p, FourCC("h006"), -16128.0, -11968.0, 270.000, FourCC("h006"))
    gg_unit_o001_0075 = BlzCreateUnitWithSkin(p, FourCC("o001"), -19136.0, -1088.0, 270.000, FourCC("o001"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01M"), -15520.0, -10976.0, 270.000, FourCC("h01M"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01N"), -16960.0, -13664.0, 270.000, FourCC("h01N"))
    u = BlzCreateUnitWithSkin(p, FourCC("o000"), -17344.0, -1472.0, 270.000, FourCC("o000"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00X"), -18240.0, -8320.0, 270.000, FourCC("h00X"))
    u = BlzCreateUnitWithSkin(p, FourCC("hbla"), -19904.0, -6592.0, 270.000, FourCC("hbla"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01R"), -14528.0, -7936.0, 270.000, FourCC("h01R"))
    u = BlzCreateUnitWithSkin(p, FourCC("n007"), -24384.0, -11968.0, 270.000, FourCC("n007"))
    u = BlzCreateUnitWithSkin(p, FourCC("otrb"), -19136.0, -1600.0, 270.000, FourCC("otrb"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00X"), -18496.0, -3520.0, 270.000, FourCC("h00X"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00X"), -17856.0, -3520.0, 270.000, FourCC("h00X"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01D"), -17856.0, -13504.0, 360.000, FourCC("h01D"))
    gg_unit_u001_0097 = BlzCreateUnitWithSkin(p, FourCC("u001"), -16896.0, -3200.0, 270.000, FourCC("u001"))
    u = BlzCreateUnitWithSkin(p, FourCC("o005"), -19072.0, -1472.0, 270.000, FourCC("o005"))
    gg_unit_n00B_0102 = BlzCreateUnitWithSkin(p, FourCC("n00B"), -20352.0, -6912.0, 270.000, FourCC("n00B"))
    u = BlzCreateUnitWithSkin(p, FourCC("negt"), -20416.0, -3776.0, 270.000, FourCC("negt"))
    u = BlzCreateUnitWithSkin(p, FourCC("h024"), -23232.0, -10432.0, 270.000, FourCC("h024"))
    u = BlzCreateUnitWithSkin(p, FourCC("hgtw"), -20352.0, -7360.0, 270.000, FourCC("hgtw"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00X"), -17152.0, -5312.0, 270.000, FourCC("h00X"))
    gg_unit_nheb_0109 = BlzCreateUnitWithSkin(p, FourCC("nheb"), -24864.0, 1312.0, 270.000, FourCC("nheb"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00X"), -15808.0, -6464.0, 270.000, FourCC("h00X"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01D"), -17408.0, -11776.0, 360.000, FourCC("h01D"))
    u = BlzCreateUnitWithSkin(p, FourCC("n000"), -23168.0, -4608.0, 270.000, FourCC("n000"))
    gg_unit_eshy_0120 = BlzCreateUnitWithSkin(p, FourCC("eshy"), -21664.0, -2016.0, 270.000, FourCC("eshy"))
    u = BlzCreateUnitWithSkin(p, FourCC("otrb"), -18432.0, -1472.0, 270.000, FourCC("otrb"))
    u = BlzCreateUnitWithSkin(p, FourCC("nntg"), -21312.0, 1920.0, 270.000, FourCC("nntg"))
    u = BlzCreateUnitWithSkin(p, FourCC("nntg"), -20544.0, 2560.0, 270.000, FourCC("nntg"))
    u = BlzCreateUnitWithSkin(p, FourCC("o004"), -14592.0, -8064.0, 270.000, FourCC("o004"))
    gg_unit_nntt_0135 = BlzCreateUnitWithSkin(p, FourCC("nntt"), -20736.0, 1984.0, 270.000, FourCC("nntt"))
    u = BlzCreateUnitWithSkin(p, FourCC("o004"), -15808.0, -7936.0, 270.000, FourCC("o004"))
    u = BlzCreateUnitWithSkin(p, FourCC("nntg"), -20992.0, 1344.0, 270.000, FourCC("nntg"))
    u = BlzCreateUnitWithSkin(p, FourCC("n007"), -22400.0, -10432.0, 270.000, FourCC("n007"))
    u = BlzCreateUnitWithSkin(p, FourCC("nbwd"), -24896.0, -1024.0, 270.000, FourCC("nbwd"))
    u = BlzCreateUnitWithSkin(p, FourCC("negt"), -24576.0, 832.0, 270.000, FourCC("negt"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00X"), -17664.0, -7744.0, 270.000, FourCC("h00X"))
    u = BlzCreateUnitWithSkin(p, FourCC("negt"), -24704.0, 256.0, 270.000, FourCC("negt"))
    u = BlzCreateUnitWithSkin(p, FourCC("otrb"), -18560.0, -1600.0, 270.000, FourCC("otrb"))
    u = BlzCreateUnitWithSkin(p, FourCC("negt"), -23936.0, 640.0, 270.000, FourCC("negt"))
    u = BlzCreateUnitWithSkin(p, FourCC("negt"), -24256.0, 256.0, 270.000, FourCC("negt"))
    u = BlzCreateUnitWithSkin(p, FourCC("nntg"), -19968.0, 2304.0, 270.000, FourCC("nntg"))
    u = BlzCreateUnitWithSkin(p, FourCC("otrb"), -17344.0, -2048.0, 270.000, FourCC("otrb"))
    u = BlzCreateUnitWithSkin(p, FourCC("nntg"), -20224.0, 1152.0, 270.000, FourCC("nntg"))
    u = BlzCreateUnitWithSkin(p, FourCC("nntg"), -19840.0, 1472.0, 270.000, FourCC("nntg"))
    u = BlzCreateUnitWithSkin(p, FourCC("otrb"), -18432.0, -1600.0, 270.000, FourCC("otrb"))
    u = BlzCreateUnitWithSkin(p, FourCC("hgtw"), -22592.0, -3136.0, 270.000, FourCC("hgtw"))
    u = BlzCreateUnitWithSkin(p, FourCC("negt"), -23936.0, 1024.0, 270.000, FourCC("negt"))
    u = BlzCreateUnitWithSkin(p, FourCC("otrb"), -17216.0, -1536.0, 270.000, FourCC("otrb"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncnt"), -17312.0, -992.0, 270.000, FourCC("ncnt"))
    u = BlzCreateUnitWithSkin(p, FourCC("n000"), -24576.0, -5376.0, 270.000, FourCC("n000"))
    gg_unit_hvlt_0207 = BlzCreateUnitWithSkin(p, FourCC("hvlt"), -21248.0, -4224.0, 270.000, FourCC("hvlt"))
    u = BlzCreateUnitWithSkin(p, FourCC("n019"), -24064.0, -12096.0, 270.000, FourCC("n019"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00G"), -23168.0, -10880.0, 270.000, FourCC("h00G"))
    u = BlzCreateUnitWithSkin(p, FourCC("h024"), -23744.0, -10432.0, 270.000, FourCC("h024"))
    u = BlzCreateUnitWithSkin(p, FourCC("negt"), -24384.0, 1472.0, 270.000, FourCC("negt"))
    u = BlzCreateUnitWithSkin(p, FourCC("npgf"), -17824.0, -2336.0, 270.000, FourCC("npgf"))
    u = BlzCreateUnitWithSkin(p, FourCC("otrb"), -18432.0, -896.0, 270.000, FourCC("otrb"))
    u = BlzCreateUnitWithSkin(p, FourCC("n000"), -23424.0, -4288.0, 270.000, FourCC("n000"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -18848.0, -6784.0, 90.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -19360.0, -5408.0, 180.000, FourCC("ncba"))
    gg_unit_hars_0292 = BlzCreateUnitWithSkin(p, FourCC("hars"), -20160.0, -12992.0, 270.000, FourCC("hars"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01R"), -17088.0, -1536.0, 270.000, FourCC("h01R"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00M"), -14464.0, -7360.0, 270.000, FourCC("n00M"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00M"), -15872.0, -8448.0, 270.000, FourCC("n00M"))
    u = BlzCreateUnitWithSkin(p, FourCC("nfv0"), -21696.0, -4768.0, 94.681, FourCC("nfv0"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00Z"), -19616.0, 3488.0, 270.000, FourCC("n00Z"))
    u = BlzCreateUnitWithSkin(p, FourCC("negt"), -20224.0, -4480.0, 270.000, FourCC("negt"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncb4"), -18144.0, -5024.0, 270.000, FourCC("ncb4"))
    u = BlzCreateUnitWithSkin(p, FourCC("n000"), -24256.0, -5120.0, 270.000, FourCC("n000"))
    gg_unit_hars_0355 = BlzCreateUnitWithSkin(p, FourCC("hars"), -20160.0, -9408.0, 270.000, FourCC("hars"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -23104.0, -5824.0, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -22720.0, -5440.0, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("hgtw"), -21760.0, -6784.0, 270.000, FourCC("hgtw"))
    gg_unit_ndh2_0359 = BlzCreateUnitWithSkin(p, FourCC("ndh2"), -17344.0, 576.0, 270.000, FourCC("ndh2"))
    u = BlzCreateUnitWithSkin(p, FourCC("hgtw"), -21760.0, -6272.0, 270.000, FourCC("hgtw"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncb4"), -18144.0, -5216.0, 270.000, FourCC("ncb4"))
    u = BlzCreateUnitWithSkin(p, FourCC("negt"), -25216.0, 896.0, 270.000, FourCC("negt"))
    gg_unit_n00B_0364 = BlzCreateUnitWithSkin(p, FourCC("n00B"), -18752.0, -5056.0, 270.000, FourCC("n00B"))
    u = BlzCreateUnitWithSkin(p, FourCC("hgtw"), -19904.0, -6912.0, 270.000, FourCC("hgtw"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncb4"), -18144.0, -5408.0, 270.000, FourCC("ncb4"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncbf"), -18496.0, -6176.0, 224.895, FourCC("ncbf"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -18656.0, -6784.0, 90.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("otrb"), -17344.0, -1920.0, 270.000, FourCC("otrb"))
    u = BlzCreateUnitWithSkin(p, FourCC("otrb"), -19008.0, -1600.0, 270.000, FourCC("otrb"))
    u = BlzCreateUnitWithSkin(p, FourCC("h019"), -19392.0, -7808.0, 17.000, FourCC("h019"))
    u = BlzCreateUnitWithSkin(p, FourCC("hbar"), -19904.0, -7296.0, 270.000, FourCC("hbar"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncb4"), -17952.0, -6048.0, 90.000, FourCC("ncb4"))
    u = BlzCreateUnitWithSkin(p, FourCC("otrb"), -17216.0, -1408.0, 270.000, FourCC("otrb"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncb4"), -17504.0, -5984.0, 270.000, FourCC("ncb4"))
    u = BlzCreateUnitWithSkin(p, FourCC("hgtw"), -19328.0, -5056.0, 270.000, FourCC("hgtw"))
    u = BlzCreateUnitWithSkin(p, FourCC("otrb"), -18432.0, -1024.0, 270.000, FourCC("otrb"))
    u = BlzCreateUnitWithSkin(p, FourCC("obea"), -17984.0, -1664.0, 270.000, FourCC("obea"))
    u = BlzCreateUnitWithSkin(p, FourCC("o000"), -17472.0, -1984.0, 270.000, FourCC("o000"))
    u = BlzCreateUnitWithSkin(p, FourCC("hgtw"), -19200.0, -4096.0, 270.000, FourCC("hgtw"))
    u = BlzCreateUnitWithSkin(p, FourCC("n007"), -23872.0, -9984.0, 270.000, FourCC("n007"))
    u = BlzCreateUnitWithSkin(p, FourCC("uzg1"), -16288.0, -3552.0, 270.000, FourCC("uzg1"))
    u = BlzCreateUnitWithSkin(p, FourCC("uzg1"), -16352.0, -3040.0, 270.000, FourCC("uzg1"))
    u = BlzCreateUnitWithSkin(p, FourCC("uzg1"), -16672.0, -3872.0, 270.000, FourCC("uzg1"))
    u = BlzCreateUnitWithSkin(p, FourCC("uzg1"), -17120.0, -3616.0, 270.000, FourCC("uzg1"))
    u = BlzCreateUnitWithSkin(p, FourCC("nnzg"), -15968.0, -3232.0, 270.000, FourCC("nnzg"))
    u = BlzCreateUnitWithSkin(p, FourCC("nnzg"), -15840.0, -3616.0, 270.000, FourCC("nnzg"))
    u = BlzCreateUnitWithSkin(p, FourCC("nnzg"), -16736.0, -4192.0, 270.000, FourCC("nnzg"))
    u = BlzCreateUnitWithSkin(p, FourCC("nnzg"), -16288.0, -4064.0, 270.000, FourCC("nnzg"))
    u = BlzCreateUnitWithSkin(p, FourCC("ntt1"), -17984.0, 1088.0, 270.000, FourCC("ntt1"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01R"), -18304.0, -960.0, 270.000, FourCC("h01R"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01R"), -18304.0, -1536.0, 270.000, FourCC("h01R"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01R"), -18496.0, -1728.0, 270.000, FourCC("h01R"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01R"), -19072.0, -1728.0, 270.000, FourCC("h01R"))
    u = BlzCreateUnitWithSkin(p, FourCC("h024"), -20160.0, -9792.0, 270.000, FourCC("h024"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -19168.0, -4608.0, 90.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -18784.0, -4544.0, 90.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -18592.0, -4544.0, 90.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -18400.0, -4544.0, 90.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00M"), -14208.0, -7744.0, 270.000, FourCC("n00M"))
    SetUnitState(u, UNIT_STATE_MANA, 260)
    u = BlzCreateUnitWithSkin(p, FourCC("n00D"), -16064.0, -576.0, 270.000, FourCC("n00D"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmg0"), -18080.0, 4832.0, 270.000, FourCC("nmg0"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -18464.0, -6784.0, 90.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("ndh1"), -16064.0, 448.0, 270.000, FourCC("ndh1"))
    u = BlzCreateUnitWithSkin(p, FourCC("ndh4"), -16576.0, 384.0, 270.000, FourCC("ndh4"))
    u = BlzCreateUnitWithSkin(p, FourCC("o004"), -15488.0, -8576.0, 270.000, FourCC("o004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01R"), -15360.0, -8640.0, 270.000, FourCC("h01R"))
    u = BlzCreateUnitWithSkin(p, FourCC("obar"), -19008.0, -2176.0, 270.000, FourCC("obar"))
    u = BlzCreateUnitWithSkin(p, FourCC("ofor"), -17632.0, -1184.0, 270.000, FourCC("ofor"))
    u = BlzCreateUnitWithSkin(p, FourCC("ovln"), -20160.0, -2240.0, 270.000, FourCC("ovln"))
    u = BlzCreateUnitWithSkin(p, FourCC("npgf"), -18272.0, -2336.0, 270.000, FourCC("npgf"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00E"), -23150.6, -1452.7, 37.127, FourCC("n00E"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00G"), -22882.6, -1233.3, 222.241, FourCC("n00G"))
    u = BlzCreateUnitWithSkin(p, FourCC("n011"), -21604.3, -596.4, 181.949, FourCC("n011"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncbf"), -18080.0, -4448.0, 44.738, FourCC("ncbf"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -19808.0, -5408.0, 360.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -19424.0, -5920.0, 270.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -19808.0, -5600.0, 360.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -19808.0, -4000.0, 270.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("hgtw"), -19008.0, -6336.0, 270.000, FourCC("hgtw"))
    u = BlzCreateUnitWithSkin(p, FourCC("harm"), -20800.0, -6592.0, 270.000, FourCC("harm"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -19616.0, -4064.0, 270.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -19424.0, -4064.0, 270.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -18976.0, -4064.0, 270.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -18784.0, -4064.0, 270.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -18592.0, -4064.0, 270.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("n012"), -21721.5, -1384.6, 346.081, FourCC("n012"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncb4"), -17952.0, -5856.0, 90.000, FourCC("ncb4"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncb4"), -17504.0, -6176.0, 270.000, FourCC("ncb4"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -17664.0, -5120.0, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("n013"), -21463.8, -2657.6, 45.111, FourCC("n013"))
    u = BlzCreateUnitWithSkin(p, FourCC("n012"), -23257.5, -808.6, 346.081, FourCC("n012"))
    u = BlzCreateUnitWithSkin(p, FourCC("e007"), -23968.0, -1056.0, 270.000, FourCC("e007"))
    u = BlzCreateUnitWithSkin(p, FourCC("ngob"), -24128.0, -2432.0, 270.000, FourCC("ngob"))
    u = BlzCreateUnitWithSkin(p, FourCC("ngob"), -23744.0, -768.0, 270.000, FourCC("ngob"))
    u = BlzCreateUnitWithSkin(p, FourCC("hgtw"), -20800.0, -6912.0, 270.000, FourCC("hgtw"))
    u = BlzCreateUnitWithSkin(p, FourCC("oalt"), -20128.0, -1568.0, 270.000, FourCC("oalt"))
    u = BlzCreateUnitWithSkin(p, FourCC("e007"), -23648.0, -2656.0, 270.000, FourCC("e007"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -18272.0, -6784.0, 90.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01N"), -15168.0, -13920.0, 270.000, FourCC("h01N"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncb9"), -20928.0, -7520.0, 360.000, FourCC("ncb9"))
    u = BlzCreateUnitWithSkin(p, FourCC("negt"), -20224.0, -4992.0, 270.000, FourCC("negt"))
    u = BlzCreateUnitWithSkin(p, FourCC("nfv4"), -21600.0, -3616.0, 282.058, FourCC("nfv4"))
    u = BlzCreateUnitWithSkin(p, FourCC("nfv1"), -20896.0, -3520.0, 315.000, FourCC("nfv1"))
    u = BlzCreateUnitWithSkin(p, FourCC("nfv3"), -20768.0, -4832.0, 50.954, FourCC("nfv3"))
    u = BlzCreateUnitWithSkin(p, FourCC("negt"), -21760.0, -4288.0, 270.000, FourCC("negt"))
    u = BlzCreateUnitWithSkin(p, FourCC("nfv0"), -20512.0, -4384.0, 270.000, FourCC("nfv0"))
    u = BlzCreateUnitWithSkin(p, FourCC("nfv4"), -21728.0, -5344.0, 0.774, FourCC("nfv4"))
    u = BlzCreateUnitWithSkin(p, FourCC("edob"), -24448.0, -2688.0, 270.000, FourCC("edob"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01N"), -16832.0, -12128.0, 270.000, FourCC("h01N"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01N"), -15616.0, -12128.0, 270.000, FourCC("h01N"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01N"), -15104.0, -11104.0, 270.000, FourCC("h01N"))
    u = BlzCreateUnitWithSkin(p, FourCC("hgra"), -15680.0, -13824.0, 270.000, FourCC("hgra"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01W"), -13824.0, -13760.0, 106.429, FourCC("h01W"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01W"), -14080.0, -11264.0, 6.604, FourCC("h01W"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01U"), -13056.0, -13376.0, 189.156, FourCC("h01U"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01W"), -13152.0, -13056.0, 270.000, FourCC("h01W"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01W"), -13248.0, -13504.0, 160.106, FourCC("h01W"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01W"), -14336.0, -13888.0, 132.755, FourCC("h01W"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01U"), -13440.0, -14080.0, 110.974, FourCC("h01U"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01U"), -13952.0, -13696.0, 67.708, FourCC("h01U"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01U"), -12800.0, -12416.0, 178.353, FourCC("h01U"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01U"), -13632.0, -11648.0, 281.974, FourCC("h01U"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01U"), -14016.0, -11520.0, 22.561, FourCC("h01U"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01W"), -13504.0, -11776.0, 214.139, FourCC("h01W"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01W"), -12800.0, -12160.0, 270.000, FourCC("h01W"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01W"), -12864.0, -12544.0, 162.327, FourCC("h01W"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01U"), -14144.0, -12736.0, 38.282, FourCC("h01U"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01U"), -14080.0, -12416.0, 359.392, FourCC("h01U"))
    u = BlzCreateUnitWithSkin(p, FourCC("nnad"), -20256.0, 1632.0, 270.000, FourCC("nnad"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01W"), -14080.0, -12864.0, 66.112, FourCC("h01W"))
    u = BlzCreateUnitWithSkin(p, FourCC("nnsg"), -21696.0, 1984.0, 270.000, FourCC("nnsg"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmh0"), -20384.0, 3552.0, 270.000, FourCC("nmh0"))
    gg_unit_nmh1_0735 = BlzCreateUnitWithSkin(p, FourCC("nmh1"), -20320.0, 4064.0, 270.000, FourCC("nmh1"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmg0"), -19104.0, 4448.0, 270.000, FourCC("nmg0"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmg1"), -19872.0, 3872.0, 270.000, FourCC("nmg1"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmg1"), -18976.0, 3808.0, 270.000, FourCC("nmg1"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmh0"), -19936.0, 4512.0, 270.000, FourCC("nmh0"))
    u = BlzCreateUnitWithSkin(p, FourCC("ndh3"), -17600.0, 1216.0, 270.000, FourCC("ndh3"))
    u = BlzCreateUnitWithSkin(p, FourCC("ntt1"), -18368.0, 576.0, 270.000, FourCC("ntt1"))
    u = BlzCreateUnitWithSkin(p, FourCC("n019"), -22912.0, -12096.0, 270.000, FourCC("n019"))
    u = BlzCreateUnitWithSkin(p, FourCC("h024"), -20160.0, -12672.0, 270.000, FourCC("h024"))
    gg_unit_n00K_0802 = BlzCreateUnitWithSkin(p, FourCC("n00K"), -24256.0, -6464.0, 270.000, FourCC("n00K"))
    u = BlzCreateUnitWithSkin(p, FourCC("nfv0"), -20640.0, -5280.0, 226.916, FourCC("nfv0"))
    u = BlzCreateUnitWithSkin(p, FourCC("negt"), -20352.0, -5696.0, 270.000, FourCC("negt"))
    u = BlzCreateUnitWithSkin(p, FourCC("negt"), -20736.0, -5696.0, 270.000, FourCC("negt"))
    u = BlzCreateUnitWithSkin(p, FourCC("n007"), -24384.0, -10432.0, 270.000, FourCC("n007"))
    u = BlzCreateUnitWithSkin(p, FourCC("hgtw"), -17600.0, -4224.0, 270.000, FourCC("hgtw"))
    u = BlzCreateUnitWithSkin(p, FourCC("n007"), -22400.0, -11968.0, 270.000, FourCC("n007"))
    u = BlzCreateUnitWithSkin(p, FourCC("h020"), -22809.5, -4290.6, 360.000, FourCC("h020"))
    u = BlzCreateUnitWithSkin(p, FourCC("n019"), -19072.0, -12224.0, 270.000, FourCC("n019"))
    u = BlzCreateUnitWithSkin(p, FourCC("n019"), -19072.0, -10176.0, 270.000, FourCC("n019"))
    u = BlzCreateUnitWithSkin(p, FourCC("n019"), -24064.0, -10304.0, 270.000, FourCC("n019"))
    u = BlzCreateUnitWithSkin(p, FourCC("h024"), -23232.0, -11968.0, 270.000, FourCC("h024"))
    u = BlzCreateUnitWithSkin(p, FourCC("n007"), -19840.0, -10688.0, 270.000, FourCC("n007"))
    u = BlzCreateUnitWithSkin(p, FourCC("n007"), -23872.0, -12416.0, 270.000, FourCC("n007"))
    u = BlzCreateUnitWithSkin(p, FourCC("nfv0"), -21920.0, -5792.0, 64.681, FourCC("nfv0"))
    u = BlzCreateUnitWithSkin(p, FourCC("nfv0"), -22048.0, -3808.0, 309.681, FourCC("nfv0"))
    u = BlzCreateUnitWithSkin(p, FourCC("nfrt"), -18944.0, -5760.0, 270.000, FourCC("nfrt"))
    u = BlzCreateUnitWithSkin(p, FourCC("ndh0"), -16448.0, 0.0, 270.000, FourCC("ndh0"))
    u = BlzCreateUnitWithSkin(p, FourCC("ndh0"), -18304.0, 64.0, 270.000, FourCC("ndh0"))
    u = BlzCreateUnitWithSkin(p, FourCC("ndch"), -17152.0, 1088.0, 270.000, FourCC("ndch"))
    u = BlzCreateUnitWithSkin(p, FourCC("ndh1"), -17472.0, 64.0, 270.000, FourCC("ndh1"))
    u = BlzCreateUnitWithSkin(p, FourCC("ndh0"), -17920.0, 768.0, 270.000, FourCC("ndh0"))
    u = BlzCreateUnitWithSkin(p, FourCC("ntx2"), -16896.0, 512.0, 270.000, FourCC("ntx2"))
    u = BlzCreateUnitWithSkin(p, FourCC("ntt1"), -16896.0, 1152.0, 270.000, FourCC("ntt1"))
    u = BlzCreateUnitWithSkin(p, FourCC("ntt1"), -16384.0, 832.0, 270.000, FourCC("ntt1"))
    u = BlzCreateUnitWithSkin(p, FourCC("ntt1"), -16128.0, 64.0, 270.000, FourCC("ntt1"))
    u = BlzCreateUnitWithSkin(p, FourCC("ntt1"), -16704.0, -192.0, 270.000, FourCC("ntt1"))
    u = BlzCreateUnitWithSkin(p, FourCC("ntx2"), -17344.0, 1984.0, 270.000, FourCC("ntx2"))
    u = BlzCreateUnitWithSkin(p, FourCC("n007"), -23104.0, -12416.0, 270.000, FourCC("n007"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00G"), -20544.0, -9408.0, 270.000, FourCC("h00G"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00M"), -14528.0, -8512.0, 270.000, FourCC("n00M"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00M"), -15744.0, -8128.0, 270.000, FourCC("n00M"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00M"), -15424.0, -7680.0, 270.000, FourCC("n00M"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00G"), -23808.0, -10880.0, 270.000, FourCC("h00G"))
    u = BlzCreateUnitWithSkin(p, FourCC("h024"), -20224.0, -10880.0, 270.000, FourCC("h024"))
    SetUnitState(u, UNIT_STATE_MANA, 1000)
    u = BlzCreateUnitWithSkin(p, FourCC("h00G"), -20608.0, -12992.0, 270.000, FourCC("h00G"))
    u = BlzCreateUnitWithSkin(p, FourCC("nft2"), -22272.0, -10944.0, 270.000, FourCC("nft2"))
    u = BlzCreateUnitWithSkin(p, FourCC("nft2"), -19904.0, -12800.0, 270.000, FourCC("nft2"))
    u = BlzCreateUnitWithSkin(p, FourCC("nft2"), -19904.0, -9600.0, 270.000, FourCC("nft2"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00G"), -20096.0, -11200.0, 270.000, FourCC("h00G"))
    u = BlzCreateUnitWithSkin(p, FourCC("h024"), -23744.0, -11968.0, 270.000, FourCC("h024"))
    u = BlzCreateUnitWithSkin(p, FourCC("n007"), -19840.0, -11712.0, 270.000, FourCC("n007"))
    u = BlzCreateUnitWithSkin(p, FourCC("n007"), -22080.0, -11200.0, 270.000, FourCC("n007"))
    u = BlzCreateUnitWithSkin(p, FourCC("nft2"), -22272.0, -11456.0, 270.000, FourCC("nft2"))
    u = BlzCreateUnitWithSkin(p, FourCC("nft2"), -19520.0, -11008.0, 270.000, FourCC("nft2"))
    u = BlzCreateUnitWithSkin(p, FourCC("n007"), -19776.0, -13056.0, 270.000, FourCC("n007"))
    u = BlzCreateUnitWithSkin(p, FourCC("n007"), -19776.0, -9344.0, 270.000, FourCC("n007"))
    u = BlzCreateUnitWithSkin(p, FourCC("h024"), -20160.0, -9024.0, 270.000, FourCC("h024"))
    u = BlzCreateUnitWithSkin(p, FourCC("h024"), -19776.0, -11200.0, 270.000, FourCC("h024"))
    u = BlzCreateUnitWithSkin(p, FourCC("h024"), -22400.0, -11200.0, 270.000, FourCC("h024"))
    u = BlzCreateUnitWithSkin(p, FourCC("h024"), -20224.0, -11456.0, 270.000, FourCC("h024"))
    SetUnitState(u, UNIT_STATE_MANA, 1000)
    u = BlzCreateUnitWithSkin(p, FourCC("h00G"), -23808.0, -11520.0, 270.000, FourCC("h00G"))
    u = BlzCreateUnitWithSkin(p, FourCC("nft2"), -19520.0, -11392.0, 270.000, FourCC("nft2"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00G"), -23168.0, -11520.0, 270.000, FourCC("h00G"))
    u = BlzCreateUnitWithSkin(p, FourCC("nft2"), -19904.0, -13312.0, 270.000, FourCC("nft2"))
    u = BlzCreateUnitWithSkin(p, FourCC("h024"), -20160.0, -13312.0, 270.000, FourCC("h024"))
    u = BlzCreateUnitWithSkin(p, FourCC("nft2"), -19904.0, -9088.0, 270.000, FourCC("nft2"))
end

function CreateUnitsForPlayer20()
    local p = Player(20)
    local u
    local unitID
    local t
    local life
    u = BlzCreateUnitWithSkin(p, FourCC("n01A"), -24390.6, -9227.7, 270.000, FourCC("n01A"))
    u = BlzCreateUnitWithSkin(p, FourCC("n004"), -21792.0, -10496.0, 270.000, FourCC("n004"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -24640.0, -12096.0, 90.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -20288.0, -8768.0, 90.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -18752.0, -8896.0, 90.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -19520.0, -9664.0, 90.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00U"), -21894.7, -12080.5, 270.000, FourCC("n00U"))
    u = BlzCreateUnitWithSkin(p, FourCC("n004"), -21792.0, -11904.0, 270.000, FourCC("n004"))
    u = BlzCreateUnitWithSkin(p, FourCC("nefm"), -22368.0, 992.0, 187.913, FourCC("nefm"))
    u = BlzCreateUnitWithSkin(p, FourCC("n004"), -22496.0, -13664.0, 0.000, FourCC("n004"))
    u = BlzCreateUnitWithSkin(p, FourCC("nef3"), -24032.0, 416.0, 352.847, FourCC("nef3"))
    u = BlzCreateUnitWithSkin(p, FourCC("n004"), -18944.0, -11200.0, 270.000, FourCC("n004"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -18752.0, -13120.0, 90.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -23680.0, -9472.0, 270.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00T"), -22602.7, -9983.8, 0.000, FourCC("n00T"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -20352.0, -12352.0, 90.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("h007"), -20430.2, -7654.9, 225.721, FourCC("h007"))
    u = BlzCreateUnitWithSkin(p, FourCC("nef1"), -24800.0, 416.0, 231.721, FourCC("nef1"))
    u = BlzCreateUnitWithSkin(p, FourCC("h007"), -19186.9, -4280.1, 50.407, FourCC("h007"))
    u = BlzCreateUnitWithSkin(p, FourCC("nef0"), -24352.0, 800.0, 112.576, FourCC("nef0"))
    u = BlzCreateUnitWithSkin(p, FourCC("hpea"), -21228.2, -7547.0, 221.548, FourCC("hpea"))
    u = BlzCreateUnitWithSkin(p, FourCC("nef0"), -23072.0, 1952.0, 270.000, FourCC("nef0"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -24640.0, -10304.0, 270.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("hhdl"), -19849.7, -7856.9, 195.002, FourCC("hhdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("hhdl"), -19954.1, -7783.1, 246.892, FourCC("hhdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("hhdl"), -19724.2, -7876.9, 230.291, FourCC("hhdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("nef6"), -23328.0, 1760.0, 270.000, FourCC("nef6"))
    u = BlzCreateUnitWithSkin(p, FourCC("nefm"), -24800.0, 864.0, 54.484, FourCC("nefm"))
    u = BlzCreateUnitWithSkin(p, FourCC("hpea"), -21388.7, -7686.1, 58.328, FourCC("hpea"))
    u = BlzCreateUnitWithSkin(p, FourCC("nef4"), -24352.0, 1312.0, 167.640, FourCC("nef4"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00H"), -25794.8, -1274.8, 323.535, FourCC("h00H"))
    u = BlzCreateUnitWithSkin(p, FourCC("nef4"), -22496.0, 736.0, 30.710, FourCC("nef4"))
    u = BlzCreateUnitWithSkin(p, FourCC("nef0"), -22816.0, 1504.0, 143.051, FourCC("nef0"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00H"), -26254.3, -2044.8, 328.798, FourCC("h00H"))
    u = BlzCreateUnitWithSkin(p, FourCC("hpea"), -19421.8, -7568.0, 90.071, FourCC("hpea"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01X"), -13824.0, -13184.0, 252.066, FourCC("h01X"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00T"), -24266.7, -9855.8, 0.000, FourCC("n00T"))
    u = BlzCreateUnitWithSkin(p, FourCC("hpea"), -19611.4, -7720.0, 231.558, FourCC("hpea"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01O"), -16699.0, -11699.0, 295.398, FourCC("h01O"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01O"), -15684.7, -11191.9, 321.448, FourCC("h01O"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01O"), -16091.0, -13377.1, 306.121, FourCC("h01O"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01O"), -16663.6, -12954.9, 2.186, FourCC("h01O"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01O"), -15519.0, -13112.4, 50.517, FourCC("h01O"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01O"), -15553.0, -13591.0, 220.821, FourCC("h01O"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01O"), -16567.1, -12151.9, 334.137, FourCC("h01O"))
    u = BlzCreateUnitWithSkin(p, FourCC("nefm"), -23200.0, 1376.0, 78.734, FourCC("nefm"))
    u = BlzCreateUnitWithSkin(p, FourCC("nef4"), -23136.0, 544.0, 270.000, FourCC("nef4"))
    u = BlzCreateUnitWithSkin(p, FourCC("nefm"), -22848.0, 864.0, 60.925, FourCC("nefm"))
    u = BlzCreateUnitWithSkin(p, FourCC("nefm"), -23648.0, 32.0, 129.272, FourCC("nefm"))
    u = BlzCreateUnitWithSkin(p, FourCC("nef4"), -24032.0, 96.0, 302.884, FourCC("nef4"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01X"), -13504.0, -12480.0, 81.527, FourCC("h01X"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01F"), -13056.0, -13184.0, 228.570, FourCC("h01F"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01F"), -12736.0, -12288.0, 208.250, FourCC("h01F"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01F"), -13696.0, -11456.0, 217.495, FourCC("h01F"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00T"), -21354.7, -10655.8, 0.000, FourCC("n00T"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00T"), -21354.7, -11711.8, 180.000, FourCC("n00T"))
    u = BlzCreateUnitWithSkin(p, FourCC("n01A"), -24390.6, -13195.7, 270.000, FourCC("n01A"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00T"), -22581.3, -12416.2, 180.000, FourCC("n00T"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -23296.0, -12928.0, 90.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("o002"), -17843.1, -1224.2, 210.982, FourCC("o002"))
    u = BlzCreateUnitWithSkin(p, FourCC("o002"), -18307.3, -2120.2, 206.577, FourCC("o002"))
    u = BlzCreateUnitWithSkin(p, FourCC("o002"), -18834.5, -1160.3, 136.207, FourCC("o002"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00L"), -14825.3, -8231.7, 122.375, FourCC("n00L"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00L"), -15622.3, -7798.4, 138.745, FourCC("n00L"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00L"), -15762.4, -8260.3, 42.029, FourCC("n00L"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00L"), -14875.8, -7488.3, 309.478, FourCC("n00L"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmyr"), -20399.6, 1953.4, 83.120, FourCC("nmyr"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmyr"), -19889.4, 2667.3, 150.589, FourCC("nmyr"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmyr"), -21228.6, 1571.7, 351.656, FourCC("nmyr"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmcf"), -19258.9, 4065.4, 156.868, FourCC("nmcf"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmcf"), -19941.7, 4264.8, 54.834, FourCC("nmcf"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmcf"), -20108.9, 3838.7, 182.906, FourCC("nmcf"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmcf"), -19873.1, 3400.3, 350.079, FourCC("nmcf"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmcf"), -20568.7, 3957.4, 265.482, FourCC("nmcf"))
    u = BlzCreateUnitWithSkin(p, FourCC("nef4"), -22368.0, 1248.0, 119.511, FourCC("nef4"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmcf"), -19620.8, 3763.0, 351.936, FourCC("nmcf"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -23680.0, -12928.0, 90.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n004"), -19712.0, -8864.0, 180.000, FourCC("n004"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -20352.0, -10048.0, 90.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -20288.0, -13632.0, 90.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00T"), -24245.3, -12544.2, 180.000, FourCC("n00T"))
    u = BlzCreateUnitWithSkin(p, FourCC("n004"), -19712.0, -13536.0, 0.000, FourCC("n004"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -18752.0, -13504.0, 90.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -18624.0, -11456.0, 90.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -18624.0, -10944.0, 90.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00U"), -21894.7, -10255.5, 270.000, FourCC("n00U"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -23296.0, -9472.0, 270.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -18752.0, -9280.0, 90.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -19520.0, -12736.0, 90.000, FourCC("n00V"))
end

function CreateBuildingsForPlayer23()
    local p = Player(23)
    local u
    local unitID
    local t
    local life
    u = BlzCreateUnitWithSkin(p, FourCC("hgtw"), -8704.0, -1984.0, 270.000, FourCC("hgtw"))
    u = BlzCreateUnitWithSkin(p, FourCC("h020"), -6246.5, -5053.4, 180.000, FourCC("h020"))
    gg_unit_h003_0007 = BlzCreateUnitWithSkin(p, FourCC("h003"), -5568.0, 1856.0, 270.000, FourCC("h003"))
    SetUnitColor(gg_unit_h003_0007, ConvertPlayerColor(3))
    u = BlzCreateUnitWithSkin(p, FourCC("n000"), -5888.0, -5376.0, 270.000, FourCC("n000"))
    gg_unit_e003_0014 = BlzCreateUnitWithSkin(p, FourCC("e003"), -4608.0, -7552.0, 270.000, FourCC("e003"))
    u = BlzCreateUnitWithSkin(p, FourCC("nfv0"), -8416.0, -4064.0, 46.916, FourCC("nfv0"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -10080.0, -5280.0, 90.000, FourCC("ncba"))
    gg_unit_nheb_0036 = BlzCreateUnitWithSkin(p, FourCC("nheb"), -4128.0, -10592.0, 270.000, FourCC("nheb"))
    gg_unit_n00B_0038 = BlzCreateUnitWithSkin(p, FourCC("n00B"), -8704.0, -2432.0, 270.000, FourCC("n00B"))
    gg_unit_eshy_0047 = BlzCreateUnitWithSkin(p, FourCC("eshy"), -7392.0, -7264.0, 270.000, FourCC("eshy"))
    gg_unit_n001_0049 = BlzCreateUnitWithSkin(p, FourCC("n001"), -13824.0, -1216.0, 270.000, FourCC("n001"))
    SetUnitColor(gg_unit_n001_0049, ConvertPlayerColor(9))
    u = BlzCreateUnitWithSkin(p, FourCC("n000"), -4800.0, -4224.0, 270.000, FourCC("n000"))
    gg_unit_h006_0055 = BlzCreateUnitWithSkin(p, FourCC("h006"), -12864.0, 2560.0, 270.000, FourCC("h006"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01I"), -13248.0, 3968.0, 270.000, FourCC("h01I"))
    gg_unit_o001_0078 = BlzCreateUnitWithSkin(p, FourCC("o001"), -9728.0, -8320.0, 270.000, FourCC("o001"))
    gg_unit_h00E_0081 = BlzCreateUnitWithSkin(p, FourCC("h00E"), -5120.0, -4736.0, 270.000, FourCC("h00E"))
    u = BlzCreateUnitWithSkin(p, FourCC("hgtw"), -7296.0, -2560.0, 270.000, FourCC("hgtw"))
    u = BlzCreateUnitWithSkin(p, FourCC("hgtw"), -8704.0, -2880.0, 270.000, FourCC("hgtw"))
    u = BlzCreateUnitWithSkin(p, FourCC("negt"), -7296.0, -5056.0, 270.000, FourCC("negt"))
    u = BlzCreateUnitWithSkin(p, FourCC("negt"), -8832.0, -4352.0, 270.000, FourCC("negt"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncb4"), -11552.0, -3360.0, 90.000, FourCC("ncb4"))
    u = BlzCreateUnitWithSkin(p, FourCC("hgtw"), -11456.0, -5120.0, 270.000, FourCC("hgtw"))
    gg_unit_u001_0098 = BlzCreateUnitWithSkin(p, FourCC("u001"), -12160.0, -6208.0, 270.000, FourCC("u001"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -9632.0, -5280.0, 90.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -9632.0, -3424.0, 90.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("negt"), -8320.0, -3648.0, 270.000, FourCC("negt"))
    u = BlzCreateUnitWithSkin(p, FourCC("hgtw"), -9152.0, -2432.0, 270.000, FourCC("hgtw"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncnt"), -11744.0, -8416.0, 270.000, FourCC("ncnt"))
    u = BlzCreateUnitWithSkin(p, FourCC("o005"), -10496.0, -8384.0, 270.000, FourCC("o005"))
    u = BlzCreateUnitWithSkin(p, FourCC("n000"), -5632.0, -5056.0, 270.000, FourCC("n000"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01C"), -14400.0, 2560.0, 360.000, FourCC("h01C"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01N"), -13376.0, 2912.0, 270.000, FourCC("h01N"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncb9"), -8800.0, -1504.0, 270.000, FourCC("ncb9"))
    u = BlzCreateUnitWithSkin(p, FourCC("nfv0"), -7680.0, -3936.0, 321.625, FourCC("nfv0"))
    u = BlzCreateUnitWithSkin(p, FourCC("hgtw"), -7296.0, -3072.0, 270.000, FourCC("hgtw"))
    u = BlzCreateUnitWithSkin(p, FourCC("ntx2"), -11712.0, -11328.0, 270.000, FourCC("ntx2"))
    gg_unit_nntt_0132 = BlzCreateUnitWithSkin(p, FourCC("nntt"), -8320.0, -11328.0, 270.000, FourCC("nntt"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -10592.0, -2560.0, 270.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -10272.0, -5280.0, 90.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01R"), -11968.0, -7808.0, 270.000, FourCC("h01R"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -5952.0, -3520.0, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("hgtw"), -9856.0, -5248.0, 270.000, FourCC("hgtw"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01N"), -12160.0, 2912.0, 270.000, FourCC("h01N"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncb4"), -11104.0, -3296.0, 270.000, FourCC("ncb4"))
    u = BlzCreateUnitWithSkin(p, FourCC("hgtw"), -6784.0, -2560.0, 270.000, FourCC("hgtw"))
    u = BlzCreateUnitWithSkin(p, FourCC("h019"), -9664.0, -1536.0, 195.519, FourCC("h019"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -10656.0, -4800.0, 270.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("h023"), -4800.0, -3648.0, 270.000, FourCC("h023"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -10464.0, -5280.0, 90.000, FourCC("ncba"))
    gg_unit_h014_0158 = BlzCreateUnitWithSkin(p, FourCC("h014"), -8448.0, 1856.0, 270.000, FourCC("h014"))
    u = BlzCreateUnitWithSkin(p, FourCC("hgtw"), -9728.0, -4288.0, 270.000, FourCC("hgtw"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncb4"), -10912.0, -4320.0, 90.000, FourCC("ncb4"))
    u = BlzCreateUnitWithSkin(p, FourCC("n000"), -5120.0, -3968.0, 270.000, FourCC("n000"))
    u = BlzCreateUnitWithSkin(p, FourCC("negt"), -8832.0, -4864.0, 270.000, FourCC("negt"))
    u = BlzCreateUnitWithSkin(p, FourCC("n000"), -5888.0, -4736.0, 270.000, FourCC("n000"))
    u = BlzCreateUnitWithSkin(p, FourCC("ndh4"), -12480.0, -9728.0, 270.000, FourCC("ndh4"))
    u = BlzCreateUnitWithSkin(p, FourCC("obar"), -9984.0, -7168.0, 270.000, FourCC("obar"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncb4"), -11104.0, -3488.0, 270.000, FourCC("ncb4"))
    u = BlzCreateUnitWithSkin(p, FourCC("n000"), -4480.0, -3968.0, 270.000, FourCC("n000"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncbf"), -10560.0, -3168.0, 44.895, FourCC("ncbf"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00X"), -11904.0, -4032.0, 270.000, FourCC("h00X"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncb4"), -10912.0, -4128.0, 90.000, FourCC("ncb4"))
    u = BlzCreateUnitWithSkin(p, FourCC("nfv4"), -7328.0, -4000.0, 180.774, FourCC("nfv4"))
    u = BlzCreateUnitWithSkin(p, FourCC("nfv3"), -8288.0, -4512.0, 230.954, FourCC("nfv3"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -9696.0, -3936.0, 360.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("negt"), -8640.0, -5568.0, 270.000, FourCC("negt"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -11392.0, -4224.0, 270.000, FourCC("h004"))
    gg_unit_hshy_0212 = BlzCreateUnitWithSkin(p, FourCC("hshy"), -10464.0, -1952.0, 270.000, FourCC("hshy"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncb4"), -10912.0, -3936.0, 90.000, FourCC("ncb4"))
    u = BlzCreateUnitWithSkin(p, FourCC("ndh3"), -11456.0, -10560.0, 270.000, FourCC("ndh3"))
    u = BlzCreateUnitWithSkin(p, FourCC("nfv0"), -8544.0, -4960.0, 90.000, FourCC("nfv0"))
    u = BlzCreateUnitWithSkin(p, FourCC("nfv1"), -8160.0, -5824.0, 135.000, FourCC("nfv1"))
    u = BlzCreateUnitWithSkin(p, FourCC("nfv4"), -7456.0, -5728.0, 102.058, FourCC("nfv4"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -6336.0, -3904.0, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("hbla"), -9152.0, -2752.0, 270.000, FourCC("hbla"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncb4"), -11552.0, -3168.0, 90.000, FourCC("ncb4"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -6336.0, -3520.0, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("nntg"), -9216.0, -10816.0, 270.000, FourCC("nntg"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01I"), -11712.0, 3328.0, 270.000, FourCC("h01I"))
    u = BlzCreateUnitWithSkin(p, FourCC("hgtw"), -10048.0, -3008.0, 270.000, FourCC("hgtw"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01N"), -13888.0, 1888.0, 270.000, FourCC("h01N"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01I"), -11840.0, 1344.0, 270.000, FourCC("h01I"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01I"), -14400.0, 1664.0, 270.000, FourCC("h01I"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -9440.0, -5280.0, 90.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("hgtw"), -6464.0, -6208.0, 270.000, FourCC("hgtw"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00X"), -11392.0, -1600.0, 270.000, FourCC("h00X"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -9248.0, -3936.0, 180.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("hbar"), -9152.0, -2048.0, 270.000, FourCC("hbar"))
    u = BlzCreateUnitWithSkin(p, FourCC("negt"), -8704.0, -3648.0, 270.000, FourCC("negt"))
    u = BlzCreateUnitWithSkin(p, FourCC("hgtw"), -6848.0, -6208.0, 270.000, FourCC("hgtw"))
    u = BlzCreateUnitWithSkin(p, FourCC("nfv0"), -7136.0, -3552.0, 244.681, FourCC("nfv0"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00X"), -10560.0, -5824.0, 270.000, FourCC("h00X"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00X"), -11200.0, -5824.0, 270.000, FourCC("h00X"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -10400.0, -2560.0, 270.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00X"), -11904.0, -4416.0, 270.000, FourCC("h00X"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00M"), -14592.0, -1920.0, 270.000, FourCC("n00M"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncb9"), -8128.0, -1824.0, 180.000, FourCC("ncb9"))
    u = BlzCreateUnitWithSkin(p, FourCC("ndh1"), -12992.0, -9792.0, 270.000, FourCC("ndh1"))
    gg_unit_hars_0293 = BlzCreateUnitWithSkin(p, FourCC("hars"), -8896.0, 64.0, 270.000, FourCC("hars"))
    u = BlzCreateUnitWithSkin(p, FourCC("ndh0"), -12608.0, -9344.0, 270.000, FourCC("ndh0"))
    gg_unit_hars_0303 = BlzCreateUnitWithSkin(p, FourCC("hars"), -8896.0, 3648.0, 270.000, FourCC("hars"))
    u = BlzCreateUnitWithSkin(p, FourCC("harm"), -8256.0, -2752.0, 270.000, FourCC("harm"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -10208.0, -2560.0, 270.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("nfv0"), -7360.0, -4576.0, 274.681, FourCC("nfv0"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -9888.0, -4736.0, 270.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmh0"), -8672.0, -12896.0, 270.000, FourCC("nmh0"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -9248.0, -3744.0, 180.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -10784.0, -2560.0, 270.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -9248.0, -5344.0, 90.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncbf"), -10976.0, -4896.0, 224.738, FourCC("ncbf"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -9696.0, -4736.0, 270.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -10464.0, -4800.0, 270.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncba"), -10272.0, -4800.0, 270.000, FourCC("ncba"))
    u = BlzCreateUnitWithSkin(p, FourCC("hgtw"), -8256.0, -2432.0, 270.000, FourCC("hgtw"))
    u = BlzCreateUnitWithSkin(p, FourCC("nfv0"), -7008.0, -5536.0, 129.681, FourCC("nfv0"))
    u = BlzCreateUnitWithSkin(p, FourCC("nfrt"), -10112.0, -3584.0, 270.000, FourCC("nfrt"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01L"), -12576.0, 4256.0, 270.000, FourCC("h01L"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00G"), -8960.0, 1856.0, 270.000, FourCC("h00G"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01K"), -12128.0, 1696.0, 270.000, FourCC("h01K"))
    u = BlzCreateUnitWithSkin(p, FourCC("h024"), -5312.0, 2624.0, 270.000, FourCC("h024"))
    u = BlzCreateUnitWithSkin(p, FourCC("n007"), -9216.0, 2368.0, 270.000, FourCC("n007"))
    u = BlzCreateUnitWithSkin(p, FourCC("n007"), -6976.0, 1856.0, 270.000, FourCC("n007"))
    u = BlzCreateUnitWithSkin(p, FourCC("nft2"), -6784.0, 2112.0, 270.000, FourCC("nft2"))
    u = BlzCreateUnitWithSkin(p, FourCC("nft2"), -9536.0, 1664.0, 270.000, FourCC("nft2"))
    u = BlzCreateUnitWithSkin(p, FourCC("n007"), -5184.0, 3072.0, 270.000, FourCC("n007"))
    u = BlzCreateUnitWithSkin(p, FourCC("h024"), -8896.0, -320.0, 270.000, FourCC("h024"))
    u = BlzCreateUnitWithSkin(p, FourCC("h024"), -9280.0, 1856.0, 270.000, FourCC("h024"))
    u = BlzCreateUnitWithSkin(p, FourCC("h024"), -6656.0, 1856.0, 270.000, FourCC("h024"))
    u = BlzCreateUnitWithSkin(p, FourCC("n019"), -9984.0, 2880.0, 270.000, FourCC("n019"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00X"), -10816.0, -1024.0, 270.000, FourCC("h00X"))
    u = BlzCreateUnitWithSkin(p, FourCC("h024"), -8832.0, 2112.0, 270.000, FourCC("h024"))
    SetUnitState(u, UNIT_STATE_MANA, 1000)
    gg_unit_n00B_0399 = BlzCreateUnitWithSkin(p, FourCC("n00B"), -10304.0, -4224.0, 270.000, FourCC("n00B"))
    u = BlzCreateUnitWithSkin(p, FourCC("n007"), -4672.0, 2624.0, 270.000, FourCC("n007"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00M"), -14144.0, -832.0, 270.000, FourCC("n00M"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00G"), -5248.0, 2176.0, 270.000, FourCC("h00G"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncbb"), -13088.0, -2592.0, 90.000, FourCC("ncbb"))
    gg_unit_hvlt_0406 = BlzCreateUnitWithSkin(p, FourCC("hvlt"), -7744.0, -5120.0, 270.000, FourCC("hvlt"))
    u = BlzCreateUnitWithSkin(p, FourCC("hlum"), -13600.0, -2464.0, 270.000, FourCC("hlum"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00M"), -13184.0, -832.0, 270.000, FourCC("n00M"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncb2"), -12448.0, -3168.0, 90.000, FourCC("ncb2"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncb5"), -12704.0, -2784.0, 90.000, FourCC("ncb5"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncb5"), -12064.0, -1952.0, 90.000, FourCC("ncb5"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncbb"), -12192.0, -1504.0, 90.000, FourCC("ncbb"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncbb"), -12640.0, -2144.0, 90.000, FourCC("ncbb"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01R"), -14528.0, -1408.0, 270.000, FourCC("h01R"))
    u = BlzCreateUnitWithSkin(p, FourCC("nft2"), -9536.0, 2048.0, 270.000, FourCC("nft2"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00G"), -5888.0, 2176.0, 270.000, FourCC("h00G"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00X"), -13248.0, -2880.0, 270.000, FourCC("h00X"))
    u = BlzCreateUnitWithSkin(p, FourCC("o004"), -14464.0, -1280.0, 270.000, FourCC("o004"))
    u = BlzCreateUnitWithSkin(p, FourCC("o004"), -13248.0, -1408.0, 270.000, FourCC("o004"))
    u = BlzCreateUnitWithSkin(p, FourCC("o004"), -14144.0, -1600.0, 270.000, FourCC("o004"))
    u = BlzCreateUnitWithSkin(p, FourCC("ndh0"), -10752.0, -9408.0, 270.000, FourCC("ndh0"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01R"), -13696.0, -704.0, 270.000, FourCC("h01R"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00M"), -15232.0, -1536.0, 270.000, FourCC("n00M"))
    SetUnitState(u, UNIT_STATE_MANA, 260)
    u = BlzCreateUnitWithSkin(p, FourCC("n00M"), -14912.0, -896.0, 270.000, FourCC("n00M"))
    SetUnitState(u, UNIT_STATE_MANA, 260)
    u = BlzCreateUnitWithSkin(p, FourCC("ncbb"), -13472.0, -3488.0, 90.000, FourCC("ncbb"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01A"), -14080.0, -2880.0, 270.000, FourCC("h01A"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01A"), -14848.0, -2944.0, 270.000, FourCC("h01A"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncb5"), -13536.0, -3104.0, 90.000, FourCC("ncb5"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncbb"), -12064.0, -3232.0, 90.000, FourCC("ncbb"))
    u = BlzCreateUnitWithSkin(p, FourCC("nntg"), -7744.0, -11264.0, 270.000, FourCC("nntg"))
    u = BlzCreateUnitWithSkin(p, FourCC("nntg"), -8512.0, -11904.0, 270.000, FourCC("nntg"))
    u = BlzCreateUnitWithSkin(p, FourCC("nntg"), -8064.0, -10688.0, 270.000, FourCC("nntg"))
    u = BlzCreateUnitWithSkin(p, FourCC("nntg"), -8832.0, -10496.0, 270.000, FourCC("nntg"))
    u = BlzCreateUnitWithSkin(p, FourCC("nnad"), -8800.0, -10976.0, 270.000, FourCC("nnad"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmh0"), -9120.0, -13856.0, 270.000, FourCC("nmh0"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmg1"), -9184.0, -13216.0, 270.000, FourCC("nmg1"))
    u = BlzCreateUnitWithSkin(p, FourCC("nntg"), -9088.0, -11648.0, 270.000, FourCC("nntg"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmg0"), -9952.0, -13792.0, 270.000, FourCC("nmg0"))
    u = BlzCreateUnitWithSkin(p, FourCC("negt"), -4352.0, -9600.0, 270.000, FourCC("negt"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00Z"), -9440.0, -12832.0, 270.000, FourCC("n00Z"))
    u = BlzCreateUnitWithSkin(p, FourCC("nnsg"), -7360.0, -11328.0, 270.000, FourCC("nnsg"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmg1"), -10080.0, -13152.0, 270.000, FourCC("nmg1"))
    u = BlzCreateUnitWithSkin(p, FourCC("negt"), -4800.0, -9600.0, 270.000, FourCC("negt"))
    u = BlzCreateUnitWithSkin(p, FourCC("ndch"), -11904.0, -10432.0, 270.000, FourCC("ndch"))
    u = BlzCreateUnitWithSkin(p, FourCC("negt"), -5120.0, -9984.0, 270.000, FourCC("negt"))
    u = BlzCreateUnitWithSkin(p, FourCC("negt"), -5120.0, -10368.0, 270.000, FourCC("negt"))
    u = BlzCreateUnitWithSkin(p, FourCC("negt"), -4480.0, -10176.0, 270.000, FourCC("negt"))
    u = BlzCreateUnitWithSkin(p, FourCC("negt"), -3840.0, -10240.0, 270.000, FourCC("negt"))
    u = BlzCreateUnitWithSkin(p, FourCC("negt"), -4672.0, -10816.0, 270.000, FourCC("negt"))
    gg_unit_n00K_0477 = BlzCreateUnitWithSkin(p, FourCC("n00K"), -4800.0, -2816.0, 270.000, FourCC("n00K"))
    u = BlzCreateUnitWithSkin(p, FourCC("n012"), -7334.5, -7959.4, 166.081, FourCC("n012"))
    u = BlzCreateUnitWithSkin(p, FourCC("n011"), -7451.7, -8747.6, 1.949, FourCC("n011"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00E"), -5905.4, -7891.3, 217.127, FourCC("n00E"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00G"), -6173.4, -8110.7, 42.241, FourCC("n00G"))
    u = BlzCreateUnitWithSkin(p, FourCC("ngob"), -4416.0, -8448.0, 270.000, FourCC("ngob"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01T"), -12864.0, 1088.0, 270.000, FourCC("h01T"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01C"), -14208.0, 4032.0, 180.000, FourCC("h01C"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01N"), -13824.0, 4704.0, 270.000, FourCC("h01N"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01N"), -12032.0, 4448.0, 270.000, FourCC("h01N"))
    u = BlzCreateUnitWithSkin(p, FourCC("hgra"), -13376.0, 4480.0, 270.000, FourCC("hgra"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01M"), -13536.0, 1632.0, 270.000, FourCC("h01M"))
    u = BlzCreateUnitWithSkin(p, FourCC("ndh1"), -11584.0, -9408.0, 270.000, FourCC("ndh1"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01D"), -11648.0, 2432.0, 360.000, FourCC("h01D"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01D"), -11200.0, 4160.0, 360.000, FourCC("h01D"))
    u = BlzCreateUnitWithSkin(p, FourCC("nnzg"), -12768.0, -5280.0, 270.000, FourCC("nnzg"))
    u = BlzCreateUnitWithSkin(p, FourCC("uzg1"), -12768.0, -5792.0, 270.000, FourCC("uzg1"))
    u = BlzCreateUnitWithSkin(p, FourCC("uzg1"), -12704.0, -6304.0, 270.000, FourCC("uzg1"))
    u = BlzCreateUnitWithSkin(p, FourCC("uzg1"), -12384.0, -5472.0, 270.000, FourCC("uzg1"))
    u = BlzCreateUnitWithSkin(p, FourCC("uzg1"), -11936.0, -5728.0, 270.000, FourCC("uzg1"))
    u = BlzCreateUnitWithSkin(p, FourCC("nnzg"), -13088.0, -6112.0, 270.000, FourCC("nnzg"))
    u = BlzCreateUnitWithSkin(p, FourCC("nnzg"), -13216.0, -5728.0, 270.000, FourCC("nnzg"))
    u = BlzCreateUnitWithSkin(p, FourCC("npgf"), -11168.0, -7008.0, 270.000, FourCC("npgf"))
    u = BlzCreateUnitWithSkin(p, FourCC("o005"), -9984.0, -7872.0, 270.000, FourCC("o005"))
    u = BlzCreateUnitWithSkin(p, FourCC("otrb"), -10624.0, -7744.0, 270.000, FourCC("otrb"))
    u = BlzCreateUnitWithSkin(p, FourCC("otrb"), -10624.0, -8448.0, 270.000, FourCC("otrb"))
    u = BlzCreateUnitWithSkin(p, FourCC("o000"), -11712.0, -7872.0, 270.000, FourCC("o000"))
    u = BlzCreateUnitWithSkin(p, FourCC("otrb"), -11840.0, -7808.0, 270.000, FourCC("otrb"))
    u = BlzCreateUnitWithSkin(p, FourCC("otrb"), -11840.0, -7936.0, 270.000, FourCC("otrb"))
    u = BlzCreateUnitWithSkin(p, FourCC("otrb"), -10624.0, -7872.0, 270.000, FourCC("otrb"))
    u = BlzCreateUnitWithSkin(p, FourCC("otrb"), -10048.0, -7744.0, 270.000, FourCC("otrb"))
    u = BlzCreateUnitWithSkin(p, FourCC("o003"), -10464.0, -7904.0, 270.000, FourCC("o003"))
    u = BlzCreateUnitWithSkin(p, FourCC("o000"), -11584.0, -7360.0, 270.000, FourCC("o000"))
    u = BlzCreateUnitWithSkin(p, FourCC("otrb"), -10624.0, -8320.0, 270.000, FourCC("otrb"))
    u = BlzCreateUnitWithSkin(p, FourCC("oalt"), -8800.0, -7712.0, 270.000, FourCC("oalt"))
    u = BlzCreateUnitWithSkin(p, FourCC("otrb"), -9920.0, -7744.0, 270.000, FourCC("otrb"))
    u = BlzCreateUnitWithSkin(p, FourCC("obea"), -11072.0, -7680.0, 270.000, FourCC("obea"))
    u = BlzCreateUnitWithSkin(p, FourCC("otrb"), -10496.0, -7744.0, 270.000, FourCC("otrb"))
    u = BlzCreateUnitWithSkin(p, FourCC("otrb"), -11712.0, -7424.0, 270.000, FourCC("otrb"))
    u = BlzCreateUnitWithSkin(p, FourCC("otrb"), -11712.0, -7296.0, 270.000, FourCC("otrb"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01R"), -10752.0, -7808.0, 270.000, FourCC("h01R"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01R"), -10560.0, -7616.0, 270.000, FourCC("h01R"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01R"), -10752.0, -8384.0, 270.000, FourCC("h01R"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01R"), -9984.0, -7616.0, 270.000, FourCC("h01R"))
    u = BlzCreateUnitWithSkin(p, FourCC("ndh0"), -11136.0, -10112.0, 270.000, FourCC("ndh0"))
    u = BlzCreateUnitWithSkin(p, FourCC("ofor"), -11360.0, -8160.0, 270.000, FourCC("ofor"))
    u = BlzCreateUnitWithSkin(p, FourCC("ovln"), -8832.0, -7104.0, 270.000, FourCC("ovln"))
    u = BlzCreateUnitWithSkin(p, FourCC("ntx2"), -12160.0, -9856.0, 270.000, FourCC("ntx2"))
    u = BlzCreateUnitWithSkin(p, FourCC("ntt1"), -12160.0, -10496.0, 270.000, FourCC("ntt1"))
    u = BlzCreateUnitWithSkin(p, FourCC("npgf"), -10720.0, -7008.0, 270.000, FourCC("npgf"))
    u = BlzCreateUnitWithSkin(p, FourCC("ntt1"), -12672.0, -10176.0, 270.000, FourCC("ntt1"))
    u = BlzCreateUnitWithSkin(p, FourCC("ntt1"), -12928.0, -9408.0, 270.000, FourCC("ntt1"))
    u = BlzCreateUnitWithSkin(p, FourCC("ntt1"), -12352.0, -9152.0, 270.000, FourCC("ntt1"))
    u = BlzCreateUnitWithSkin(p, FourCC("ntt1"), -11072.0, -10432.0, 270.000, FourCC("ntt1"))
    u = BlzCreateUnitWithSkin(p, FourCC("ntt1"), -10688.0, -9920.0, 270.000, FourCC("ntt1"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00D"), -12992.0, -8768.0, 270.000, FourCC("n00D"))
    u = BlzCreateUnitWithSkin(p, FourCC("ngob"), -4928.0, -6912.0, 270.000, FourCC("ngob"))
    u = BlzCreateUnitWithSkin(p, FourCC("e007"), -5088.0, -8288.0, 270.000, FourCC("e007"))
    u = BlzCreateUnitWithSkin(p, FourCC("n012"), -5798.5, -8535.4, 166.081, FourCC("n012"))
    u = BlzCreateUnitWithSkin(p, FourCC("e007"), -5408.0, -6688.0, 270.000, FourCC("e007"))
    u = BlzCreateUnitWithSkin(p, FourCC("h024"), -8896.0, 3968.0, 270.000, FourCC("h024"))
    u = BlzCreateUnitWithSkin(p, FourCC("n019"), -6144.0, 2752.0, 270.000, FourCC("n019"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01I"), -14208.0, 3392.0, 270.000, FourCC("h01I"))
    u = BlzCreateUnitWithSkin(p, FourCC("nnzg"), -12320.0, -5152.0, 270.000, FourCC("nnzg"))
    u = BlzCreateUnitWithSkin(p, FourCC("n019"), -4992.0, 2752.0, 270.000, FourCC("n019"))
    u = BlzCreateUnitWithSkin(p, FourCC("n007"), -6656.0, 2624.0, 270.000, FourCC("n007"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01W"), -14976.0, 1920.0, 186.604, FourCC("h01W"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01U"), -14912.0, 3392.0, 218.282, FourCC("h01U"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01W"), -16192.0, 3200.0, 342.327, FourCC("h01W"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01W"), -16256.0, 2816.0, 90.000, FourCC("h01W"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01U"), -15488.0, 4608.0, 225.372, FourCC("h01U"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01W"), -15232.0, 4416.0, 286.429, FourCC("h01W"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01U"), -14976.0, 3072.0, 179.392, FourCC("h01U"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01U"), -16000.0, 4032.0, 9.156, FourCC("h01U"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01W"), -15904.0, 3712.0, 90.000, FourCC("h01W"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01W"), -15808.0, 4160.0, 340.106, FourCC("h01W"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01W"), -14720.0, 4544.0, 312.755, FourCC("h01W"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01U"), -15616.0, 4736.0, 290.974, FourCC("h01U"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01U"), -15104.0, 4352.0, 247.708, FourCC("h01U"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01U"), -16256.0, 3072.0, 358.353, FourCC("h01U"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01U"), -15424.0, 2304.0, 101.974, FourCC("h01U"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01U"), -15040.0, 2176.0, 202.561, FourCC("h01U"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01W"), -14976.0, 3520.0, 246.112, FourCC("h01W"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01W"), -15552.0, 2432.0, 34.139, FourCC("h01W"))
    u = BlzCreateUnitWithSkin(p, FourCC("nft2"), -6784.0, 1600.0, 270.000, FourCC("nft2"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00G"), -5248.0, 1536.0, 270.000, FourCC("h00G"))
    u = BlzCreateUnitWithSkin(p, FourCC("n007"), -9216.0, 1344.0, 270.000, FourCC("n007"))
    gg_unit_nmh1_0783 = BlzCreateUnitWithSkin(p, FourCC("nmh1"), -8736.0, -13344.0, 270.000, FourCC("nmh1"))
    u = BlzCreateUnitWithSkin(p, FourCC("n019"), -7552.0, 1856.0, 270.000, FourCC("n019"))
    u = BlzCreateUnitWithSkin(p, FourCC("h024"), -5824.0, 2624.0, 270.000, FourCC("h024"))
    u = BlzCreateUnitWithSkin(p, FourCC("h024"), -8896.0, 3328.0, 270.000, FourCC("h024"))
    u = BlzCreateUnitWithSkin(p, FourCC("h024"), -8832.0, 1536.0, 270.000, FourCC("h024"))
    SetUnitState(u, UNIT_STATE_MANA, 1000)
    u = BlzCreateUnitWithSkin(p, FourCC("h024"), -8896.0, 448.0, 270.000, FourCC("h024"))
    u = BlzCreateUnitWithSkin(p, FourCC("nft2"), -9152.0, 3456.0, 270.000, FourCC("nft2"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00G"), -8512.0, 64.0, 270.000, FourCC("h00G"))
    u = BlzCreateUnitWithSkin(p, FourCC("nft2"), -9152.0, 256.0, 270.000, FourCC("nft2"))
    u = BlzCreateUnitWithSkin(p, FourCC("nft2"), -9152.0, -256.0, 270.000, FourCC("nft2"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00G"), -8448.0, 3648.0, 270.000, FourCC("h00G"))
    u = BlzCreateUnitWithSkin(p, FourCC("nft2"), -9152.0, 3968.0, 270.000, FourCC("nft2"))
    gg_unit_ndh2_0876 = BlzCreateUnitWithSkin(p, FourCC("ndh2"), -11712.0, -9920.0, 270.000, FourCC("ndh2"))
    u = BlzCreateUnitWithSkin(p, FourCC("o004"), -13568.0, -768.0, 270.000, FourCC("o004"))
    u = BlzCreateUnitWithSkin(p, FourCC("n007"), -5184.0, 640.0, 270.000, FourCC("n007"))
    u = BlzCreateUnitWithSkin(p, FourCC("n007"), -5952.0, 3072.0, 270.000, FourCC("n007"))
    u = BlzCreateUnitWithSkin(p, FourCC("h024"), -5312.0, 1088.0, 270.000, FourCC("h024"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00G"), -5888.0, 1536.0, 270.000, FourCC("h00G"))
    u = BlzCreateUnitWithSkin(p, FourCC("n007"), -6656.0, 1088.0, 270.000, FourCC("n007"))
    u = BlzCreateUnitWithSkin(p, FourCC("h024"), -5824.0, 1088.0, 270.000, FourCC("h024"))
    u = BlzCreateUnitWithSkin(p, FourCC("n007"), -5952.0, 640.0, 270.000, FourCC("n007"))
    u = BlzCreateUnitWithSkin(p, FourCC("n019"), -6144.0, 960.0, 270.000, FourCC("n019"))
    u = BlzCreateUnitWithSkin(p, FourCC("n019"), -4992.0, 960.0, 270.000, FourCC("n019"))
    u = BlzCreateUnitWithSkin(p, FourCC("n007"), -4672.0, 1088.0, 270.000, FourCC("n007"))
    u = BlzCreateUnitWithSkin(p, FourCC("n019"), -9984.0, 832.0, 270.000, FourCC("n019"))
    u = BlzCreateUnitWithSkin(p, FourCC("n007"), -9280.0, 3712.0, 270.000, FourCC("n007"))
    u = BlzCreateUnitWithSkin(p, FourCC("n007"), -9280.0, 0.0, 270.000, FourCC("n007"))
end

function CreateUnitsForPlayer23()
    local p = Player(23)
    local u
    local unitID
    local t
    local life
    u = BlzCreateUnitWithSkin(p, FourCC("h007"), -9869.1, -5063.9, 230.407, FourCC("h007"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01O"), -13503.0, 4247.0, 40.821, FourCC("h01O"))
    u = BlzCreateUnitWithSkin(p, FourCC("hpea"), -9634.2, -1776.0, 270.071, FourCC("hpea"))
    u = BlzCreateUnitWithSkin(p, FourCC("hhdl"), -9331.8, -1467.1, 50.291, FourCC("hhdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("hhdl"), -9101.9, -1560.9, 66.892, FourCC("hhdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("hpea"), -7667.3, -1657.9, 238.328, FourCC("hpea"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01O"), -12488.9, 2807.9, 154.137, FourCC("h01O"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01O"), -13537.0, 3768.4, 230.517, FourCC("h01O"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01O"), -12392.4, 3610.9, 182.186, FourCC("h01O"))
    u = BlzCreateUnitWithSkin(p, FourCC("h007"), -8625.8, -1689.1, 45.721, FourCC("h007"))
    u = BlzCreateUnitWithSkin(p, FourCC("hhdl"), -9206.3, -1487.1, 15.002, FourCC("hhdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("hpea"), -9444.6, -1624.0, 51.558, FourCC("hpea"))
    u = BlzCreateUnitWithSkin(p, FourCC("hpea"), -7827.8, -1797.0, 93.909, FourCC("hpea"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdw"), -2799.1, 3963.3, 295.135, FourCC("nvdw"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdl"), -2597.6, 3859.7, 92.299, FourCC("nvdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdl"), -2694.8, 3648.2, 18.095, FourCC("nvdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdl"), -2861.8, 3733.7, 354.979, FourCC("nvdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01O"), -12965.0, 4033.1, 126.121, FourCC("h01O"))
    u = BlzCreateUnitWithSkin(p, FourCC("n004"), -10112.0, 1856.0, 90.000, FourCC("n004"))
    u = BlzCreateUnitWithSkin(p, FourCC("n004"), -6560.0, 4320.0, 180.000, FourCC("n004"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00T"), -7701.3, 1311.8, 180.000, FourCC("n00T"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00T"), -7701.3, 2367.8, 0.000, FourCC("n00T"))
    u = BlzCreateUnitWithSkin(p, FourCC("n01A"), -4665.4, -116.3, 90.000, FourCC("n01A"))
    u = BlzCreateUnitWithSkin(p, FourCC("nefm"), -4192.0, -8928.0, 270.000, FourCC("nefm"))
    u = BlzCreateUnitWithSkin(p, FourCC("nef4"), -4704.0, -10656.0, 270.000, FourCC("nef4"))
    u = BlzCreateUnitWithSkin(p, FourCC("nef0"), -4704.0, -10144.0, 270.000, FourCC("nef0"))
    u = BlzCreateUnitWithSkin(p, FourCC("nef6"), -5728.0, -10848.0, 270.000, FourCC("nef6"))
    u = BlzCreateUnitWithSkin(p, FourCC("nef3"), -5024.0, -9760.0, 270.000, FourCC("nef3"))
    u = BlzCreateUnitWithSkin(p, FourCC("nefm"), -4256.0, -10208.0, 270.000, FourCC("nefm"))
    u = BlzCreateUnitWithSkin(p, FourCC("nef1"), -4256.0, -9760.0, 270.000, FourCC("nef1"))
    u = BlzCreateUnitWithSkin(p, FourCC("nef3"), -4192.0, -8672.0, 270.000, FourCC("nef3"))
    u = BlzCreateUnitWithSkin(p, FourCC("nefm"), -5216.0, -8992.0, 270.000, FourCC("nefm"))
    u = BlzCreateUnitWithSkin(p, FourCC("nef0"), -5856.0, -11104.0, 270.000, FourCC("nef0"))
    u = BlzCreateUnitWithSkin(p, FourCC("nef4"), -6368.0, -10848.0, 270.000, FourCC("nef4"))
    u = BlzCreateUnitWithSkin(p, FourCC("nef0"), -6816.0, -10272.0, 270.000, FourCC("nef0"))
    u = BlzCreateUnitWithSkin(p, FourCC("nef4"), -6304.0, -10080.0, 270.000, FourCC("nef4"))
    u = BlzCreateUnitWithSkin(p, FourCC("nefm"), -6752.0, -10784.0, 270.000, FourCC("nefm"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00H"), -3302.8, -8061.3, 143.535, FourCC("h00H"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01O"), -13523.6, 2776.0, 143.755, FourCC("h01O"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01O"), -13371.3, 1847.9, 141.448, FourCC("h01O"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01O"), -12357.0, 2355.0, 115.398, FourCC("h01O"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00H"), -2843.3, -7291.3, 148.798, FourCC("h00H"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -10304.0, 4160.0, 270.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -4416.0, 960.0, 90.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01X"), -15232.0, 3840.0, 90.000, FourCC("h01X"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01F"), -16000.0, 3840.0, 270.000, FourCC("h01F"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01F"), -16320.0, 2944.0, 270.000, FourCC("h01F"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01F"), -15360.0, 2112.0, 270.000, FourCC("h01F"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00T"), -4789.3, 511.8, 180.000, FourCC("n00T"))
    u = BlzCreateUnitWithSkin(p, FourCC("o002"), -11110.8, -8190.7, 30.982, FourCC("o002"))
    u = BlzCreateUnitWithSkin(p, FourCC("o002"), -10646.5, -7294.7, 26.577, FourCC("o002"))
    u = BlzCreateUnitWithSkin(p, FourCC("o002"), -10119.4, -8254.7, 316.207, FourCC("o002"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00L"), -14473.0, -1084.5, 302.375, FourCC("n00L"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00L"), -13450.2, -1492.9, 318.745, FourCC("n00L"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00L"), -13310.1, -1031.0, 222.029, FourCC("n00L"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00L"), -14196.7, -1803.0, 129.478, FourCC("n00L"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmyr"), -8718.5, -11271.2, 263.120, FourCC("nmyr"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmyr"), -9228.7, -11985.1, 330.589, FourCC("nmyr"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmyr"), -7889.6, -10889.4, 171.656, FourCC("nmyr"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00T"), -6474.7, 3072.2, 0.000, FourCC("n00T"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00T"), -4810.7, 3200.2, 0.000, FourCC("n00T"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmcf"), -9806.7, -13498.6, 336.868, FourCC("nmcf"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmcf"), -9123.9, -13697.9, 234.834, FourCC("nmcf"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmcf"), -8956.7, -13271.8, 2.906, FourCC("nmcf"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmcf"), -9192.5, -12833.4, 170.079, FourCC("nmcf"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmcf"), -8496.9, -13390.5, 85.482, FourCC("nmcf"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmcf"), -9444.8, -13196.1, 171.936, FourCC("nmcf"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -5760.0, 3584.0, 270.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -5376.0, 3584.0, 270.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -4416.0, 2752.0, 270.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n004"), -7264.0, 2560.0, 90.000, FourCC("n004"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00U"), -7161.3, 2736.5, 90.000, FourCC("n00U"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -10304.0, 3776.0, 270.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -10304.0, -448.0, 270.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -5376.0, 128.0, 90.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n004"), -7264.0, 1152.0, 90.000, FourCC("n004"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -8704.0, 704.0, 270.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -8704.0, 3008.0, 270.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -9536.0, 3392.0, 270.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -9536.0, 320.0, 270.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -10304.0, -64.0, 270.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -10432.0, 1600.0, 270.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -10432.0, 2112.0, 270.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n004"), -9344.0, 4192.0, 180.000, FourCC("n004"))
    u = BlzCreateUnitWithSkin(p, FourCC("n004"), -9344.0, -480.0, 0.000, FourCC("n004"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -8768.0, 4288.0, 270.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -8768.0, -576.0, 270.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00V"), -5760.0, 128.0, 90.000, FourCC("n00V"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00T"), -6453.3, 639.8, 180.000, FourCC("n00T"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00U"), -7161.3, 911.5, 90.000, FourCC("n00U"))
    u = BlzCreateUnitWithSkin(p, FourCC("n01A"), -4665.4, 3851.7, 90.000, FourCC("n01A"))
end

function CreateNeutralHostile()
    local p = Player(PLAYER_NEUTRAL_AGGRESSIVE)
    local u
    local unitID
    local t
    local life
    u = BlzCreateUnitWithSkin(p, FourCC("eaow"), -28082.7, 1889.5, 270.000, FourCC("eaow"))
    IssueImmediateOrder(u, "unroot")
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -27933.5, 2165.6, 195.299, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -27398.0, 3916.5, 357.704, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("nzom"), -27933.3, -7459.9, 23.863, FourCC("nzom"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -27793.6, 5111.3, 357.704, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -28263.3, 2106.4, 160.559, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("nzom"), -3089.2, -2081.5, 142.656, FourCC("nzom"))
    u = BlzCreateUnitWithSkin(p, FourCC("nzom"), -3282.8, -2168.4, 142.656, FourCC("nzom"))
    u = BlzCreateUnitWithSkin(p, FourCC("nzom"), -2431.0, -2112.4, 142.656, FourCC("nzom"))
    u = BlzCreateUnitWithSkin(p, FourCC("nzom"), -1167.3, -2207.3, 142.656, FourCC("nzom"))
    u = BlzCreateUnitWithSkin(p, FourCC("nzom"), -2877.3, -2234.0, 142.656, FourCC("nzom"))
    u = BlzCreateUnitWithSkin(p, FourCC("nzom"), -3200.9, -2325.8, 126.253, FourCC("nzom"))
    u = BlzCreateUnitWithSkin(p, FourCC("uabo"), -3245.2, -1754.0, 300.426, FourCC("uabo"))
    u = BlzCreateUnitWithSkin(p, FourCC("nzom"), -1260.0, -2042.8, 142.656, FourCC("nzom"))
    u = BlzCreateUnitWithSkin(p, FourCC("nzom"), -2280.2, -2279.4, 203.863, FourCC("nzom"))
    u = BlzCreateUnitWithSkin(p, FourCC("nzom"), -1752.4, -2129.3, 142.656, FourCC("nzom"))
    u = BlzCreateUnitWithSkin(p, FourCC("nzom"), -1167.9, -1813.9, 203.863, FourCC("nzom"))
    u = BlzCreateUnitWithSkin(p, FourCC("nzom"), -1961.6, -1791.7, 142.656, FourCC("nzom"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmsc"), -21884.0, 4592.0, 307.640, FourCC("nmsc"))
    SetUnitState(u, UNIT_STATE_MANA, 600)
    u = BlzCreateUnitWithSkin(p, FourCC("nvdw"), -1414.9, 1553.7, 67.942, FourCC("nvdw"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdg"), -1464.5, 1197.4, 73.105, FourCC("nvdg"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdl"), -2004.1, 2944.5, 211.922, FourCC("nvdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdl"), -964.4, 1732.5, 6.175, FourCC("nvdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdl"), -2168.4, 2942.5, 38.420, FourCC("nvdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdl"), -1693.4, 101.7, 34.608, FourCC("nvdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdw"), -1712.6, 3606.7, 19.699, FourCC("nvdw"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdl"), -1308.0, 49.0, 235.840, FourCC("nvdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdg"), -1742.8, -101.0, 28.082, FourCC("nvdg"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdl"), -1079.8, 1645.0, 164.064, FourCC("nvdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdl"), -1527.5, 162.7, 148.364, FourCC("nvdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdg"), -978.1, 1173.2, 73.105, FourCC("nvdg"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdw"), -1480.0, 3869.9, 128.841, FourCC("nvdw"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdl"), -1261.6, 1637.4, 95.254, FourCC("nvdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdw"), -963.7, 1552.5, 122.380, FourCC("nvdw"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdg"), -1437.6, 3599.0, 147.705, FourCC("nvdg"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdw"), -1479.6, -62.7, 25.456, FourCC("nvdw"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00N"), -26210.9, -472.1, 47.210, FourCC("n00N"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdl"), -1415.3, 1750.6, 327.139, FourCC("nvdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvde"), -1207.4, 1376.9, 24.940, FourCC("nvde"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdl"), -1251.4, -149.1, 81.466, FourCC("nvdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -26824.7, 5471.6, 357.704, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -26428.6, 5674.3, 357.704, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -26612.4, 5953.5, 357.704, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncea"), -23523.5, 3939.0, 201.339, FourCC("ncea"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncer"), -23463.1, 3692.2, 303.976, FourCC("ncer"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -28554.4, 3409.1, 357.704, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncer"), -23764.9, 3689.9, 324.411, FourCC("ncer"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncea"), -23808.5, 3920.5, 50.327, FourCC("ncea"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncks"), -25980.7, 4311.7, 4.064, FourCC("ncks"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncea"), -24563.5, 3210.0, 50.327, FourCC("ncea"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -28144.0, 2229.7, 357.704, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncea"), -24258.7, 3368.7, 50.327, FourCC("ncea"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -28170.3, 3569.1, 357.704, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncen"), -25787.4, 3950.5, 114.584, FourCC("ncen"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -28381.0, 4101.7, 357.704, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncnk"), -25661.5, 4107.0, 0.919, FourCC("ncnk"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmsc"), -7172.0, -13936.0, 127.640, FourCC("nmsc"))
    SetUnitState(u, UNIT_STATE_MANA, 600)
    u = BlzCreateUnitWithSkin(p, FourCC("ncea"), -25884.4, 4121.0, 50.327, FourCC("ncea"))
    u = BlzCreateUnitWithSkin(p, FourCC("etrp"), -26500.0, -92.2, 259.659, FourCC("etrp"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncks"), -3096.5, -13696.7, 184.064, FourCC("ncks"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncea"), -5553.7, -13324.0, 21.339, FourCC("ncea"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -586.4, -10641.0, 177.704, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -2648.7, -15059.3, 177.704, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -906.9, -12954.2, 177.704, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncea"), -3192.8, -13506.0, 230.327, FourCC("ncea"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncnk"), -3415.7, -13492.0, 180.919, FourCC("ncnk"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncea"), -4818.6, -12753.7, 230.327, FourCC("ncea"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncer"), -5614.2, -13077.3, 123.976, FourCC("ncer"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -28533.6, 1297.0, 357.704, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncer"), -5312.3, -13074.9, 144.411, FourCC("ncer"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -814.0, -11491.4, 340.559, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -696.3, -13486.7, 177.704, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -1143.8, -11550.6, 15.299, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("uabo"), -25856.0, -7519.8, 120.426, FourCC("uabo"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -1679.2, -13301.6, 177.704, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -1283.6, -14496.3, 177.704, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -933.3, -11614.7, 177.704, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncea"), -4513.7, -12595.1, 230.327, FourCC("ncea"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -522.8, -12794.1, 177.704, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncen"), -3274.4, -13677.7, 73.164, FourCC("ncen"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncea"), -5268.7, -13305.5, 230.327, FourCC("ncea"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -2252.5, -14856.6, 177.704, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -2464.8, -15338.5, 177.704, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -1354.6, -8888.5, 177.704, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncen"), -3289.8, -13335.6, 294.584, FourCC("ncen"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncim"), -3153.8, -13350.8, 129.799, FourCC("ncim"))
    u = BlzCreateUnitWithSkin(p, FourCC("eaow"), -994.5, -11274.5, 90.000, FourCC("eaow"))
    IssueImmediateOrder(u, "unroot")
    u = BlzCreateUnitWithSkin(p, FourCC("nvdl"), -26808.5, -12345.4, 218.420, FourCC("nvdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdl"), -26972.9, -12347.3, 31.922, FourCC("nvdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdl"), -26115.1, -13136.6, 174.979, FourCC("nvdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdl"), -26282.1, -13051.1, 198.095, FourCC("nvdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdl"), -26379.3, -13262.5, 272.299, FourCC("nvdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdw"), -26177.9, -13366.2, 115.135, FourCC("nvdw"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdw"), -27497.0, -13272.8, 308.841, FourCC("nvdw"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdg"), -27539.3, -13001.8, 327.705, FourCC("nvdg"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdw"), -27264.3, -13009.6, 199.699, FourCC("nvdw"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdl"), -27897.1, -11047.8, 344.064, FourCC("nvdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdg"), -27998.8, -10576.0, 253.105, FourCC("nvdg"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdl"), -28012.6, -11135.3, 186.175, FourCC("nvdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdw"), -27562.0, -10956.6, 247.942, FourCC("nvdw"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvde"), -27769.5, -10779.8, 204.940, FourCC("nvde"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdl"), -27561.7, -11153.4, 147.139, FourCC("nvdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdg"), -27512.4, -10600.2, 253.105, FourCC("nvdg"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdw"), -28013.2, -10955.4, 302.380, FourCC("nvdw"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdl"), -27668.9, -9451.8, 55.840, FourCC("nvdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdl"), -27725.5, -9253.8, 261.466, FourCC("nvdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdl"), -27449.5, -9565.6, 328.364, FourCC("nvdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdl"), -27283.6, -9504.5, 214.608, FourCC("nvdl"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdw"), -27497.3, -9340.2, 205.456, FourCC("nvdw"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdg"), -27570.3, -9058.8, 9.817, FourCC("nvdg"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvdg"), -27234.1, -9301.8, 208.082, FourCC("nvdg"))
    u = BlzCreateUnitWithSkin(p, FourCC("etrp"), -26601.5, -418.8, 331.182, FourCC("etrp"))
    u = BlzCreateUnitWithSkin(p, FourCC("nzom"), -27139.7, -7482.2, 322.656, FourCC("nzom"))
    u = BlzCreateUnitWithSkin(p, FourCC("nzom"), -27841.3, -7231.0, 322.656, FourCC("nzom"))
    u = BlzCreateUnitWithSkin(p, FourCC("nzom"), -27933.9, -7066.6, 322.656, FourCC("nzom"))
    u = BlzCreateUnitWithSkin(p, FourCC("nzom"), -26012.0, -7192.3, 322.656, FourCC("nzom"))
    u = BlzCreateUnitWithSkin(p, FourCC("nzom"), -25818.5, -7105.4, 322.656, FourCC("nzom"))
    u = BlzCreateUnitWithSkin(p, FourCC("nzom"), -26223.9, -7039.9, 322.656, FourCC("nzom"))
    u = BlzCreateUnitWithSkin(p, FourCC("nzom"), -27348.8, -7144.5, 322.656, FourCC("nzom"))
    u = BlzCreateUnitWithSkin(p, FourCC("nelb"), -1747.3, -339.1, 212.870, FourCC("nelb"))
    u = BlzCreateUnitWithSkin(p, FourCC("nelb"), -27334.9, -9060.3, 212.870, FourCC("nelb"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -28008.4, 877.1, 357.704, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -28171.3, 300.9, 357.704, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -28390.7, -123.6, 357.704, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -27765.4, -455.5, 357.704, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -948.8, -9644.9, 177.704, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -729.3, -9220.4, 177.704, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -1111.6, -10221.1, 177.704, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -1403.5, -9217.8, 177.704, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("etrp"), -2620.0, -9251.8, 4.508, FourCC("etrp"))
    u = BlzCreateUnitWithSkin(p, FourCC("etrp"), -2518.5, -8925.2, 313.534, FourCC("etrp"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00N"), -2909.1, -8871.9, 327.673, FourCC("n00N"))
    u = BlzCreateUnitWithSkin(p, FourCC("nzom"), -26821.0, -6994.5, 23.863, FourCC("nzom"))
    u = BlzCreateUnitWithSkin(p, FourCC("nzom"), -25900.3, -6948.0, 306.253, FourCC("nzom"))
    u = BlzCreateUnitWithSkin(p, FourCC("nzom"), -26670.2, -7161.4, 322.656, FourCC("nzom"))
    u = BlzCreateUnitWithSkin(p, FourCC("e008"), -27716.5, -126.2, 357.704, FourCC("e008"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00T"), -8657.1, 6726.2, 294.849, FourCC("h00T"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00S"), -7989.1, 6526.3, 265.164, FourCC("h00S"))
    u = BlzCreateUnitWithSkin(p, FourCC("h010"), -8520.7, 6717.6, 347.772, FourCC("h010"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncen"), -25802.9, 4292.6, 253.164, FourCC("ncen"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncim"), -25923.5, 3965.7, 309.799, FourCC("ncim"))
    u = BlzCreateUnitWithSkin(p, FourCC("e00E"), -8569.5, 6364.3, 192.157, FourCC("e00E"))
    u = BlzCreateUnitWithSkin(p, FourCC("e00F"), -8457.6, 6349.6, 96.243, FourCC("e00F"))
    u = BlzCreateUnitWithSkin(p, FourCC("e005"), -7317.4, 6361.8, 191.091, FourCC("e005"))
    u = BlzCreateUnitWithSkin(p, FourCC("h017"), -8116.0, 6525.6, 287.949, FourCC("h017"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01P"), -8315.3, 6347.7, 48.385, FourCC("h01P"))
    u = BlzCreateUnitWithSkin(p, FourCC("h01O"), -8379.8, 6360.9, 178.874, FourCC("h01O"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00L"), -7921.4, 6520.4, 284.125, FourCC("h00L"))
    u = BlzCreateUnitWithSkin(p, FourCC("h005"), -8226.7, 6695.9, 46.605, FourCC("h005"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00D"), -7832.9, 6507.2, 269.872, FourCC("h00D"))
    u = BlzCreateUnitWithSkin(p, FourCC("h008"), -8226.5, 6359.3, 51.121, FourCC("h008"))
    u = BlzCreateUnitWithSkin(p, FourCC("h001"), -8175.7, 6360.3, 199.935, FourCC("h001"))
    u = BlzCreateUnitWithSkin(p, FourCC("h00C"), -7715.6, 6726.3, 257.160, FourCC("h00C"))
    u = BlzCreateUnitWithSkin(p, FourCC("h015"), -8224.3, 6519.0, 220.381, FourCC("h015"))
    u = BlzCreateUnitWithSkin(p, FourCC("h007"), -8292.1, 6507.7, 80.873, FourCC("h007"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00C"), -8543.4, 6486.8, 132.082, FourCC("n00C"))
    u = BlzCreateUnitWithSkin(p, FourCC("o00A"), -7347.5, 6499.9, 65.942, FourCC("o00A"))
    u = BlzCreateUnitWithSkin(p, FourCC("o002"), -7421.5, 6497.9, 193.299, FourCC("o002"))
    u = BlzCreateUnitWithSkin(p, FourCC("o00B"), -6969.3, 6503.1, 149.737, FourCC("o00B"))
    u = BlzCreateUnitWithSkin(p, FourCC("u000"), -6863.7, 6329.9, 92.134, FourCC("u000"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00L"), -7196.8, 6728.6, 329.864, FourCC("n00L"))
    u = BlzCreateUnitWithSkin(p, FourCC("n002"), -7124.9, 6735.0, 78.478, FourCC("n002"))
    u = BlzCreateUnitWithSkin(p, FourCC("n003"), -7053.0, 6741.3, 48.495, FourCC("n003"))
    u = BlzCreateUnitWithSkin(p, FourCC("n008"), -6969.8, 6732.6, 19.359, FourCC("n008"))
    u = BlzCreateUnitWithSkin(p, FourCC("n005"), -6886.7, 6728.2, 329.622, FourCC("n005"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00I"), -6392.1, 6737.3, 91.772, FourCC("n00I"))
    u = BlzCreateUnitWithSkin(p, FourCC("n006"), -8534.1, 6350.4, 216.174, FourCC("n006"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00F"), -8048.4, 6351.8, 318.383, FourCC("n00F"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00A"), -7570.6, 6707.0, 269.271, FourCC("n00A"))
    u = BlzCreateUnitWithSkin(p, FourCC("n00W"), -7177.5, 6513.0, 348.629, FourCC("n00W"))
    u = BlzCreateUnitWithSkin(p, FourCC("e000"), -7714.3, 6350.6, 211.043, FourCC("e000"))
    u = BlzCreateUnitWithSkin(p, FourCC("hhes"), -8581.6, 6723.9, 65.129, FourCC("hhes"))
    u = BlzCreateUnitWithSkin(p, FourCC("hcth"), -8058.1, 6531.1, 301.300, FourCC("hcth"))
    u = BlzCreateUnitWithSkin(p, FourCC("earc"), -7774.3, 6349.4, 289.718, FourCC("earc"))
    u = BlzCreateUnitWithSkin(p, FourCC("edry"), -7659.2, 6346.9, 191.541, FourCC("edry"))
    u = BlzCreateUnitWithSkin(p, FourCC("edoc"), -7428.7, 6331.4, 196.277, FourCC("edoc"))
    u = BlzCreateUnitWithSkin(p, FourCC("edcm"), -7561.2, 6343.2, 338.071, FourCC("edcm"))
    u = BlzCreateUnitWithSkin(p, FourCC("hfoo"), -8162.1, 6528.2, 221.909, FourCC("hfoo"))
    u = BlzCreateUnitWithSkin(p, FourCC("hmtm"), -7705.5, 6522.1, 272.556, FourCC("hmtm"))
    u = BlzCreateUnitWithSkin(p, FourCC("hmpr"), -8475.3, 6500.5, 169.700, FourCC("hmpr"))
    u = BlzCreateUnitWithSkin(p, FourCC("hspt"), -8404.6, 6505.6, 188.487, FourCC("hspt"))
    u = BlzCreateUnitWithSkin(p, FourCC("hwat"), -7478.2, 6707.9, 200.935, FourCC("hwat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nemi"), -8352.6, 6727.2, 317.295, FourCC("nemi"))
    u = BlzCreateUnitWithSkin(p, FourCC("hwt2"), -7408.8, 6709.0, 180.170, FourCC("hwt2"))
    u = BlzCreateUnitWithSkin(p, FourCC("hwt3"), -7328.1, 6703.9, 174.446, FourCC("hwt3"))
    u = BlzCreateUnitWithSkin(p, FourCC("nhea"), -8425.2, 6724.6, 149.260, FourCC("nhea"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncg2"), -7960.9, 6347.7, 177.544, FourCC("ncg2"))
    u = BlzCreateUnitWithSkin(p, FourCC("ndrf"), -6668.2, 6720.7, 303.946, FourCC("ndrf"))
    u = BlzCreateUnitWithSkin(p, FourCC("ndrd"), -6590.2, 6717.6, 26.687, FourCC("ndrd"))
    u = BlzCreateUnitWithSkin(p, FourCC("nwrg"), -7930.3, 6727.8, 204.747, FourCC("nwrg"))
    u = BlzCreateUnitWithSkin(p, FourCC("nsgg"), -7815.0, 6721.6, 241.256, FourCC("nsgg"))
    u = BlzCreateUnitWithSkin(p, FourCC("ninc"), -6495.5, 6337.7, 159.636, FourCC("ninc"))
    u = BlzCreateUnitWithSkin(p, FourCC("ninm"), -6397.1, 6334.7, 25.258, FourCC("ninm"))
    u = BlzCreateUnitWithSkin(p, FourCC("nina"), -6273.0, 6329.3, 293.871, FourCC("nina"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmbg"), -6788.6, 6517.0, 305.605, FourCC("nmbg"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmrv"), -6596.3, 6515.2, 257.330, FourCC("nmrv"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmrl"), -6801.9, 6609.4, 200.880, FourCC("nmrl"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmrr"), -6739.8, 6583.4, 115.239, FourCC("nmrr"))
    u = BlzCreateUnitWithSkin(p, FourCC("nnsw"), -7799.1, 6191.0, 213.295, FourCC("nnsw"))
    u = BlzCreateUnitWithSkin(p, FourCC("nsnp"), -7656.4, 6201.1, 129.247, FourCC("nsnp"))
    u = BlzCreateUnitWithSkin(p, FourCC("nmyr"), -7881.6, 6184.9, 56.713, FourCC("nmyr"))
    u = BlzCreateUnitWithSkin(p, FourCC("nnrg"), -7546.2, 6194.2, 233.763, FourCC("nnrg"))
    u = BlzCreateUnitWithSkin(p, FourCC("ncat"), -6259.1, 6737.1, 21.468, FourCC("ncat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nwat"), -7812.3, 6333.9, 241.882, FourCC("nwat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nfgl"), -6609.9, 6315.8, 149.770, FourCC("nfgl"))
    u = BlzCreateUnitWithSkin(p, FourCC("nogo"), -7261.2, 6512.5, 74.116, FourCC("nogo"))
    u = BlzCreateUnitWithSkin(p, FourCC("narg"), -8007.7, 6724.6, 211.493, FourCC("narg"))
    u = BlzCreateUnitWithSkin(p, FourCC("nftr"), -7302.2, 6515.9, 243.289, FourCC("nftr"))
    u = BlzCreateUnitWithSkin(p, FourCC("nchp"), -7660.4, 6721.6, 277.372, FourCC("nchp"))
end

function CreateNeutralPassiveBuildings()
    local p = Player(PLAYER_NEUTRAL_PASSIVE)
    local u
    local unitID
    local t
    local life
    gg_unit_h002_0699 = BlzCreateUnitWithSkin(p, FourCC("h002"), -14528.0, -4672.0, 270.000, FourCC("h002"))
end

function CreateNeutralPassive()
    local p = Player(PLAYER_NEUTRAL_PASSIVE)
    local u
    local unitID
    local t
    local life
    u = BlzCreateUnitWithSkin(p, FourCC("hprt"), -23998.7, 5624.9, 183.590, FourCC("hprt"))
    u = BlzCreateUnitWithSkin(p, FourCC("nhmc"), -16214.9, 3292.9, 44.672, FourCC("nhmc"))
end

function CreatePlayerBuildings()
    CreateBuildingsForPlayer0()
    CreateBuildingsForPlayer1()
    CreateBuildingsForPlayer2()
    CreateBuildingsForPlayer3()
    CreateBuildingsForPlayer4()
    CreateBuildingsForPlayer5()
    CreateBuildingsForPlayer6()
    CreateBuildingsForPlayer7()
    CreateBuildingsForPlayer8()
    CreateBuildingsForPlayer9()
    CreateBuildingsForPlayer10()
    CreateBuildingsForPlayer11()
    CreateBuildingsForPlayer20()
    CreateBuildingsForPlayer23()
end

function CreatePlayerUnits()
    CreateUnitsForPlayer20()
    CreateUnitsForPlayer23()
end

function CreateAllUnits()
    CreateNeutralPassiveBuildings()
    CreatePlayerBuildings()
    CreateNeutralHostile()
    CreateNeutralPassive()
    CreatePlayerUnits()
end

function CreateRegions()
    local we
    gg_rct_Left_Start = Rect(-23616.0, -7968.0, -23360.0, -3392.0)
    gg_rct_Left_Hero = Rect(-24576.0, -5504.0, -23072.0, -3936.0)
    gg_rct_Camp_Top = Rect(-14624.0, -1664.0, -13280.0, -832.0)
    gg_rct_Left_Tree = Rect(-24928.0, -2816.0, -23584.0, -896.0)
    we = AddWeatherEffect(gg_rct_Left_Tree, FourCC("LRma"))
    EnableWeatherEffect(we, true)
    gg_rct_Left_Workshop = Rect(-17056.0, -13600.0, -15136.0, -10880.0)
    gg_rct_Left_Arcane = Rect(-24288.0, -12064.0, -22656.0, -10368.0)
    gg_rct_Right_Hero = Rect(-6080.0, -5472.0, -4352.0, -3744.0)
    gg_rct_Right_Start = Rect(-5344.0, -5760.0, -4960.0, -1344.0)
    gg_rct_Right_Tree = Rect(-5184.0, -8448.0, -4096.0, -6464.0)
    gg_rct_Right_Arcane = Rect(-6368.0, 1088.0, -4800.0, 2656.0)
    gg_rct_Right_Workshop = Rect(-13696.0, 1440.0, -12032.0, 4320.0)
    gg_rct_Camp_Bottom = Rect(-15872.0, -8512.0, -14624.0, -7680.0)
    gg_rct_Left_Orc = Rect(-19424.0, -2784.0, -17632.0, -672.0)
    gg_rct_Right_Orc = Rect(-11456.0, -8608.0, -9632.0, -6560.0)
    gg_rct_Center_Events = Rect(-15168.0, -5312.0, -13888.0, -4032.0)
    gg_rct_Furbolg_Left = Rect(-17984.0, 160.0, -16672.0, 1248.0)
    gg_rct_Furbolg_Right = Rect(-12448.0, -10304.0, -11296.0, -9216.0)
    gg_rct_Left_Start_Bottom = Rect(-18368.0, -13856.0, -18112.0, -7936.0)
    gg_rct_Left_Start_Top = Rect(-20992.0, -3584.0, -20512.0, 4704.0)
    gg_rct_Right_Start_Top = Rect(-11008.0, -1376.0, -10720.0, 4512.0)
    gg_rct_Big_Bottom_Left = Rect(-29280.0, -16256.0, -16992.0, -8416.0)
    gg_rct_Big_Middle_Left = Rect(-28864.0, -8448.0, -16992.0, -3776.0)
    gg_rct_Big_Top_Left = Rect(-29248.0, -3808.0, -16992.0, 7168.0)
    gg_rct_Left_Castle = Rect(-24800.0, -4320.0, -24224.0, -3744.0)
    gg_rct_Left_City = Rect(-20960.0, -7776.0, -19264.0, -6016.0)
    gg_rct_Right_City = Rect(-9632.0, -3200.0, -8160.0, -1568.0)
    gg_rct_Right_Castle = Rect(-4896.0, -5728.0, -4192.0, -4896.0)
    gg_rct_Left_High_Elves = Rect(-25024.0, -32.0, -23776.0, 1504.0)
    gg_rct_Left_Shipyard = Rect(-22176.0, -2272.0, -21696.0, -1856.0)
    gg_rct_Right_Shipyard = Rect(-7328.0, -7488.0, -6912.0, -7136.0)
    gg_rct_Right_Start_Bottom = Rect(-8608.0, -14240.0, -8096.0, -5792.0)
    gg_rct_Right_High_Elves = Rect(-5312.0, -10880.0, -4000.0, -9536.0)
    gg_rct_Naga_Right = Rect(-9376.0, -12256.0, -8032.0, -10240.0)
    gg_rct_Naga_Left = Rect(-21056.0, 1152.0, -19584.0, 3168.0)
    gg_rct_Murloc_Left = Rect(-22112.0, 4480.0, -21728.0, 4864.0)
    gg_rct_Murloc_Right = Rect(-7328.0, -14176.0, -6848.0, -13664.0)
    gg_rct_Left_Elemental_Start = Rect(-27712.0, -9376.0, -27072.0, -8736.0)
    gg_rct_Front_Town_Left = Rect(-19712.0, -6016.0, -17760.0, -4224.0)
    gg_rct_City_Elves_Left = Rect(-22208.0, -5600.0, -20512.0, -3904.0)
    gg_rct_Blacksmith_Left = Rect(-25024.0, -7136.0, -23808.0, -5952.0)
    gg_rct_Front_City_Right = Rect(-11360.0, -5120.0, -9472.0, -3232.0)
    gg_rct_City_Elves_Right = Rect(-8896.0, -5472.0, -6816.0, -3712.0)
    gg_rct_Blacksmith_Right = Rect(-5344.0, -3232.0, -4128.0, -2304.0)
    gg_rct_Arcane_Hero_Right = Rect(-8512.0, 1472.0, -7936.0, 2272.0)
    gg_rct_Arcane_Hero_Left = Rect(-21056.0, -11584.0, -20416.0, -10752.0)
    gg_rct_Murloc_Gate_Left = Rect(-21632.0, 4128.0, -20960.0, 4896.0)
    gg_rct_Murloc_Gate_Right = Rect(-8128.0, -14240.0, -7456.0, -13472.0)
    gg_rct_Big_Top_Right = Rect(-12064.0, -960.0, 1632.0, 7424.0)
    gg_rct_Big_Middle_Right = Rect(-12064.0, -5472.0, 1792.0, -928.0)
    gg_rct_Big_Bottom_Right = Rect(-12064.0, -16256.0, 2048.0, -5440.0)
    gg_rct_Big_Bottom_Left_Center = Rect(-17024.0, -16544.0, -14528.0, -6880.0)
    gg_rct_Big_Bottom_Right_Center = Rect(-14560.0, -16576.0, -12032.0, -6208.0)
    gg_rct_Big_Top_Right_Center = Rect(-14560.0, -2464.0, -12032.0, 7264.0)
    gg_rct_Big_Top_Left_Center = Rect(-17024.0, -3136.0, -14528.0, 7232.0)
    gg_rct_Big_Middle_Right_Center = Rect(-14560.0, -6240.0, -12032.0, -2432.0)
    gg_rct_Aspect_of_Forest_Left = Rect(-26720.0, -608.0, -26176.0, -160.0)
    gg_rct_Aspect_of_Forest_Left_Gate = Rect(-25792.0, -32.0, -25472.0, 736.0)
    gg_rct_Aspect_of_Forest_Right_Gate = Rect(-3552.0, -10080.0, -3296.0, -9280.0)
    gg_rct_Arcane_Left_Top = Rect(-20512.0, -9696.0, -19744.0, -8832.0)
    gg_rct_Arcane_Left_Bottom = Rect(-20480.0, -13568.0, -19744.0, -12704.0)
    gg_rct_Arcane_Right_Top = Rect(-9120.0, -512.0, -8576.0, 544.0)
    gg_rct_Arcane_Right_Bottom = Rect(-9152.0, 3232.0, -8608.0, 4224.0)
    gg_rct_Zombie_End_Left = Rect(-26208.0, -7744.0, -25600.0, -7200.0)
    gg_rct_Zombie_End_Right = Rect(-3392.0, -2080.0, -2976.0, -1600.0)
    gg_rct_Death_Gate_Left = Rect(-25408.0, -6304.0, -25152.0, -5536.0)
    gg_rct_Death_Gate_Right = Rect(-3904.0, -3776.0, -3648.0, -3008.0)
    gg_rct_Elf_Base_Right = Rect(-4736.0, -11104.0, -4128.0, -7104.0)
    gg_rct_Elf_Base_Left = Rect(-25216.0, 736.0, -24480.0, 1632.0)
    gg_rct_Undead_Right = Rect(-13088.0, -6432.0, -12128.0, -5088.0)
    gg_rct_Undead_Left = Rect(-16960.0, -4224.0, -15968.0, -2944.0)
    gg_rct_Human_Shipyard_Left = Rect(-18496.0, -7776.0, -18112.0, -7392.0)
    gg_rct_Human_Shipyard_Right = Rect(-10944.0, -2048.0, -10368.0, -1664.0)
    gg_rct_Right_Everything = Rect(-5376.0, -10784.0, -5088.0, 4288.0)
    gg_rct_Left_Everything = Rect(-24768.0, -13376.0, -24448.0, 1696.0)
    gg_rct_Left_Mage_Base = Rect(-23904.0, -12384.0, -23040.0, -9984.0)
    gg_rct_Right_Mage_Base = Rect(-5856.0, 640.0, -5024.0, 3008.0)
    gg_rct_Murloc_Spawn_Left = Rect(-20864.0, 3232.0, -19552.0, 4640.0)
    gg_rct_Murloc_Spawn_Right = Rect(-9344.0, -13920.0, -8352.0, -12544.0)
    gg_rct_Right_Start_Middle = Rect(-13120.0, -6176.0, -12864.0, -2176.0)
    gg_rct_Zombie_Mid_Left = Rect(-26560.0, -3328.0, -25984.0, -2688.0)
    gg_rct_Zombie_Mid_Right = Rect(-3072.0, -6592.0, -2592.0, -6112.0)
    gg_rct_Aspect_of_Forest_Left_Mid = Rect(-25088.0, 4160.0, -24544.0, 4736.0)
    gg_rct_Aspect_of_Forest_Right_Mid = Rect(-4544.0, -14048.0, -4000.0, -13472.0)
    gg_rct_Aspect_of_Forest_Right = Rect(-2784.0, -9344.0, -2240.0, -8896.0)
    gg_rct_Right_Elemental_Start = Rect(-2112.0, -672.0, -1472.0, -32.0)
    gg_rct_Left_Start_Middle = Rect(-16224.0, -7008.0, -15968.0, -3200.0)
    gg_rct_Big_Middle_Left_Center = Rect(-17024.0, -6912.0, -14528.0, -3104.0)
end

function CreateCameras()
    gg_cam_baseLeftStart = CreateCameraSetup()
    CameraSetupSetField(gg_cam_baseLeftStart, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
    CameraSetupSetField(gg_cam_baseLeftStart, CAMERA_FIELD_ROTATION, 90.0, 0.0)
    CameraSetupSetField(gg_cam_baseLeftStart, CAMERA_FIELD_ANGLE_OF_ATTACK, 308.0, 0.0)
    CameraSetupSetField(gg_cam_baseLeftStart, CAMERA_FIELD_TARGET_DISTANCE, 1481.5, 0.0)
    CameraSetupSetField(gg_cam_baseLeftStart, CAMERA_FIELD_ROLL, 0.0, 0.0)
    CameraSetupSetField(gg_cam_baseLeftStart, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0)
    CameraSetupSetField(gg_cam_baseLeftStart, CAMERA_FIELD_FARZ, 5000.0, 0.0)
    CameraSetupSetField(gg_cam_baseLeftStart, CAMERA_FIELD_NEARZ, 16.0, 0.0)
    CameraSetupSetField(gg_cam_baseLeftStart, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
    CameraSetupSetField(gg_cam_baseLeftStart, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
    CameraSetupSetField(gg_cam_baseLeftStart, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
    CameraSetupSetDestPosition(gg_cam_baseLeftStart, -24461.1, -4038.5, 0.0)
    gg_cam_intro06 = CreateCameraSetup()
    CameraSetupSetField(gg_cam_intro06, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro06, CAMERA_FIELD_ROTATION, 69.0, 0.0)
    CameraSetupSetField(gg_cam_intro06, CAMERA_FIELD_ANGLE_OF_ATTACK, 9.6, 0.0)
    CameraSetupSetField(gg_cam_intro06, CAMERA_FIELD_TARGET_DISTANCE, 1834.2, 0.0)
    CameraSetupSetField(gg_cam_intro06, CAMERA_FIELD_ROLL, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro06, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0)
    CameraSetupSetField(gg_cam_intro06, CAMERA_FIELD_FARZ, 6151.0, 0.0)
    CameraSetupSetField(gg_cam_intro06, CAMERA_FIELD_NEARZ, 16.0, 0.0)
    CameraSetupSetField(gg_cam_intro06, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro06, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro06, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
    CameraSetupSetDestPosition(gg_cam_intro06, -26098.5, -1925.7, 0.0)
    gg_cam_intro01 = CreateCameraSetup()
    CameraSetupSetField(gg_cam_intro01, CAMERA_FIELD_ZOFFSET, 473.0, 0.0)
    CameraSetupSetField(gg_cam_intro01, CAMERA_FIELD_ROTATION, 132.2, 0.0)
    CameraSetupSetField(gg_cam_intro01, CAMERA_FIELD_ANGLE_OF_ATTACK, 13.5, 0.0)
    CameraSetupSetField(gg_cam_intro01, CAMERA_FIELD_TARGET_DISTANCE, 1165.0, 0.0)
    CameraSetupSetField(gg_cam_intro01, CAMERA_FIELD_ROLL, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro01, CAMERA_FIELD_FIELD_OF_VIEW, 110.0, 0.0)
    CameraSetupSetField(gg_cam_intro01, CAMERA_FIELD_FARZ, 3596.0, 0.0)
    CameraSetupSetField(gg_cam_intro01, CAMERA_FIELD_NEARZ, 16.0, 0.0)
    CameraSetupSetField(gg_cam_intro01, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro01, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro01, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
    CameraSetupSetDestPosition(gg_cam_intro01, -20706.6, -207.0, 0.0)
    gg_cam_intro02 = CreateCameraSetup()
    CameraSetupSetField(gg_cam_intro02, CAMERA_FIELD_ZOFFSET, 215.0, 0.0)
    CameraSetupSetField(gg_cam_intro02, CAMERA_FIELD_ROTATION, 159.9, 0.0)
    CameraSetupSetField(gg_cam_intro02, CAMERA_FIELD_ANGLE_OF_ATTACK, 14.9, 0.0)
    CameraSetupSetField(gg_cam_intro02, CAMERA_FIELD_TARGET_DISTANCE, 1127.0, 0.0)
    CameraSetupSetField(gg_cam_intro02, CAMERA_FIELD_ROLL, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro02, CAMERA_FIELD_FIELD_OF_VIEW, 65.0, 0.0)
    CameraSetupSetField(gg_cam_intro02, CAMERA_FIELD_FARZ, 4144.0, 0.0)
    CameraSetupSetField(gg_cam_intro02, CAMERA_FIELD_NEARZ, 16.0, 0.0)
    CameraSetupSetField(gg_cam_intro02, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro02, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro02, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
    CameraSetupSetDestPosition(gg_cam_intro02, -24138.6, 1018.8, 0.0)
    gg_cam_intro03 = CreateCameraSetup()
    CameraSetupSetField(gg_cam_intro03, CAMERA_FIELD_ZOFFSET, 103.0, 0.0)
    CameraSetupSetField(gg_cam_intro03, CAMERA_FIELD_ROTATION, 107.2, 0.0)
    CameraSetupSetField(gg_cam_intro03, CAMERA_FIELD_ANGLE_OF_ATTACK, 10.2, 0.0)
    CameraSetupSetField(gg_cam_intro03, CAMERA_FIELD_TARGET_DISTANCE, 1039.0, 0.0)
    CameraSetupSetField(gg_cam_intro03, CAMERA_FIELD_ROLL, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro03, CAMERA_FIELD_FIELD_OF_VIEW, 61.0, 0.0)
    CameraSetupSetField(gg_cam_intro03, CAMERA_FIELD_FARZ, 4179.7, 0.0)
    CameraSetupSetField(gg_cam_intro03, CAMERA_FIELD_NEARZ, 16.0, 0.0)
    CameraSetupSetField(gg_cam_intro03, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro03, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro03, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
    CameraSetupSetDestPosition(gg_cam_intro03, -15547.9, -8326.0, 0.0)
    gg_cam_intro04 = CreateCameraSetup()
    CameraSetupSetField(gg_cam_intro04, CAMERA_FIELD_ZOFFSET, 103.0, 0.0)
    CameraSetupSetField(gg_cam_intro04, CAMERA_FIELD_ROTATION, 136.9, 0.0)
    CameraSetupSetField(gg_cam_intro04, CAMERA_FIELD_ANGLE_OF_ATTACK, 0.3, 0.0)
    CameraSetupSetField(gg_cam_intro04, CAMERA_FIELD_TARGET_DISTANCE, 2196.1, 0.0)
    CameraSetupSetField(gg_cam_intro04, CAMERA_FIELD_ROLL, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro04, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0)
    CameraSetupSetField(gg_cam_intro04, CAMERA_FIELD_FARZ, 5057.4, 0.0)
    CameraSetupSetField(gg_cam_intro04, CAMERA_FIELD_NEARZ, 16.0, 0.0)
    CameraSetupSetField(gg_cam_intro04, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro04, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro04, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
    CameraSetupSetDestPosition(gg_cam_intro04, -19479.2, -4734.0, 0.0)
    gg_cam_intro05 = CreateCameraSetup()
    CameraSetupSetField(gg_cam_intro05, CAMERA_FIELD_ZOFFSET, 227.0, 0.0)
    CameraSetupSetField(gg_cam_intro05, CAMERA_FIELD_ROTATION, 107.2, 0.0)
    CameraSetupSetField(gg_cam_intro05, CAMERA_FIELD_ANGLE_OF_ATTACK, 3.9, 0.0)
    CameraSetupSetField(gg_cam_intro05, CAMERA_FIELD_TARGET_DISTANCE, 2679.8, 0.0)
    CameraSetupSetField(gg_cam_intro05, CAMERA_FIELD_ROLL, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro05, CAMERA_FIELD_FIELD_OF_VIEW, 49.0, 0.0)
    CameraSetupSetField(gg_cam_intro05, CAMERA_FIELD_FARZ, 6046.0, 0.0)
    CameraSetupSetField(gg_cam_intro05, CAMERA_FIELD_NEARZ, 16.0, 0.0)
    CameraSetupSetField(gg_cam_intro05, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro05, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro05, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
    CameraSetupSetDestPosition(gg_cam_intro05, -13442.4, 3767.4, 0.0)
    gg_cam_baseRightStart = CreateCameraSetup()
    CameraSetupSetField(gg_cam_baseRightStart, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
    CameraSetupSetField(gg_cam_baseRightStart, CAMERA_FIELD_ROTATION, 90.0, 0.0)
    CameraSetupSetField(gg_cam_baseRightStart, CAMERA_FIELD_ANGLE_OF_ATTACK, 308.0, 0.0)
    CameraSetupSetField(gg_cam_baseRightStart, CAMERA_FIELD_TARGET_DISTANCE, 1784.5, 0.0)
    CameraSetupSetField(gg_cam_baseRightStart, CAMERA_FIELD_ROLL, 0.0, 0.0)
    CameraSetupSetField(gg_cam_baseRightStart, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0)
    CameraSetupSetField(gg_cam_baseRightStart, CAMERA_FIELD_FARZ, 7737.5, 0.0)
    CameraSetupSetField(gg_cam_baseRightStart, CAMERA_FIELD_NEARZ, 16.0, 0.0)
    CameraSetupSetField(gg_cam_baseRightStart, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
    CameraSetupSetField(gg_cam_baseRightStart, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
    CameraSetupSetField(gg_cam_baseRightStart, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
    CameraSetupSetDestPosition(gg_cam_baseRightStart, -4512.2, -5282.9, 0.0)
    gg_cam_intro07 = CreateCameraSetup()
    CameraSetupSetField(gg_cam_intro07, CAMERA_FIELD_ZOFFSET, 154.0, 0.0)
    CameraSetupSetField(gg_cam_intro07, CAMERA_FIELD_ROTATION, 71.7, 0.0)
    CameraSetupSetField(gg_cam_intro07, CAMERA_FIELD_ANGLE_OF_ATTACK, 11.1, 0.0)
    CameraSetupSetField(gg_cam_intro07, CAMERA_FIELD_TARGET_DISTANCE, 1403.2, 0.0)
    CameraSetupSetField(gg_cam_intro07, CAMERA_FIELD_ROLL, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro07, CAMERA_FIELD_FIELD_OF_VIEW, 93.0, 0.0)
    CameraSetupSetField(gg_cam_intro07, CAMERA_FIELD_FARZ, 5289.0, 0.0)
    CameraSetupSetField(gg_cam_intro07, CAMERA_FIELD_NEARZ, 16.0, 0.0)
    CameraSetupSetField(gg_cam_intro07, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro07, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro07, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
    CameraSetupSetDestPosition(gg_cam_intro07, -24519.2, -1098.4, 0.0)
    gg_cam_intro08 = CreateCameraSetup()
    CameraSetupSetField(gg_cam_intro08, CAMERA_FIELD_ZOFFSET, 126.0, 0.0)
    CameraSetupSetField(gg_cam_intro08, CAMERA_FIELD_ROTATION, 157.8, 0.0)
    CameraSetupSetField(gg_cam_intro08, CAMERA_FIELD_ANGLE_OF_ATTACK, 1.4, 0.0)
    CameraSetupSetField(gg_cam_intro08, CAMERA_FIELD_TARGET_DISTANCE, 785.6, 0.0)
    CameraSetupSetField(gg_cam_intro08, CAMERA_FIELD_ROLL, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro08, CAMERA_FIELD_FIELD_OF_VIEW, 120.0, 0.0)
    CameraSetupSetField(gg_cam_intro08, CAMERA_FIELD_FARZ, 3520.0, 0.0)
    CameraSetupSetField(gg_cam_intro08, CAMERA_FIELD_NEARZ, 16.0, 0.0)
    CameraSetupSetField(gg_cam_intro08, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro08, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro08, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
    CameraSetupSetDestPosition(gg_cam_intro08, -26588.4, -131.4, 0.0)
    gg_cam_intro09 = CreateCameraSetup()
    CameraSetupSetField(gg_cam_intro09, CAMERA_FIELD_ZOFFSET, 214.0, 0.0)
    CameraSetupSetField(gg_cam_intro09, CAMERA_FIELD_ROTATION, 180.0, 0.0)
    CameraSetupSetField(gg_cam_intro09, CAMERA_FIELD_ANGLE_OF_ATTACK, 6.0, 0.0)
    CameraSetupSetField(gg_cam_intro09, CAMERA_FIELD_TARGET_DISTANCE, 1198.6, 0.0)
    CameraSetupSetField(gg_cam_intro09, CAMERA_FIELD_ROLL, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro09, CAMERA_FIELD_FIELD_OF_VIEW, 120.0, 0.0)
    CameraSetupSetField(gg_cam_intro09, CAMERA_FIELD_FARZ, 4761.0, 0.0)
    CameraSetupSetField(gg_cam_intro09, CAMERA_FIELD_NEARZ, 16.0, 0.0)
    CameraSetupSetField(gg_cam_intro09, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro09, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro09, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
    CameraSetupSetDestPosition(gg_cam_intro09, -20460.0, -11203.6, 0.0)
    gg_cam_intro10 = CreateCameraSetup()
    CameraSetupSetField(gg_cam_intro10, CAMERA_FIELD_ZOFFSET, 212.0, 0.0)
    CameraSetupSetField(gg_cam_intro10, CAMERA_FIELD_ROTATION, 33.3, 0.0)
    CameraSetupSetField(gg_cam_intro10, CAMERA_FIELD_ANGLE_OF_ATTACK, 6.4, 0.0)
    CameraSetupSetField(gg_cam_intro10, CAMERA_FIELD_TARGET_DISTANCE, 2050.6, 0.0)
    CameraSetupSetField(gg_cam_intro10, CAMERA_FIELD_ROLL, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro10, CAMERA_FIELD_FIELD_OF_VIEW, 39.0, 0.0)
    CameraSetupSetField(gg_cam_intro10, CAMERA_FIELD_FARZ, 5104.0, 0.0)
    CameraSetupSetField(gg_cam_intro10, CAMERA_FIELD_NEARZ, 487.0, 0.0)
    CameraSetupSetField(gg_cam_intro10, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro10, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro10, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
    CameraSetupSetDestPosition(gg_cam_intro10, -12062.7, -10061.3, 0.0)
    gg_cam_intro11 = CreateCameraSetup()
    CameraSetupSetField(gg_cam_intro11, CAMERA_FIELD_ZOFFSET, 449.0, 0.0)
    CameraSetupSetField(gg_cam_intro11, CAMERA_FIELD_ROTATION, 135.0, 0.0)
    CameraSetupSetField(gg_cam_intro11, CAMERA_FIELD_ANGLE_OF_ATTACK, 14.1, 0.0)
    CameraSetupSetField(gg_cam_intro11, CAMERA_FIELD_TARGET_DISTANCE, 2237.5, 0.0)
    CameraSetupSetField(gg_cam_intro11, CAMERA_FIELD_ROLL, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro11, CAMERA_FIELD_FIELD_OF_VIEW, 75.0, 0.0)
    CameraSetupSetField(gg_cam_intro11, CAMERA_FIELD_FARZ, 4294.4, 0.0)
    CameraSetupSetField(gg_cam_intro11, CAMERA_FIELD_NEARZ, 202.0, 0.0)
    CameraSetupSetField(gg_cam_intro11, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro11, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro11, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
    CameraSetupSetDestPosition(gg_cam_intro11, -23337.2, -5204.2, 0.0)
    gg_cam_intro12 = CreateCameraSetup()
    CameraSetupSetField(gg_cam_intro12, CAMERA_FIELD_ZOFFSET, 79.0, 0.0)
    CameraSetupSetField(gg_cam_intro12, CAMERA_FIELD_ROTATION, 20.2, 0.0)
    CameraSetupSetField(gg_cam_intro12, CAMERA_FIELD_ANGLE_OF_ATTACK, 360.0, 0.0)
    CameraSetupSetField(gg_cam_intro12, CAMERA_FIELD_TARGET_DISTANCE, 35.5, 0.0)
    CameraSetupSetField(gg_cam_intro12, CAMERA_FIELD_ROLL, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro12, CAMERA_FIELD_FIELD_OF_VIEW, 112.0, 0.0)
    CameraSetupSetField(gg_cam_intro12, CAMERA_FIELD_FARZ, 2755.0, 0.0)
    CameraSetupSetField(gg_cam_intro12, CAMERA_FIELD_NEARZ, 53.0, 0.0)
    CameraSetupSetField(gg_cam_intro12, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro12, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro12, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
    CameraSetupSetDestPosition(gg_cam_intro12, -21428.3, -7663.9, 0.0)
    gg_cam_intro13 = CreateCameraSetup()
    CameraSetupSetField(gg_cam_intro13, CAMERA_FIELD_ZOFFSET, 232.0, 0.0)
    CameraSetupSetField(gg_cam_intro13, CAMERA_FIELD_ROTATION, 159.4, 0.0)
    CameraSetupSetField(gg_cam_intro13, CAMERA_FIELD_ANGLE_OF_ATTACK, 5.1, 0.0)
    CameraSetupSetField(gg_cam_intro13, CAMERA_FIELD_TARGET_DISTANCE, 1533.3, 0.0)
    CameraSetupSetField(gg_cam_intro13, CAMERA_FIELD_ROLL, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro13, CAMERA_FIELD_FIELD_OF_VIEW, 110.0, 0.0)
    CameraSetupSetField(gg_cam_intro13, CAMERA_FIELD_FARZ, 4745.0, 0.0)
    CameraSetupSetField(gg_cam_intro13, CAMERA_FIELD_NEARZ, 16.0, 0.0)
    CameraSetupSetField(gg_cam_intro13, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro13, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
    CameraSetupSetField(gg_cam_intro13, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
    CameraSetupSetDestPosition(gg_cam_intro13, -24161.3, 211.1, 0.0)
end

function Trig_Level100_Func001001002001()
    return (GetOwningPlayer(GetFilterUnit()) == Player(0))
end

function Trig_Level100_Func001001002002()
    return (IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true)
end

function Trig_Level100_Func001001002()
    return GetBooleanAnd(Trig_Level100_Func001001002001(), Trig_Level100_Func001001002002())
end

function Trig_Level100_Func001A()
    SetHeroLevelBJ(GetEnumUnit(), 100, false)
end

function Trig_Level100_Actions()
    ForGroupBJ(GetUnitsInRectMatching(GetPlayableMapRect(), Condition(Trig_Level100_Func001001002)), Trig_Level100_Func001A)
end

function InitTrig_Level100()
    gg_trg_Level100 = CreateTrigger()
    TriggerRegisterPlayerChatEvent(gg_trg_Level100, Player(0), "-level100", true)
    TriggerAddAction(gg_trg_Level100, Trig_Level100_Actions)
end

function Trig_fogofwar_Actions()
    FogEnableOff()
    FogMaskEnableOff()
end

function InitTrig_fogofwar()
    gg_trg_fogofwar = CreateTrigger()
    TriggerRegisterPlayerChatEvent(gg_trg_fogofwar, Player(0), "-fogofwar", true)
    TriggerAddAction(gg_trg_fogofwar, Trig_fogofwar_Actions)
end

function Trig_testing_Conditions()
    if (not (IsTerrainPathableBJ(GetRectCenter(GetPlayableMapRect()), PATHING_TYPE_WALKABILITY) == true)) then
        return false
    end
    return true
end

function Trig_testing_Actions()
    SetPlayerHandicapXPBJ(Player(0), GetPlayerHandicapXPBJ(Player(0)))
    SetUnitPositionLoc(GetTriggerUnit(), GetRectCenter(GetPlayableMapRect()))
    AdjustPlayerStateBJ(50, Player(0), PLAYER_STATE_RESOURCE_LUMBER)
    SetUnitPositionLoc(GetTriggerUnit(), GetRectCenter(GetPlayableMapRect()))
    ConditionalTriggerExecute(gg_trg_baseAndHeals)
    SelectUnitForPlayerSingle(GetTriggerUnit(), Player(0))
    SetUnitPositionLocFacingBJ(GetTriggerUnit(), GetRectCenter(GetPlayableMapRect()), 0.00)
    BlzEndUnitAbilityCooldown(GetEnumUnit(), FourCC("AHav"))
    SetCameraTargetControllerNoZForPlayer(Player(0), GetTriggerUnit(), 0, 0, false)
    UnitUseItemTarget(GetLastCreatedUnit(), GetItemOfTypeFromUnitBJ(GetEnumUnit(), FourCC("texp")), GetEnumUnit())
    IssueUpgradeOrderByIdBJ(udg_AI_PursueHero[0], FourCC("R00D"))
    BlzSetUnitBaseDamage(GetTriggerUnit(), 10, 0)
    UnitDamageTargetBJ(GetTriggerUnit(), GetTriggerUnit(), 500, ATTACK_TYPE_MELEE, DAMAGE_TYPE_MAGIC)
    SetUnitTimeScalePercent(GetEnumUnit(), 100)
    CreateNUnitsAtLoc(1, FourCC("hfoo"), Player(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(GetPlayableMapRect()), bj_UNIT_FACING)
    SetSkyModel("Environment\\Sky\\BlizzardSky\\BlizzardSky.mdl")
    SetSkyModel("Environment\\Sky\\BlizzardSky\\BlizzardSky.mdl")
    DisableTrigger(GetTriggeringTrigger())
    SetPlayerTechResearchedSwap(FourCC("R005"), 0, Player(0))
    BlzSetUnitName(GetTriggerUnit(), "hie")
end

function InitTrig_testing()
    gg_trg_testing = CreateTrigger()
    DisableTrigger(gg_trg_testing)
    TriggerRegisterAnyUnitEventBJ(gg_trg_testing, EVENT_PLAYER_UNIT_ATTACKED)
    TriggerRegisterUnitEvent(gg_trg_testing, gg_unit_h003_0007, EVENT_UNIT_ATTACKED)
    TriggerAddCondition(gg_trg_testing, Condition(Trig_testing_Conditions))
    TriggerAddAction(gg_trg_testing, Trig_testing_Actions)
end

function Trig_FUNC_Calculate_Level_Factor_Func002Func001C()
    if (not (udg_CALC_LOOP > 1)) then
        return false
    end
    return true
end

function Trig_FUNC_Calculate_Level_Factor_Actions()
    udg_CALC_RESULT = udg_CALC_Base
    udg_CALC_LOOP = 1
    while (true) do
        if (udg_CALC_LOOP > udg_CALC_ITERATIONS) then break end
        if (Trig_FUNC_Calculate_Level_Factor_Func002Func001C()) then
            udg_CALC_RESULT = ((udg_CALC_RESULT * udg_CALC_Previous_Value) + (0.00 + ((udg_CALC_Level_Factor * I2R((udg_CALC_LOOP - 1))) + udg_CALC_Constant)))
        else
        end
        udg_CALC_LOOP = udg_CALC_LOOP + 1
    end
end

function InitTrig_FUNC_Calculate_Level_Factor()
    gg_trg_FUNC_Calculate_Level_Factor = CreateTrigger()
    TriggerAddAction(gg_trg_FUNC_Calculate_Level_Factor, Trig_FUNC_Calculate_Level_Factor_Actions)
end

function Trig_Open_Gate_Right_Murloc_Conditions()
    if (not (RectContainsUnit(gg_rct_Big_Bottom_Right, GetDyingUnit()) == true)) then
        return false
    end
    if (not (GetUnitTypeId(GetDyingUnit()) == FourCC("nmsc"))) then
        return false
    end
    return true
end

function Trig_Open_Gate_Right_Murloc_Func001002()
    ModifyGateBJ(bj_GATEOPERATION_OPEN, GetEnumDestructable())
end

function Trig_Open_Gate_Right_Murloc_Actions()
    EnumDestructablesInRectAll(gg_rct_Murloc_Gate_Right, Trig_Open_Gate_Right_Murloc_Func001002)
end

function InitTrig_Open_Gate_Right_Murloc()
    gg_trg_Open_Gate_Right_Murloc = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Open_Gate_Right_Murloc, EVENT_PLAYER_UNIT_DEATH)
    TriggerAddCondition(gg_trg_Open_Gate_Right_Murloc, Condition(Trig_Open_Gate_Right_Murloc_Conditions))
    TriggerAddAction(gg_trg_Open_Gate_Right_Murloc, Trig_Open_Gate_Right_Murloc_Actions)
end

function Trig_Open_Gate_Left_Murloc_Conditions()
    if (not (RectContainsUnit(gg_rct_Big_Top_Left, GetDyingUnit()) == true)) then
        return false
    end
    if (not (GetUnitTypeId(GetDyingUnit()) == FourCC("nmsc"))) then
        return false
    end
    return true
end

function Trig_Open_Gate_Left_Murloc_Func001002()
    ModifyGateBJ(bj_GATEOPERATION_OPEN, GetEnumDestructable())
end

function Trig_Open_Gate_Left_Murloc_Actions()
    EnumDestructablesInRectAll(gg_rct_Murloc_Gate_Left, Trig_Open_Gate_Left_Murloc_Func001002)
end

function InitTrig_Open_Gate_Left_Murloc()
    gg_trg_Open_Gate_Left_Murloc = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Open_Gate_Left_Murloc, EVENT_PLAYER_UNIT_DEATH)
    TriggerAddCondition(gg_trg_Open_Gate_Left_Murloc, Condition(Trig_Open_Gate_Left_Murloc_Conditions))
    TriggerAddAction(gg_trg_Open_Gate_Left_Murloc, Trig_Open_Gate_Left_Murloc_Actions)
end

function Trig_Open_Gate_Right_Aspect_of_Death_Conditions()
    if (not (RectContainsUnit(gg_rct_Big_Middle_Right, GetDyingUnit()) == true)) then
        return false
    end
    if (not (GetUnitTypeId(GetDyingUnit()) == FourCC("uabo"))) then
        return false
    end
    return true
end

function Trig_Open_Gate_Right_Aspect_of_Death_Func001002()
    ModifyGateBJ(bj_GATEOPERATION_OPEN, GetEnumDestructable())
end

function Trig_Open_Gate_Right_Aspect_of_Death_Actions()
    EnumDestructablesInRectAll(gg_rct_Death_Gate_Right, Trig_Open_Gate_Right_Aspect_of_Death_Func001002)
end

function InitTrig_Open_Gate_Right_Aspect_of_Death()
    gg_trg_Open_Gate_Right_Aspect_of_Death = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Open_Gate_Right_Aspect_of_Death, EVENT_PLAYER_UNIT_DEATH)
    TriggerAddCondition(gg_trg_Open_Gate_Right_Aspect_of_Death, Condition(Trig_Open_Gate_Right_Aspect_of_Death_Conditions))
    TriggerAddAction(gg_trg_Open_Gate_Right_Aspect_of_Death, Trig_Open_Gate_Right_Aspect_of_Death_Actions)
end

function Trig_Open_Gate_Left_Aspect_of_Death_Conditions()
    if (not (RectContainsUnit(gg_rct_Big_Middle_Left, GetDyingUnit()) == true)) then
        return false
    end
    if (not (GetUnitTypeId(GetDyingUnit()) == FourCC("uabo"))) then
        return false
    end
    return true
end

function Trig_Open_Gate_Left_Aspect_of_Death_Func001002()
    ModifyGateBJ(bj_GATEOPERATION_OPEN, GetEnumDestructable())
end

function Trig_Open_Gate_Left_Aspect_of_Death_Actions()
    EnumDestructablesInRectAll(gg_rct_Death_Gate_Left, Trig_Open_Gate_Left_Aspect_of_Death_Func001002)
end

function InitTrig_Open_Gate_Left_Aspect_of_Death()
    gg_trg_Open_Gate_Left_Aspect_of_Death = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Open_Gate_Left_Aspect_of_Death, EVENT_PLAYER_UNIT_DEATH)
    TriggerAddCondition(gg_trg_Open_Gate_Left_Aspect_of_Death, Condition(Trig_Open_Gate_Left_Aspect_of_Death_Conditions))
    TriggerAddAction(gg_trg_Open_Gate_Left_Aspect_of_Death, Trig_Open_Gate_Left_Aspect_of_Death_Actions)
end

function Trig_Open_Gate_Left_Aspect_of_Forest_Conditions()
    if (not (RectContainsUnit(gg_rct_Big_Top_Left, GetDyingUnit()) == true)) then
        return false
    end
    if (not (GetUnitTypeId(GetDyingUnit()) == FourCC("n00N"))) then
        return false
    end
    return true
end

function Trig_Open_Gate_Left_Aspect_of_Forest_Func001002()
    ModifyGateBJ(bj_GATEOPERATION_OPEN, GetEnumDestructable())
end

function Trig_Open_Gate_Left_Aspect_of_Forest_Actions()
    EnumDestructablesInRectAll(gg_rct_Aspect_of_Forest_Left_Gate, Trig_Open_Gate_Left_Aspect_of_Forest_Func001002)
end

function InitTrig_Open_Gate_Left_Aspect_of_Forest()
    gg_trg_Open_Gate_Left_Aspect_of_Forest = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Open_Gate_Left_Aspect_of_Forest, EVENT_PLAYER_UNIT_DEATH)
    TriggerAddCondition(gg_trg_Open_Gate_Left_Aspect_of_Forest, Condition(Trig_Open_Gate_Left_Aspect_of_Forest_Conditions))
    TriggerAddAction(gg_trg_Open_Gate_Left_Aspect_of_Forest, Trig_Open_Gate_Left_Aspect_of_Forest_Actions)
end

function Trig_Open_Gate_Right_Aspect_of_Forest_Conditions()
    if (not (RectContainsUnit(gg_rct_Big_Bottom_Right, GetDyingUnit()) == true)) then
        return false
    end
    if (not (GetUnitTypeId(GetDyingUnit()) == FourCC("n00N"))) then
        return false
    end
    return true
end

function Trig_Open_Gate_Right_Aspect_of_Forest_Func001002()
    ModifyGateBJ(bj_GATEOPERATION_OPEN, GetEnumDestructable())
end

function Trig_Open_Gate_Right_Aspect_of_Forest_Actions()
    EnumDestructablesInRectAll(gg_rct_Aspect_of_Forest_Right_Gate, Trig_Open_Gate_Right_Aspect_of_Forest_Func001002)
end

function InitTrig_Open_Gate_Right_Aspect_of_Forest()
    gg_trg_Open_Gate_Right_Aspect_of_Forest = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Open_Gate_Right_Aspect_of_Forest, EVENT_PLAYER_UNIT_DEATH)
    TriggerAddCondition(gg_trg_Open_Gate_Right_Aspect_of_Forest, Condition(Trig_Open_Gate_Right_Aspect_of_Forest_Conditions))
    TriggerAddAction(gg_trg_Open_Gate_Right_Aspect_of_Forest, Trig_Open_Gate_Right_Aspect_of_Forest_Actions)
end

function Trig_Creep_Dies_Init_Func001C()
    if (GetUnitTypeId(GetDyingUnit()) == FourCC("nmsc")) then
        return true
    end
    if (GetUnitTypeId(GetDyingUnit()) == FourCC("nelb")) then
        return true
    end
    if (GetUnitTypeId(GetDyingUnit()) == FourCC("n00N")) then
        return true
    end
    if (GetUnitTypeId(GetDyingUnit()) == FourCC("uabo")) then
        return true
    end
    return false
end

function Trig_Creep_Dies_Init_Conditions()
    if (not Trig_Creep_Dies_Init_Func001C()) then
        return false
    end
    if (not (GetOwningPlayer(GetDyingUnit()) == Player(PLAYER_NEUTRAL_AGGRESSIVE))) then
        return false
    end
    return true
end

function Trig_Creep_Dies_Init_Func003C()
    if (not (IsUnitAlly(GetKillingUnitBJ(), ForcePickRandomPlayer(udg_PLAYERGRPallied)) == true)) then
        return false
    end
    return true
end

function Trig_Creep_Dies_Init_Func004Func002Func001C()
    if (RectContainsUnit(gg_rct_Big_Bottom_Left, GetDyingUnit()) == true) then
        return true
    end
    if (RectContainsUnit(gg_rct_Big_Bottom_Left_Center, GetDyingUnit()) == true) then
        return true
    end
    if (RectContainsUnit(gg_rct_Big_Bottom_Right_Center, GetDyingUnit()) == true) then
        return true
    end
    if (RectContainsUnit(gg_rct_Big_Bottom_Right, GetDyingUnit()) == true) then
        return true
    end
    return false
end

function Trig_Creep_Dies_Init_Func004Func002C()
    if (not Trig_Creep_Dies_Init_Func004Func002Func001C()) then
        return false
    end
    return true
end

function Trig_Creep_Dies_Init_Func004C()
    if (not (GetUnitTypeId(GetDyingUnit()) == FourCC("nmsc"))) then
        return false
    end
    return true
end

function Trig_Creep_Dies_Init_Func005Func003Func001C()
    if (RectContainsUnit(gg_rct_Big_Bottom_Left, GetDyingUnit()) == true) then
        return true
    end
    if (RectContainsUnit(gg_rct_Big_Bottom_Left_Center, GetDyingUnit()) == true) then
        return true
    end
    if (RectContainsUnit(gg_rct_Big_Bottom_Right_Center, GetDyingUnit()) == true) then
        return true
    end
    if (RectContainsUnit(gg_rct_Big_Bottom_Right, GetDyingUnit()) == true) then
        return true
    end
    return false
end

function Trig_Creep_Dies_Init_Func005Func003C()
    if (not Trig_Creep_Dies_Init_Func005Func003Func001C()) then
        return false
    end
    return true
end

function Trig_Creep_Dies_Init_Func005C()
    if (not (GetUnitTypeId(GetDyingUnit()) == FourCC("nelb"))) then
        return false
    end
    return true
end

function Trig_Creep_Dies_Init_Func006Func003Func001C()
    if (RectContainsUnit(gg_rct_Big_Middle_Left, GetDyingUnit()) == true) then
        return true
    end
    return false
end

function Trig_Creep_Dies_Init_Func006Func003C()
    if (not Trig_Creep_Dies_Init_Func006Func003Func001C()) then
        return false
    end
    return true
end

function Trig_Creep_Dies_Init_Func006C()
    if (not (GetUnitTypeId(GetDyingUnit()) == FourCC("uabo"))) then
        return false
    end
    return true
end

function Trig_Creep_Dies_Init_Func007Func002Func001C()
    if (RectContainsUnit(gg_rct_Big_Top_Left, GetDyingUnit()) == true) then
        return true
    end
    return false
end

function Trig_Creep_Dies_Init_Func007Func002C()
    if (not Trig_Creep_Dies_Init_Func007Func002Func001C()) then
        return false
    end
    return true
end

function Trig_Creep_Dies_Init_Func007C()
    if (not (GetUnitTypeId(GetDyingUnit()) == FourCC("n00N"))) then
        return false
    end
    return true
end

function Trig_Creep_Dies_Init_Func009C()
    if (not (udg_Creep_Team[udg_Creep_Index] == 1)) then
        return false
    end
    return true
end

function Trig_Creep_Dies_Init_Actions()
    udg_Creep_Index = (udg_Creep_Index + 1)
    if (Trig_Creep_Dies_Init_Func003C()) then
        udg_Creep_Team[udg_Creep_Index] = 1
    else
        udg_Creep_Team[udg_Creep_Index] = 2
    end
    if (Trig_Creep_Dies_Init_Func004C()) then
        udg_Creep_Unit_Type[udg_Creep_Index] = GetUnitTypeId(GetDyingUnit())
        if (Trig_Creep_Dies_Init_Func004Func002C()) then
            udg_Creep_Start[udg_Creep_Index] = gg_rct_Murloc_Right
        else
            udg_Creep_Start[udg_Creep_Index] = gg_rct_Murloc_Left
        end
    else
    end
    if (Trig_Creep_Dies_Init_Func005C()) then
        udg_Creep_Unit_Type[udg_Creep_Index] = GetUnitTypeId(GetDyingUnit())
        if (Trig_Creep_Dies_Init_Func005Func003C()) then
            udg_Creep_Start[udg_Creep_Index] = gg_rct_Left_Elemental_Start
        else
            udg_Creep_Start[udg_Creep_Index] = gg_rct_Right_Elemental_Start
        end
    else
    end
    if (Trig_Creep_Dies_Init_Func006C()) then
        udg_Creep_Unit_Type[udg_Creep_Index] = GetUnitTypeId(GetDyingUnit())
        if (Trig_Creep_Dies_Init_Func006Func003C()) then
            udg_Creep_Start[udg_Creep_Index] = gg_rct_Zombie_End_Left
        else
            udg_Creep_Start[udg_Creep_Index] = gg_rct_Zombie_End_Right
        end
    else
    end
    if (Trig_Creep_Dies_Init_Func007C()) then
        udg_Creep_Unit_Type[udg_Creep_Index] = GetUnitTypeId(GetDyingUnit())
        if (Trig_Creep_Dies_Init_Func007Func002C()) then
            udg_Creep_Start[udg_Creep_Index] = gg_rct_Aspect_of_Forest_Left
        else
            udg_Creep_Start[udg_Creep_Index] = gg_rct_Aspect_of_Forest_Right
        end
    else
    end
    udg_TEMP_Pos2 = GetRectCenter(udg_Creep_Start[udg_Creep_Index])
    if (Trig_Creep_Dies_Init_Func009C()) then
        udg_TEMP_Player = ForcePickRandomPlayer(udg_PLAYERGRPallied)
    else
        udg_TEMP_Player = ForcePickRandomPlayer(udg_PLAYERGRPfederation)
    end
    CreateNUnitsAtLoc(1, udg_Creep_Unit_Type[udg_Creep_Index], udg_TEMP_Player, udg_TEMP_Pos2, bj_UNIT_FACING)
        RemoveLocation ( udg_TEMP_Pos2 )
    udg_Creep_Unit[udg_Creep_Index] = GetLastCreatedUnit()
        RemoveLocation ( udg_TEMP_Pos2 )
    EnableTrigger(gg_trg_Creep_Revive_Count)
end

function InitTrig_Creep_Dies_Init()
    gg_trg_Creep_Dies_Init = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Creep_Dies_Init, EVENT_PLAYER_UNIT_DEATH)
    TriggerAddCondition(gg_trg_Creep_Dies_Init, Condition(Trig_Creep_Dies_Init_Conditions))
    TriggerAddAction(gg_trg_Creep_Dies_Init, Trig_Creep_Dies_Init_Actions)
end

function Trig_Creep_Revive_Count_Func002Func001Func002Func002C()
    if (not (udg_Creep_Team[udg_TEMP_IntLoop1] == 1)) then
        return false
    end
    return true
end

function Trig_Creep_Revive_Count_Func002Func001Func002C()
    if (not (udg_Creep_Timer[udg_TEMP_IntLoop1] >= 110.00)) then
        return false
    end
    return true
end

function Trig_Creep_Revive_Count_Func002Func001C()
    if (not (IsUnitAliveBJ(udg_Creep_Unit[udg_TEMP_IntLoop1]) == false)) then
        return false
    end
    return true
end

function Trig_Creep_Revive_Count_Actions()
    udg_TEMP_IntLoop1 = 1
    while (true) do
        if (udg_TEMP_IntLoop1 > udg_Creep_Index) then break end
        if (Trig_Creep_Revive_Count_Func002Func001C()) then
            udg_Creep_Timer[udg_TEMP_IntLoop1] = (udg_Creep_Timer[udg_TEMP_IntLoop1] + 10.00)
            if (Trig_Creep_Revive_Count_Func002Func001Func002C()) then
                udg_TEMP_Pos2 = GetRectCenter(udg_Creep_Start[udg_TEMP_IntLoop1])
                if (Trig_Creep_Revive_Count_Func002Func001Func002Func002C()) then
                    udg_TEMP_Player = ForcePickRandomPlayer(udg_PLAYERGRPallied)
                else
                    udg_TEMP_Player = ForcePickRandomPlayer(udg_PLAYERGRPfederation)
                end
                CreateNUnitsAtLoc(1, udg_Creep_Unit_Type[udg_TEMP_IntLoop1], udg_TEMP_Player, udg_TEMP_Pos2, bj_UNIT_FACING)
                                RemoveLocation ( udg_TEMP_Pos2 )
                udg_Creep_Unit[udg_TEMP_IntLoop1] = GetLastCreatedUnit()
                udg_Creep_Timer[udg_TEMP_IntLoop1] = 0.00
            else
            end
        else
        end
        udg_TEMP_IntLoop1 = udg_TEMP_IntLoop1 + 1
    end
end

function InitTrig_Creep_Revive_Count()
    gg_trg_Creep_Revive_Count = CreateTrigger()
    DisableTrigger(gg_trg_Creep_Revive_Count)
    TriggerRegisterTimerEventPeriodic(gg_trg_Creep_Revive_Count, 10.00)
    TriggerAddAction(gg_trg_Creep_Revive_Count, Trig_Creep_Revive_Count_Actions)
end

function Trig_Armor_Hardening_Conditions()
    if (not (GetResearched() == FourCC("R00G"))) then
        return false
    end
    return true
end

function Trig_Armor_Hardening_Func001002002001()
    return (GetOwningPlayer(GetFilterUnit()) == GetOwningPlayer(GetResearchingUnit()))
end

function Trig_Armor_Hardening_Func001002002002()
    return (IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true)
end

function Trig_Armor_Hardening_Func001002002()
    return GetBooleanAnd(Trig_Armor_Hardening_Func001002002001(), Trig_Armor_Hardening_Func001002002002())
end

function Trig_Armor_Hardening_Func002A()
    SetUnitAbilityLevelSwapped(FourCC("A058"), GetEnumUnit(), (GetPlayerTechCountSimple(FourCC("R00G"), GetOwningPlayer(GetResearchingUnit())) + 1))
end

function Trig_Armor_Hardening_Actions()
    udg_TEMP_UnitGroup = GetUnitsInRectMatching(GetPlayableMapRect(), Condition(Trig_Armor_Hardening_Func001002002))
    ForGroupBJ(udg_TEMP_UnitGroup, Trig_Armor_Hardening_Func002A)
        DestroyGroup ( udg_TEMP_UnitGroup )
end

function InitTrig_Armor_Hardening()
    gg_trg_Armor_Hardening = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Armor_Hardening, EVENT_PLAYER_UNIT_RESEARCH_FINISH)
    TriggerAddCondition(gg_trg_Armor_Hardening, Condition(Trig_Armor_Hardening_Conditions))
    TriggerAddAction(gg_trg_Armor_Hardening, Trig_Armor_Hardening_Actions)
end

function Trig_Slam_Conditions()
    if (not (GetResearched() == FourCC("R00H"))) then
        return false
    end
    return true
end

function Trig_Slam_Func001002002001()
    return (GetOwningPlayer(GetFilterUnit()) == GetOwningPlayer(GetResearchingUnit()))
end

function Trig_Slam_Func001002002002()
    return (IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true)
end

function Trig_Slam_Func001002002()
    return GetBooleanAnd(Trig_Slam_Func001002002001(), Trig_Slam_Func001002002002())
end

function Trig_Slam_Func002A()
    SetUnitAbilityLevelSwapped(FourCC("A057"), GetEnumUnit(), (GetPlayerTechCountSimple(FourCC("R00H"), GetOwningPlayer(GetResearchingUnit())) + 1))
end

function Trig_Slam_Actions()
    udg_TEMP_UnitGroup = GetUnitsInRectMatching(GetPlayableMapRect(), Condition(Trig_Slam_Func001002002))
    ForGroupBJ(udg_TEMP_UnitGroup, Trig_Slam_Func002A)
        DestroyGroup ( udg_TEMP_UnitGroup )
end

function InitTrig_Slam()
    gg_trg_Slam = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Slam, EVENT_PLAYER_UNIT_RESEARCH_FINISH)
    TriggerAddCondition(gg_trg_Slam, Condition(Trig_Slam_Conditions))
    TriggerAddAction(gg_trg_Slam, Trig_Slam_Actions)
end

function Trig_Shade_Strength_Copy_Conditions()
    if (not (GetResearched() == FourCC("R00D"))) then
        return false
    end
    return true
end

function Trig_Shade_Strength_Copy_Func001002002001()
    return (GetOwningPlayer(GetFilterUnit()) == GetOwningPlayer(GetResearchingUnit()))
end

function Trig_Shade_Strength_Copy_Func001002002002()
    return (IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true)
end

function Trig_Shade_Strength_Copy_Func001002002()
    return GetBooleanAnd(Trig_Shade_Strength_Copy_Func001002002001(), Trig_Shade_Strength_Copy_Func001002002002())
end

function Trig_Shade_Strength_Copy_Func002A()
    SetUnitAbilityLevelSwapped(FourCC("A037"), GetEnumUnit(), (GetPlayerTechCountSimple(FourCC("R00D"), GetOwningPlayer(GetResearchingUnit())) + 1))
end

function Trig_Shade_Strength_Copy_Actions()
    udg_TEMP_UnitGroup = GetUnitsInRectMatching(GetPlayableMapRect(), Condition(Trig_Shade_Strength_Copy_Func001002002))
    ForGroupBJ(udg_TEMP_UnitGroup, Trig_Shade_Strength_Copy_Func002A)
        DestroyGroup ( udg_TEMP_UnitGroup )
end

function InitTrig_Shade_Strength_Copy()
    gg_trg_Shade_Strength_Copy = CreateTrigger()
    DisableTrigger(gg_trg_Shade_Strength_Copy)
    TriggerRegisterAnyUnitEventBJ(gg_trg_Shade_Strength_Copy, EVENT_PLAYER_UNIT_RESEARCH_FINISH)
    TriggerAddCondition(gg_trg_Shade_Strength_Copy, Condition(Trig_Shade_Strength_Copy_Conditions))
    TriggerAddAction(gg_trg_Shade_Strength_Copy, Trig_Shade_Strength_Copy_Actions)
end

function Trig_Mana_Overload_Research_Conditions()
    if (not (GetResearched() == FourCC("R00C"))) then
        return false
    end
    return true
end

function Trig_Mana_Overload_Research_Func002C()
    if (not (IsUnitAliveBJ(udg_UNIT_pickedHero[GetConvertedPlayerId(GetOwningPlayer(GetResearchingUnit()))]) == true)) then
        return false
    end
    return true
end

function Trig_Mana_Overload_Research_Actions()
    udg_Mana_Overload_Researched[GetConvertedPlayerId(GetOwningPlayer(GetResearchingUnit()))] = GetPlayerTechCountSimple(FourCC("R00C"), GetOwningPlayer(GetResearchingUnit()))
    if (Trig_Mana_Overload_Research_Func002C()) then
        SetUnitAbilityLevelSwapped(FourCC("A02N"), udg_UNIT_pickedHero[GetConvertedPlayerId(GetOwningPlayer(GetResearchingUnit()))], udg_Mana_Overload_Researched[GetConvertedPlayerId(GetOwningPlayer(GetResearchingUnit()))])
    else
    end
end

function InitTrig_Mana_Overload_Research()
    gg_trg_Mana_Overload_Research = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Mana_Overload_Research, EVENT_PLAYER_UNIT_RESEARCH_FINISH)
    TriggerAddCondition(gg_trg_Mana_Overload_Research, Condition(Trig_Mana_Overload_Research_Conditions))
    TriggerAddAction(gg_trg_Mana_Overload_Research, Trig_Mana_Overload_Research_Actions)
end

function Trig_Frost_Attack_Research_Conditions()
    if (not (GetResearched() == FourCC("R00B"))) then
        return false
    end
    return true
end

function Trig_Frost_Attack_Research_Actions()
    udg_Frost_Attack_Researched[GetConvertedPlayerId(GetOwningPlayer(GetResearchingUnit()))] = true
end

function InitTrig_Frost_Attack_Research()
    gg_trg_Frost_Attack_Research = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Frost_Attack_Research, EVENT_PLAYER_UNIT_UPGRADE_FINISH)
    TriggerAddCondition(gg_trg_Frost_Attack_Research, Condition(Trig_Frost_Attack_Research_Conditions))
    TriggerAddAction(gg_trg_Frost_Attack_Research, Trig_Frost_Attack_Research_Actions)
end

function Trig_Feedback_Conditions()
    if (not (GetResearched() == FourCC("R007"))) then
        return false
    end
    return true
end

function Trig_Feedback_Func001002002001()
    return (GetOwningPlayer(GetFilterUnit()) == GetOwningPlayer(GetResearchingUnit()))
end

function Trig_Feedback_Func001002002002()
    return (IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true)
end

function Trig_Feedback_Func001002002()
    return GetBooleanAnd(Trig_Feedback_Func001002002001(), Trig_Feedback_Func001002002002())
end

function Trig_Feedback_Func002A()
    SetUnitAbilityLevelSwapped(FourCC("A00V"), GetEnumUnit(), (GetPlayerTechCountSimple(FourCC("R007"), GetOwningPlayer(GetResearchingUnit())) + 1))
end

function Trig_Feedback_Actions()
    udg_TEMP_UnitGroup = GetUnitsInRectMatching(GetPlayableMapRect(), Condition(Trig_Feedback_Func001002002))
    ForGroupBJ(udg_TEMP_UnitGroup, Trig_Feedback_Func002A)
        DestroyGroup ( udg_TEMP_UnitGroup )
end

function InitTrig_Feedback()
    gg_trg_Feedback = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Feedback, EVENT_PLAYER_UNIT_RESEARCH_FINISH)
    TriggerAddCondition(gg_trg_Feedback, Condition(Trig_Feedback_Conditions))
    TriggerAddAction(gg_trg_Feedback, Trig_Feedback_Actions)
end

function Trig_Shade_Strength_Conditions()
    if (not (GetResearched() == FourCC("R00D"))) then
        return false
    end
    return true
end

function Trig_Shade_Strength_Func001002002001()
    return (GetOwningPlayer(GetFilterUnit()) == GetOwningPlayer(GetResearchingUnit()))
end

function Trig_Shade_Strength_Func001002002002()
    return (IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true)
end

function Trig_Shade_Strength_Func001002002()
    return GetBooleanAnd(Trig_Shade_Strength_Func001002002001(), Trig_Shade_Strength_Func001002002002())
end

function Trig_Shade_Strength_Func002A()
    SetUnitAbilityLevelSwapped(FourCC("A037"), GetEnumUnit(), (GetPlayerTechCountSimple(FourCC("R00D"), GetOwningPlayer(GetResearchingUnit())) + 1))
end

function Trig_Shade_Strength_Actions()
    udg_TEMP_UnitGroup = GetUnitsInRectMatching(GetPlayableMapRect(), Condition(Trig_Shade_Strength_Func001002002))
    ForGroupBJ(udg_TEMP_UnitGroup, Trig_Shade_Strength_Func002A)
        DestroyGroup ( udg_TEMP_UnitGroup )
end

function InitTrig_Shade_Strength()
    gg_trg_Shade_Strength = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Shade_Strength, EVENT_PLAYER_UNIT_RESEARCH_FINISH)
    TriggerAddCondition(gg_trg_Shade_Strength, Condition(Trig_Shade_Strength_Conditions))
    TriggerAddAction(gg_trg_Shade_Strength, Trig_Shade_Strength_Actions)
end

function Trig_Swift_Moves_Conditions()
    if (not (GetResearched() == FourCC("R002"))) then
        return false
    end
    return true
end

function Trig_Swift_Moves_Func001002002001()
    return (GetOwningPlayer(GetFilterUnit()) == GetOwningPlayer(GetResearchingUnit()))
end

function Trig_Swift_Moves_Func001002002002()
    return (IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true)
end

function Trig_Swift_Moves_Func001002002()
    return GetBooleanAnd(Trig_Swift_Moves_Func001002002001(), Trig_Swift_Moves_Func001002002002())
end

function Trig_Swift_Moves_Func002A()
    SetUnitAbilityLevelSwapped(FourCC("A056"), GetEnumUnit(), (GetPlayerTechCountSimple(FourCC("R002"), GetOwningPlayer(GetResearchingUnit())) + 1))
end

function Trig_Swift_Moves_Actions()
    udg_TEMP_UnitGroup = GetUnitsInRectMatching(GetPlayableMapRect(), Condition(Trig_Swift_Moves_Func001002002))
    ForGroupBJ(udg_TEMP_UnitGroup, Trig_Swift_Moves_Func002A)
        DestroyGroup ( udg_TEMP_UnitGroup )
end

function InitTrig_Swift_Moves()
    gg_trg_Swift_Moves = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Swift_Moves, EVENT_PLAYER_UNIT_RESEARCH_FINISH)
    TriggerAddCondition(gg_trg_Swift_Moves, Condition(Trig_Swift_Moves_Conditions))
    TriggerAddAction(gg_trg_Swift_Moves, Trig_Swift_Moves_Actions)
end

function Trig_Swift_Attacks_Conditions()
    if (not (GetResearched() == FourCC("R00F"))) then
        return false
    end
    return true
end

function Trig_Swift_Attacks_Func001002002001()
    return (GetOwningPlayer(GetFilterUnit()) == GetOwningPlayer(GetResearchingUnit()))
end

function Trig_Swift_Attacks_Func001002002002()
    return (IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true)
end

function Trig_Swift_Attacks_Func001002002()
    return GetBooleanAnd(Trig_Swift_Attacks_Func001002002001(), Trig_Swift_Attacks_Func001002002002())
end

function Trig_Swift_Attacks_Func002A()
    SetUnitAbilityLevelSwapped(FourCC("A030"), GetEnumUnit(), (GetPlayerTechCountSimple(FourCC("R002"), GetOwningPlayer(GetResearchingUnit())) + 1))
end

function Trig_Swift_Attacks_Actions()
    udg_TEMP_UnitGroup = GetUnitsInRectMatching(GetPlayableMapRect(), Condition(Trig_Swift_Attacks_Func001002002))
    ForGroupBJ(udg_TEMP_UnitGroup, Trig_Swift_Attacks_Func002A)
        DestroyGroup ( udg_TEMP_UnitGroup )
end

function InitTrig_Swift_Attacks()
    gg_trg_Swift_Attacks = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Swift_Attacks, EVENT_PLAYER_UNIT_RESEARCH_FINISH)
    TriggerAddCondition(gg_trg_Swift_Attacks, Condition(Trig_Swift_Attacks_Conditions))
    TriggerAddAction(gg_trg_Swift_Attacks, Trig_Swift_Attacks_Actions)
end

function Trig_Attribute_Upgrade_Conditions()
    if (not (GetResearched() == FourCC("R000"))) then
        return false
    end
    return true
end

function Trig_Attribute_Upgrade_Func001002002001()
    return (GetOwningPlayer(GetFilterUnit()) == GetOwningPlayer(GetResearchingUnit()))
end

function Trig_Attribute_Upgrade_Func001002002002()
    return (IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true)
end

function Trig_Attribute_Upgrade_Func001002002()
    return GetBooleanAnd(Trig_Attribute_Upgrade_Func001002002001(), Trig_Attribute_Upgrade_Func001002002002())
end

function Trig_Attribute_Upgrade_Func002A()
    SetUnitAbilityLevelSwapped(FourCC("A031"), GetEnumUnit(), (GetPlayerTechCountSimple(FourCC("R000"), GetOwningPlayer(GetResearchingUnit())) + 1))
    SetUnitAbilityLevelSwapped(FourCC("A036"), GetEnumUnit(), (GetPlayerTechCountSimple(FourCC("R000"), GetOwningPlayer(GetResearchingUnit())) + 1))
    SetUnitAbilityLevelSwapped(FourCC("A006"), GetEnumUnit(), (GetPlayerTechCountSimple(FourCC("R000"), GetOwningPlayer(GetResearchingUnit())) + 1))
    SetUnitAbilityLevelSwapped(FourCC("A04G"), GetEnumUnit(), (GetPlayerTechCountSimple(FourCC("R000"), GetOwningPlayer(GetResearchingUnit())) + 1))
    SetUnitAbilityLevelSwapped(FourCC("A04T"), GetEnumUnit(), (GetPlayerTechCountSimple(FourCC("R000"), GetOwningPlayer(GetResearchingUnit())) + 1))
end

function Trig_Attribute_Upgrade_Actions()
    udg_TEMP_UnitGroup = GetUnitsInRectMatching(GetPlayableMapRect(), Condition(Trig_Attribute_Upgrade_Func001002002))
    ForGroupBJ(udg_TEMP_UnitGroup, Trig_Attribute_Upgrade_Func002A)
        DestroyGroup ( udg_TEMP_UnitGroup )
end

function InitTrig_Attribute_Upgrade()
    gg_trg_Attribute_Upgrade = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Attribute_Upgrade, EVENT_PLAYER_UNIT_RESEARCH_FINISH)
    TriggerAddCondition(gg_trg_Attribute_Upgrade, Condition(Trig_Attribute_Upgrade_Conditions))
    TriggerAddAction(gg_trg_Attribute_Upgrade, Trig_Attribute_Upgrade_Actions)
end

function Trig_Start_Event_Actions()
    udg_Event_Count[1] = 0
    udg_Event_Count[2] = 0
    udg_Event_Counter = 0
    DisplayTextToForce(GetPlayersAll(), "TRIGSTR_2447")
    SetUnitAnimation(gg_unit_h002_0699, "Stand 1")
    SetUnitFlyHeightBJ(gg_unit_h002_0699, 0.00, 3.00)
    EnableTrigger(gg_trg_Event_Count)
end

function InitTrig_Start_Event()
    gg_trg_Start_Event = CreateTrigger()
    TriggerRegisterTimerExpireEventBJ(gg_trg_Start_Event, udg_EventTimer)
    TriggerAddAction(gg_trg_Start_Event, Trig_Start_Event_Actions)
end

function Trig_Event_Count_Func002Func001Func002C()
    if (not (IsUnitType(GetEnumUnit(), UNIT_TYPE_HERO) == true)) then
        return false
    end
    return true
end

function Trig_Event_Count_Func002Func001Func003C()
    if (not (IsUnitType(GetEnumUnit(), UNIT_TYPE_HERO) == true)) then
        return false
    end
    return true
end

function Trig_Event_Count_Func002Func001C()
    if (not (IsUnitAlly(GetEnumUnit(), ForcePickRandomPlayer(udg_PLAYERGRPallied)) == true)) then
        return false
    end
    return true
end

function Trig_Event_Count_Func002A()
    if (Trig_Event_Count_Func002Func001C()) then
        if (Trig_Event_Count_Func002Func001Func003C()) then
            udg_Event_Count[1] = (udg_Event_Count[1] + 15)
        else
            udg_Event_Count[1] = (udg_Event_Count[1] + GetUnitLevel(GetEnumUnit()))
        end
    else
        if (Trig_Event_Count_Func002Func001Func002C()) then
            udg_Event_Count[2] = (udg_Event_Count[2] + 15)
        else
            udg_Event_Count[2] = (udg_Event_Count[2] + GetUnitLevel(GetEnumUnit()))
        end
    end
end

function Trig_Event_Count_Func005C()
    if (not (udg_Event_Counter >= 50)) then
        return false
    end
    return true
end

function Trig_Event_Count_Func006Func006C()
    if (not (udg_TEMP_Int == 1)) then
        return false
    end
    return true
end

function Trig_Event_Count_Func006Func007C()
    if (not (udg_Event_Count[1] > udg_Event_Count[2])) then
        return false
    end
    return true
end

function Trig_Event_Count_Func006C()
    if (not (udg_Event_Counter >= 60)) then
        return false
    end
    return true
end

function Trig_Event_Count_Actions()
    udg_TEMP_UnitGroup = GetUnitsInRectAll(gg_rct_Center_Events)
    ForGroupBJ(udg_TEMP_UnitGroup, Trig_Event_Count_Func002A)
        DestroyGroup ( udg_TEMP_UnitGroup )
    udg_Event_Counter = (udg_Event_Counter + 1)
    if (Trig_Event_Count_Func005C()) then
        PlaySoundBJ(gg_snd_BattleNetTick)
    else
    end
    if (Trig_Event_Count_Func006C()) then
        udg_TEMP_Real = (I2R(udg_Event_Count[1]) / I2R(udg_Event_Count[2]))
        DisableTrigger(GetTriggeringTrigger())
        udg_TEMP_Int = GetRandomInt(1, 1)
        udg_TEMP_Pos2 = GetRectCenter(gg_rct_Center_Events)
        PingMinimapLocForForce(udg_ALL_PLAYERS, udg_TEMP_Pos2, 10.00)
        if (Trig_Event_Count_Func006Func006C()) then
            udg_Event_Unit_Type = FourCC("n00H")
            EnableTrigger(gg_trg_Doom_Warden_End)
            EnableTrigger(gg_trg_DW_Ancient_Chaos)
        else
        end
        if (Trig_Event_Count_Func006Func007C()) then
            CreateNUnitsAtLoc(1, udg_Event_Unit_Type, Player(18), udg_TEMP_Pos2, bj_UNIT_FACING)
            udg_Doom_Warden = GetLastCreatedUnit()
            DisplayTextToForce(udg_ALL_PLAYERS, "TRIGSTR_4573")
        else
            CreateNUnitsAtLoc(1, udg_Event_Unit_Type, Player(21), udg_TEMP_Pos2, bj_UNIT_FACING)
            udg_Doom_Warden = GetLastCreatedUnit()
            DisplayTextToForce(udg_ALL_PLAYERS, "TRIGSTR_4572")
        end
        SetUnitUserData(GetLastCreatedUnit(), 4)
        SetUnitPathing(udg_Doom_Warden, false)
                RemoveLocation ( udg_TEMP_Pos2 )
    else
    end
end

function InitTrig_Event_Count()
    gg_trg_Event_Count = CreateTrigger()
    DisableTrigger(gg_trg_Event_Count)
    TriggerRegisterTimerEventPeriodic(gg_trg_Event_Count, 1.00)
    TriggerAddAction(gg_trg_Event_Count, Trig_Event_Count_Actions)
end

function Trig_DW_Ancient_Chaos_Actions()
    udg_TEMP_Pos2 = GetUnitLoc(udg_Doom_Warden)
    udg_TEMP_IntLoop1 = 1
    while (true) do
        if (udg_TEMP_IntLoop1 > GetRandomInt(1, 4)) then break end
        udg_TEMP_Pos_Spell = GetRandomLocInRect(RectFromCenterSizeBJ(udg_TEMP_Pos2, 1200.00, 1200.00))
        CreateNUnitsAtLoc(1, FourCC("h00O"), GetOwningPlayer(udg_Doom_Warden), udg_TEMP_Pos2, bj_UNIT_FACING)
        UnitApplyTimedLifeBJ(3.00, FourCC("BTLF"), GetLastCreatedUnit())
        IssuePointOrderLocBJ(GetLastCreatedUnit(), "dreadlordinferno", udg_TEMP_Pos_Spell)
                RemoveLocation ( udg_TEMP_Pos_Spell )
        udg_TEMP_IntLoop1 = udg_TEMP_IntLoop1 + 1
    end
        RemoveLocation ( udg_TEMP_Pos2 )
end

function InitTrig_DW_Ancient_Chaos()
    gg_trg_DW_Ancient_Chaos = CreateTrigger()
    DisableTrigger(gg_trg_DW_Ancient_Chaos)
    TriggerRegisterTimerEventPeriodic(gg_trg_DW_Ancient_Chaos, 20.00)
    TriggerAddAction(gg_trg_DW_Ancient_Chaos, Trig_DW_Ancient_Chaos_Actions)
end

function Trig_Doom_Warden_End_Conditions()
    if (not (GetDyingUnit() == udg_Doom_Warden)) then
        return false
    end
    return true
end

function Trig_Doom_Warden_End_Actions()
    DisableTrigger(gg_trg_DW_Ancient_Chaos)
    StartTimerBJ(udg_EventTimer, false, 300.00)
    SetUnitAnimation(gg_unit_h002_0699, "Death 1")
    SetUnitFlyHeightBJ(gg_unit_h002_0699, -60.00, 3.00)
end

function InitTrig_Doom_Warden_End()
    gg_trg_Doom_Warden_End = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Doom_Warden_End, EVENT_PLAYER_UNIT_DEATH)
    TriggerAddCondition(gg_trg_Doom_Warden_End, Condition(Trig_Doom_Warden_End_Conditions))
    TriggerAddAction(gg_trg_Doom_Warden_End, Trig_Doom_Warden_End_Actions)
end

function Trig_Footman_at_Max_Mana_Conditions()
    if (not (GetSpellAbilityId() == FourCC("Afzy"))) then
        return false
    end
    if (not (GetUnitManaPercent(GetTriggerUnit()) >= 100.00)) then
        return false
    end
    return true
end

function Trig_Footman_at_Max_Mana_Actions()
    IssueImmediateOrderBJ(GetTriggerUnit(), "bearform")
    SetUnitLifePercentBJ(GetTriggerUnit(), (GetUnitLifePercent(GetTriggerUnit()) + 5.00))
end

function InitTrig_Footman_at_Max_Mana()
    gg_trg_Footman_at_Max_Mana = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Footman_at_Max_Mana, EVENT_PLAYER_UNIT_SPELL_CAST)
    TriggerAddCondition(gg_trg_Footman_at_Max_Mana, Condition(Trig_Footman_at_Max_Mana_Conditions))
    TriggerAddAction(gg_trg_Footman_at_Max_Mana, Trig_Footman_at_Max_Mana_Actions)
end

function Trig_Unit_Upgrades_Func007C()
    if (GetUnitTypeId(GetKillingUnitBJ()) == FourCC("hfoo")) then
        return true
    end
    if (GetUnitTypeId(GetKillingUnitBJ()) == FourCC("h017")) then
        return true
    end
    if (GetUnitTypeId(GetKillingUnitBJ()) == FourCC("h007")) then
        return true
    end
    if (GetUnitTypeId(GetKillingUnitBJ()) == FourCC("h015")) then
        return true
    end
    if (GetUnitTypeId(GetKillingUnitBJ()) == FourCC("hcth")) then
        return true
    end
    if (GetUnitTypeId(GetKillingUnitBJ()) == FourCC("o002")) then
        return true
    end
    if (GetUnitTypeId(GetKillingUnitBJ()) == FourCC("ohun")) then
        return true
    end
    if (GetUnitTypeId(GetKillingUnitBJ()) == FourCC("nogo")) then
        return true
    end
    if (GetUnitTypeId(GetKillingUnitBJ()) == FourCC("owad")) then
        return true
    end
    return false
end

function Trig_Unit_Upgrades_Conditions()
    if (not Trig_Unit_Upgrades_Func007C()) then
        return false
    end
    return true
end

function Trig_Unit_Upgrades_Func002C()
    if (not (GetUnitTypeId(GetKillingUnitBJ()) == FourCC("o002"))) then
        return false
    end
    return true
end

function Trig_Unit_Upgrades_Func003C()
    if (not (GetUnitTypeId(GetKillingUnitBJ()) == FourCC("ohun"))) then
        return false
    end
    return true
end

function Trig_Unit_Upgrades_Func004C()
    if (not (GetUnitTypeId(GetKillingUnitBJ()) == FourCC("nogo"))) then
        return false
    end
    return true
end

function Trig_Unit_Upgrades_Func005C()
    if (not (GetUnitTypeId(GetKillingUnitBJ()) == FourCC("owad"))) then
        return false
    end
    if (not (GetUnitManaPercent(GetKillingUnitBJ()) == 100.00)) then
        return false
    end
    return true
end

function Trig_Unit_Upgrades_Func006Func003C()
    if (GetUnitTypeId(GetKillingUnitBJ()) == FourCC("hfoo")) then
        return true
    end
    if (GetUnitTypeId(GetKillingUnitBJ()) == FourCC("h017")) then
        return true
    end
    if (GetUnitTypeId(GetKillingUnitBJ()) == FourCC("h007")) then
        return true
    end
    if (GetUnitTypeId(GetKillingUnitBJ()) == FourCC("h015")) then
        return true
    end
    if (GetUnitTypeId(GetKillingUnitBJ()) == FourCC("hcth")) then
        return true
    end
    return false
end

function Trig_Unit_Upgrades_Func006C()
    if (not Trig_Unit_Upgrades_Func006Func003C()) then
        return false
    end
    return true
end

function Trig_Unit_Upgrades_Actions()
    SetUnitManaBJ(GetKillingUnitBJ(), (GetUnitStateSwap(UNIT_STATE_MANA, GetKillingUnitBJ()) + 1))
    if (Trig_Unit_Upgrades_Func002C()) then
        UnitAddAbilityBJ(FourCC("S003"), GetKillingUnitBJ())
    else
    end
    if (Trig_Unit_Upgrades_Func003C()) then
        UnitAddAbilityBJ(FourCC("S001"), GetKillingUnitBJ())
    else
    end
    if (Trig_Unit_Upgrades_Func004C()) then
        UnitAddAbilityBJ(FourCC("S004"), GetKillingUnitBJ())
    else
    end
    if (Trig_Unit_Upgrades_Func005C()) then
        UnitAddAbilityBJ(FourCC("S006"), GetKillingUnitBJ())
    else
    end
    if (Trig_Unit_Upgrades_Func006C()) then
        SetUnitLifePercentBJ(GetKillingUnitBJ(), (GetUnitLifePercent(GetKillingUnitBJ()) + 5.00))
        SetUnitManaBJ(GetKillingUnitBJ(), (GetUnitStateSwap(UNIT_STATE_MANA, GetKillingUnitBJ()) + 9.00))
    else
    end
end

function InitTrig_Unit_Upgrades()
    gg_trg_Unit_Upgrades = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Unit_Upgrades, EVENT_PLAYER_UNIT_DEATH)
    TriggerAddCondition(gg_trg_Unit_Upgrades, Condition(Trig_Unit_Upgrades_Conditions))
    TriggerAddAction(gg_trg_Unit_Upgrades, Trig_Unit_Upgrades_Actions)
end

function Trig_Elder_Ent_Movement_Conditions()
    if (not (GetUnitTypeId(GetEnteringUnit()) == FourCC("nwnr"))) then
        return false
    end
    return true
end

function Trig_Elder_Ent_Movement_Actions()
    SetUnitPathing(GetEnteringUnit(), false)
end

function InitTrig_Elder_Ent_Movement()
    gg_trg_Elder_Ent_Movement = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_Elder_Ent_Movement, GetPlayableMapRect())
    TriggerAddCondition(gg_trg_Elder_Ent_Movement, Condition(Trig_Elder_Ent_Movement_Conditions))
    TriggerAddAction(gg_trg_Elder_Ent_Movement, Trig_Elder_Ent_Movement_Actions)
end

function Trig_Zombie_Infect_Conditions()
    if (not (GetUnitTypeId(GetAttacker()) == FourCC("uabo"))) then
        return false
    end
    return true
end

function Trig_Zombie_Infect_Func002002003001()
    return (IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == false)
end

function Trig_Zombie_Infect_Func002002003002001()
    return (IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) == true)
end

function Trig_Zombie_Infect_Func002002003002002()
    return (IsUnitAliveBJ(GetFilterUnit()) == true)
end

function Trig_Zombie_Infect_Func002002003002()
    return GetBooleanAnd(Trig_Zombie_Infect_Func002002003002001(), Trig_Zombie_Infect_Func002002003002002())
end

function Trig_Zombie_Infect_Func002002003()
    return GetBooleanAnd(Trig_Zombie_Infect_Func002002003001(), Trig_Zombie_Infect_Func002002003002())
end

function Trig_Zombie_Infect_Func003C()
    if (not (CountUnitsInGroup(udg_TEMP_UnitGroup) > 0)) then
        return false
    end
    return true
end

function Trig_Zombie_Infect_Actions()
    udg_TEMP_Pos2 = GetUnitLoc(GetAttacker())
    udg_TEMP_UnitGroup = GetUnitsInRangeOfLocMatching(200.00, udg_TEMP_Pos2, Condition(Trig_Zombie_Infect_Func002002003))
    if (Trig_Zombie_Infect_Func003C()) then
        udg_TEMP_IntLoop1 = 1
        while (true) do
            if (udg_TEMP_IntLoop1 > 3) then break end
            CreateNUnitsAtLoc(1, FourCC("h000"), GetOwningPlayer(GetAttacker()), udg_TEMP_Pos2, bj_UNIT_FACING)
            UnitApplyTimedLifeBJ(2.00, FourCC("BTLF"), GetLastCreatedUnit())
            UnitAddAbilityBJ(FourCC("A04B"), GetLastCreatedUnit())
            IssueTargetOrderBJ(GetLastCreatedUnit(), "parasite", GroupPickRandomUnit(udg_TEMP_UnitGroup))
            udg_TEMP_IntLoop1 = udg_TEMP_IntLoop1 + 1
        end
    else
    end
        DestroyGroup ( udg_TEMP_UnitGroup )
        RemoveLocation ( udg_TEMP_Pos2 )
end

function InitTrig_Zombie_Infect()
    gg_trg_Zombie_Infect = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Zombie_Infect, EVENT_PLAYER_UNIT_ATTACKED)
    TriggerAddCondition(gg_trg_Zombie_Infect, Condition(Trig_Zombie_Infect_Conditions))
    TriggerAddAction(gg_trg_Zombie_Infect, Trig_Zombie_Infect_Actions)
end

function Trig_Upgrade_to_Fel_Warlock_Conditions()
    if (not (GetUnitTypeId(GetTriggerUnit()) == FourCC("nw2w"))) then
        return false
    end
    if (not (GetUnitManaPercent(GetTriggerUnit()) <= 20.00)) then
        return false
    end
    return true
end

function Trig_Upgrade_to_Fel_Warlock_Actions()
    UnitAddAbilityBJ(FourCC("S005"), GetTriggerUnit())
    SetUnitManaPercentBJ(GetTriggerUnit(), 100)
end

function InitTrig_Upgrade_to_Fel_Warlock()
    gg_trg_Upgrade_to_Fel_Warlock = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Upgrade_to_Fel_Warlock, EVENT_PLAYER_UNIT_SPELL_FINISH)
    TriggerAddCondition(gg_trg_Upgrade_to_Fel_Warlock, Condition(Trig_Upgrade_to_Fel_Warlock_Conditions))
    TriggerAddAction(gg_trg_Upgrade_to_Fel_Warlock, Trig_Upgrade_to_Fel_Warlock_Actions)
end

function Trig_Elf_Boat_Dies_Func001C()
    if (GetUnitTypeId(GetDyingUnit()) == FourCC("edes")) then
        return true
    end
    if (GetUnitTypeId(GetDyingUnit()) == FourCC("ebsh")) then
        return true
    end
    return false
end

function Trig_Elf_Boat_Dies_Conditions()
    if (not Trig_Elf_Boat_Dies_Func001C()) then
        return false
    end
    return true
end

function Trig_Elf_Boat_Dies_Func003C()
    if (not (IsTerrainPathableBJ(udg_TEMP_Pos2, PATHING_TYPE_WALKABILITY) == false)) then
        return false
    end
    return true
end

function Trig_Elf_Boat_Dies_Actions()
    udg_TEMP_Pos2 = GetUnitLoc(GetDyingUnit())
    if (Trig_Elf_Boat_Dies_Func003C()) then
        CreateNUnitsAtLoc(1, FourCC("hhes"), GetOwningPlayer(GetDyingUnit()), udg_TEMP_Pos2, bj_UNIT_FACING)
        CreateNUnitsAtLoc(1, FourCC("earc"), GetOwningPlayer(GetDyingUnit()), udg_TEMP_Pos2, bj_UNIT_FACING)
    else
    end
        RemoveLocation ( udg_TEMP_Pos2 )
end

function InitTrig_Elf_Boat_Dies()
    gg_trg_Elf_Boat_Dies = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Elf_Boat_Dies, EVENT_PLAYER_UNIT_DEATH)
    TriggerAddCondition(gg_trg_Elf_Boat_Dies, Condition(Trig_Elf_Boat_Dies_Conditions))
    TriggerAddAction(gg_trg_Elf_Boat_Dies, Trig_Elf_Boat_Dies_Actions)
end

function Trig_Wildhammer_Building_Dies_Func001C()
    if (GetUnitTypeId(GetDyingUnit()) == FourCC("h01W")) then
        return true
    end
    if (GetUnitTypeId(GetDyingUnit()) == FourCC("h01U")) then
        return true
    end
    if (GetUnitTypeId(GetDyingUnit()) == FourCC("h01X")) then
        return true
    end
    if (GetUnitTypeId(GetDyingUnit()) == FourCC("h01F")) then
        return true
    end
    return false
end

function Trig_Wildhammer_Building_Dies_Conditions()
    if (not Trig_Wildhammer_Building_Dies_Func001C()) then
        return false
    end
    return true
end

function Trig_Wildhammer_Building_Dies_Func003C()
    if (not (GetRandomInt(1, 3) > 1)) then
        return false
    end
    return true
end

function Trig_Wildhammer_Building_Dies_Func004C()
    if (not (GetRandomInt(1, 3) > 1)) then
        return false
    end
    return true
end

function Trig_Wildhammer_Building_Dies_Func005C()
    if (not (GetRandomInt(1, 3) == 1)) then
        return false
    end
    return true
end

function Trig_Wildhammer_Building_Dies_Actions()
    udg_TEMP_Pos2 = GetUnitLoc(GetDyingUnit())
    if (Trig_Wildhammer_Building_Dies_Func003C()) then
        CreateNUnitsAtLoc(GetRandomInt(1, 2), FourCC("n006"), GetOwningPlayer(GetDyingUnit()), udg_TEMP_Pos2, bj_UNIT_FACING)
    else
    end
    if (Trig_Wildhammer_Building_Dies_Func004C()) then
        CreateNUnitsAtLoc(GetRandomInt(1, 2), FourCC("e00E"), GetOwningPlayer(GetDyingUnit()), udg_TEMP_Pos2, bj_UNIT_FACING)
    else
    end
    if (Trig_Wildhammer_Building_Dies_Func005C()) then
        CreateNUnitsAtLoc(1, FourCC("e00F"), GetOwningPlayer(GetDyingUnit()), udg_TEMP_Pos2, bj_UNIT_FACING)
    else
    end
        RemoveLocation ( udg_TEMP_Pos2 )
end

function InitTrig_Wildhammer_Building_Dies()
    gg_trg_Wildhammer_Building_Dies = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Wildhammer_Building_Dies, EVENT_PLAYER_UNIT_DEATH)
    TriggerAddCondition(gg_trg_Wildhammer_Building_Dies, Condition(Trig_Wildhammer_Building_Dies_Conditions))
    TriggerAddAction(gg_trg_Wildhammer_Building_Dies, Trig_Wildhammer_Building_Dies_Actions)
end

function Trig_Human_Boat_Dies_Func001C()
    if (GetUnitTypeId(GetDyingUnit()) == FourCC("hdes")) then
        return true
    end
    if (GetUnitTypeId(GetDyingUnit()) == FourCC("hbsh")) then
        return true
    end
    return false
end

function Trig_Human_Boat_Dies_Conditions()
    if (not Trig_Human_Boat_Dies_Func001C()) then
        return false
    end
    return true
end

function Trig_Human_Boat_Dies_Func003C()
    if (not (IsTerrainPathableBJ(udg_TEMP_Pos2, PATHING_TYPE_WALKABILITY) == false)) then
        return false
    end
    return true
end

function Trig_Human_Boat_Dies_Actions()
    udg_TEMP_Pos2 = GetUnitLoc(GetDyingUnit())
    if (Trig_Human_Boat_Dies_Func003C()) then
        CreateNUnitsAtLoc(2, FourCC("n00X"), GetOwningPlayer(GetDyingUnit()), udg_TEMP_Pos2, bj_UNIT_FACING)
    else
    end
        RemoveLocation ( udg_TEMP_Pos2 )
end

function InitTrig_Human_Boat_Dies()
    gg_trg_Human_Boat_Dies = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Human_Boat_Dies, EVENT_PLAYER_UNIT_DEATH)
    TriggerAddCondition(gg_trg_Human_Boat_Dies, Condition(Trig_Human_Boat_Dies_Conditions))
    TriggerAddAction(gg_trg_Human_Boat_Dies, Trig_Human_Boat_Dies_Actions)
end

function Trig_Chain_Lightning_Conditions()
    if (not (GetUnitTypeId(GetAttacker()) == FourCC("n007"))) then
        return false
    end
    if (not (BlzGetUnitAbilityCooldownRemaining(GetAttacker(), FourCC("A00I")) == 0.00)) then
        return false
    end
    return true
end

function Trig_Chain_Lightning_Actions()
    IssueTargetOrderBJ(GetAttacker(), "chainlightning", GetAttackedUnitBJ())
end

function InitTrig_Chain_Lightning()
    gg_trg_Chain_Lightning = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Chain_Lightning, EVENT_PLAYER_UNIT_ATTACKED)
    TriggerAddCondition(gg_trg_Chain_Lightning, Condition(Trig_Chain_Lightning_Conditions))
    TriggerAddAction(gg_trg_Chain_Lightning, Trig_Chain_Lightning_Actions)
end

function Trig_Energy_Tower_Conditions()
    if (not (GetUnitTypeId(GetAttacker()) == FourCC("n007"))) then
        return false
    end
    if (not (BlzGetUnitAbilityCooldownRemaining(GetAttacker(), FourCC("A03D")) == 0.00)) then
        return false
    end
    if (not (IsUnitType(GetAttackedUnitBJ(), UNIT_TYPE_GROUND) == true)) then
        return false
    end
    return true
end

function Trig_Energy_Tower_Actions()
    udg_TEMP_Pos2 = GetUnitLoc(GetAttackedUnitBJ())
    IssuePointOrderLocBJ(GetAttacker(), "clusterrockets", udg_TEMP_Pos2)
        RemoveLocation ( udg_TEMP_Pos2 )
end

function InitTrig_Energy_Tower()
    gg_trg_Energy_Tower = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Energy_Tower, EVENT_PLAYER_UNIT_ATTACKED)
    TriggerAddCondition(gg_trg_Energy_Tower, Condition(Trig_Energy_Tower_Conditions))
    TriggerAddAction(gg_trg_Energy_Tower, Trig_Energy_Tower_Actions)
end

function Trig_Watch_Tower_Mana_Shield_Conditions()
    if (not (GetUnitStateSwap(UNIT_STATE_MANA, GetAttacker()) >= 250.00)) then
        return false
    end
    if (not (UnitHasBuffBJ(GetAttacker(), FourCC("BNms")) == false)) then
        return false
    end
    if (not (GetUnitTypeId(GetAttacker()) == FourCC("n007"))) then
        return false
    end
    return true
end

function Trig_Watch_Tower_Mana_Shield_Actions()
    IssueImmediateOrderBJ(GetAttacker(), "manashieldon")
end

function InitTrig_Watch_Tower_Mana_Shield()
    gg_trg_Watch_Tower_Mana_Shield = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Watch_Tower_Mana_Shield, EVENT_PLAYER_UNIT_ATTACKED)
    TriggerAddCondition(gg_trg_Watch_Tower_Mana_Shield, Condition(Trig_Watch_Tower_Mana_Shield_Conditions))
    TriggerAddAction(gg_trg_Watch_Tower_Mana_Shield, Trig_Watch_Tower_Mana_Shield_Actions)
end

function Trig_Shipyard_Left_End_Func009C()
    if (GetUnitTypeId(GetEnteringUnit()) == FourCC("edes")) then
        return true
    end
    if (GetUnitTypeId(GetEnteringUnit()) == FourCC("ebsh")) then
        return true
    end
    return false
end

function Trig_Shipyard_Left_End_Conditions()
    if (not Trig_Shipyard_Left_End_Func009C()) then
        return false
    end
    return true
end

function Trig_Shipyard_Left_End_Actions()
    udg_TEMP_Player = GetOwningPlayer(GetEnteringUnit())
    udg_TEMP_Pos2 = GetUnitLoc(GetEnteringUnit())
    CreateNUnitsAtLoc(3, FourCC("hhes"), udg_TEMP_Player, udg_TEMP_Pos2, bj_UNIT_FACING)
    CreateNUnitsAtLoc(1, FourCC("h010"), udg_TEMP_Player, udg_TEMP_Pos2, bj_UNIT_FACING)
    CreateNUnitsAtLoc(2, FourCC("earc"), udg_TEMP_Player, udg_TEMP_Pos2, bj_UNIT_FACING)
    CreateNUnitsAtLoc(1, FourCC("e000"), udg_TEMP_Player, udg_TEMP_Pos2, bj_UNIT_FACING)
    RemoveUnit(GetEnteringUnit())
        RemoveLocation ( udg_TEMP_Pos2 )
end

function InitTrig_Shipyard_Left_End()
    gg_trg_Shipyard_Left_End = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_Shipyard_Left_End, gg_rct_Human_Shipyard_Right)
    TriggerRegisterEnterRectSimple(gg_trg_Shipyard_Left_End, gg_rct_Human_Shipyard_Left)
    TriggerAddCondition(gg_trg_Shipyard_Left_End, Condition(Trig_Shipyard_Left_End_Conditions))
    TriggerAddAction(gg_trg_Shipyard_Left_End, Trig_Shipyard_Left_End_Actions)
end

function Trig_Brawler_No_Mana_Func001Func001C()
    if (not (GetUnitTypeId(udg_UNIT_pickedHero[udg_TEMP_IntLoop1]) == FourCC("E001"))) then
        return false
    end
    if (not (GetUnitStateSwap(UNIT_STATE_MANA, udg_UNIT_pickedHero[udg_TEMP_IntLoop1]) >= udg_BrawlerMana[udg_TEMP_IntLoop1])) then
        return false
    end
    return true
end

function Trig_Brawler_No_Mana_Actions()
    udg_TEMP_IntLoop1 = 1
    while (true) do
        if (udg_TEMP_IntLoop1 > 12) then break end
        if (Trig_Brawler_No_Mana_Func001Func001C()) then
            SetUnitManaBJ(udg_UNIT_pickedHero[udg_TEMP_IntLoop1], udg_BrawlerMana[udg_TEMP_IntLoop1])
        else
            udg_BrawlerMana[udg_TEMP_IntLoop1] = GetUnitStateSwap(UNIT_STATE_MANA, udg_UNIT_pickedHero[udg_TEMP_IntLoop1])
        end
        udg_TEMP_IntLoop1 = udg_TEMP_IntLoop1 + 1
    end
end

function InitTrig_Brawler_No_Mana()
    gg_trg_Brawler_No_Mana = CreateTrigger()
    DisableTrigger(gg_trg_Brawler_No_Mana)
    TriggerRegisterTimerEventPeriodic(gg_trg_Brawler_No_Mana, 1.00)
    TriggerAddAction(gg_trg_Brawler_No_Mana, Trig_Brawler_No_Mana_Actions)
end

function Trig_Brawler_Rage_GUI_Conditions()
    if (not (GetUnitTypeId(GetAttackedUnitBJ()) == FourCC("E001"))) then
        return false
    end
    return true
end

function Trig_Brawler_Rage_GUI_Actions()
    SetUnitManaBJ(GetTriggerUnit(), 0)
    udg_BrawlerMana[GetConvertedPlayerId(GetOwningPlayer(GetAttackedUnitBJ()))] = GetUnitStateSwap(UNIT_STATE_MANA, GetAttackedUnitBJ())
end

function InitTrig_Brawler_Rage_GUI()
    gg_trg_Brawler_Rage_GUI = CreateTrigger()
    DisableTrigger(gg_trg_Brawler_Rage_GUI)
    TriggerRegisterAnyUnitEventBJ(gg_trg_Brawler_Rage_GUI, EVENT_PLAYER_UNIT_ATTACKED)
    TriggerAddCondition(gg_trg_Brawler_Rage_GUI, Condition(Trig_Brawler_Rage_GUI_Conditions))
    TriggerAddAction(gg_trg_Brawler_Rage_GUI, Trig_Brawler_Rage_GUI_Actions)
end

function Trig_Drain_Start_Conditions()
    if (not (GetSpellAbilityId() == FourCC("A01Y"))) then
        return false
    end
    return true
end

function Trig_Drain_Start_Func004C()
    if (not (udg_DL_Index == 1)) then
        return false
    end
    return true
end

function Trig_Drain_Start_Actions()
    udg_DL_Index = (udg_DL_Index + 1)
    udg_DL_Caster[udg_DL_Index] = GetSpellAbilityUnit()
    udg_DL_Counter[udg_DL_Loop] = 0.00
    if (Trig_Drain_Start_Func004C()) then
        EnableTrigger(gg_trg_Drain_Loop)
    else
    end
end

function InitTrig_Drain_Start()
    gg_trg_Drain_Start = CreateTrigger()
    DisableTrigger(gg_trg_Drain_Start)
    TriggerRegisterAnyUnitEventBJ(gg_trg_Drain_Start, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    TriggerAddCondition(gg_trg_Drain_Start, Condition(Trig_Drain_Start_Conditions))
    TriggerAddAction(gg_trg_Drain_Start, Trig_Drain_Start_Actions)
end

function Trig_Drain_Loop_Func001Func003002003001()
    return (IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == false)
end

function Trig_Drain_Loop_Func001Func003002003002001()
    return (IsUnitAliveBJ(GetFilterUnit()) == true)
end

function Trig_Drain_Loop_Func001Func003002003002002()
    return (IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(udg_DL_Caster[udg_DL_Loop])) == true)
end

function Trig_Drain_Loop_Func001Func003002003002()
    return GetBooleanAnd(Trig_Drain_Loop_Func001Func003002003002001(), Trig_Drain_Loop_Func001Func003002003002002())
end

function Trig_Drain_Loop_Func001Func003002003()
    return GetBooleanAnd(Trig_Drain_Loop_Func001Func003002003001(), Trig_Drain_Loop_Func001Func003002003002())
end

function Trig_Drain_Loop_Func001Func006A()
    UnitDamageTargetBJ(udg_DL_Caster[udg_DL_Loop], GetEnumUnit(), (5.00 * I2R(udg_TEMP_Int)), ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL)
    SetUnitLifeBJ(udg_DL_Caster[udg_DL_Loop], (GetUnitStateSwap(UNIT_STATE_LIFE, udg_DL_Caster[udg_DL_Loop]) + (5.00 * I2R(udg_TEMP_Int))))
    AddSpecialEffectTargetUnitBJ("chest", GetEnumUnit(), "Abilities\\Spells\\Other\\Drain\\DrainTarget.mdl")
    DestroyEffectBJ(GetLastCreatedEffectBJ())
end

function Trig_Drain_Loop_Func001Func010Func005C()
    if (not (udg_DL_Index == 0)) then
        return false
    end
    return true
end

function Trig_Drain_Loop_Func001Func010C()
    if (not (udg_DL_Counter[udg_DL_Loop] >= 5.00)) then
        return false
    end
    return true
end

function Trig_Drain_Loop_Actions()
    udg_DL_Loop = 1
    while (true) do
        if (udg_DL_Loop > udg_DL_Index) then break end
        udg_TEMP_Pos_Hero = GetUnitLoc(udg_DL_Caster[udg_DL_Loop])
        udg_TEMP_Int = GetUnitAbilityLevelSwapped(FourCC("A01Y"), udg_DL_Caster[udg_DL_Loop])
        udg_DrainLifeTargets = GetUnitsInRangeOfLocMatching((300.00 + (15.00 * I2R(udg_TEMP_Int))), udg_TEMP_Pos_Hero, Condition(Trig_Drain_Loop_Func001Func003002003))
        AddSpecialEffectTargetUnitBJ("chest", udg_DL_Caster[udg_DL_Loop], "Abilities\\Spells\\Other\\Drain\\DrainCaster.mdl")
        DestroyEffectBJ(GetLastCreatedEffectBJ())
        ForGroupBJ(udg_DrainLifeTargets, Trig_Drain_Loop_Func001Func006A)
                RemoveLocation ( udg_TEMP_Pos_Hero )
                DestroyGroup ( udg_DrainLifeTargets )
        udg_DL_Counter[udg_DL_Loop] = (udg_DL_Counter[udg_DL_Loop] + 0.50)
        if (Trig_Drain_Loop_Func001Func010C()) then
            udg_DL_Caster[udg_DL_Loop] = udg_DL_Caster[udg_DL_Index]
            udg_DL_Counter[udg_DL_Loop] = udg_DL_Counter[udg_DL_Index]
            udg_DL_Index = (udg_DL_Index - 1)
            udg_DL_Loop = (udg_DL_Loop - 1)
            if (Trig_Drain_Loop_Func001Func010Func005C()) then
                DisableTrigger(GetTriggeringTrigger())
            else
            end
        else
        end
        udg_DL_Loop = udg_DL_Loop + 1
    end
end

function InitTrig_Drain_Loop()
    gg_trg_Drain_Loop = CreateTrigger()
    DisableTrigger(gg_trg_Drain_Loop)
    TriggerRegisterTimerEventPeriodic(gg_trg_Drain_Loop, 0.50)
    TriggerAddAction(gg_trg_Drain_Loop, Trig_Drain_Loop_Actions)
end

function Trig_Unleash_Rage_Start_Conditions()
    if (not (GetSpellAbilityId() == FourCC("A029"))) then
        return false
    end
    return true
end

function Trig_Unleash_Rage_Start_Func004C()
    if (not (udg_UR_Index == 1)) then
        return false
    end
    return true
end

function Trig_Unleash_Rage_Start_Actions()
    udg_UR_Index = (udg_UR_Index + 1)
    udg_UR_Caster[udg_UR_Index] = GetSpellAbilityUnit()
    udg_UR_Counter[udg_UR_Index] = 0.00
    if (Trig_Unleash_Rage_Start_Func004C()) then
        EnableTrigger(gg_trg_Unleash_Rage)
    else
    end
end

function InitTrig_Unleash_Rage_Start()
    gg_trg_Unleash_Rage_Start = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Unleash_Rage_Start, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    TriggerAddCondition(gg_trg_Unleash_Rage_Start, Condition(Trig_Unleash_Rage_Start_Conditions))
    TriggerAddAction(gg_trg_Unleash_Rage_Start, Trig_Unleash_Rage_Start_Actions)
end

function Trig_Unleash_Rage_Func001Func008C()
    if (not (udg_UR_Counter[udg_UR_Loop] ~= 0.00)) then
        return false
    end
    return true
end

function Trig_Unleash_Rage_Func001Func012Func005C()
    if (not (udg_UR_Index == 0)) then
        return false
    end
    return true
end

function Trig_Unleash_Rage_Func001Func012C()
    if (not (udg_UR_Counter[udg_UR_Loop] > 3.00)) then
        return false
    end
    return true
end

function Trig_Unleash_Rage_Actions()
    udg_UR_Loop = 1
    while (true) do
        if (udg_UR_Loop > udg_UR_Index) then break end
        udg_TEMP_Pos_Hero = GetUnitLoc(udg_UR_Caster[udg_UR_Loop])
        udg_TEMP_Pos2 = PolarProjectionBJ(udg_TEMP_Pos_Hero, 150.00, (360.00 - (udg_UR_Counter[udg_UR_Loop] * 120.00)))
        CreateNUnitsAtLoc(1, FourCC("h00N"), GetOwningPlayer(udg_UR_Caster[udg_UR_Loop]), udg_TEMP_Pos_Hero, bj_UNIT_FACING)
        SetUnitAbilityLevelSwapped(FourCC("A01V"), GetLastCreatedUnit(), GetUnitAbilityLevelSwapped(FourCC("A029"), udg_UR_Caster[udg_UR_Loop]))
        UnitApplyTimedLifeBJ(1.50, FourCC("BTLF"), GetLastCreatedUnit())
        IssuePointOrderLocBJ(GetLastCreatedUnit(), "shockwave", udg_TEMP_Pos2)
                RemoveLocation ( udg_TEMP_Pos2 )
        if (Trig_Unleash_Rage_Func001Func008C()) then
            udg_TEMP_Pos2 = PolarProjectionBJ(udg_TEMP_Pos_Hero, 150.00, (udg_UR_Counter[udg_UR_Loop] * 120.00))
            CreateNUnitsAtLoc(1, FourCC("h00N"), GetOwningPlayer(udg_UR_Caster[udg_UR_Loop]), udg_TEMP_Pos_Hero, bj_UNIT_FACING)
            SetUnitAbilityLevelSwapped(FourCC("A01V"), GetLastCreatedUnit(), GetUnitAbilityLevelSwapped(FourCC("A029"), udg_UR_Caster[udg_UR_Loop]))
            UnitApplyTimedLifeBJ(1.50, FourCC("BTLF"), GetLastCreatedUnit())
            IssuePointOrderLocBJ(GetLastCreatedUnit(), "shockwave", udg_TEMP_Pos2)
        else
        end
                RemoveLocation ( udg_TEMP_Pos2 )
                RemoveLocation ( udg_TEMP_Pos_Hero )
        udg_UR_Counter[udg_UR_Loop] = (udg_UR_Counter[udg_UR_Loop] + 0.25)
        if (Trig_Unleash_Rage_Func001Func012C()) then
            udg_UR_Caster[udg_UR_Loop] = udg_UR_Caster[udg_UR_Index]
            udg_UR_Counter[udg_UR_Loop] = udg_UR_Counter[udg_UR_Index]
            udg_UR_Index = (udg_UR_Index - 1)
            udg_UR_Loop = (udg_UR_Loop - 1)
            if (Trig_Unleash_Rage_Func001Func012Func005C()) then
                DisableTrigger(GetTriggeringTrigger())
            else
            end
        else
        end
        udg_UR_Loop = udg_UR_Loop + 1
    end
end

function InitTrig_Unleash_Rage()
    gg_trg_Unleash_Rage = CreateTrigger()
    DisableTrigger(gg_trg_Unleash_Rage)
    TriggerRegisterTimerEventPeriodic(gg_trg_Unleash_Rage, 0.25)
    TriggerAddAction(gg_trg_Unleash_Rage, Trig_Unleash_Rage_Actions)
end

function Trig_Falling_Strike_CAST_Conditions()
    if (not (GetSpellAbilityId() == FourCC("A059"))) then
        return false
    end
    return true
end

function Trig_Falling_Strike_CAST_Func015C()
    if (not (IsTerrainPathableBJ(udg_JDA_TargetPoint, PATHING_TYPE_WALKABILITY) == true)) then
        return false
    end
    return true
end

function Trig_Falling_Strike_CAST_Actions()
    udg_JDA_JumpHigh_Distance = 0.50
    udg_JDA_DestroyTrees_Dash = false
    udg_JDA_TargetPoint = GetSpellTargetLoc()
    if (Trig_Falling_Strike_CAST_Func015C()) then
    else
        udg_JDA_Unit = GetTriggerUnit()
        udg_JDA_Speed = 28.00
        udg_JDA_SpecialEffect = "Abilities\\Weapons\\FaerieDragonMissile\\FaerieDragonMissile.mdl"
        udg_JDA_Animation = "attack, slam"
        udg_JDA_AnimationSpeed = 0.40
        ConditionalTriggerExecute(gg_trg_Jump_System_1)
    end
end

function InitTrig_Falling_Strike_CAST()
    gg_trg_Falling_Strike_CAST = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Falling_Strike_CAST, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    TriggerAddCondition(gg_trg_Falling_Strike_CAST, Condition(Trig_Falling_Strike_CAST_Conditions))
    TriggerAddAction(gg_trg_Falling_Strike_CAST, Trig_Falling_Strike_CAST_Actions)
end

function Trig_Jump_System_1_Func001C()
    if (not (udg_JD_Integers[1] == 0)) then
        return false
    end
    return true
end

function Trig_Jump_System_1_Actions()
    if (Trig_Jump_System_1_Func001C()) then
        EnableTrigger(gg_trg_Jump_System_2)
    else
    end
    udg_JD_Integers[1] = (udg_JD_Integers[1] + 1)
    udg_JD_Integers[2] = (udg_JD_Integers[2] + 1)
    udg_JD_TempPoint[1] = GetUnitLoc(udg_JDA_Unit)
    udg_JD_Distances[udg_JD_Integers[2]] = DistanceBetweenPoints(udg_JD_TempPoint[1], udg_JDA_TargetPoint)
    udg_JD_ReachedDistance[udg_JD_Integers[2]] = 0.00
    udg_JD_SpeedUnits[udg_JD_Integers[2]] = udg_JDA_Speed
    udg_JD_Unit[udg_JD_Integers[2]] = udg_JDA_Unit
    udg_JD_Angle[udg_JD_Integers[2]] = AngleBetweenPoints(udg_JD_TempPoint[1], udg_JDA_TargetPoint)
    udg_JD_Effect[udg_JD_Integers[2]] = udg_JDA_SpecialEffect
    udg_JD_Animations[udg_JD_Integers[2]] = udg_JDA_Animation
    udg_JD_TreesDestroy[udg_JD_Integers[2]] = udg_JDA_DestroyTrees_Dash
    udg_JD_HighSettings[udg_JD_Integers[2]] = (udg_JDA_JumpHigh_Distance * udg_JD_Distances[udg_JD_Integers[2]])
    SetUnitPathing(udg_JDA_Unit, false)
    SetUnitTimeScalePercent(udg_JDA_Unit, (udg_JDA_AnimationSpeed * 100.00))
    SetUnitAnimation(udg_JDA_Unit, udg_JDA_Animation)
    GroupAddUnitSimple(udg_JDA_Unit, udg_JD_Group)
    UnitAddAbilityBJ(FourCC("Arav"), udg_JDA_Unit)
    UnitRemoveAbilityBJ(FourCC("Arav"), udg_JDA_Unit)
        RemoveLocation (udg_JD_TempPoint[1])
        RemoveLocation (udg_JDA_TargetPoint)
end

function InitTrig_Jump_System_1()
    gg_trg_Jump_System_1 = CreateTrigger()
    DisableTrigger(gg_trg_Jump_System_1)
    TriggerAddAction(gg_trg_Jump_System_1, Trig_Jump_System_1_Actions)
end

function Trig_Jump_System_2_Func001Func001Func001Func018C()
    if (not (udg_JD_Integers[1] == 0)) then
        return false
    end
    return true
end

function Trig_Jump_System_2_Func001Func001Func001Func021Func001003()
    KillDestructable(GetEnumDestructable())
end

function Trig_Jump_System_2_Func001Func001Func001Func021C()
    if (not (udg_JD_TreesDestroy[udg_JD_Integers[3]] == true)) then
        return false
    end
    return true
end

function Trig_Jump_System_2_Func001Func001Func001Func024C()
    if (not (GetRandomInt(1, 5) == 1)) then
        return false
    end
    return true
end

function Trig_Jump_System_2_Func001Func001Func001C()
    if (not (udg_JD_ReachedDistance[udg_JD_Integers[3]] < udg_JD_Distances[udg_JD_Integers[3]])) then
        return false
    end
    return true
end

function Trig_Jump_System_2_Func001Func001C()
    if (not (IsUnitInGroup(udg_JD_Unit[udg_JD_Integers[3]], udg_JD_Group) == true)) then
        return false
    end
    return true
end

function Trig_Jump_System_2_Actions()
    udg_JD_Integers[3] = 1
    while (true) do
        if (udg_JD_Integers[3] > udg_JD_Integers[2]) then break end
        if (Trig_Jump_System_2_Func001Func001C()) then
            if (Trig_Jump_System_2_Func001Func001Func001C()) then
                SetUnitAnimation(udg_JD_Unit[udg_JD_Integers[3]], "attack slam 1")
                udg_JD_TempPoint[1] = GetUnitLoc(udg_JD_Unit[udg_JD_Integers[3]])
                udg_JD_TempPoint[2] = PolarProjectionBJ(udg_JD_TempPoint[1], udg_JD_SpeedUnits[udg_JD_Integers[3]], udg_JD_Angle[udg_JD_Integers[3]])
                if (Trig_Jump_System_2_Func001Func001Func001Func021C()) then
                    EnumDestructablesInCircleBJ(150.00, udg_JD_TempPoint[2], Trig_Jump_System_2_Func001Func001Func001Func021Func001003)
                else
                end
                SetUnitPositionLoc(udg_JD_Unit[udg_JD_Integers[3]], udg_JD_TempPoint[2])
                udg_JD_ReachedDistance[udg_JD_Integers[3]] = (udg_JD_ReachedDistance[udg_JD_Integers[3]] + udg_JD_SpeedUnits[udg_JD_Integers[3]])
                if (Trig_Jump_System_2_Func001Func001Func001Func024C()) then
                    AddSpecialEffectTargetUnitBJ("chest", udg_JD_Unit[udg_JD_Integers[3]], udg_JD_Effect[udg_JD_Integers[3]])
                    DestroyEffectBJ(GetLastCreatedEffectBJ())
                else
                end
                udg_JD_RealTimer[udg_JD_Integers[3]] = (udg_JD_RealTimer[udg_JD_Integers[3]] + (180.00 / (udg_JD_Distances[udg_JD_Integers[3]] / udg_JD_SpeedUnits[udg_JD_Integers[3]])))
                udg_JD_JumpHigh[udg_JD_Integers[3]] = (SinBJ(udg_JD_RealTimer[udg_JD_Integers[3]]) * udg_JD_HighSettings[udg_JD_Integers[3]])
                SetUnitFlyHeightBJ(udg_JD_Unit[udg_JD_Integers[3]], udg_JD_JumpHigh[udg_JD_Integers[3]], 1000000000.00)
                                RemoveLocation (udg_JD_TempPoint[1])
                                RemoveLocation (udg_JD_TempPoint[2])
            else
                QueueUnitAnimationBJ(udg_JD_Unit[udg_JD_Integers[3]], "stand")
                udg_TEMP_Pos2 = GetUnitLoc(udg_JD_Unit[udg_JD_Integers[3]])
                AddSpecialEffectLocBJ(udg_TEMP_Pos2, "Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
                DestroyEffectBJ(GetLastCreatedEffectBJ())
                CreateNUnitsAtLoc(1, FourCC("h000"), GetOwningPlayer(udg_JD_Unit[udg_JD_Integers[3]]), udg_TEMP_Pos2, bj_UNIT_FACING)
                UnitApplyTimedLifeBJ(2.00, FourCC("BTLF"), GetLastCreatedUnit())
                                RemoveLocation (udg_TEMP_Pos2)
                UnitAddAbilityBJ(FourCC("A00F"), GetLastCreatedUnit())
                SetUnitAbilityLevelSwapped(FourCC("A00F"), GetLastCreatedUnit(), GetUnitAbilityLevelSwapped(FourCC("A027"), udg_JD_Unit[udg_JD_Integers[3]]))
                IssueImmediateOrderBJ(GetLastCreatedUnit(), "creepthunderclap")
                SetUnitPathing(udg_JD_Unit[udg_JD_Integers[3]], true)
                GroupRemoveUnitSimple(udg_JD_Unit[udg_JD_Integers[3]], udg_JD_Group)
                SetUnitTimeScalePercent(udg_JD_Unit[udg_JD_Integers[3]], 100.00)
                ResetUnitAnimation(udg_JD_Unit[udg_JD_Integers[3]])
                udg_JD_RealTimer[udg_JD_Integers[3]] = 0.00
                udg_JD_Integers[1] = (udg_JD_Integers[1] - 1)
                if (Trig_Jump_System_2_Func001Func001Func001Func018C()) then
                    udg_JD_Integers[2] = 0
                    DisableTrigger(GetTriggeringTrigger())
                else
                end
            end
        else
        end
        udg_JD_Integers[3] = udg_JD_Integers[3] + 1
    end
end

function InitTrig_Jump_System_2()
    gg_trg_Jump_System_2 = CreateTrigger()
    DisableTrigger(gg_trg_Jump_System_2)
    TriggerRegisterTimerEventPeriodic(gg_trg_Jump_System_2, 0.02)
    TriggerAddAction(gg_trg_Jump_System_2, Trig_Jump_System_2_Actions)
end

function Trig_FA_Start_Func001C()
    if (GetSpellAbilityId() == FourCC("A03T")) then
        return true
    end
    return false
end

function Trig_FA_Start_Conditions()
    if (not Trig_FA_Start_Func001C()) then
        return false
    end
    return true
end

function Trig_FA_Start_Func018C()
    if (not (GetUnitAbilityLevelSwapped(FourCC("A037"), udg_FA_Caster[udg_FA_Index]) == 1)) then
        return false
    end
    return true
end

function Trig_FA_Start_Func019C()
    if (not (GetUnitAbilityLevelSwapped(FourCC("A037"), udg_FA_Caster[udg_FA_Index]) == 2)) then
        return false
    end
    return true
end

function Trig_FA_Start_Func020C()
    if (not (GetUnitAbilityLevelSwapped(FourCC("A037"), udg_FA_Caster[udg_FA_Index]) == 3)) then
        return false
    end
    return true
end

function Trig_FA_Start_Func021C()
    if (not (GetUnitAbilityLevelSwapped(FourCC("A037"), udg_FA_Caster[udg_FA_Index]) == 4)) then
        return false
    end
    return true
end

function Trig_FA_Start_Func023C()
    if (not (udg_FA_Index == 1)) then
        return false
    end
    return true
end

function Trig_FA_Start_Actions()
    udg_FA_Index = (udg_FA_Index + 1)
    udg_FA_Caster[udg_FA_Index] = GetSpellAbilityUnit()
    udg_FA_Counter[udg_FA_Index] = 0.00
    udg_FA_StartPoint[udg_FA_Index] = GetUnitLoc(udg_FA_Caster[udg_FA_Index])
    udg_FA_Facing[udg_FA_Index] = (0.00 + GetUnitFacing(udg_FA_Caster[udg_FA_Index]))
    udg_FA_Level = GetUnitAbilityLevelSwapped(FourCC("A03T"), udg_FA_Caster[udg_FA_Index])
    udg_FA_Distance[udg_FA_Index] = (325.00 + (125.00 * I2R(udg_FA_Level)))
    udg_FA_Duration[udg_FA_Index] = 0.40
    SetUnitPathing(udg_FA_Caster[udg_FA_Index], false)
    UnitAddAbilityBJ(FourCC("Agho"), udg_FA_Caster[udg_FA_Index])
    AddSpecialEffectLocBJ(udg_FA_StartPoint[udg_FA_Index], "Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")
    BlzSetSpecialEffectScale(GetLastCreatedEffectBJ(), 2.00)
    BlzSetSpecialEffectZ(GetLastCreatedEffectBJ(), 10.00)
    DestroyEffectBJ(GetLastCreatedEffectBJ())
    CreateNUnitsAtLoc(1, FourCC("h000"), GetOwningPlayer(udg_FA_Caster[udg_FA_Index]), udg_FA_StartPoint[udg_FA_Index], bj_UNIT_FACING)
    UnitApplyTimedLifeBJ(1.00, FourCC("BTLF"), GetLastCreatedUnit())
    if (Trig_FA_Start_Func018C()) then
        UnitAddAbilityBJ(FourCC("AIil"), GetLastCreatedUnit())
        SetUnitAbilityLevelSwapped(FourCC("AIil"), GetLastCreatedUnit(), udg_FA_Level)
    else
    end
    if (Trig_FA_Start_Func019C()) then
        UnitAddAbilityBJ(FourCC("A039"), GetLastCreatedUnit())
        SetUnitAbilityLevelSwapped(FourCC("A039"), GetLastCreatedUnit(), udg_FA_Level)
    else
    end
    if (Trig_FA_Start_Func020C()) then
        UnitAddAbilityBJ(FourCC("A03B"), GetLastCreatedUnit())
        SetUnitAbilityLevelSwapped(FourCC("A03B"), GetLastCreatedUnit(), udg_FA_Level)
    else
    end
    if (Trig_FA_Start_Func021C()) then
        UnitAddAbilityBJ(FourCC("A03A"), GetLastCreatedUnit())
        SetUnitAbilityLevelSwapped(FourCC("A03A"), GetLastCreatedUnit(), udg_FA_Level)
    else
    end
        IssueTargetOrderById( bj_lastCreatedUnit, 852274, udg_FA_Caster[ udg_FA_Index ] )
    if (Trig_FA_Start_Func023C()) then
        EnableTrigger(gg_trg_FA_Loop)
    else
    end
end

function InitTrig_FA_Start()
    gg_trg_FA_Start = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_FA_Start, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    TriggerAddCondition(gg_trg_FA_Start, Condition(Trig_FA_Start_Conditions))
    TriggerAddAction(gg_trg_FA_Start, Trig_FA_Start_Actions)
end

function Trig_FA_Loop_Func001Func003C()
    if (not (IsTerrainPathableBJ(udg_TEMP_Pos2, PATHING_TYPE_WALKABILITY) == false)) then
        return false
    end
    return true
end

function Trig_FA_Loop_Func001Func006Func012C()
    if (not (udg_FA_Index == 0)) then
        return false
    end
    return true
end

function Trig_FA_Loop_Func001Func006C()
    if (not (udg_FA_Counter[udg_FA_Loop] >= (udg_FA_Duration[udg_FA_Loop] + 0.00))) then
        return false
    end
    return true
end

function Trig_FA_Loop_Actions()
    udg_FA_Loop = 1
    while (true) do
        if (udg_FA_Loop > udg_FA_Index) then break end
        udg_TEMP_Pos2 = PolarProjectionBJ(udg_FA_StartPoint[udg_FA_Loop], (udg_FA_Distance[udg_FA_Loop] * (udg_FA_Counter[udg_FA_Loop] / udg_FA_Duration[udg_FA_Loop])), udg_FA_Facing[udg_FA_Loop])
        udg_TEMP_Pos_Spell = PolarProjectionBJ(udg_FA_StartPoint[udg_FA_Loop], (udg_FA_Distance[udg_FA_Loop] * ((udg_FA_Counter[udg_FA_Loop] + 0.00) / udg_FA_Duration[udg_FA_Loop])), udg_FA_Facing[udg_FA_Loop])
        if (Trig_FA_Loop_Func001Func003C()) then
                        SetUnitX(udg_FA_Caster[udg_FA_Loop], GetLocationX(udg_TEMP_Pos_Spell))
                        SetUnitY(udg_FA_Caster[udg_FA_Loop], GetLocationY(udg_TEMP_Pos_Spell))
            udg_FA_Counter[udg_FA_Loop] = (udg_FA_Counter[udg_FA_Loop] + 0.02)
        else
            udg_FA_Counter[udg_FA_Loop] = udg_FA_Duration[udg_FA_Loop]
        end
                RemoveLocation ( udg_TEMP_Pos2 )
                RemoveLocation ( udg_TEMP_Pos_Spell )
        if (Trig_FA_Loop_Func001Func006C()) then
            UnitRemoveAbilityBJ(FourCC("Agho"), udg_FA_Caster[udg_FA_Loop])
            SetUnitPathing(udg_FA_Caster[udg_FA_Loop], true)
                        RemoveLocation ( udg_FA_StartPoint [ udg_FA_Loop ]  )
            udg_FA_Caster[udg_FA_Loop] = udg_FA_Caster[udg_FA_Index]
            udg_FA_Counter[udg_FA_Loop] = udg_FA_Counter[udg_FA_Index]
            udg_FA_Distance[udg_FA_Loop] = udg_FA_Distance[udg_FA_Index]
            udg_FA_StartPoint[udg_FA_Loop] = udg_FA_StartPoint[udg_FA_Index]
            udg_FA_Duration[udg_FA_Loop] = udg_FA_Duration[udg_FA_Index]
            udg_FA_Facing[udg_FA_Loop] = udg_FA_Facing[udg_FA_Index]
            udg_FA_Index = (udg_FA_Index - 1)
            udg_FA_Loop = (udg_FA_Loop - 1)
            if (Trig_FA_Loop_Func001Func006Func012C()) then
                DisableTrigger(GetTriggeringTrigger())
            else
            end
        else
        end
        udg_FA_Loop = udg_FA_Loop + 1
    end
end

function InitTrig_FA_Loop()
    gg_trg_FA_Loop = CreateTrigger()
    DisableTrigger(gg_trg_FA_Loop)
    TriggerRegisterTimerEventPeriodic(gg_trg_FA_Loop, 0.02)
    TriggerAddAction(gg_trg_FA_Loop, Trig_FA_Loop_Actions)
end

function Trig_Shifter_Bladestorm_START_Conditions()
    if (not (GetSpellAbilityId() == FourCC("A03C"))) then
        return false
    end
    return true
end

function Trig_Shifter_Bladestorm_START_Func004002003001()
    return (IsUnitIllusionBJ(GetFilterUnit()) == true)
end

function Trig_Shifter_Bladestorm_START_Func004002003002()
    return (GetOwningPlayer(GetFilterUnit()) == GetOwningPlayer(udg_SB_Caster))
end

function Trig_Shifter_Bladestorm_START_Func004002003()
    return GetBooleanAnd(Trig_Shifter_Bladestorm_START_Func004002003001(), Trig_Shifter_Bladestorm_START_Func004002003002())
end

function Trig_Shifter_Bladestorm_START_Func006A()
    udg_TEMP_Pos2 = GetUnitLoc(GetEnumUnit())
    AddSpecialEffectLocBJ(udg_TEMP_Pos2, "Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl")
    DestroyEffectBJ(GetLastCreatedEffectBJ())
    RemoveUnit(GetEnumUnit())
    CreateNUnitsAtLoc(1, FourCC("o006"), GetOwningPlayer(udg_SB_Caster), udg_TEMP_Pos2, GetRandomDirectionDeg())
    SetUnitAbilityLevelSwapped(FourCC("A03O"), GetLastCreatedUnit(), udg_TEMP_Int)
    UnitApplyTimedLifeBJ(14.00, FourCC("BTLF"), GetLastCreatedUnit())
    IssueImmediateOrderBJ(GetLastCreatedUnit(), "whirlwind")
        RemoveLocation ( udg_TEMP_Pos2 )
end

function Trig_Shifter_Bladestorm_START_Actions()
    udg_SB_Caster = GetSpellAbilityUnit()
    udg_TEMP_Pos_Hero = GetUnitLoc(udg_SB_Caster)
    udg_TEMP_Int = GetUnitAbilityLevelSwapped(FourCC("A03C"), udg_SB_Caster)
    udg_TEMP_UnitGroup = GetUnitsInRangeOfLocMatching(900.00, udg_TEMP_Pos_Hero, Condition(Trig_Shifter_Bladestorm_START_Func004002003))
    udg_TEMP_Int2 = CountUnitsInGroup(udg_TEMP_UnitGroup)
    ForGroupBJ(udg_TEMP_UnitGroup, Trig_Shifter_Bladestorm_START_Func006A)
        DestroyGroup ( udg_TEMP_UnitGroup )
        RemoveLocation ( udg_TEMP_Pos_Hero )
end

function InitTrig_Shifter_Bladestorm_START()
    gg_trg_Shifter_Bladestorm_START = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Shifter_Bladestorm_START, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    TriggerAddCondition(gg_trg_Shifter_Bladestorm_START, Condition(Trig_Shifter_Bladestorm_START_Conditions))
    TriggerAddAction(gg_trg_Shifter_Bladestorm_START, Trig_Shifter_Bladestorm_START_Actions)
end

function Trig_Paradox_INIT_Actions()
    InitHashtableBJ()
    udg_Paradox_HASH = GetLastCreatedHashtableBJ()
    udg_Paradox_INTERVAL = 0.20
    TriggerRegisterTimerEventPeriodic(gg_trg_Paradox_LOOP, udg_Paradox_INTERVAL)
end

function InitTrig_Paradox_INIT()
    gg_trg_Paradox_INIT = CreateTrigger()
    TriggerAddAction(gg_trg_Paradox_INIT, Trig_Paradox_INIT_Actions)
end

function Trig_Paradox_CAST_Conditions()
    if (not (GetSpellAbilityId() == FourCC("A04N"))) then
        return false
    end
    return true
end

function Trig_Paradox_CAST_Func028C()
    if (not (CountUnitsInGroup(udg_Paradox_GROUP) >= 1)) then
        return false
    end
    return true
end

function Trig_Paradox_CAST_Actions()
    udg_Spell_LOC_Cast = GetUnitLoc(GetSpellAbilityUnit())
    udg_Spell_Caster = GetSpellAbilityUnit()
    udg_Spell_Level = GetUnitAbilityLevelSwapped(FourCC("A04N"), GetSpellAbilityUnit())
    udg_CALC_Base = 9.00
    udg_CALC_Constant = 0.00
    udg_CALC_Level_Factor = 1.00
    udg_CALC_Previous_Value = 1.00
    udg_CALC_ITERATIONS = udg_Spell_Level
    ConditionalTriggerExecute(gg_trg_FUNC_Calculate_Level_Factor)
    udg_Spell_Duration = udg_CALC_RESULT
    GroupAddUnitSimple(GetSpellAbilityUnit(), udg_Paradox_GROUP)
    SaveRealBJ(0.00, 0, GetHandleIdBJ(GetSpellAbilityUnit()), udg_Paradox_HASH)
    SaveLocationHandleBJ(udg_Spell_LOC_Cast, 1, GetHandleIdBJ(GetSpellAbilityUnit()), udg_Paradox_HASH)
    SaveIntegerBJ(udg_Spell_Level, 3, GetHandleIdBJ(GetSpellAbilityUnit()), udg_Paradox_HASH)
    SaveRealBJ(udg_Spell_Duration, 4, GetHandleIdBJ(GetSpellAbilityUnit()), udg_Paradox_HASH)
    CreateNUnitsAtLoc(1, FourCC("h000"), GetOwningPlayer(udg_Spell_Caster), udg_Spell_LOC_Cast, bj_UNIT_FACING)
    SaveUnitHandleBJ(GetLastCreatedUnit(), 2, GetHandleIdBJ(GetTriggerUnit()), udg_Paradox_HASH)
    UnitAddAbilityBJ(FourCC("S002"), GetLastCreatedUnit())
    SetUnitAbilityLevelSwapped(FourCC("S002"), GetLastCreatedUnit(), udg_Spell_Level)
    IssuePointOrderLocBJ(GetLastCreatedUnit(), "deathanddecay", udg_Spell_LOC_Cast)
    UnitApplyTimedLifeBJ(20.00, FourCC("BTLF"), GetLastCreatedUnit())
    if (Trig_Paradox_CAST_Func028C()) then
        EnableTrigger(gg_trg_Paradox_LOOP)
    else
    end
end

function InitTrig_Paradox_CAST()
    gg_trg_Paradox_CAST = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Paradox_CAST, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    TriggerAddCondition(gg_trg_Paradox_CAST, Condition(Trig_Paradox_CAST_Conditions))
    TriggerAddAction(gg_trg_Paradox_CAST, Trig_Paradox_CAST_Actions)
end

function Trig_Paradox_LOOP_Func001Func005Func003C()
    if (not (ModuloReal(udg_Spell_Counter, 1.00) == 1.00)) then
        return false
    end
    return true
end

function Trig_Paradox_LOOP_Func001Func005Func007C()
    if (not (CountUnitsInGroup(udg_Paradox_GROUP) == 0)) then
        return false
    end
    return true
end

function Trig_Paradox_LOOP_Func001Func005C()
    if (not (udg_Spell_Counter <= udg_Spell_Duration)) then
        return false
    end
    if (not (GetUnitCurrentOrder(GetEnumUnit()) == String2OrderIdBJ("tranquility"))) then
        return false
    end
    return true
end

function Trig_Paradox_LOOP_Func001A()
    udg_Spell_Counter = LoadRealBJ(0, GetHandleIdBJ(GetEnumUnit()), udg_Paradox_HASH)
    udg_Spell_LOC_Cast = LoadLocationHandleBJ(1, GetHandleIdBJ(GetEnumUnit()), udg_Paradox_HASH)
    udg_Spell_Level = LoadIntegerBJ(3, GetHandleIdBJ(GetEnumUnit()), udg_Paradox_HASH)
    udg_Spell_Duration = LoadRealBJ(4, GetHandleIdBJ(GetEnumUnit()), udg_Paradox_HASH)
    if (Trig_Paradox_LOOP_Func001Func005C()) then
        if (Trig_Paradox_LOOP_Func001Func005Func003C()) then
            CreateNUnitsAtLoc(1, FourCC("h000"), GetOwningPlayer(GetEnumUnit()), udg_Spell_LOC_Cast, bj_UNIT_FACING)
            UnitAddAbilityBJ(FourCC("A04O"), GetLastCreatedUnit())
            SetUnitAbilityLevelSwapped(FourCC("A04O"), GetLastCreatedUnit(), udg_Spell_Level)
            IssueImmediateOrderBJ(GetLastCreatedUnit(), "resurrection")
            UnitApplyTimedLifeBJ(2.00, FourCC("BTLF"), GetLastCreatedUnit())
        else
        end
        SaveRealBJ((udg_Spell_Counter + udg_Paradox_INTERVAL), 0, GetHandleIdBJ(GetEnumUnit()), udg_Paradox_HASH)
    else
        GroupRemoveUnitSimple(GetEnumUnit(), udg_Paradox_GROUP)
        FlushChildHashtableBJ(GetHandleIdBJ(GetEnumUnit()), udg_Paradox_HASH)
        if (Trig_Paradox_LOOP_Func001Func005Func007C()) then
            DisableTrigger(GetTriggeringTrigger())
        else
        end
    end
end

function Trig_Paradox_LOOP_Actions()
    ForGroupBJ(udg_Paradox_GROUP, Trig_Paradox_LOOP_Func001A)
end

function InitTrig_Paradox_LOOP()
    gg_trg_Paradox_LOOP = CreateTrigger()
    DisableTrigger(gg_trg_Paradox_LOOP)
    TriggerAddAction(gg_trg_Paradox_LOOP, Trig_Paradox_LOOP_Actions)
end

function Trig_Chrono_Atrophy_CAST_Conditions()
    if (not (GetSpellAbilityId() == FourCC("A04K"))) then
        return false
    end
    return true
end

function Trig_Chrono_Atrophy_CAST_Actions()
    udg_Spell_Caster = GetSpellAbilityUnit()
    udg_Spell_Level = GetUnitAbilityLevelSwapped(FourCC("A04K"), GetSpellAbilityUnit())
    udg_TEMP_Pos_Hero = GetUnitLoc(GetSpellAbilityUnit())
    udg_TEMP_Pos_Spell = GetSpellTargetLoc()
    udg_CALC_Base = 10.00
    udg_CALC_Constant = 0.00
    udg_CALC_Level_Factor = 1.00
    udg_CALC_Previous_Value = 1.00
    udg_CALC_ITERATIONS = udg_Spell_Level
    ConditionalTriggerExecute(gg_trg_FUNC_Calculate_Level_Factor)
    udg_Spell_Duration = udg_CALC_RESULT
    CreateNUnitsAtLoc(1, FourCC("h000"), GetOwningPlayer(udg_Spell_Caster), udg_TEMP_Pos_Hero, bj_UNIT_FACING)
    UnitAddAbilityBJ(FourCC("A04J"), GetLastCreatedUnit())
    SetUnitAbilityLevelSwapped(FourCC("A04J"), GetLastCreatedUnit(), udg_Spell_Level)
    UnitApplyTimedLifeBJ(30.00, FourCC("BTLF"), GetLastCreatedUnit())
    IssuePointOrderLocBJ(GetLastCreatedUnit(), "cloudoffog", udg_TEMP_Pos_Spell)
    CreateNUnitsAtLoc(1, FourCC("h000"), GetOwningPlayer(udg_Spell_Caster), udg_TEMP_Pos_Hero, bj_UNIT_FACING)
    UnitAddAbilityBJ(FourCC("A04M"), GetLastCreatedUnit())
    SetUnitAbilityLevelSwapped(FourCC("A04M"), GetLastCreatedUnit(), udg_Spell_Level)
    UnitApplyTimedLifeBJ(30.00, FourCC("BTLF"), GetLastCreatedUnit())
    IssuePointOrderLocBJ(GetLastCreatedUnit(), "cloudoffog", udg_TEMP_Pos_Spell)
        RemoveLocation ( udg_TEMP_Pos_Hero )
        RemoveLocation ( udg_TEMP_Pos_Spell )
end

function InitTrig_Chrono_Atrophy_CAST()
    gg_trg_Chrono_Atrophy_CAST = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Chrono_Atrophy_CAST, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    TriggerAddCondition(gg_trg_Chrono_Atrophy_CAST, Condition(Trig_Chrono_Atrophy_CAST_Conditions))
    TriggerAddAction(gg_trg_Chrono_Atrophy_CAST, Trig_Chrono_Atrophy_CAST_Actions)
end

function Trig_Time_Travel_INIT_Actions()
    InitHashtableBJ()
    udg_TimeTravel_HASH = GetLastCreatedHashtableBJ()
    udg_TimeTravel_INTERVAL = 0.50
    TriggerRegisterTimerEventPeriodic(gg_trg_Time_Travel_LOOP, udg_TimeTravel_INTERVAL)
end

function InitTrig_Time_Travel_INIT()
    gg_trg_Time_Travel_INIT = CreateTrigger()
    TriggerAddAction(gg_trg_Time_Travel_INIT, Trig_Time_Travel_INIT_Actions)
end

function Trig_Time_Travel_CAST_Conditions()
    if (not (GetSpellAbilityId() == FourCC("A04P"))) then
        return false
    end
    return true
end

function Trig_Time_Travel_CAST_Func018Func001Func002C()
    if (not (IsUnitType(GetEnumUnit(), UNIT_TYPE_HERO) == true)) then
        return false
    end
    return true
end

function Trig_Time_Travel_CAST_Func018Func001Func013C()
    if (not (IsUnitAlly(GetEnumUnit(), udg_Spell_Player) == true)) then
        return false
    end
    return true
end

function Trig_Time_Travel_CAST_Func018Func001C()
    if (not (IsUnitType(GetEnumUnit(), UNIT_TYPE_STRUCTURE) == false)) then
        return false
    end
    if (not (IsUnitAliveBJ(GetEnumUnit()) == true)) then
        return false
    end
    if (not (GetEnumUnit() ~= udg_Spell_Caster)) then
        return false
    end
    if (not (UnitHasBuffBJ(GetEnumUnit(), FourCC("B00E")) == false)) then
        return false
    end
    if (not (UnitHasBuffBJ(GetEnumUnit(), FourCC("B00D")) == false)) then
        return false
    end
    return true
end

function Trig_Time_Travel_CAST_Func018A()
    if (Trig_Time_Travel_CAST_Func018Func001C()) then
        GroupAddUnitSimple(GetEnumUnit(), udg_TimeTravel_GROUP)
        if (Trig_Time_Travel_CAST_Func018Func001Func002C()) then
            udg_Spell_Duration = 20.00
        else
            udg_Spell_Duration = 30.00
        end
        udg_Spell_Damage = (GetUnitStateSwap(UNIT_STATE_MAX_LIFE, GetEnumUnit()) * udg_TEMP_Real)
        udg_TEMP_Real_2 = GetUnitLifePercent(GetEnumUnit())
        SaveRealBJ(0.00, 0, GetHandleIdBJ(GetEnumUnit()), udg_TimeTravel_HASH)
        SaveRealBJ(udg_Spell_Damage, 2, GetHandleIdBJ(GetEnumUnit()), udg_TimeTravel_HASH)
        SaveIntegerBJ(udg_Spell_Level, 3, GetHandleIdBJ(GetEnumUnit()), udg_TimeTravel_HASH)
        SaveRealBJ(udg_Spell_Duration, 4, GetHandleIdBJ(GetEnumUnit()), udg_TimeTravel_HASH)
        SavePlayerHandleBJ(udg_Spell_Player, 9, GetHandleIdBJ(GetEnumUnit()), udg_TimeTravel_HASH)
        CreateNUnitsAtLoc(1, FourCC("h000"), udg_Spell_Player, udg_TEMP_Pos_Spell, bj_UNIT_FACING)
        if (Trig_Time_Travel_CAST_Func018Func001Func013C()) then
            UnitAddAbilityBJ(FourCC("A04Q"), GetLastCreatedUnit())
            SetUnitAbilityLevelSwapped(FourCC("A04Q"), GetLastCreatedUnit(), udg_Spell_Level)
            BlzSetUnitMaxHP(GetEnumUnit(), (BlzGetUnitMaxHP(GetEnumUnit()) + R2I(udg_Spell_Damage)))
        else
            UnitAddAbilityBJ(FourCC("A04R"), GetLastCreatedUnit())
            SetUnitAbilityLevelSwapped(FourCC("A04R"), GetLastCreatedUnit(), udg_Spell_Level)
            BlzSetUnitMaxHP(GetEnumUnit(), (BlzGetUnitMaxHP(GetEnumUnit()) - R2I(udg_Spell_Damage)))
        end
        SetUnitLifePercentBJ(GetEnumUnit(), udg_TEMP_Real_2)
        IssueTargetOrderBJ(GetLastCreatedUnit(), "faeriefire", GetEnumUnit())
        UnitApplyTimedLifeBJ(1.00, FourCC("BTLF"), GetLastCreatedUnit())
    else
    end
end

function Trig_Time_Travel_CAST_Func023C()
    if (not (CountUnitsInGroup(udg_TimeTravel_GROUP) >= 1)) then
        return false
    end
    return true
end

function Trig_Time_Travel_CAST_Actions()
    udg_TEMP_Pos_Spell = GetSpellTargetLoc()
    udg_Spell_Caster = GetSpellAbilityUnit()
    udg_Spell_Player = GetOwningPlayer(udg_Spell_Caster)
    udg_Spell_Level = GetUnitAbilityLevelSwapped(FourCC("A04P"), udg_Spell_Caster)
    udg_CALC_Base = 0.10
    udg_CALC_Constant = 0.07
    udg_CALC_Level_Factor = 0.00
    udg_CALC_Previous_Value = 1.00
    udg_CALC_ITERATIONS = udg_Spell_Level
    ConditionalTriggerExecute(gg_trg_FUNC_Calculate_Level_Factor)
    udg_TEMP_Real = udg_CALC_RESULT
    udg_TEMP_UnitGroup = GetUnitsInRangeOfLocAll(150.00, udg_TEMP_Pos_Spell)
    ForGroupBJ(udg_TEMP_UnitGroup, Trig_Time_Travel_CAST_Func018A)
        RemoveLocation ( udg_TEMP_Pos_Spell )
        DestroyGroup ( udg_TEMP_UnitGroup )
    if (Trig_Time_Travel_CAST_Func023C()) then
        EnableTrigger(gg_trg_Time_Travel_LOOP)
    else
    end
end

function InitTrig_Time_Travel_CAST()
    gg_trg_Time_Travel_CAST = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Time_Travel_CAST, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    TriggerAddCondition(gg_trg_Time_Travel_CAST, Condition(Trig_Time_Travel_CAST_Conditions))
    TriggerAddAction(gg_trg_Time_Travel_CAST, Trig_Time_Travel_CAST_Actions)
end

function Trig_Time_Travel_LOOP_Func001Func004Func005C()
    if (UnitHasBuffBJ(GetEnumUnit(), FourCC("B00E")) == true) then
        return true
    end
    if (UnitHasBuffBJ(GetEnumUnit(), FourCC("B00D")) == true) then
        return true
    end
    return false
end

function Trig_Time_Travel_LOOP_Func001Func004Func007C()
    if (not (IsUnitAlly(GetEnumUnit(), udg_Spell_Player) == true)) then
        return false
    end
    return true
end

function Trig_Time_Travel_LOOP_Func001Func004C()
    if (not (udg_Spell_Counter <= udg_Spell_Duration)) then
        return false
    end
    if (not Trig_Time_Travel_LOOP_Func001Func004Func005C()) then
        return false
    end
    return true
end

function Trig_Time_Travel_LOOP_Func001A()
    udg_Spell_Counter = LoadRealBJ(0, GetHandleIdBJ(GetEnumUnit()), udg_TimeTravel_HASH)
    udg_Spell_Duration = LoadRealBJ(4, GetHandleIdBJ(GetEnumUnit()), udg_TimeTravel_HASH)
    if (Trig_Time_Travel_LOOP_Func001Func004C()) then
        SaveRealBJ((udg_Spell_Counter + udg_TimeTravel_INTERVAL), 0, GetHandleIdBJ(GetEnumUnit()), udg_TimeTravel_HASH)
    else
        udg_Spell_Player = LoadPlayerHandleBJ(9, GetHandleIdBJ(GetEnumUnit()), udg_TimeTravel_HASH)
        udg_Spell_Damage = LoadRealBJ(2, GetHandleIdBJ(GetEnumUnit()), udg_TimeTravel_HASH)
        if (Trig_Time_Travel_LOOP_Func001Func004Func007C()) then
            BlzSetUnitMaxHP(GetEnumUnit(), (BlzGetUnitMaxHP(GetEnumUnit()) - R2I(udg_Spell_Damage)))
        else
            BlzSetUnitMaxHP(GetEnumUnit(), (BlzGetUnitMaxHP(GetEnumUnit()) + R2I(udg_Spell_Damage)))
        end
        GroupRemoveUnitSimple(GetEnumUnit(), udg_TimeTravel_GROUP)
        FlushChildHashtableBJ(GetHandleIdBJ(GetEnumUnit()), udg_TimeTravel_HASH)
    end
end

function Trig_Time_Travel_LOOP_Func003C()
    if (not (CountUnitsInGroup(udg_TimeTravel_GROUP) == 0)) then
        return false
    end
    return true
end

function Trig_Time_Travel_LOOP_Actions()
    ForGroupBJ(udg_TimeTravel_GROUP, Trig_Time_Travel_LOOP_Func001A)
    if (Trig_Time_Travel_LOOP_Func003C()) then
        DisableTrigger(GetTriggeringTrigger())
    else
    end
end

function InitTrig_Time_Travel_LOOP()
    gg_trg_Time_Travel_LOOP = CreateTrigger()
    DisableTrigger(gg_trg_Time_Travel_LOOP)
    TriggerAddAction(gg_trg_Time_Travel_LOOP, Trig_Time_Travel_LOOP_Actions)
end

function Trig_Attack_INIT_Actions()
    InitHashtableBJ()
    udg_Attack_Hash = GetLastCreatedHashtableBJ()
    udg_Attack_Interval = 0.10
    TriggerRegisterTimerEventPeriodic(gg_trg_Attack_LOOP, udg_Attack_Interval)
end

function InitTrig_Attack_INIT()
    gg_trg_Attack_INIT = CreateTrigger()
    TriggerAddAction(gg_trg_Attack_INIT, Trig_Attack_INIT_Actions)
end

function Trig_Attack_CAST_Conditions()
    if (not (GetSpellAbilityId() == FourCC("A01B"))) then
        return false
    end
    return true
end

function Trig_Attack_CAST_Func007Func001Func002Func008C()
    if (not (IsPlayerInForce(GetOwningPlayer(GetEnumUnit()), udg_PLAYERGRPallied) == false)) then
        return false
    end
    if (not (IsPlayerInForce(GetOwningPlayer(GetEnumUnit()), udg_PLAYERGRPfederation) == false)) then
        return false
    end
    if (not (GetOwningPlayer(GetEnumUnit()) ~= GetOwningPlayer(GetSpellAbilityUnit()))) then
        return false
    end
    return true
end

function Trig_Attack_CAST_Func007Func001Func002C()
    if (IsUnitType(GetEnumUnit(), UNIT_TYPE_STRUCTURE) == true) then
        return true
    end
    if (IsUnitIllusionBJ(GetEnumUnit()) == true) then
        return true
    end
    if (IsUnitType(GetEnumUnit(), UNIT_TYPE_HERO) == true) then
        return true
    end
    if (GetUnitDefaultMoveSpeed(GetEnumUnit()) == 0.00) then
        return true
    end
    if (IsUnitAliveBJ(GetEnumUnit()) == false) then
        return true
    end
    if (GetUnitLevel(GetEnumUnit()) > 9) then
        return true
    end
    if (IsUnitAlly(GetEnumUnit(), GetOwningPlayer(GetSpellAbilityUnit())) == false) then
        return true
    end
    if (Trig_Attack_CAST_Func007Func001Func002Func008C()) then
        return true
    end
    return false
end

function Trig_Attack_CAST_Func007Func001C()
    if (not Trig_Attack_CAST_Func007Func001Func002C()) then
        return false
    end
    return true
end

function Trig_Attack_CAST_Func007A()
    if (Trig_Attack_CAST_Func007Func001C()) then
        GroupRemoveUnitSimple(GetEnumUnit(), udg_TEMP_UnitGroup)
    else
    end
end

function Trig_Attack_CAST_Func011C()
    if (not (CountUnitsInGroup(udg_Attack_Unit_Group) == 0)) then
        return false
    end
    return true
end

function Trig_Attack_CAST_Func013A()
    GroupAddUnitSimple(GetEnumUnit(), udg_Attack_Unit_Group)
    SaveRealBJ(0.00, 0, GetHandleIdBJ(GetEnumUnit()), udg_Attack_Hash)
    SaveLocationHandleBJ(udg_Spell_LOC_Cast, 1, GetHandleIdBJ(GetEnumUnit()), udg_Attack_Hash)
    SaveIntegerBJ(udg_Spell_Level, 3, GetHandleIdBJ(GetEnumUnit()), udg_Attack_Hash)
    SaveRealBJ(udg_Spell_Duration, 4, GetHandleIdBJ(GetEnumUnit()), udg_Attack_Hash)
    SaveUnitHandleBJ(udg_Spell_Unit_Target, 8, GetHandleIdBJ(GetEnumUnit()), udg_Attack_Hash)
    SavePlayerHandleBJ(GetOwningPlayer(GetEnumUnit()), 9, GetHandleIdBJ(GetEnumUnit()), udg_Attack_Hash)
    UnitAddAbilityBJ(FourCC("A04L"), GetEnumUnit())
    SetUnitAbilityLevelSwapped(FourCC("A01E"), GetEnumUnit(), udg_Spell_Level)
    SetUnitAbilityLevelSwapped(FourCC("A01Q"), GetEnumUnit(), udg_Spell_Level)
    SetUnitAbilityLevelSwapped(FourCC("A01C"), GetEnumUnit(), udg_Spell_Level)
    SetUnitOwner(GetEnumUnit(), GetOwningPlayer(GetSpellAbilityUnit()), true)
    IssueTargetOrderBJ(GetEnumUnit(), "attack", udg_Spell_Unit_Target)
end

function Trig_Attack_CAST_Actions()
    udg_Spell_LOC_Cast = GetUnitLoc(GetSpellAbilityUnit())
    udg_Spell_Unit_Target = GetSpellTargetUnit()
    udg_Spell_Level = GetUnitAbilityLevelSwapped(FourCC("A01B"), GetSpellAbilityUnit())
    udg_Spell_Duration = 8.00
    udg_TEMP_UnitGroup = GetUnitsInRangeOfLocAll(900.00, udg_Spell_LOC_Cast)
    ForGroupBJ(udg_TEMP_UnitGroup, Trig_Attack_CAST_Func007A)
    udg_TEMP_UnitGroup2 = GetRandomSubGroup(5, udg_TEMP_UnitGroup)
    if (Trig_Attack_CAST_Func011C()) then
        EnableTrigger(gg_trg_Attack_LOOP)
    else
    end
    ForGroupBJ(udg_TEMP_UnitGroup2, Trig_Attack_CAST_Func013A)
        DestroyGroup ( udg_TEMP_UnitGroup )
        DestroyGroup ( udg_TEMP_UnitGroup2 )
end

function InitTrig_Attack_CAST()
    gg_trg_Attack_CAST = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Attack_CAST, EVENT_PLAYER_UNIT_SPELL_CAST)
    TriggerAddCondition(gg_trg_Attack_CAST, Condition(Trig_Attack_CAST_Conditions))
    TriggerAddAction(gg_trg_Attack_CAST, Trig_Attack_CAST_Actions)
end

function Trig_Attack_LOOP_Func001Func003Func001C()
    if (udg_Spell_Counter >= udg_Spell_Duration) then
        return true
    end
    if (IsUnitAliveBJ(GetEnumUnit()) == false) then
        return true
    end
    return false
end

function Trig_Attack_LOOP_Func001Func003Func010C()
    if (not (CountUnitsInGroup(udg_Attack_Unit_Group) == 0)) then
        return false
    end
    return true
end

function Trig_Attack_LOOP_Func001Func003C()
    if (not Trig_Attack_LOOP_Func001Func003Func001C()) then
        return false
    end
    return true
end

function Trig_Attack_LOOP_Func001A()
    udg_Spell_Counter = LoadRealBJ(0, GetHandleIdBJ(GetEnumUnit()), udg_Attack_Hash)
    udg_Spell_Duration = LoadRealBJ(4, GetHandleIdBJ(GetEnumUnit()), udg_Attack_Hash)
    if (Trig_Attack_LOOP_Func001Func003C()) then
        udg_Spell_Player = LoadPlayerHandleBJ(9, GetHandleIdBJ(GetEnumUnit()), udg_Attack_Hash)
        UnitRemoveAbilityBJ(FourCC("A04L"), GetEnumUnit())
        SetUnitOwner(GetEnumUnit(), udg_Spell_Player, true)
        udg_TEMP_Unit = GetEnumUnit()
        GroupRemoveUnitSimple(GetEnumUnit(), udg_Attack_Unit_Group)
        FlushChildHashtableBJ(GetHandleIdBJ(GetEnumUnit()), udg_Attack_Hash)
        if (Trig_Attack_LOOP_Func001Func003Func010C()) then
            DisableTrigger(GetTriggeringTrigger())
        else
        end
    else
        SaveRealBJ((udg_Spell_Counter + udg_Attack_Interval), 0, GetHandleIdBJ(GetEnumUnit()), udg_Attack_Hash)
    end
end

function Trig_Attack_LOOP_Actions()
    ForGroupBJ(udg_Attack_Unit_Group, Trig_Attack_LOOP_Func001A)
end

function InitTrig_Attack_LOOP()
    gg_trg_Attack_LOOP = CreateTrigger()
    DisableTrigger(gg_trg_Attack_LOOP)
    TriggerAddAction(gg_trg_Attack_LOOP, Trig_Attack_LOOP_Actions)
end

function Trig_Hash_INIT_Actions()
    InitHashtableBJ()
    udg_Inspired_Hash = GetLastCreatedHashtableBJ()
    udg_Inspired_Interval = 1.00
    TriggerRegisterTimerEventPeriodic(gg_trg_Inspire_LOOP, udg_Inspired_Interval)
end

function InitTrig_Hash_INIT()
    gg_trg_Hash_INIT = CreateTrigger()
    TriggerAddAction(gg_trg_Hash_INIT, Trig_Hash_INIT_Actions)
end

function Trig_Inspire_Start_Conditions()
    if (not (GetSpellAbilityId() == FourCC("A042"))) then
        return false
    end
    return true
end

function Trig_Inspire_Start_Func007002003001()
    return (IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == false)
end

function Trig_Inspire_Start_Func007002003002001()
    return (IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == false)
end

function Trig_Inspire_Start_Func007002003002002001()
    return (GetUnitLevel(GetFilterUnit()) < 10)
end

function Trig_Inspire_Start_Func007002003002002002001()
    return (IsUnitAliveBJ(GetFilterUnit()) == true)
end

function Trig_Inspire_Start_Func007002003002002002002()
    return (IsUnitAlly(GetFilterUnit(), GetOwningPlayer(GetSpellAbilityUnit())) == true)
end

function Trig_Inspire_Start_Func007002003002002002()
    return GetBooleanAnd(Trig_Inspire_Start_Func007002003002002002001(), Trig_Inspire_Start_Func007002003002002002002())
end

function Trig_Inspire_Start_Func007002003002002()
    return GetBooleanAnd(Trig_Inspire_Start_Func007002003002002001(), Trig_Inspire_Start_Func007002003002002002())
end

function Trig_Inspire_Start_Func007002003002()
    return GetBooleanAnd(Trig_Inspire_Start_Func007002003002001(), Trig_Inspire_Start_Func007002003002002())
end

function Trig_Inspire_Start_Func007002003()
    return GetBooleanAnd(Trig_Inspire_Start_Func007002003001(), Trig_Inspire_Start_Func007002003002())
end

function Trig_Inspire_Start_Func010C()
    if (not (CountUnitsInGroup(udg_Inspired_UnitGroup) == 0)) then
        return false
    end
    return true
end

function Trig_Inspire_Start_Func012A()
    UnitAddAbilityBJ(FourCC("A01J"), GetEnumUnit())
    SetUnitLifePercentBJ(GetEnumUnit(), 100)
    BlzSetUnitName(GetEnumUnit(), ("Inspired " .. GetUnitName(GetEnumUnit())))
    AddSpecialEffectTargetUnitBJ("origin", GetEnumUnit(), "Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl")
    DestroyEffectBJ(GetLastCreatedEffectBJ())
    GroupAddUnitSimple(GetEnumUnit(), udg_Inspired_UnitGroup)
    SaveRealBJ(0.00, 0, GetHandleIdBJ(GetEnumUnit()), udg_Inspired_Hash)
    SaveIntegerBJ(udg_Spell_Level, 3, GetHandleIdBJ(GetEnumUnit()), udg_Inspired_Hash)
    SaveRealBJ(udg_Spell_Duration, 4, GetHandleIdBJ(GetEnumUnit()), udg_Inspired_Hash)
end

function Trig_Inspire_Start_Actions()
    udg_TC_Player = GetOwningPlayer(GetSpellAbilityUnit())
    udg_Spell_Level = GetUnitAbilityLevelSwapped(GetSpellAbilityId(), GetSpellAbilityUnit())
    udg_Spell_Duration = 180.00
    udg_TEMP_Pos2 = GetUnitLoc(GetSpellAbilityUnit())
    udg_TEMP_UnitGroup = GetUnitsInRangeOfLocMatching((200.00 + I2R((udg_Spell_Level * 100))), udg_TEMP_Pos2, Condition(Trig_Inspire_Start_Func007002003))
    udg_TEMP_UnitGroup2 = GetRandomSubGroup((udg_Spell_Level * 4), udg_TEMP_UnitGroup)
    if (Trig_Inspire_Start_Func010C()) then
        EnableTrigger(gg_trg_Inspire_LOOP)
        EnableTrigger(gg_trg_Inspire_DIE)
    else
    end
    ForGroupBJ(udg_TEMP_UnitGroup2, Trig_Inspire_Start_Func012A)
        RemoveLocation ( udg_TEMP_Pos2 )
        DestroyGroup( udg_TEMP_UnitGroup )
        DestroyGroup( udg_TEMP_UnitGroup2 )
end

function InitTrig_Inspire_Start()
    gg_trg_Inspire_Start = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Inspire_Start, EVENT_PLAYER_UNIT_SPELL_CAST)
    TriggerAddCondition(gg_trg_Inspire_Start, Condition(Trig_Inspire_Start_Conditions))
    TriggerAddAction(gg_trg_Inspire_Start, Trig_Inspire_Start_Actions)
end

function Trig_Inspire_LOOP_Func001Func003Func001C()
    if (not (udg_Spell_Counter >= udg_Spell_Duration)) then
        return false
    end
    return true
end

function Trig_Inspire_LOOP_Func001Func003C()
    if (not (IsUnitAliveBJ(GetEnumUnit()) == true)) then
        return false
    end
    return true
end

function Trig_Inspire_LOOP_Func001A()
    udg_Spell_Counter = LoadRealBJ(0, GetHandleIdBJ(GetEnumUnit()), udg_Inspired_Hash)
    udg_Spell_Duration = LoadRealBJ(4, GetHandleIdBJ(GetEnumUnit()), udg_Inspired_Hash)
    if (Trig_Inspire_LOOP_Func001Func003C()) then
        if (Trig_Inspire_LOOP_Func001Func003Func001C()) then
            UnitRemoveAbilityBJ(FourCC("A01J"), GetEnumUnit())
            BlzSetUnitName(GetEnumUnit(), SubStringBJ(GetUnitName(GetEnumUnit()), 10, StringLength(GetUnitName(GetEnumUnit()))))
            GroupRemoveUnitSimple(GetEnumUnit(), udg_Inspired_UnitGroup)
            FlushChildHashtableBJ(GetHandleIdBJ(GetEnumUnit()), udg_Inspired_Hash)
        else
            SaveRealBJ((udg_Spell_Counter + udg_Inspired_Interval), 0, GetHandleIdBJ(GetEnumUnit()), udg_Inspired_Hash)
        end
    else
    end
end

function Trig_Inspire_LOOP_Func002C()
    if (not (CountUnitsInGroup(udg_Inspired_UnitGroup) == 0)) then
        return false
    end
    return true
end

function Trig_Inspire_LOOP_Actions()
    ForGroupBJ(udg_Inspired_UnitGroup, Trig_Inspire_LOOP_Func001A)
    if (Trig_Inspire_LOOP_Func002C()) then
        DisableTrigger(GetTriggeringTrigger())
        DisableTrigger(gg_trg_Inspire_DIE)
    else
    end
end

function InitTrig_Inspire_LOOP()
    gg_trg_Inspire_LOOP = CreateTrigger()
    DisableTrigger(gg_trg_Inspire_LOOP)
    TriggerAddAction(gg_trg_Inspire_LOOP, Trig_Inspire_LOOP_Actions)
end

function Trig_Inspire_DIE_Conditions()
    if (not (IsUnitInGroup(GetTriggerUnit(), udg_Inspired_UnitGroup) == true)) then
        return false
    end
    return true
end

function Trig_Inspire_DIE_Func003002003001()
    return (IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == false)
end

function Trig_Inspire_DIE_Func003002003002001()
    return (GetUnitLevel(GetFilterUnit()) <= 10)
end

function Trig_Inspire_DIE_Func003002003002002001()
    return (IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == false)
end

function Trig_Inspire_DIE_Func003002003002002002001()
    return (IsUnitIllusionBJ(GetFilterUnit()) == false)
end

function Trig_Inspire_DIE_Func003002003002002002002001()
    return (IsUnitAliveBJ(GetFilterUnit()) == true)
end

function Trig_Inspire_DIE_Func003002003002002002002002001()
    return (IsUnitAlly(GetFilterUnit(), GetOwningPlayer(GetDyingUnit())) == true)
end

function Trig_Inspire_DIE_Func003002003002002002002002002()
    return (IsUnitInGroup(GetFilterUnit(), udg_Inspired_UnitGroup) == false)
end

function Trig_Inspire_DIE_Func003002003002002002002002()
    return GetBooleanAnd(Trig_Inspire_DIE_Func003002003002002002002002001(), Trig_Inspire_DIE_Func003002003002002002002002002())
end

function Trig_Inspire_DIE_Func003002003002002002002()
    return GetBooleanAnd(Trig_Inspire_DIE_Func003002003002002002002001(), Trig_Inspire_DIE_Func003002003002002002002002())
end

function Trig_Inspire_DIE_Func003002003002002002()
    return GetBooleanAnd(Trig_Inspire_DIE_Func003002003002002002001(), Trig_Inspire_DIE_Func003002003002002002002())
end

function Trig_Inspire_DIE_Func003002003002002()
    return GetBooleanAnd(Trig_Inspire_DIE_Func003002003002002001(), Trig_Inspire_DIE_Func003002003002002002())
end

function Trig_Inspire_DIE_Func003002003002()
    return GetBooleanAnd(Trig_Inspire_DIE_Func003002003002001(), Trig_Inspire_DIE_Func003002003002002())
end

function Trig_Inspire_DIE_Func003002003()
    return GetBooleanAnd(Trig_Inspire_DIE_Func003002003001(), Trig_Inspire_DIE_Func003002003002())
end

function Trig_Inspire_DIE_Func005A()
    UnitAddAbilityBJ(FourCC("A01J"), GetEnumUnit())
    SetUnitLifePercentBJ(GetEnumUnit(), 100)
    BlzSetUnitName(GetEnumUnit(), ("Inspired " .. GetUnitName(GetEnumUnit())))
    AddSpecialEffectTargetUnitBJ("origin", GetEnumUnit(), "Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl")
    DestroyEffectBJ(GetLastCreatedEffectBJ())
    GroupAddUnitSimple(GetEnumUnit(), udg_Inspired_UnitGroup)
    SaveRealBJ(0.00, 0, GetHandleIdBJ(GetEnumUnit()), udg_Inspired_Hash)
    SaveIntegerBJ(udg_Spell_Level, 3, GetHandleIdBJ(GetEnumUnit()), udg_Inspired_Hash)
    SaveRealBJ(udg_Spell_Duration, 4, GetHandleIdBJ(GetEnumUnit()), udg_Inspired_Hash)
end

function Trig_Inspire_DIE_Actions()
    udg_TEMP_Pos2 = GetUnitLoc(GetDyingUnit())
    udg_Spell_Level = LoadIntegerBJ(3, GetHandleIdBJ(GetDyingUnit()), udg_Inspired_Hash)
    udg_TEMP_UnitGroup = GetUnitsInRangeOfLocMatching(300.00, udg_TEMP_Pos2, Condition(Trig_Inspire_DIE_Func003002003))
    udg_TEMP_UnitGroup2 = GetRandomSubGroup(udg_Spell_Level, udg_TEMP_UnitGroup)
    ForGroupBJ(udg_TEMP_UnitGroup2, Trig_Inspire_DIE_Func005A)
    GroupRemoveUnitSimple(GetDyingUnit(), udg_Inspired_UnitGroup)
    FlushChildHashtableBJ(GetHandleIdBJ(GetDyingUnit()), udg_Inspired_Hash)
        RemoveLocation ( udg_TEMP_Pos2 )
        DestroyGroup( udg_TEMP_UnitGroup )
        DestroyGroup( udg_TEMP_UnitGroup2 )
end

function InitTrig_Inspire_DIE()
    gg_trg_Inspire_DIE = CreateTrigger()
    DisableTrigger(gg_trg_Inspire_DIE)
    TriggerRegisterAnyUnitEventBJ(gg_trg_Inspire_DIE, EVENT_PLAYER_UNIT_DEATH)
    TriggerAddCondition(gg_trg_Inspire_DIE, Condition(Trig_Inspire_DIE_Conditions))
    TriggerAddAction(gg_trg_Inspire_DIE, Trig_Inspire_DIE_Actions)
end

function Trig_Bolster_Conditions()
    if (not (GetSpellAbilityId() == FourCC("A01Z"))) then
        return false
    end
    return true
end

function Trig_Bolster_Func004Func001Func001C()
    if (IsUnitType(GetEnumUnit(), UNIT_TYPE_STRUCTURE) == true) then
        return true
    end
    if (GetUnitDefaultMoveSpeed(GetEnumUnit()) == 0.00) then
        return true
    end
    if (IsUnitType(GetEnumUnit(), UNIT_TYPE_HERO) == true) then
        return true
    end
    if (IsUnitIllusionBJ(GetEnumUnit()) == true) then
        return true
    end
    if (IsUnitEnemy(GetEnumUnit(), GetOwningPlayer(GetSpellAbilityUnit())) == true) then
        return true
    end
    if (GetUnitLevel(GetEnumUnit()) > (3 + R2I((I2R(udg_TEMP_Int) * 0.50)))) then
        return true
    end
    if (IsUnitAliveBJ(GetEnumUnit()) == false) then
        return true
    end
    return false
end

function Trig_Bolster_Func004Func001C()
    if (not Trig_Bolster_Func004Func001Func001C()) then
        return false
    end
    return true
end

function Trig_Bolster_Func004A()
    if (Trig_Bolster_Func004Func001C()) then
        GroupRemoveUnitSimple(GetEnumUnit(), udg_TEMP_UnitGroup)
    else
    end
end

function Trig_Bolster_Actions()
    udg_TEMP_Pos_Spell = GetUnitLoc(GetSpellAbilityUnit())
    udg_TEMP_Int = GetUnitAbilityLevelSwapped(FourCC("A01Z"), GetSpellAbilityUnit())
    udg_TEMP_UnitGroup = GetUnitsInRangeOfLocAll(500.00, udg_TEMP_Pos_Spell)
    ForGroupBJ(udg_TEMP_UnitGroup, Trig_Bolster_Func004A)
    udg_TEMP_IntLoop1 = 1
    while (true) do
        if (udg_TEMP_IntLoop1 > R2I((I2R(udg_TEMP_Int) * 1.00))) then break end
        udg_TEMP_Pos2 = GetRandomLocInRect(RectFromCenterSizeBJ(udg_TEMP_Pos_Spell, 400.00, 400.00))
        CreateNUnitsAtLoc(1, GetUnitTypeId(GroupPickRandomUnit(udg_TEMP_UnitGroup)), GetOwningPlayer(GetSpellAbilityUnit()), udg_TEMP_Pos2, bj_UNIT_FACING)
        UnitApplyTimedLifeBJ(90.00, FourCC("BHwe"), GetLastCreatedUnit())
        udg_TEMP_Unit = GetLastCreatedUnit()
        AddSpecialEffectTargetUnitBJ("origin", GetLastCreatedUnit(), "Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl")
        DestroyEffectBJ(GetLastCreatedEffectBJ())
                RemoveLocation ( udg_TEMP_Pos2 )
        udg_TEMP_IntLoop1 = udg_TEMP_IntLoop1 + 1
    end
        RemoveLocation ( udg_TEMP_Pos_Spell )
        DestroyGroup ( udg_TEMP_UnitGroup )
end

function InitTrig_Bolster()
    gg_trg_Bolster = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Bolster, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    TriggerAddCondition(gg_trg_Bolster, Condition(Trig_Bolster_Conditions))
    TriggerAddAction(gg_trg_Bolster, Trig_Bolster_Actions)
end

function Trig_Level_Up_Team_Func002C()
    if (not (IsUnitAlly(GetLevelingUnit(), ForcePickRandomPlayer(udg_PLAYERGRPallied)) == true)) then
        return false
    end
    return true
end

function Trig_Level_Up_Team_Func004002002001()
    return (IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true)
end

function Trig_Level_Up_Team_Func004002002002()
    return (IsUnitAlly(GetFilterUnit(), GetOwningPlayer(GetLevelingUnit())) == true)
end

function Trig_Level_Up_Team_Func004002002()
    return GetBooleanAnd(Trig_Level_Up_Team_Func004002002001(), Trig_Level_Up_Team_Func004002002002())
end

function Trig_Level_Up_Team_Func005Func001C()
    if (not (GetEnumUnit() ~= GetLevelingUnit())) then
        return false
    end
    if (not (IsUnitAliveBJ(GetEnumUnit()) == true)) then
        return false
    end
    return true
end

function Trig_Level_Up_Team_Func005A()
    if (Trig_Level_Up_Team_Func005Func001C()) then
        SetHeroLevelBJ(GetEnumUnit(), (GetHeroLevel(GetEnumUnit()) + 1), true)
    else
    end
end

function Trig_Level_Up_Team_Actions()
    DisableTrigger(GetTriggeringTrigger())
    if (Trig_Level_Up_Team_Func002C()) then
        udg_TEMP_Int2 = 1
    else
        udg_TEMP_Int2 = 2
    end
    udg_Hero_Levels[udg_TEMP_Int2] = GetHeroLevel(GetLevelingUnit())
    udg_TEMP_UnitGroup = GetUnitsInRectMatching(GetPlayableMapRect(), Condition(Trig_Level_Up_Team_Func004002002))
    ForGroupBJ(udg_TEMP_UnitGroup, Trig_Level_Up_Team_Func005A)
    EnableTrigger(GetTriggeringTrigger())
end

function InitTrig_Level_Up_Team()
    gg_trg_Level_Up_Team = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Level_Up_Team, EVENT_PLAYER_HERO_LEVEL)
    TriggerAddAction(gg_trg_Level_Up_Team, Trig_Level_Up_Team_Actions)
end

function Trig_Revive_Hero_Conditions()
    if (not (IsUnitType(GetDyingUnit(), UNIT_TYPE_HERO) == true)) then
        return false
    end
    if (not (GetOwningPlayer(GetDyingUnit()) ~= Player(23))) then
        return false
    end
    if (not (GetOwningPlayer(GetDyingUnit()) ~= Player(22))) then
        return false
    end
    if (not (GetOwningPlayer(GetDyingUnit()) ~= Player(21))) then
        return false
    end
    if (not (GetOwningPlayer(GetDyingUnit()) ~= Player(20))) then
        return false
    end
    if (not (GetOwningPlayer(GetDyingUnit()) ~= Player(19))) then
        return false
    end
    if (not (GetOwningPlayer(GetDyingUnit()) ~= Player(18))) then
        return false
    end
    return true
end

function Trig_Revive_Hero_Func003Func003C()
    if (IsPlayerInForce(GetOwningPlayer(GetDyingUnit()), udg_PLAYERGRPallied) == true) then
        return true
    end
    if (IsPlayerInForce(GetOwningPlayer(GetDyingUnit()), udg_PLAYERGRPfederation) == true) then
        return true
    end
    return false
end

function Trig_Revive_Hero_Func003C()
    if (not Trig_Revive_Hero_Func003Func003C()) then
        return false
    end
    return true
end

function Trig_Revive_Hero_Actions()
    DisplayTextToForce(GetPlayersAll(), ((GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())) .. (" (" .. (GetUnitName(GetKillingUnitBJ()) .. ") "))) .. ("killed " .. (GetPlayerName(GetOwningPlayer(GetDyingUnit())) .. (" (" .. (GetUnitName(GetDyingUnit()) .. ")"))))))
    GroupAddUnitSimple(GetDyingUnit(), udg_RevivableHeros)
    if (Trig_Revive_Hero_Func003C()) then
        udg_TempReal = ((I2R(GetHeroLevel(GetDyingUnit())) * 3.00) + 70.00)
    else
        udg_TempReal = ((I2R(GetHeroLevel(GetDyingUnit())) * 1.50) + 8.00)
    end
    StartTimerBJ(udg_ReviveTimers[GetConvertedPlayerId(GetOwningPlayer(GetDyingUnit()))], false, udg_TempReal)
    CreateTimerDialogBJ(GetLastCreatedTimerBJ(), GetPlayerName(GetOwningPlayer(GetDyingUnit())))
    udg_ReviveTimerWindows[GetConvertedPlayerId(GetOwningPlayer(GetDyingUnit()))] = GetLastCreatedTimerDialogBJ()
end

function InitTrig_Revive_Hero()
    gg_trg_Revive_Hero = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Revive_Hero, EVENT_PLAYER_UNIT_DEATH)
    TriggerAddCondition(gg_trg_Revive_Hero, Condition(Trig_Revive_Hero_Conditions))
    TriggerAddAction(gg_trg_Revive_Hero, Trig_Revive_Hero_Actions)
end

function Trig_Revive_Hero_Timer_Func001Func001Func002Func001C()
    if (not (IsPlayerAlly(GetOwningPlayer(GetEnumUnit()), ForcePickRandomPlayer(udg_PLAYERGRPallied)) == true)) then
        return false
    end
    return true
end

function Trig_Revive_Hero_Timer_Func001Func001Func002Func003C()
    if (not (IsPlayerInForce(GetOwningPlayer(GetEnumUnit()), udg_PLAYERGRPallied) == true)) then
        return false
    end
    return true
end

function Trig_Revive_Hero_Timer_Func001Func001Func002Func004C()
    if (IsPlayerInForce(GetOwningPlayer(GetEnumUnit()), udg_PLAYERGRPallied) == true) then
        return true
    end
    if (IsPlayerInForce(GetOwningPlayer(GetEnumUnit()), udg_PLAYERGRPfederation) == true) then
        return true
    end
    return false
end

function Trig_Revive_Hero_Timer_Func001Func001Func002C()
    if (not Trig_Revive_Hero_Timer_Func001Func001Func002Func004C()) then
        return false
    end
    return true
end

function Trig_Revive_Hero_Timer_Func001Func001C()
    if (not (TimerGetRemaining(udg_ReviveTimers[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]) < 1.00)) then
        return false
    end
    return true
end

function Trig_Revive_Hero_Timer_Func001A()
    if (Trig_Revive_Hero_Timer_Func001Func001C()) then
        DestroyTimerDialogBJ(udg_ReviveTimerWindows[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))])
        if (Trig_Revive_Hero_Timer_Func001Func001Func002C()) then
            if (Trig_Revive_Hero_Timer_Func001Func001Func002Func003C()) then
                udg_TEMP_Pos_Hero = GetRectCenter(gg_rct_Left_Castle)
                udg_TEMP_Pos2 = GetRandomLocInRect(gg_rct_Right_Start)
            else
                udg_TEMP_Pos_Hero = GetRectCenter(gg_rct_Right_Castle)
                udg_TEMP_Pos2 = GetRandomLocInRect(gg_rct_Left_Start)
            end
            ReviveHeroLoc(GetEnumUnit(), udg_TEMP_Pos_Hero, true)
            IssuePointOrderLocBJ(GetEnumUnit(), "attack", udg_TEMP_Pos2)
        else
            if (Trig_Revive_Hero_Timer_Func001Func001Func002Func001C()) then
                udg_TEMP_Pos_Hero = GetRectCenter(gg_rct_Left_Castle)
            else
                udg_TEMP_Pos_Hero = GetRectCenter(gg_rct_Right_Castle)
            end
            ReviveHeroLoc(GetEnumUnit(), udg_TEMP_Pos_Hero, true)
        end
        GroupRemoveUnitSimple(GetEnumUnit(), udg_RevivableHeros)
                RemoveLocation ( udg_TEMP_Pos_Hero )
                RemoveLocation ( udg_TEMP_Pos2 )
    else
    end
end

function Trig_Revive_Hero_Timer_Actions()
    ForGroupBJ(udg_RevivableHeros, Trig_Revive_Hero_Timer_Func001A)
end

function InitTrig_Revive_Hero_Timer()
    gg_trg_Revive_Hero_Timer = CreateTrigger()
    TriggerRegisterTimerExpireEventBJ(gg_trg_Revive_Hero_Timer, udg_ReviveTimers[1])
    TriggerRegisterTimerExpireEventBJ(gg_trg_Revive_Hero_Timer, udg_ReviveTimers[2])
    TriggerRegisterTimerExpireEventBJ(gg_trg_Revive_Hero_Timer, udg_ReviveTimers[3])
    TriggerRegisterTimerExpireEventBJ(gg_trg_Revive_Hero_Timer, udg_ReviveTimers[4])
    TriggerRegisterTimerExpireEventBJ(gg_trg_Revive_Hero_Timer, udg_ReviveTimers[5])
    TriggerRegisterTimerExpireEventBJ(gg_trg_Revive_Hero_Timer, udg_ReviveTimers[6])
    TriggerRegisterTimerExpireEventBJ(gg_trg_Revive_Hero_Timer, udg_ReviveTimers[7])
    TriggerRegisterTimerExpireEventBJ(gg_trg_Revive_Hero_Timer, udg_ReviveTimers[8])
    TriggerRegisterTimerExpireEventBJ(gg_trg_Revive_Hero_Timer, udg_ReviveTimers[9])
    TriggerRegisterTimerExpireEventBJ(gg_trg_Revive_Hero_Timer, udg_ReviveTimers[10])
    TriggerRegisterTimerExpireEventBJ(gg_trg_Revive_Hero_Timer, udg_ReviveTimers[11])
    TriggerRegisterTimerExpireEventBJ(gg_trg_Revive_Hero_Timer, udg_ReviveTimers[12])
    TriggerRegisterTimerExpireEventBJ(gg_trg_Revive_Hero_Timer, udg_ReviveTimers[21])
    TriggerRegisterTimerExpireEventBJ(gg_trg_Revive_Hero_Timer, udg_ReviveTimers[24])
    TriggerAddAction(gg_trg_Revive_Hero_Timer, Trig_Revive_Hero_Timer_Actions)
end

function Trig_End_Of_Game_Left_Conditions()
    if (not (GetDyingUnit() == gg_unit_h00E_0033)) then
        return false
    end
    return true
end

function Trig_End_Of_Game_Left_Actions()
    TriggerSleepAction(10.00)
    CustomVictoryBJ(Player(2), true, true)
    CustomVictoryBJ(Player(4), true, true)
    CustomVictoryBJ(Player(5), true, true)
    CustomDefeatBJ(Player(0), "TRIGSTR_356")
    CustomDefeatBJ(Player(1), "TRIGSTR_357")
    CustomDefeatBJ(Player(3), "TRIGSTR_358")
end

function InitTrig_End_Of_Game_Left()
    gg_trg_End_Of_Game_Left = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_End_Of_Game_Left, EVENT_PLAYER_UNIT_DEATH)
    TriggerAddCondition(gg_trg_End_Of_Game_Left, Condition(Trig_End_Of_Game_Left_Conditions))
    TriggerAddAction(gg_trg_End_Of_Game_Left, Trig_End_Of_Game_Left_Actions)
end

function Trig_End_Of_Game_Right_Conditions()
    if (not (GetDyingUnit() == gg_unit_h00E_0081)) then
        return false
    end
    return true
end

function Trig_End_Of_Game_Right_Actions()
    TriggerSleepAction(10.00)
    CustomVictoryBJ(Player(1), true, true)
    CustomVictoryBJ(Player(3), true, true)
    CustomVictoryBJ(Player(0), true, true)
    CustomDefeatBJ(Player(1), "TRIGSTR_359")
    CustomDefeatBJ(Player(2), "TRIGSTR_360")
    CustomDefeatBJ(Player(5), "TRIGSTR_361")
end

function InitTrig_End_Of_Game_Right()
    gg_trg_End_Of_Game_Right = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_End_Of_Game_Right, EVENT_PLAYER_UNIT_DEATH)
    TriggerAddCondition(gg_trg_End_Of_Game_Right, Condition(Trig_End_Of_Game_Right_Conditions))
    TriggerAddAction(gg_trg_End_Of_Game_Right, Trig_End_Of_Game_Right_Actions)
end

function Trig_Melee_Initialization_Actions()
        init_Lua()
end

function InitTrig_Melee_Initialization()
    gg_trg_Melee_Initialization = CreateTrigger()
    TriggerAddAction(gg_trg_Melee_Initialization, Trig_Melee_Initialization_Actions)
end

function Trig_baseAndHeals_Actions()
    GroupAddUnitSimple(gg_unit_o001_0078, udg_UNIT_Bases[1])
    GroupAddUnitSimple(gg_unit_n001_0049, udg_UNIT_Bases[1])
    GroupAddUnitSimple(gg_unit_h006_0055, udg_UNIT_Bases[1])
    GroupAddUnitSimple(gg_unit_e003_0014, udg_UNIT_Bases[1])
    GroupAddUnitSimple(gg_unit_h003_0007, udg_UNIT_Bases[1])
    GroupAddUnitSimple(gg_unit_h00E_0081, udg_UNIT_Bases[1])
    GroupAddUnitSimple(gg_unit_nntt_0132, udg_UNIT_Bases[1])
    GroupAddUnitSimple(gg_unit_eshy_0047, udg_UNIT_Bases[1])
    GroupAddUnitSimple(gg_unit_nheb_0036, udg_UNIT_Bases[1])
    GroupAddUnitSimple(gg_unit_ndh2_0876, udg_UNIT_Bases[1])
    GroupAddUnitSimple(gg_unit_n00B_0399, udg_UNIT_Bases[1])
    GroupAddUnitSimple(gg_unit_n00B_0038, udg_UNIT_Bases[1])
    GroupAddUnitSimple(gg_unit_hvlt_0406, udg_UNIT_Bases[1])
    GroupAddUnitSimple(gg_unit_n00K_0477, udg_UNIT_Bases[1])
    GroupAddUnitSimple(gg_unit_nheb_0036, udg_UNIT_Bases[1])
    GroupAddUnitSimple(gg_unit_h014_0158, udg_UNIT_Bases[1])
    GroupAddUnitSimple(gg_unit_hars_0293, udg_UNIT_Bases[1])
    GroupAddUnitSimple(gg_unit_hars_0303, udg_UNIT_Bases[1])
    GroupAddUnitSimple(gg_unit_u001_0098, udg_UNIT_Bases[1])
    GroupAddUnitSimple(gg_unit_hshy_0212, udg_UNIT_Bases[1])
    GroupAddUnitSimple(gg_unit_nmh1_0783, udg_UNIT_Bases[1])
    GroupAddUnitSimple(gg_unit_o001_0075, udg_UNIT_Bases[2])
    GroupAddUnitSimple(gg_unit_n001_0048, udg_UNIT_Bases[2])
    GroupAddUnitSimple(gg_unit_h006_0074, udg_UNIT_Bases[2])
    GroupAddUnitSimple(gg_unit_e003_0058, udg_UNIT_Bases[2])
    GroupAddUnitSimple(gg_unit_h003_0015, udg_UNIT_Bases[2])
    GroupAddUnitSimple(gg_unit_h00E_0033, udg_UNIT_Bases[2])
    GroupAddUnitSimple(gg_unit_ndh2_0359, udg_UNIT_Bases[2])
    GroupAddUnitSimple(gg_unit_nntt_0135, udg_UNIT_Bases[2])
    GroupAddUnitSimple(gg_unit_eshy_0120, udg_UNIT_Bases[2])
    GroupAddUnitSimple(gg_unit_n00B_0364, udg_UNIT_Bases[2])
    GroupAddUnitSimple(gg_unit_n00B_0102, udg_UNIT_Bases[2])
    GroupAddUnitSimple(gg_unit_hvlt_0207, udg_UNIT_Bases[2])
    GroupAddUnitSimple(gg_unit_n00K_0802, udg_UNIT_Bases[2])
    GroupAddUnitSimple(gg_unit_nheb_0109, udg_UNIT_Bases[2])
    GroupAddUnitSimple(gg_unit_h014_0017, udg_UNIT_Bases[2])
    GroupAddUnitSimple(gg_unit_hars_0355, udg_UNIT_Bases[2])
    GroupAddUnitSimple(gg_unit_hars_0292, udg_UNIT_Bases[2])
    GroupAddUnitSimple(gg_unit_u001_0097, udg_UNIT_Bases[2])
    GroupAddUnitSimple(gg_unit_hshy_0011, udg_UNIT_Bases[2])
    GroupAddUnitSimple(gg_unit_nmh1_0735, udg_UNIT_Bases[2])
    GroupAddGroup(udg_UNIT_Bases[2], udg_UNIT_Bases_Teleport[1])
    GroupAddGroup(udg_UNIT_Bases[1], udg_UNIT_Bases_Teleport[2])
    GroupAddUnitSimple(gg_unit_u001_0097, udg_UNIT_Healing[1])
    GroupAddUnitSimple(gg_unit_o001_0075, udg_UNIT_Healing[1])
    GroupAddUnitSimple(gg_unit_h00E_0033, udg_UNIT_Healing[1])
    GroupAddUnitSimple(gg_unit_h003_0015, udg_UNIT_Healing[1])
    GroupAddUnitSimple(gg_unit_e003_0058, udg_UNIT_Healing[1])
    GroupAddUnitSimple(gg_unit_n001_0048, udg_UNIT_Healing[1])
    GroupAddUnitSimple(gg_unit_h006_0074, udg_UNIT_Healing[1])
    GroupAddUnitSimple(gg_unit_n00B_0364, udg_UNIT_Healing[1])
    GroupAddUnitSimple(gg_unit_n00B_0102, udg_UNIT_Healing[1])
    GroupAddUnitSimple(gg_unit_ndh2_0359, udg_UNIT_Healing[1])
    GroupAddUnitSimple(gg_unit_nntt_0135, udg_UNIT_Healing[1])
    GroupAddUnitSimple(gg_unit_nheb_0109, udg_UNIT_Healing[1])
    GroupAddUnitSimple(gg_unit_n00B_0364, udg_UNIT_Healing[1])
    GroupAddUnitSimple(gg_unit_nmh1_0735, udg_UNIT_Healing[1])
    GroupAddUnitSimple(gg_unit_u001_0098, udg_UNIT_Healing[2])
    GroupAddUnitSimple(gg_unit_o001_0078, udg_UNIT_Healing[2])
    GroupAddUnitSimple(gg_unit_h00E_0081, udg_UNIT_Healing[2])
    GroupAddUnitSimple(gg_unit_h003_0007, udg_UNIT_Healing[2])
    GroupAddUnitSimple(gg_unit_e003_0014, udg_UNIT_Healing[2])
    GroupAddUnitSimple(gg_unit_n001_0049, udg_UNIT_Healing[2])
    GroupAddUnitSimple(gg_unit_h006_0055, udg_UNIT_Healing[2])
    GroupAddUnitSimple(gg_unit_n00B_0399, udg_UNIT_Healing[2])
    GroupAddUnitSimple(gg_unit_n00B_0038, udg_UNIT_Healing[2])
    GroupAddUnitSimple(gg_unit_ndh2_0876, udg_UNIT_Healing[2])
    GroupAddUnitSimple(gg_unit_nntt_0132, udg_UNIT_Healing[2])
    GroupAddUnitSimple(gg_unit_nheb_0036, udg_UNIT_Healing[2])
    GroupAddUnitSimple(gg_unit_n00B_0399, udg_UNIT_Healing[2])
    GroupAddUnitSimple(gg_unit_nmh1_0783, udg_UNIT_Healing[2])
    udg_summoningStone = gg_unit_h002_0699
    SetUnitAnimation(gg_unit_h002_0699, "Death 1")
end

function InitTrig_baseAndHeals()
    gg_trg_baseAndHeals = CreateTrigger()
    TriggerAddAction(gg_trg_baseAndHeals, Trig_baseAndHeals_Actions)
end

function InitCustomTriggers()
    InitTrig_Level100()
    InitTrig_fogofwar()
    InitTrig_testing()
    InitTrig_FUNC_Calculate_Level_Factor()
    InitTrig_Open_Gate_Right_Murloc()
    InitTrig_Open_Gate_Left_Murloc()
    InitTrig_Open_Gate_Right_Aspect_of_Death()
    InitTrig_Open_Gate_Left_Aspect_of_Death()
    InitTrig_Open_Gate_Left_Aspect_of_Forest()
    InitTrig_Open_Gate_Right_Aspect_of_Forest()
    InitTrig_Creep_Dies_Init()
    InitTrig_Creep_Revive_Count()
    InitTrig_Armor_Hardening()
    InitTrig_Slam()
    InitTrig_Shade_Strength_Copy()
    InitTrig_Mana_Overload_Research()
    InitTrig_Frost_Attack_Research()
    InitTrig_Feedback()
    InitTrig_Shade_Strength()
    InitTrig_Swift_Moves()
    InitTrig_Swift_Attacks()
    InitTrig_Attribute_Upgrade()
    InitTrig_Start_Event()
    InitTrig_Event_Count()
    InitTrig_DW_Ancient_Chaos()
    InitTrig_Doom_Warden_End()
    InitTrig_Footman_at_Max_Mana()
    InitTrig_Unit_Upgrades()
    InitTrig_Elder_Ent_Movement()
    InitTrig_Zombie_Infect()
    InitTrig_Upgrade_to_Fel_Warlock()
    InitTrig_Elf_Boat_Dies()
    InitTrig_Wildhammer_Building_Dies()
    InitTrig_Human_Boat_Dies()
    InitTrig_Chain_Lightning()
    InitTrig_Energy_Tower()
    InitTrig_Watch_Tower_Mana_Shield()
    InitTrig_Shipyard_Left_End()
    InitTrig_Brawler_No_Mana()
    InitTrig_Brawler_Rage_GUI()
    InitTrig_Drain_Start()
    InitTrig_Drain_Loop()
    InitTrig_Unleash_Rage_Start()
    InitTrig_Unleash_Rage()
    InitTrig_Falling_Strike_CAST()
    InitTrig_Jump_System_1()
    InitTrig_Jump_System_2()
    InitTrig_FA_Start()
    InitTrig_FA_Loop()
    InitTrig_Shifter_Bladestorm_START()
    InitTrig_Paradox_INIT()
    InitTrig_Paradox_CAST()
    InitTrig_Paradox_LOOP()
    InitTrig_Chrono_Atrophy_CAST()
    InitTrig_Time_Travel_INIT()
    InitTrig_Time_Travel_CAST()
    InitTrig_Time_Travel_LOOP()
    InitTrig_Attack_INIT()
    InitTrig_Attack_CAST()
    InitTrig_Attack_LOOP()
    InitTrig_Hash_INIT()
    InitTrig_Inspire_Start()
    InitTrig_Inspire_LOOP()
    InitTrig_Inspire_DIE()
    InitTrig_Bolster()
    InitTrig_Level_Up_Team()
    InitTrig_Revive_Hero()
    InitTrig_Revive_Hero_Timer()
    InitTrig_End_Of_Game_Left()
    InitTrig_End_Of_Game_Right()
    InitTrig_Melee_Initialization()
    InitTrig_baseAndHeals()
end

function RunInitializationTriggers()
    ConditionalTriggerExecute(gg_trg_Paradox_INIT)
    ConditionalTriggerExecute(gg_trg_Time_Travel_INIT)
    ConditionalTriggerExecute(gg_trg_Attack_INIT)
    ConditionalTriggerExecute(gg_trg_Hash_INIT)
    ConditionalTriggerExecute(gg_trg_Melee_Initialization)
end

function InitCustomPlayerSlots()
    SetPlayerStartLocation(Player(0), 0)
    ForcePlayerStartLocation(Player(0), 0)
    SetPlayerColor(Player(0), ConvertPlayerColor(0))
    SetPlayerRacePreference(Player(0), RACE_PREF_HUMAN)
    SetPlayerRaceSelectable(Player(0), false)
    SetPlayerController(Player(0), MAP_CONTROL_USER)
    SetPlayerStartLocation(Player(1), 1)
    ForcePlayerStartLocation(Player(1), 1)
    SetPlayerColor(Player(1), ConvertPlayerColor(1))
    SetPlayerRacePreference(Player(1), RACE_PREF_HUMAN)
    SetPlayerRaceSelectable(Player(1), false)
    SetPlayerController(Player(1), MAP_CONTROL_USER)
    SetPlayerStartLocation(Player(2), 2)
    ForcePlayerStartLocation(Player(2), 2)
    SetPlayerColor(Player(2), ConvertPlayerColor(2))
    SetPlayerRacePreference(Player(2), RACE_PREF_HUMAN)
    SetPlayerRaceSelectable(Player(2), false)
    SetPlayerController(Player(2), MAP_CONTROL_USER)
    SetPlayerStartLocation(Player(3), 3)
    ForcePlayerStartLocation(Player(3), 3)
    SetPlayerColor(Player(3), ConvertPlayerColor(3))
    SetPlayerRacePreference(Player(3), RACE_PREF_HUMAN)
    SetPlayerRaceSelectable(Player(3), false)
    SetPlayerController(Player(3), MAP_CONTROL_USER)
    SetPlayerStartLocation(Player(4), 4)
    SetPlayerColor(Player(4), ConvertPlayerColor(4))
    SetPlayerRacePreference(Player(4), RACE_PREF_HUMAN)
    SetPlayerRaceSelectable(Player(4), false)
    SetPlayerController(Player(4), MAP_CONTROL_USER)
    SetPlayerStartLocation(Player(5), 5)
    SetPlayerColor(Player(5), ConvertPlayerColor(5))
    SetPlayerRacePreference(Player(5), RACE_PREF_HUMAN)
    SetPlayerRaceSelectable(Player(5), false)
    SetPlayerController(Player(5), MAP_CONTROL_USER)
    SetPlayerStartLocation(Player(6), 6)
    SetPlayerColor(Player(6), ConvertPlayerColor(6))
    SetPlayerRacePreference(Player(6), RACE_PREF_HUMAN)
    SetPlayerRaceSelectable(Player(6), false)
    SetPlayerController(Player(6), MAP_CONTROL_USER)
    SetPlayerStartLocation(Player(7), 7)
    SetPlayerColor(Player(7), ConvertPlayerColor(7))
    SetPlayerRacePreference(Player(7), RACE_PREF_HUMAN)
    SetPlayerRaceSelectable(Player(7), false)
    SetPlayerController(Player(7), MAP_CONTROL_USER)
    SetPlayerStartLocation(Player(8), 8)
    SetPlayerColor(Player(8), ConvertPlayerColor(8))
    SetPlayerRacePreference(Player(8), RACE_PREF_HUMAN)
    SetPlayerRaceSelectable(Player(8), false)
    SetPlayerController(Player(8), MAP_CONTROL_USER)
    SetPlayerStartLocation(Player(9), 9)
    SetPlayerColor(Player(9), ConvertPlayerColor(9))
    SetPlayerRacePreference(Player(9), RACE_PREF_HUMAN)
    SetPlayerRaceSelectable(Player(9), false)
    SetPlayerController(Player(9), MAP_CONTROL_USER)
    SetPlayerStartLocation(Player(10), 10)
    SetPlayerColor(Player(10), ConvertPlayerColor(10))
    SetPlayerRacePreference(Player(10), RACE_PREF_UNDEAD)
    SetPlayerRaceSelectable(Player(10), false)
    SetPlayerController(Player(10), MAP_CONTROL_USER)
    SetPlayerStartLocation(Player(11), 11)
    SetPlayerColor(Player(11), ConvertPlayerColor(11))
    SetPlayerRacePreference(Player(11), RACE_PREF_NIGHTELF)
    SetPlayerRaceSelectable(Player(11), false)
    SetPlayerController(Player(11), MAP_CONTROL_USER)
    SetPlayerStartLocation(Player(18), 12)
    SetPlayerColor(Player(18), ConvertPlayerColor(18))
    SetPlayerRacePreference(Player(18), RACE_PREF_HUMAN)
    SetPlayerRaceSelectable(Player(18), false)
    SetPlayerController(Player(18), MAP_CONTROL_COMPUTER)
    SetPlayerStartLocation(Player(19), 13)
    SetPlayerColor(Player(19), ConvertPlayerColor(19))
    SetPlayerRacePreference(Player(19), RACE_PREF_HUMAN)
    SetPlayerRaceSelectable(Player(19), false)
    SetPlayerController(Player(19), MAP_CONTROL_COMPUTER)
    SetPlayerStartLocation(Player(20), 14)
    SetPlayerColor(Player(20), ConvertPlayerColor(20))
    SetPlayerRacePreference(Player(20), RACE_PREF_HUMAN)
    SetPlayerRaceSelectable(Player(20), false)
    SetPlayerController(Player(20), MAP_CONTROL_COMPUTER)
    SetPlayerStartLocation(Player(21), 15)
    SetPlayerColor(Player(21), ConvertPlayerColor(21))
    SetPlayerRacePreference(Player(21), RACE_PREF_HUMAN)
    SetPlayerRaceSelectable(Player(21), false)
    SetPlayerController(Player(21), MAP_CONTROL_COMPUTER)
    SetPlayerStartLocation(Player(22), 16)
    SetPlayerColor(Player(22), ConvertPlayerColor(22))
    SetPlayerRacePreference(Player(22), RACE_PREF_HUMAN)
    SetPlayerRaceSelectable(Player(22), false)
    SetPlayerController(Player(22), MAP_CONTROL_COMPUTER)
    SetPlayerStartLocation(Player(23), 17)
    SetPlayerColor(Player(23), ConvertPlayerColor(23))
    SetPlayerRacePreference(Player(23), RACE_PREF_HUMAN)
    SetPlayerRaceSelectable(Player(23), false)
    SetPlayerController(Player(23), MAP_CONTROL_COMPUTER)
end

function InitCustomTeams()
    SetPlayerTeam(Player(0), 0)
    SetPlayerState(Player(0), PLAYER_STATE_ALLIED_VICTORY, 1)
    SetPlayerTeam(Player(1), 0)
    SetPlayerState(Player(1), PLAYER_STATE_ALLIED_VICTORY, 1)
    SetPlayerTeam(Player(2), 0)
    SetPlayerState(Player(2), PLAYER_STATE_ALLIED_VICTORY, 1)
    SetPlayerTeam(Player(3), 0)
    SetPlayerState(Player(3), PLAYER_STATE_ALLIED_VICTORY, 1)
    SetPlayerTeam(Player(4), 0)
    SetPlayerState(Player(4), PLAYER_STATE_ALLIED_VICTORY, 1)
    SetPlayerTeam(Player(5), 0)
    SetPlayerState(Player(5), PLAYER_STATE_ALLIED_VICTORY, 1)
    SetPlayerTeam(Player(18), 0)
    SetPlayerState(Player(18), PLAYER_STATE_ALLIED_VICTORY, 1)
    SetPlayerTeam(Player(19), 0)
    SetPlayerState(Player(19), PLAYER_STATE_ALLIED_VICTORY, 1)
    SetPlayerTeam(Player(20), 0)
    SetPlayerState(Player(20), PLAYER_STATE_ALLIED_VICTORY, 1)
    SetPlayerAllianceStateAllyBJ(Player(0), Player(1), true)
    SetPlayerAllianceStateAllyBJ(Player(0), Player(2), true)
    SetPlayerAllianceStateAllyBJ(Player(0), Player(3), true)
    SetPlayerAllianceStateAllyBJ(Player(0), Player(4), true)
    SetPlayerAllianceStateAllyBJ(Player(0), Player(5), true)
    SetPlayerAllianceStateAllyBJ(Player(0), Player(18), true)
    SetPlayerAllianceStateAllyBJ(Player(0), Player(19), true)
    SetPlayerAllianceStateAllyBJ(Player(0), Player(20), true)
    SetPlayerAllianceStateAllyBJ(Player(1), Player(0), true)
    SetPlayerAllianceStateAllyBJ(Player(1), Player(2), true)
    SetPlayerAllianceStateAllyBJ(Player(1), Player(3), true)
    SetPlayerAllianceStateAllyBJ(Player(1), Player(4), true)
    SetPlayerAllianceStateAllyBJ(Player(1), Player(5), true)
    SetPlayerAllianceStateAllyBJ(Player(1), Player(18), true)
    SetPlayerAllianceStateAllyBJ(Player(1), Player(19), true)
    SetPlayerAllianceStateAllyBJ(Player(1), Player(20), true)
    SetPlayerAllianceStateAllyBJ(Player(2), Player(0), true)
    SetPlayerAllianceStateAllyBJ(Player(2), Player(1), true)
    SetPlayerAllianceStateAllyBJ(Player(2), Player(3), true)
    SetPlayerAllianceStateAllyBJ(Player(2), Player(4), true)
    SetPlayerAllianceStateAllyBJ(Player(2), Player(5), true)
    SetPlayerAllianceStateAllyBJ(Player(2), Player(18), true)
    SetPlayerAllianceStateAllyBJ(Player(2), Player(19), true)
    SetPlayerAllianceStateAllyBJ(Player(2), Player(20), true)
    SetPlayerAllianceStateAllyBJ(Player(3), Player(0), true)
    SetPlayerAllianceStateAllyBJ(Player(3), Player(1), true)
    SetPlayerAllianceStateAllyBJ(Player(3), Player(2), true)
    SetPlayerAllianceStateAllyBJ(Player(3), Player(4), true)
    SetPlayerAllianceStateAllyBJ(Player(3), Player(5), true)
    SetPlayerAllianceStateAllyBJ(Player(3), Player(18), true)
    SetPlayerAllianceStateAllyBJ(Player(3), Player(19), true)
    SetPlayerAllianceStateAllyBJ(Player(3), Player(20), true)
    SetPlayerAllianceStateAllyBJ(Player(4), Player(0), true)
    SetPlayerAllianceStateAllyBJ(Player(4), Player(1), true)
    SetPlayerAllianceStateAllyBJ(Player(4), Player(2), true)
    SetPlayerAllianceStateAllyBJ(Player(4), Player(3), true)
    SetPlayerAllianceStateAllyBJ(Player(4), Player(5), true)
    SetPlayerAllianceStateAllyBJ(Player(4), Player(18), true)
    SetPlayerAllianceStateAllyBJ(Player(4), Player(19), true)
    SetPlayerAllianceStateAllyBJ(Player(4), Player(20), true)
    SetPlayerAllianceStateAllyBJ(Player(5), Player(0), true)
    SetPlayerAllianceStateAllyBJ(Player(5), Player(1), true)
    SetPlayerAllianceStateAllyBJ(Player(5), Player(2), true)
    SetPlayerAllianceStateAllyBJ(Player(5), Player(3), true)
    SetPlayerAllianceStateAllyBJ(Player(5), Player(4), true)
    SetPlayerAllianceStateAllyBJ(Player(5), Player(18), true)
    SetPlayerAllianceStateAllyBJ(Player(5), Player(19), true)
    SetPlayerAllianceStateAllyBJ(Player(5), Player(20), true)
    SetPlayerAllianceStateAllyBJ(Player(18), Player(0), true)
    SetPlayerAllianceStateAllyBJ(Player(18), Player(1), true)
    SetPlayerAllianceStateAllyBJ(Player(18), Player(2), true)
    SetPlayerAllianceStateAllyBJ(Player(18), Player(3), true)
    SetPlayerAllianceStateAllyBJ(Player(18), Player(4), true)
    SetPlayerAllianceStateAllyBJ(Player(18), Player(5), true)
    SetPlayerAllianceStateAllyBJ(Player(18), Player(19), true)
    SetPlayerAllianceStateAllyBJ(Player(18), Player(20), true)
    SetPlayerAllianceStateAllyBJ(Player(19), Player(0), true)
    SetPlayerAllianceStateAllyBJ(Player(19), Player(1), true)
    SetPlayerAllianceStateAllyBJ(Player(19), Player(2), true)
    SetPlayerAllianceStateAllyBJ(Player(19), Player(3), true)
    SetPlayerAllianceStateAllyBJ(Player(19), Player(4), true)
    SetPlayerAllianceStateAllyBJ(Player(19), Player(5), true)
    SetPlayerAllianceStateAllyBJ(Player(19), Player(18), true)
    SetPlayerAllianceStateAllyBJ(Player(19), Player(20), true)
    SetPlayerAllianceStateAllyBJ(Player(20), Player(0), true)
    SetPlayerAllianceStateAllyBJ(Player(20), Player(1), true)
    SetPlayerAllianceStateAllyBJ(Player(20), Player(2), true)
    SetPlayerAllianceStateAllyBJ(Player(20), Player(3), true)
    SetPlayerAllianceStateAllyBJ(Player(20), Player(4), true)
    SetPlayerAllianceStateAllyBJ(Player(20), Player(5), true)
    SetPlayerAllianceStateAllyBJ(Player(20), Player(18), true)
    SetPlayerAllianceStateAllyBJ(Player(20), Player(19), true)
    SetPlayerAllianceStateVisionBJ(Player(0), Player(1), true)
    SetPlayerAllianceStateVisionBJ(Player(0), Player(2), true)
    SetPlayerAllianceStateVisionBJ(Player(0), Player(3), true)
    SetPlayerAllianceStateVisionBJ(Player(0), Player(4), true)
    SetPlayerAllianceStateVisionBJ(Player(0), Player(5), true)
    SetPlayerAllianceStateVisionBJ(Player(0), Player(18), true)
    SetPlayerAllianceStateVisionBJ(Player(0), Player(19), true)
    SetPlayerAllianceStateVisionBJ(Player(0), Player(20), true)
    SetPlayerAllianceStateVisionBJ(Player(1), Player(0), true)
    SetPlayerAllianceStateVisionBJ(Player(1), Player(2), true)
    SetPlayerAllianceStateVisionBJ(Player(1), Player(3), true)
    SetPlayerAllianceStateVisionBJ(Player(1), Player(4), true)
    SetPlayerAllianceStateVisionBJ(Player(1), Player(5), true)
    SetPlayerAllianceStateVisionBJ(Player(1), Player(18), true)
    SetPlayerAllianceStateVisionBJ(Player(1), Player(19), true)
    SetPlayerAllianceStateVisionBJ(Player(1), Player(20), true)
    SetPlayerAllianceStateVisionBJ(Player(2), Player(0), true)
    SetPlayerAllianceStateVisionBJ(Player(2), Player(1), true)
    SetPlayerAllianceStateVisionBJ(Player(2), Player(3), true)
    SetPlayerAllianceStateVisionBJ(Player(2), Player(4), true)
    SetPlayerAllianceStateVisionBJ(Player(2), Player(5), true)
    SetPlayerAllianceStateVisionBJ(Player(2), Player(18), true)
    SetPlayerAllianceStateVisionBJ(Player(2), Player(19), true)
    SetPlayerAllianceStateVisionBJ(Player(2), Player(20), true)
    SetPlayerAllianceStateVisionBJ(Player(3), Player(0), true)
    SetPlayerAllianceStateVisionBJ(Player(3), Player(1), true)
    SetPlayerAllianceStateVisionBJ(Player(3), Player(2), true)
    SetPlayerAllianceStateVisionBJ(Player(3), Player(4), true)
    SetPlayerAllianceStateVisionBJ(Player(3), Player(5), true)
    SetPlayerAllianceStateVisionBJ(Player(3), Player(18), true)
    SetPlayerAllianceStateVisionBJ(Player(3), Player(19), true)
    SetPlayerAllianceStateVisionBJ(Player(3), Player(20), true)
    SetPlayerAllianceStateVisionBJ(Player(4), Player(0), true)
    SetPlayerAllianceStateVisionBJ(Player(4), Player(1), true)
    SetPlayerAllianceStateVisionBJ(Player(4), Player(2), true)
    SetPlayerAllianceStateVisionBJ(Player(4), Player(3), true)
    SetPlayerAllianceStateVisionBJ(Player(4), Player(5), true)
    SetPlayerAllianceStateVisionBJ(Player(4), Player(18), true)
    SetPlayerAllianceStateVisionBJ(Player(4), Player(19), true)
    SetPlayerAllianceStateVisionBJ(Player(4), Player(20), true)
    SetPlayerAllianceStateVisionBJ(Player(5), Player(0), true)
    SetPlayerAllianceStateVisionBJ(Player(5), Player(1), true)
    SetPlayerAllianceStateVisionBJ(Player(5), Player(2), true)
    SetPlayerAllianceStateVisionBJ(Player(5), Player(3), true)
    SetPlayerAllianceStateVisionBJ(Player(5), Player(4), true)
    SetPlayerAllianceStateVisionBJ(Player(5), Player(18), true)
    SetPlayerAllianceStateVisionBJ(Player(5), Player(19), true)
    SetPlayerAllianceStateVisionBJ(Player(5), Player(20), true)
    SetPlayerAllianceStateVisionBJ(Player(18), Player(0), true)
    SetPlayerAllianceStateVisionBJ(Player(18), Player(1), true)
    SetPlayerAllianceStateVisionBJ(Player(18), Player(2), true)
    SetPlayerAllianceStateVisionBJ(Player(18), Player(3), true)
    SetPlayerAllianceStateVisionBJ(Player(18), Player(4), true)
    SetPlayerAllianceStateVisionBJ(Player(18), Player(5), true)
    SetPlayerAllianceStateVisionBJ(Player(18), Player(19), true)
    SetPlayerAllianceStateVisionBJ(Player(18), Player(20), true)
    SetPlayerAllianceStateVisionBJ(Player(19), Player(0), true)
    SetPlayerAllianceStateVisionBJ(Player(19), Player(1), true)
    SetPlayerAllianceStateVisionBJ(Player(19), Player(2), true)
    SetPlayerAllianceStateVisionBJ(Player(19), Player(3), true)
    SetPlayerAllianceStateVisionBJ(Player(19), Player(4), true)
    SetPlayerAllianceStateVisionBJ(Player(19), Player(5), true)
    SetPlayerAllianceStateVisionBJ(Player(19), Player(18), true)
    SetPlayerAllianceStateVisionBJ(Player(19), Player(20), true)
    SetPlayerAllianceStateVisionBJ(Player(20), Player(0), true)
    SetPlayerAllianceStateVisionBJ(Player(20), Player(1), true)
    SetPlayerAllianceStateVisionBJ(Player(20), Player(2), true)
    SetPlayerAllianceStateVisionBJ(Player(20), Player(3), true)
    SetPlayerAllianceStateVisionBJ(Player(20), Player(4), true)
    SetPlayerAllianceStateVisionBJ(Player(20), Player(5), true)
    SetPlayerAllianceStateVisionBJ(Player(20), Player(18), true)
    SetPlayerAllianceStateVisionBJ(Player(20), Player(19), true)
    SetPlayerTeam(Player(6), 1)
    SetPlayerState(Player(6), PLAYER_STATE_ALLIED_VICTORY, 1)
    SetPlayerTeam(Player(7), 1)
    SetPlayerState(Player(7), PLAYER_STATE_ALLIED_VICTORY, 1)
    SetPlayerTeam(Player(8), 1)
    SetPlayerState(Player(8), PLAYER_STATE_ALLIED_VICTORY, 1)
    SetPlayerTeam(Player(9), 1)
    SetPlayerState(Player(9), PLAYER_STATE_ALLIED_VICTORY, 1)
    SetPlayerTeam(Player(10), 1)
    SetPlayerState(Player(10), PLAYER_STATE_ALLIED_VICTORY, 1)
    SetPlayerTeam(Player(11), 1)
    SetPlayerState(Player(11), PLAYER_STATE_ALLIED_VICTORY, 1)
    SetPlayerTeam(Player(21), 1)
    SetPlayerState(Player(21), PLAYER_STATE_ALLIED_VICTORY, 1)
    SetPlayerTeam(Player(22), 1)
    SetPlayerState(Player(22), PLAYER_STATE_ALLIED_VICTORY, 1)
    SetPlayerTeam(Player(23), 1)
    SetPlayerState(Player(23), PLAYER_STATE_ALLIED_VICTORY, 1)
    SetPlayerAllianceStateAllyBJ(Player(6), Player(7), true)
    SetPlayerAllianceStateAllyBJ(Player(6), Player(8), true)
    SetPlayerAllianceStateAllyBJ(Player(6), Player(9), true)
    SetPlayerAllianceStateAllyBJ(Player(6), Player(10), true)
    SetPlayerAllianceStateAllyBJ(Player(6), Player(11), true)
    SetPlayerAllianceStateAllyBJ(Player(6), Player(21), true)
    SetPlayerAllianceStateAllyBJ(Player(6), Player(22), true)
    SetPlayerAllianceStateAllyBJ(Player(6), Player(23), true)
    SetPlayerAllianceStateAllyBJ(Player(7), Player(6), true)
    SetPlayerAllianceStateAllyBJ(Player(7), Player(8), true)
    SetPlayerAllianceStateAllyBJ(Player(7), Player(9), true)
    SetPlayerAllianceStateAllyBJ(Player(7), Player(10), true)
    SetPlayerAllianceStateAllyBJ(Player(7), Player(11), true)
    SetPlayerAllianceStateAllyBJ(Player(7), Player(21), true)
    SetPlayerAllianceStateAllyBJ(Player(7), Player(22), true)
    SetPlayerAllianceStateAllyBJ(Player(7), Player(23), true)
    SetPlayerAllianceStateAllyBJ(Player(8), Player(6), true)
    SetPlayerAllianceStateAllyBJ(Player(8), Player(7), true)
    SetPlayerAllianceStateAllyBJ(Player(8), Player(9), true)
    SetPlayerAllianceStateAllyBJ(Player(8), Player(10), true)
    SetPlayerAllianceStateAllyBJ(Player(8), Player(11), true)
    SetPlayerAllianceStateAllyBJ(Player(8), Player(21), true)
    SetPlayerAllianceStateAllyBJ(Player(8), Player(22), true)
    SetPlayerAllianceStateAllyBJ(Player(8), Player(23), true)
    SetPlayerAllianceStateAllyBJ(Player(9), Player(6), true)
    SetPlayerAllianceStateAllyBJ(Player(9), Player(7), true)
    SetPlayerAllianceStateAllyBJ(Player(9), Player(8), true)
    SetPlayerAllianceStateAllyBJ(Player(9), Player(10), true)
    SetPlayerAllianceStateAllyBJ(Player(9), Player(11), true)
    SetPlayerAllianceStateAllyBJ(Player(9), Player(21), true)
    SetPlayerAllianceStateAllyBJ(Player(9), Player(22), true)
    SetPlayerAllianceStateAllyBJ(Player(9), Player(23), true)
    SetPlayerAllianceStateAllyBJ(Player(10), Player(6), true)
    SetPlayerAllianceStateAllyBJ(Player(10), Player(7), true)
    SetPlayerAllianceStateAllyBJ(Player(10), Player(8), true)
    SetPlayerAllianceStateAllyBJ(Player(10), Player(9), true)
    SetPlayerAllianceStateAllyBJ(Player(10), Player(11), true)
    SetPlayerAllianceStateAllyBJ(Player(10), Player(21), true)
    SetPlayerAllianceStateAllyBJ(Player(10), Player(22), true)
    SetPlayerAllianceStateAllyBJ(Player(10), Player(23), true)
    SetPlayerAllianceStateAllyBJ(Player(11), Player(6), true)
    SetPlayerAllianceStateAllyBJ(Player(11), Player(7), true)
    SetPlayerAllianceStateAllyBJ(Player(11), Player(8), true)
    SetPlayerAllianceStateAllyBJ(Player(11), Player(9), true)
    SetPlayerAllianceStateAllyBJ(Player(11), Player(10), true)
    SetPlayerAllianceStateAllyBJ(Player(11), Player(21), true)
    SetPlayerAllianceStateAllyBJ(Player(11), Player(22), true)
    SetPlayerAllianceStateAllyBJ(Player(11), Player(23), true)
    SetPlayerAllianceStateAllyBJ(Player(21), Player(6), true)
    SetPlayerAllianceStateAllyBJ(Player(21), Player(7), true)
    SetPlayerAllianceStateAllyBJ(Player(21), Player(8), true)
    SetPlayerAllianceStateAllyBJ(Player(21), Player(9), true)
    SetPlayerAllianceStateAllyBJ(Player(21), Player(10), true)
    SetPlayerAllianceStateAllyBJ(Player(21), Player(11), true)
    SetPlayerAllianceStateAllyBJ(Player(21), Player(22), true)
    SetPlayerAllianceStateAllyBJ(Player(21), Player(23), true)
    SetPlayerAllianceStateAllyBJ(Player(22), Player(6), true)
    SetPlayerAllianceStateAllyBJ(Player(22), Player(7), true)
    SetPlayerAllianceStateAllyBJ(Player(22), Player(8), true)
    SetPlayerAllianceStateAllyBJ(Player(22), Player(9), true)
    SetPlayerAllianceStateAllyBJ(Player(22), Player(10), true)
    SetPlayerAllianceStateAllyBJ(Player(22), Player(11), true)
    SetPlayerAllianceStateAllyBJ(Player(22), Player(21), true)
    SetPlayerAllianceStateAllyBJ(Player(22), Player(23), true)
    SetPlayerAllianceStateAllyBJ(Player(23), Player(6), true)
    SetPlayerAllianceStateAllyBJ(Player(23), Player(7), true)
    SetPlayerAllianceStateAllyBJ(Player(23), Player(8), true)
    SetPlayerAllianceStateAllyBJ(Player(23), Player(9), true)
    SetPlayerAllianceStateAllyBJ(Player(23), Player(10), true)
    SetPlayerAllianceStateAllyBJ(Player(23), Player(11), true)
    SetPlayerAllianceStateAllyBJ(Player(23), Player(21), true)
    SetPlayerAllianceStateAllyBJ(Player(23), Player(22), true)
    SetPlayerAllianceStateVisionBJ(Player(6), Player(7), true)
    SetPlayerAllianceStateVisionBJ(Player(6), Player(8), true)
    SetPlayerAllianceStateVisionBJ(Player(6), Player(9), true)
    SetPlayerAllianceStateVisionBJ(Player(6), Player(10), true)
    SetPlayerAllianceStateVisionBJ(Player(6), Player(11), true)
    SetPlayerAllianceStateVisionBJ(Player(6), Player(21), true)
    SetPlayerAllianceStateVisionBJ(Player(6), Player(22), true)
    SetPlayerAllianceStateVisionBJ(Player(6), Player(23), true)
    SetPlayerAllianceStateVisionBJ(Player(7), Player(6), true)
    SetPlayerAllianceStateVisionBJ(Player(7), Player(8), true)
    SetPlayerAllianceStateVisionBJ(Player(7), Player(9), true)
    SetPlayerAllianceStateVisionBJ(Player(7), Player(10), true)
    SetPlayerAllianceStateVisionBJ(Player(7), Player(11), true)
    SetPlayerAllianceStateVisionBJ(Player(7), Player(21), true)
    SetPlayerAllianceStateVisionBJ(Player(7), Player(22), true)
    SetPlayerAllianceStateVisionBJ(Player(7), Player(23), true)
    SetPlayerAllianceStateVisionBJ(Player(8), Player(6), true)
    SetPlayerAllianceStateVisionBJ(Player(8), Player(7), true)
    SetPlayerAllianceStateVisionBJ(Player(8), Player(9), true)
    SetPlayerAllianceStateVisionBJ(Player(8), Player(10), true)
    SetPlayerAllianceStateVisionBJ(Player(8), Player(11), true)
    SetPlayerAllianceStateVisionBJ(Player(8), Player(21), true)
    SetPlayerAllianceStateVisionBJ(Player(8), Player(22), true)
    SetPlayerAllianceStateVisionBJ(Player(8), Player(23), true)
    SetPlayerAllianceStateVisionBJ(Player(9), Player(6), true)
    SetPlayerAllianceStateVisionBJ(Player(9), Player(7), true)
    SetPlayerAllianceStateVisionBJ(Player(9), Player(8), true)
    SetPlayerAllianceStateVisionBJ(Player(9), Player(10), true)
    SetPlayerAllianceStateVisionBJ(Player(9), Player(11), true)
    SetPlayerAllianceStateVisionBJ(Player(9), Player(21), true)
    SetPlayerAllianceStateVisionBJ(Player(9), Player(22), true)
    SetPlayerAllianceStateVisionBJ(Player(9), Player(23), true)
    SetPlayerAllianceStateVisionBJ(Player(10), Player(6), true)
    SetPlayerAllianceStateVisionBJ(Player(10), Player(7), true)
    SetPlayerAllianceStateVisionBJ(Player(10), Player(8), true)
    SetPlayerAllianceStateVisionBJ(Player(10), Player(9), true)
    SetPlayerAllianceStateVisionBJ(Player(10), Player(11), true)
    SetPlayerAllianceStateVisionBJ(Player(10), Player(21), true)
    SetPlayerAllianceStateVisionBJ(Player(10), Player(22), true)
    SetPlayerAllianceStateVisionBJ(Player(10), Player(23), true)
    SetPlayerAllianceStateVisionBJ(Player(11), Player(6), true)
    SetPlayerAllianceStateVisionBJ(Player(11), Player(7), true)
    SetPlayerAllianceStateVisionBJ(Player(11), Player(8), true)
    SetPlayerAllianceStateVisionBJ(Player(11), Player(9), true)
    SetPlayerAllianceStateVisionBJ(Player(11), Player(10), true)
    SetPlayerAllianceStateVisionBJ(Player(11), Player(21), true)
    SetPlayerAllianceStateVisionBJ(Player(11), Player(22), true)
    SetPlayerAllianceStateVisionBJ(Player(11), Player(23), true)
    SetPlayerAllianceStateVisionBJ(Player(21), Player(6), true)
    SetPlayerAllianceStateVisionBJ(Player(21), Player(7), true)
    SetPlayerAllianceStateVisionBJ(Player(21), Player(8), true)
    SetPlayerAllianceStateVisionBJ(Player(21), Player(9), true)
    SetPlayerAllianceStateVisionBJ(Player(21), Player(10), true)
    SetPlayerAllianceStateVisionBJ(Player(21), Player(11), true)
    SetPlayerAllianceStateVisionBJ(Player(21), Player(22), true)
    SetPlayerAllianceStateVisionBJ(Player(21), Player(23), true)
    SetPlayerAllianceStateVisionBJ(Player(22), Player(6), true)
    SetPlayerAllianceStateVisionBJ(Player(22), Player(7), true)
    SetPlayerAllianceStateVisionBJ(Player(22), Player(8), true)
    SetPlayerAllianceStateVisionBJ(Player(22), Player(9), true)
    SetPlayerAllianceStateVisionBJ(Player(22), Player(10), true)
    SetPlayerAllianceStateVisionBJ(Player(22), Player(11), true)
    SetPlayerAllianceStateVisionBJ(Player(22), Player(21), true)
    SetPlayerAllianceStateVisionBJ(Player(22), Player(23), true)
    SetPlayerAllianceStateVisionBJ(Player(23), Player(6), true)
    SetPlayerAllianceStateVisionBJ(Player(23), Player(7), true)
    SetPlayerAllianceStateVisionBJ(Player(23), Player(8), true)
    SetPlayerAllianceStateVisionBJ(Player(23), Player(9), true)
    SetPlayerAllianceStateVisionBJ(Player(23), Player(10), true)
    SetPlayerAllianceStateVisionBJ(Player(23), Player(11), true)
    SetPlayerAllianceStateVisionBJ(Player(23), Player(21), true)
    SetPlayerAllianceStateVisionBJ(Player(23), Player(22), true)
end

function InitAllyPriorities()
    SetStartLocPrioCount(0, 1)
    SetStartLocPrio(0, 0, 11, MAP_LOC_PRIO_HIGH)
    SetStartLocPrioCount(1, 2)
    SetStartLocPrio(1, 0, 3, MAP_LOC_PRIO_HIGH)
    SetStartLocPrio(1, 1, 6, MAP_LOC_PRIO_HIGH)
    SetStartLocPrioCount(2, 1)
    SetStartLocPrio(2, 0, 7, MAP_LOC_PRIO_HIGH)
    SetStartLocPrioCount(3, 4)
    SetStartLocPrio(3, 0, 0, MAP_LOC_PRIO_HIGH)
    SetStartLocPrio(3, 1, 6, MAP_LOC_PRIO_LOW)
    SetStartLocPrio(3, 2, 9, MAP_LOC_PRIO_HIGH)
    SetStartLocPrio(3, 3, 11, MAP_LOC_PRIO_HIGH)
    SetStartLocPrioCount(4, 1)
    SetStartLocPrio(4, 0, 10, MAP_LOC_PRIO_HIGH)
    SetStartLocPrioCount(5, 5)
    SetStartLocPrio(5, 0, 0, MAP_LOC_PRIO_HIGH)
    SetStartLocPrio(5, 1, 3, MAP_LOC_PRIO_LOW)
    SetStartLocPrio(5, 2, 6, MAP_LOC_PRIO_HIGH)
    SetStartLocPrio(5, 3, 7, MAP_LOC_PRIO_HIGH)
    SetStartLocPrio(5, 4, 11, MAP_LOC_PRIO_LOW)
    SetStartLocPrioCount(6, 2)
    SetStartLocPrio(6, 0, 0, MAP_LOC_PRIO_LOW)
    SetStartLocPrio(6, 1, 3, MAP_LOC_PRIO_HIGH)
    SetStartLocPrioCount(7, 1)
    SetStartLocPrio(7, 0, 2, MAP_LOC_PRIO_HIGH)
    SetStartLocPrioCount(8, 2)
    SetStartLocPrio(8, 0, 9, MAP_LOC_PRIO_HIGH)
    SetStartLocPrio(8, 1, 11, MAP_LOC_PRIO_LOW)
    SetStartLocPrioCount(9, 2)
    SetStartLocPrio(9, 0, 8, MAP_LOC_PRIO_HIGH)
    SetStartLocPrio(9, 1, 11, MAP_LOC_PRIO_HIGH)
    SetStartLocPrioCount(10, 1)
    SetStartLocPrio(10, 0, 4, MAP_LOC_PRIO_HIGH)
    SetStartLocPrioCount(11, 2)
    SetStartLocPrio(11, 0, 0, MAP_LOC_PRIO_HIGH)
    SetStartLocPrio(11, 1, 9, MAP_LOC_PRIO_HIGH)
    SetStartLocPrioCount(12, 2)
    SetStartLocPrio(12, 0, 5, MAP_LOC_PRIO_LOW)
    SetStartLocPrio(12, 1, 17, MAP_LOC_PRIO_LOW)
    SetEnemyStartLocPrioCount(12, 13)
    SetEnemyStartLocPrio(12, 0, 0, MAP_LOC_PRIO_LOW)
    SetEnemyStartLocPrio(12, 1, 1, MAP_LOC_PRIO_LOW)
    SetEnemyStartLocPrio(12, 2, 5, MAP_LOC_PRIO_LOW)
    SetEnemyStartLocPrio(12, 3, 6, MAP_LOC_PRIO_LOW)
    SetEnemyStartLocPrio(12, 4, 7, MAP_LOC_PRIO_LOW)
    SetEnemyStartLocPrio(12, 5, 8, MAP_LOC_PRIO_LOW)
    SetEnemyStartLocPrio(12, 6, 9, MAP_LOC_PRIO_LOW)
    SetEnemyStartLocPrio(12, 7, 10, MAP_LOC_PRIO_HIGH)
    SetEnemyStartLocPrio(12, 8, 11, MAP_LOC_PRIO_HIGH)
    SetEnemyStartLocPrio(12, 9, 13, MAP_LOC_PRIO_LOW)
    SetEnemyStartLocPrio(12, 10, 15, MAP_LOC_PRIO_LOW)
    SetEnemyStartLocPrio(12, 11, 16, MAP_LOC_PRIO_LOW)
    SetStartLocPrioCount(13, 10)
    SetStartLocPrio(13, 0, 0, MAP_LOC_PRIO_LOW)
    SetStartLocPrio(13, 1, 1, MAP_LOC_PRIO_LOW)
    SetStartLocPrio(13, 2, 2, MAP_LOC_PRIO_LOW)
    SetStartLocPrio(13, 3, 3, MAP_LOC_PRIO_LOW)
    SetStartLocPrio(13, 4, 12, MAP_LOC_PRIO_LOW)
    SetStartLocPrio(13, 5, 14, MAP_LOC_PRIO_LOW)
    SetStartLocPrio(13, 6, 15, MAP_LOC_PRIO_LOW)
    SetStartLocPrio(13, 7, 16, MAP_LOC_PRIO_LOW)
    SetStartLocPrio(13, 8, 17, MAP_LOC_PRIO_LOW)
    SetEnemyStartLocPrioCount(13, 8)
    SetEnemyStartLocPrio(13, 0, 6, MAP_LOC_PRIO_HIGH)
    SetEnemyStartLocPrio(13, 1, 7, MAP_LOC_PRIO_HIGH)
    SetEnemyStartLocPrio(13, 2, 8, MAP_LOC_PRIO_HIGH)
    SetEnemyStartLocPrio(13, 3, 9, MAP_LOC_PRIO_HIGH)
    SetEnemyStartLocPrio(13, 4, 12, MAP_LOC_PRIO_LOW)
    SetEnemyStartLocPrio(13, 5, 14, MAP_LOC_PRIO_LOW)
    SetEnemyStartLocPrio(13, 6, 16, MAP_LOC_PRIO_LOW)
    SetEnemyStartLocPrio(13, 7, 17, MAP_LOC_PRIO_LOW)
    SetEnemyStartLocPrioCount(14, 3)
    SetEnemyStartLocPrio(14, 0, 6, MAP_LOC_PRIO_HIGH)
    SetEnemyStartLocPrio(14, 1, 7, MAP_LOC_PRIO_HIGH)
    SetEnemyStartLocPrio(14, 2, 8, MAP_LOC_PRIO_HIGH)
    SetStartLocPrioCount(15, 4)
    SetStartLocPrio(15, 0, 2, MAP_LOC_PRIO_LOW)
    SetStartLocPrio(15, 1, 12, MAP_LOC_PRIO_LOW)
    SetStartLocPrio(15, 2, 17, MAP_LOC_PRIO_LOW)
    SetEnemyStartLocPrioCount(15, 5)
    SetEnemyStartLocPrio(15, 0, 2, MAP_LOC_PRIO_LOW)
    SetEnemyStartLocPrio(15, 1, 6, MAP_LOC_PRIO_LOW)
    SetEnemyStartLocPrio(15, 2, 12, MAP_LOC_PRIO_LOW)
    SetEnemyStartLocPrio(15, 3, 17, MAP_LOC_PRIO_LOW)
    SetStartLocPrioCount(16, 4)
    SetStartLocPrio(16, 0, 2, MAP_LOC_PRIO_LOW)
    SetStartLocPrio(16, 1, 12, MAP_LOC_PRIO_LOW)
    SetStartLocPrio(16, 2, 15, MAP_LOC_PRIO_LOW)
    SetStartLocPrio(16, 3, 17, MAP_LOC_PRIO_LOW)
    SetEnemyStartLocPrioCount(16, 4)
    SetEnemyStartLocPrio(16, 0, 2, MAP_LOC_PRIO_LOW)
    SetEnemyStartLocPrio(16, 1, 12, MAP_LOC_PRIO_LOW)
    SetEnemyStartLocPrio(16, 2, 15, MAP_LOC_PRIO_LOW)
    SetEnemyStartLocPrio(16, 3, 17, MAP_LOC_PRIO_LOW)
    SetStartLocPrioCount(17, 7)
    SetStartLocPrio(17, 0, 2, MAP_LOC_PRIO_LOW)
    SetStartLocPrio(17, 1, 6, MAP_LOC_PRIO_LOW)
    SetStartLocPrio(17, 2, 7, MAP_LOC_PRIO_LOW)
    SetStartLocPrio(17, 3, 8, MAP_LOC_PRIO_HIGH)
    SetStartLocPrio(17, 4, 12, MAP_LOC_PRIO_LOW)
    SetStartLocPrio(17, 5, 15, MAP_LOC_PRIO_LOW)
    SetEnemyStartLocPrioCount(17, 4)
    SetEnemyStartLocPrio(17, 0, 2, MAP_LOC_PRIO_LOW)
    SetEnemyStartLocPrio(17, 1, 12, MAP_LOC_PRIO_LOW)
    SetEnemyStartLocPrio(17, 2, 15, MAP_LOC_PRIO_LOW)
end

function main()
    SetCameraBounds(-29440.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), -16256.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM), 512.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), 7040.0 - GetCameraMargin(CAMERA_MARGIN_TOP), -29440.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), 7040.0 - GetCameraMargin(CAMERA_MARGIN_TOP), 512.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), -16256.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM))
    SetDayNightModels("Environment\\DNC\\DNCLordaeron\\DNCLordaeronTerrain\\DNCLordaeronTerrain.mdl", "Environment\\DNC\\DNCLordaeron\\DNCLordaeronUnit\\DNCLordaeronUnit.mdl")
    SetTerrainFogEx(0, 1400.0, 6000.0, 0.650, 0.373, 0.471, 0.588)
    NewSoundEnvironment("Default")
    SetAmbientDaySound("CityScapeDay")
    SetAmbientNightSound("CityScapeNight")
    SetMapMusic("Music", true, 0)
    InitSounds()
    CreateRegions()
    CreateCameras()
    CreateAllUnits()
    InitBlizzard()
    InitGlobals()
    InitCustomTriggers()
    RunInitializationTriggers()
end

function config()
    SetMapName("TRIGSTR_003")
    SetMapDescription("TRIGSTR_005")
    SetPlayers(18)
    SetTeams(18)
    SetGamePlacement(MAP_PLACEMENT_TEAMS_TOGETHER)
    DefineStartLocation(0, -16256.0, -2624.0)
    DefineStartLocation(1, -25792.0, 3904.0)
    DefineStartLocation(2, -8192.0, -6720.0)
    DefineStartLocation(3, -17984.0, -192.0)
    DefineStartLocation(4, -576.0, -10624.0)
    DefineStartLocation(5, -17984.0, -9024.0)
    DefineStartLocation(6, -21184.0, -2112.0)
    DefineStartLocation(7, -11072.0, -8832.0)
    DefineStartLocation(8, -12288.0, 448.0)
    DefineStartLocation(9, -14656.0, 640.0)
    DefineStartLocation(10, -3776.0, -13760.0)
    DefineStartLocation(11, -15168.0, -1216.0)
    DefineStartLocation(12, -15680.0, -4352.0)
    DefineStartLocation(13, -2560.0, -6080.0)
    DefineStartLocation(14, -1088.0, -9472.0)
    DefineStartLocation(15, -13312.0, 512.0)
    DefineStartLocation(16, -13120.0, -7872.0)
    DefineStartLocation(17, -10624.0, 6144.0)
    InitCustomPlayerSlots()
    InitCustomTeams()
    InitAllyPriorities()
end

