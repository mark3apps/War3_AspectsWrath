<h1>HeroSelector</h1>
<p>Submitted by Tasyen</p>
<p>Uploaded on 2019-09-03</p>
<p>Tags: System, vJASS, Lua</p>
<p>Filesize: 148.03 KB</p>
<p>Last edited on 2020-10-20</p>
<h2>HeroSelector</h2>
<p>Filesize: 70.91 KB</p>
<p>Filename: HeroSelector Lua - 1.5b.w3x</p>
<h2>HeroSelector Jass</h2>
<p>Filesize: 77.12 KB</p>
<p>Filename: HeroSelector - jass - 1.5b.w3x</p>
<h2>Description</h2>
<p><span style="color: orange"><h2 style="margin: 0">Introduction</h2></span><br />
HeroSelector is a Frame-UI System to pick a hero. Provides a vjass and Lua version. It features Random, Picking, Baning, unique/limited Picks, Random-Only &quot;Picks&quot;, simple Pick Requirement, Categories. Picking/Banning can be enabled or disabled for a subgroup of Players at a wanted moment. The baned heroes can be baned instantly or wait until the next Picking.<br />
A Pick Requirement enables a Hero only for a Player, a TeamNr, a force or a Race. The button is still visible for all Players.<br />
<br />
Category can be clicked to have Heros not having that category being displayed less visible. One should use power 2 numbers when Setting/adding categories to selection Options. All added Options get on Default the category melee or ranged or None if the can&#039;t attack on default.<br />
<br />
The Selection pool is displayed in one page in rows and cols the amount of cols and rows can be changed inside HeroSelectors Setup which is at the top of HeroSelector after the API comments. The space between 2 rows and 2 Buttons can be changed as well as the button size.<br />
<br />
<span style="color: orange"><h2 style="margin: 0">How to use the Selection grid?</h2></span><br />
Each hero can only be once in the grid. When using HeroSelector.addUnit it will add a new slot. There are HeroSelector.ButtonColCount*HeroSelector.ButtonRowCount slots.<br />
3 rows with 4 cols would result into:<br />
<br />
<div style="margin: 1em auto" title="Code"><br />
01, &nbsp;02, &nbsp;03, &nbsp;04,<br />
05, &nbsp;06, &nbsp;07, &nbsp;08,<br />
09, &nbsp;10, &nbsp;11, &nbsp;12,<br />
&nbsp;</div>When you want to leave fields in the grid empty use HeroSelector.addUnit(0) or HeroSelector.addUnit().<br />
There is a GUI setup which works with indexes, not set indexes will be empty fields.<br />
<br />
<span style="color: orange"><h2 style="margin: 0">Hook into</h2></span><br />
Offers 4 functions one can hook into to add custom Code without having to touch the System Code. By doing that one can add extra Features. Like shown with TeamView and HeroInfo which are not part of the core System but in the same folder. Although this functions have in this upload some content which I think is useful to have. They are below HeroSelector Setup.<br />
<div style="margin: 1em auto" title="Code"><br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>unitCreated<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">,</span> unit<span style="color: #66cc66;">,</span> isRandom<span style="color: #66cc66;">&#41;</span><br />
<span style="color: #808080; font-style: italic;">-- &nbsp; &nbsp;this function is called when an unit is picked, add here you actions that have to be done for the picked unit</span><br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>buttonSelected<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">,</span> unitCode<span style="color: #66cc66;">&#41;</span><br />
<span style="color: #808080; font-style: italic;">-- &nbsp; &nbsp;this function is called when an player selects an button, this is not the picking.</span><br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>unitBaned<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">,</span> unitCode<span style="color: #66cc66;">&#41;</span><br />
<span style="color: #808080; font-style: italic;">-- &nbsp; &nbsp;this function is called when a player bans an unitCode.</span><br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>initHeroes<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><br />
<span style="color: #808080; font-style: italic;">-- &nbsp; &nbsp;this function will be called before anything is created, when not using GUI to setup data you could add the selectable heroes here.</span><br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>repick<span style="color: #66cc66;">&#40;</span>unit<span style="color: #66cc66;">&#91;</span><span style="color: #66cc66;">,</span> player<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#41;</span><br />
<span style="color: #808080; font-style: italic;">-- if you hook/overwritte this, make sure you run it.</span><br />
&nbsp;</div><span style="color: orange"><h2 style="margin: 0">How to Install:</h2></span><br />
You map has to be in Lua-Mode (Lua mode).<br />
jass requires vjass enabled<br />
Export and Import<br />
war3mapImported\HeroSelector.fdf<br />
war3mapImported\HeroSelector.toc<br />
war3mapImported\HeroSelectorBan.mdx<br />
WHEN USING THE EXPORT ALL BUTTON, IT CAN HAPPEN THAT THE CONTENT OF the fdf and toc FILES SWAP<br />
Copy the trigger Folder &quot;HeroSelector&quot; into your map.<br />
<br />
<span style="font-family: 'Verdana'"><span style="color: orange"><h2 style="margin: 0">API:</h2></span></span><br />
<div style="margin: 20px; margin-top: 5px; font-size: 11px"><div class="smallfont" style="margin-bottom: 2px"><b>HeroSelector</b> <input type="button" class="button" value="Show" style="width: 45px; font-size: 10px; margin: 0px; padding: 0px;" onclick="if (this.parentNode.nextSibling.firstChild.style.display != '') { this.parentNode.nextSibling.firstChild.style.display = ''; this.value = 'Hide'; } else { parentNode.nextSibling.firstChild.style.display = 'none'; this.value = 'Show'; }"></div><div class="alt2" style="margin: 0px; padding: 6px; border: 1px inset; border-style: solid; border-left-width: 1px; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px"><div style="display: none"><br />
<div style="margin: 1em auto" title="Code"><span style="color: #808080; font-style: italic;">--[[<br />
HeroSelector V1.5b<br />
<br />
------<br />
function HeroSelector.unitCreated(player, unit, isRandom)<br />
&nbsp; &nbsp; this function is called when an unit is picked, add here you actions that have to be done for the picked unit<br />
<br />
function HeroSelector.buttonSelected(player, unitCode)<br />
&nbsp; &nbsp; this function is called when an player selects an button, this is not the picking.<br />
<br />
function HeroSelector.unitBaned(player, unitCode)<br />
&nbsp; &nbsp; this function is called when a player bans an unitCode.<br />
<br />
function HeroSelector.repick(unit[, player])<br />
&nbsp; &nbsp; if player is skiped unit owner sees the selection<br />
&nbsp; &nbsp; this will remove the unit from the game.<br />
&nbsp; &nbsp; Adds thie unitcode of the unit to the randompool<br />
<br />
function HeroSelector.autoDetectCategory(unitCode)<br />
&nbsp; &nbsp; this called on every unit added. It is a good place for simple automatic categorizes, on default it categorizes melee as 1 and ranged as 2.<br />
<br />
function HeroSelector.initHeroes()<br />
&nbsp; &nbsp; this function will be called before anything is created, when not using GUI to setup data you could add the selectable heroes here.<br />
<br />
How use the Selection grid?<br />
Each hero can only be once in the grid. When using HeroSelector.addUnit it will add a new slot. There are HeroSelector.ButtonColCount*HeroSelector.ButtonRowCount slots.<br />
3 rows with 4 cols would result into:<br />
01 02 03 04<br />
05 06 07 08<br />
09 10 11 12<br />
<br />
When you want to leave fields in the grid empty use HeroSelector.addUnit(0) or HeroSelector.addUnit().<br />
There is a GUI setup which works with indexes, not set indexes will be empty fields.<br />
------<br />
function HeroSelector.setUnitReq(unitCode, who)<br />
&nbsp; &nbsp; adds an requirement: can be a player, a force, a teamNumber, a race, a table {techcode, level}, skip who or nil will remove an requirment.<br />
&nbsp; &nbsp; Only when the local player fullfills than he can click the button.<br />
&nbsp; &nbsp; calling this will not update the selected buttonIndex of players nor does this update the clickability.<br />
&nbsp; &nbsp; To update the clickability when setting requirments after the Box was created use HeroSelector.update() and deselect indexes<br />
&nbsp; &nbsp; won't work when the unitCode wasn't added yet.<br />
&nbsp; &nbsp; <br />
function HeroSelector.addUnit([unitCode, onlyRandom, requirement])<br />
&nbsp; &nbsp; can be called without arguments to hava a empty slot calling it with 0 has the same effect<br />
&nbsp; &nbsp; requirement works like who in HeroSelector.setUnitReq.<br />
<br />
function HeroSelector.setUnitCategory(unitCode, category)<br />
&nbsp; &nbsp; sets the category of an added Option.<br />
&nbsp; &nbsp; Category should be a power 2 number. 1 2 4 8 16 32 ....<br />
<br />
function HeroSelector.addUnitCategory(unitCode, category)<br />
&nbsp; &nbsp; Keeps previous setings untouched<br />
<br />
function HeroSelector.addCategory(icon, text)<br />
&nbsp; &nbsp; icon is the enabled image, text is the tooltip text.<br />
<br />
function HeroSelector.show(flag, [who])<br />
&nbsp; &nbsp; Shows/Hides HeroSelector to who<br />
&nbsp; &nbsp; flag = true show it, false = hide it<br />
&nbsp; &nbsp; who can be a player, a force, a teamNumber, a race or nothing = anyone<br />
&nbsp; &nbsp; teamNumbers are the warcraft 3 given teamNumbers starting with 0 for team 1.<br />
&nbsp; &nbsp; the force is expected to be kept alive<br />
<br />
function HeroSelector.setFrameText(frame, text[, who])<br />
function HeroSelector.setTitleText(text[, who])<br />
function HeroSelector.setBanButtonText(text[, who])<br />
function HeroSelector.setAcceptButtonText(text[, who])<br />
<br />
function HeroSelector.enablePick(flag[, who])<br />
&nbsp; &nbsp; enable/disable the accept/random button also makes them visible for that players and hides the ban Button.<br />
&nbsp; &nbsp; <br />
function HeroSelector.enableBan(flag[, who])<br />
&nbsp; &nbsp; enable/disable the ban button also makes accept/random invisible for that players and shows the ban Button.<br />
<br />
function HeroSelector.forceRandom([who])<br />
&nbsp; &nbsp; wrapper for doRandom for player<br />
<br />
function HeroSelector.forcePick([who])<br />
&nbsp; &nbsp; forces to pick what currently is selected, if that fails doRandom<br />
<br />
function HeroSelector.buttonRequirementDone(unitCode, player)<br />
<br />
function HeroSelector.deselectButtons([buttonIndex])<br />
&nbsp; &nbsp; deselect selected buttons for all players with 0 or nil<br />
&nbsp; &nbsp; when an index is given only this specific buttonIndex<br />
<br />
function HeroSelector.update()<br />
&nbsp; &nbsp; reDo possible selection, textures and enability for all heroButtons.<br />
<br />
function HeroSelector.destroy()<br />
&nbsp; &nbsp; destroys and nil HeroSelector<br />
<br />
function HeroSelector.getDisabledIcon(icon)<br />
&nbsp; &nbsp; ReplaceableTextures\CommandButtons\BTNHeroPaladin.tga -&gt; ReplaceableTextures\CommandButtonsDisabled\DISBTNHeroPaladin.tga<br />
<br />
function HeroSelector.showFrame(frame, flag[, who])<br />
function HeroSelector.includesPlayer(who, player)<br />
function HeroSelector.disableButtonIndex(buttonIndex[, teamNr])<br />
function HeroSelector.enableButtonIndex(unitCode, buttonIndex[, teamNr])<br />
function HeroSelector.counterChangeUnitCode(unitCode, add, player)<br />
function HeroSelector.frameLoseFocus(frame)<br />
function HeroSelector.rollOption(player, includeRandomOnly, exculdedIndex, category)<br />
--]]</span><br />
HeroSelector <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#125;</span><br />
<br />
<span style="color: #808080; font-style: italic;">--Box</span><br />
HeroSelector<span style="color: #66cc66;">.</span>BoxFrameName &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;HeroSelectorRaceBox&quot;</span> <span style="color: #808080; font-style: italic;">--this is the background box being created</span><br />
HeroSelector<span style="color: #66cc66;">.</span>BoxPosX &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0.3</span><br />
HeroSelector<span style="color: #66cc66;">.</span>BoxPosY &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0.4</span><br />
HeroSelector<span style="color: #66cc66;">.</span>BoxPosPoint &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">=</span> FRAMEPOINT_CENTER<br />
HeroSelector<span style="color: #66cc66;">.</span>AutoShow &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">true</span> <span style="color: #808080; font-style: italic;">--(true) shows the box and the Selection at 0.0 for all players</span><br />
<span style="color: #808080; font-style: italic;">--Unique Picks</span><br />
HeroSelector<span style="color: #66cc66;">.</span>UnitCount &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">2</span> <span style="color: #808080; font-style: italic;">--each hero is in total allowed to be picked this amount of times (includes random, repicking allows a hero again).</span><br />
HeroSelector<span style="color: #66cc66;">.</span>UnitCountPerTeam &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">1</span> <span style="color: #808080; font-style: italic;">--Each Team is allowed to pick this amount of each unitType</span><br />
HeroSelector<span style="color: #66cc66;">.</span>ToManyTooltip &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;OUTOFSTOCKTOOLTIP&quot;</span><br />
<span style="color: #808080; font-style: italic;">--Ban</span><br />
HeroSelector<span style="color: #66cc66;">.</span>DelayBanUntilPick &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">=</span> <span style="color: #aa9900;">false</span> <span style="color: #808080; font-style: italic;">--(true) baning will not be applied instantly, instead it is applied when HeroSelector.enablePick is called the next time.</span><br />
<span style="color: #808080; font-style: italic;">--Category</span><br />
HeroSelector<span style="color: #66cc66;">.</span>Category <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--Icon path, tooltip Text (tries to localize)</span><br />
&nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #ff6666;">&quot;ReplaceableTextures<span style="color: #000099; font-weight: bold;">\\</span>CommandButtons<span style="color: #000099; font-weight: bold;">\\</span>BTNSteelMelee&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #ff6666;">&quot;MELEE&quot;</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--1, automatic detected when adding an unit</span><br />
&nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #ff6666;">&quot;ReplaceableTextures<span style="color: #000099; font-weight: bold;">\\</span>CommandButtons<span style="color: #000099; font-weight: bold;">\\</span>BTNHumanMissileUpOne&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #ff6666;">&quot;Ranged&quot;</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span> &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--2, automatic detected when adding an unit</span><br />
&nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #ff6666;">&quot;ReplaceableTextures<span style="color: #000099; font-weight: bold;">\\</span>CommandButtons<span style="color: #000099; font-weight: bold;">\\</span>BTNGauntletsOfOgrePower&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #ff6666;">&quot;STRENGTH&quot;</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span> &nbsp; &nbsp;<span style="color: #808080; font-style: italic;">--4</span><br />
&nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #ff6666;">&quot;ReplaceableTextures<span style="color: #000099; font-weight: bold;">\\</span>CommandButtons<span style="color: #000099; font-weight: bold;">\\</span>BTNSlippersOfAgility&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #ff6666;">&quot;AGILITY&quot;</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #808080; font-style: italic;">--8</span><br />
&nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #ff6666;">&quot;ReplaceableTextures<span style="color: #000099; font-weight: bold;">\\</span>CommandButtons<span style="color: #000099; font-weight: bold;">\\</span>BTNMantleOfIntelligence&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #ff6666;">&quot;INTELLECT&quot;</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span> &nbsp; <span style="color: #808080; font-style: italic;">--16</span><br />
<span style="color: #66cc66;">&#125;</span><br />
HeroSelector<span style="color: #66cc66;">.</span>CategoryAffectRandom &nbsp; <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">true</span> &nbsp;<span style="color: #808080; font-style: italic;">--(false) random will not care about selected category</span><br />
HeroSelector<span style="color: #66cc66;">.</span>CategoryMultiSelect &nbsp; &nbsp;<span style="color: #66cc66;">=</span> <span style="color: #aa9900;">false</span> <span style="color: #808080; font-style: italic;">--(false) deselect other category when selecting one, (true) can selected multiple categories and all heroes having any of them are not filtered.</span><br />
HeroSelector<span style="color: #66cc66;">.</span>CategorySize &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0.02</span> &nbsp;<span style="color: #808080; font-style: italic;">--the size of the Category Button</span><br />
HeroSelector<span style="color: #66cc66;">.</span>CategorySpaceX &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0.0008</span> <span style="color: #808080; font-style: italic;">--space between 2 category Buttons, it is meant to need only one line of Categoryy Buttons.</span><br />
HeroSelector<span style="color: #66cc66;">.</span>CategoryFilteredAlpha &nbsp;<span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">45</span> &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">-- Alpha value of Heroes being filtered by unselected categories</span><br />
HeroSelector<span style="color: #66cc66;">.</span>CategoryAutoDetectHero <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">true</span> &nbsp;<span style="color: #808080; font-style: italic;">-- Will create and remove added Heroes to setup the Category for the primary Attribute Str(4) Agi(8) Int(16) &nbsp; </span><br />
<br />
<span style="color: #808080; font-style: italic;">--Indicator</span><br />
HeroSelector<span style="color: #66cc66;">.</span>IndicatorPathPick &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;UI<span style="color: #000099; font-weight: bold;">\\</span>Feedback<span style="color: #000099; font-weight: bold;">\\</span>Autocast<span style="color: #000099; font-weight: bold;">\\</span>UI-ModalButtonOn.mdl&quot;</span> <span style="color: #808080; font-style: italic;">--this model is used by the indicator during picking</span><br />
HeroSelector<span style="color: #66cc66;">.</span>IndicatorPathBan &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;war3mapImported<span style="color: #000099; font-weight: bold;">\\</span>HeroSelectorBan.mdl&quot;</span> <span style="color: #808080; font-style: italic;">--this model is used by the indicator during baning</span><br />
<span style="color: #808080; font-style: italic;">--Grid</span><br />
HeroSelector<span style="color: #66cc66;">.</span>SpaceBetweenX &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0.008</span> <span style="color: #808080; font-style: italic;">--space between 2 buttons in one row</span><br />
HeroSelector<span style="color: #66cc66;">.</span>SpaceBetweenY &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0.008</span> <span style="color: #808080; font-style: italic;">--space between 2 rows</span><br />
HeroSelector<span style="color: #66cc66;">.</span>ButtonColCount &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">4</span> <span style="color: #808080; font-style: italic;">--amount of buttons in one row</span><br />
HeroSelector<span style="color: #66cc66;">.</span>ButtonRowCount &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">4</span> <span style="color: #808080; font-style: italic;">--amount of rows</span><br />
HeroSelector<span style="color: #66cc66;">.</span>ChainedButtons &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">true</span> <span style="color: #808080; font-style: italic;">--(true) connect to the previous button/ or row, (false) have a offset to the box topLeft in this moving a button has no effect on other buttons.</span><br />
<span style="color: #808080; font-style: italic;">--Button</span><br />
HeroSelector<span style="color: #66cc66;">.</span>ButtonSize &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0.036</span> <span style="color: #808080; font-style: italic;">--size of each button</span><br />
HeroSelector<span style="color: #66cc66;">.</span>ButtonBlendAll &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">false</span> <span style="color: #808080; font-style: italic;">--(true) when a hero icon uses transparenzy</span><br />
HeroSelector<span style="color: #66cc66;">.</span>EmptyButtonPath &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;UI<span style="color: #000099; font-weight: bold;">\\</span>Widgets<span style="color: #000099; font-weight: bold;">\\</span>EscMenu<span style="color: #000099; font-weight: bold;">\\</span>Human<span style="color: #000099; font-weight: bold;">\\</span>blank-background.blp&quot;</span><br />
<span style="color: #808080; font-style: italic;">--Ban Button</span><br />
HeroSelector<span style="color: #66cc66;">.</span>BanButtonTextPrefix &nbsp; &nbsp;<span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;|cffcf2084&quot;</span> <span style="color: #808080; font-style: italic;">--Prefix Text for the Ban Button</span><br />
HeroSelector<span style="color: #66cc66;">.</span>BanButtonText &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;CHAT_ACTION_BAN&quot;</span> <span style="color: #808080; font-style: italic;">--tries to get a Localized String</span><br />
HeroSelector<span style="color: #66cc66;">.</span>BanButtonSizeX &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0.13</span><br />
HeroSelector<span style="color: #66cc66;">.</span>BanButtonSizeY &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0.03</span><br />
HeroSelector<span style="color: #66cc66;">.</span>BanTooltip &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;DISALLOWED&quot;</span><br />
HeroSelector<span style="color: #66cc66;">.</span>BanIgnoreRequirment &nbsp; &nbsp;<span style="color: #66cc66;">=</span> <span style="color: #aa9900;">true</span> <span style="color: #808080; font-style: italic;">-- (true) Ban is not restricted by Requirments</span><br />
<span style="color: #808080; font-style: italic;">--Accept Button</span><br />
HeroSelector<span style="color: #66cc66;">.</span>AcceptButtonTextPrefix <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;&quot;</span><br />
HeroSelector<span style="color: #66cc66;">.</span>AcceptButtonText &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;ACCEPT&quot;</span><br />
HeroSelector<span style="color: #66cc66;">.</span>AcceptButtonSizeX &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0.085</span><br />
HeroSelector<span style="color: #66cc66;">.</span>AcceptButtonSizeY &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0.03</span><br />
HeroSelector<span style="color: #66cc66;">.</span>AcceptButtonIsShown &nbsp; &nbsp;<span style="color: #66cc66;">=</span> <span style="color: #aa9900;">true</span><br />
HeroSelector<span style="color: #66cc66;">.</span>AcceptButtonAnchor &nbsp; &nbsp; <span style="color: #66cc66;">=</span> FRAMEPOINT_BOTTOMRIGHT <span style="color: #808080; font-style: italic;">--places the Accept button with which Point to the bottom, with right he is at the left</span><br />
<span style="color: #808080; font-style: italic;">--Random Button</span><br />
HeroSelector<span style="color: #66cc66;">.</span>RandomButtonTextPrefix <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;&quot;</span><br />
HeroSelector<span style="color: #66cc66;">.</span>RandomButtonText &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;RANDOM&quot;</span> <span style="color: #808080; font-style: italic;">--tries Localizing</span><br />
HeroSelector<span style="color: #66cc66;">.</span>RandomButtonSizeX &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0.085</span><br />
HeroSelector<span style="color: #66cc66;">.</span>RandomButtonSizeY &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0.03</span><br />
HeroSelector<span style="color: #66cc66;">.</span>RandomButtonIsShown &nbsp; &nbsp;<span style="color: #66cc66;">=</span> <span style="color: #aa9900;">true</span><br />
HeroSelector<span style="color: #66cc66;">.</span>RandomButtonAnchor &nbsp; &nbsp; <span style="color: #66cc66;">=</span> FRAMEPOINT_BOTTOMLEFT<br />
HeroSelector<span style="color: #66cc66;">.</span>RandomButtonPick &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">false</span> <span style="color: #808080; font-style: italic;">--(true) pressing the random button will pick the option. (false) pressing the random button will select a button, random only heroes can not be selected, but that does not matter. This weak random and randomonly should not be combined.</span><br />
<span style="color: #808080; font-style: italic;">--Tooltip</span><br />
HeroSelector<span style="color: #66cc66;">.</span>TooltipPrefix &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;|cffffcc00&quot;</span><br />
HeroSelector<span style="color: #66cc66;">.</span>TooltipOffsetX &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0</span><br />
HeroSelector<span style="color: #66cc66;">.</span>TooltipOffsetY &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0</span><br />
HeroSelector<span style="color: #66cc66;">.</span>TooltipPoint &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">=</span> FRAMEPOINT_BOTTOM <span style="color: #808080; font-style: italic;">--pos the Tooltip with which Point</span><br />
HeroSelector<span style="color: #66cc66;">.</span>TooltipRelativePoint &nbsp; <span style="color: #66cc66;">=</span> FRAMEPOINT_TOP <span style="color: #808080; font-style: italic;">--pos the Tooltip to which Point of the Relative</span><br />
HeroSelector<span style="color: #66cc66;">.</span>TooltipRelativIsBox &nbsp; &nbsp;<span style="color: #66cc66;">=</span> <span style="color: #aa9900;">false</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #808080; font-style: italic;">--(true) use the box as anchor, (false) use the button as anchor</span><br />
HeroSelector<span style="color: #66cc66;">.</span>TooltipRequires &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;QUESTCOMPONENTS&quot;</span><br />
<br />
<span style="color: #808080; font-style: italic;">--Border</span><br />
HeroSelector<span style="color: #66cc66;">.</span>BorderSize <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#125;</span><br />
HeroSelector<span style="color: #66cc66;">.</span>BorderSize<span style="color: #66cc66;">&#91;</span>RACE_HUMAN<span style="color: #66cc66;">&#93;</span> &nbsp; &nbsp; <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0.029</span> <span style="color: #808080; font-style: italic;">--border size seen by Race Human, this is needed cause the borders are different in size.</span><br />
HeroSelector<span style="color: #66cc66;">.</span>BorderSize<span style="color: #66cc66;">&#91;</span>RACE_ORC<span style="color: #66cc66;">&#93;</span> &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0.029</span><br />
HeroSelector<span style="color: #66cc66;">.</span>BorderSize<span style="color: #66cc66;">&#91;</span>RACE_UNDEAD<span style="color: #66cc66;">&#93;</span> &nbsp; &nbsp;<span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0.035</span><br />
HeroSelector<span style="color: #66cc66;">.</span>BorderSize<span style="color: #66cc66;">&#91;</span>RACE_NIGHTELF<span style="color: #66cc66;">&#93;</span> &nbsp;<span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0.035</span><br />
HeroSelector<span style="color: #66cc66;">.</span>BorderSize<span style="color: #66cc66;">&#91;</span>RACE_DEMON<span style="color: #66cc66;">&#93;</span> &nbsp; &nbsp; <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0.024</span><br />
<br />
<span style="color: #808080; font-style: italic;">--This runs before the box is created with that the system has the needed data right when it is needed.</span><br />
<span style="color: #808080; font-style: italic;">--you can add units somewhere else but it is done after the box was created you have to use the update function to update the textures of shown buttons</span><br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>initHeroes<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--create categories setuped in config</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> categories <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>Category<br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>Category <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> index<span style="color: #66cc66;">,</span> value <span style="color: #aa9900; font-weight: bold;">in</span> <span style="color: #0000aa;">ipairs</span><span style="color: #66cc66;">&#40;</span>categories<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp;HeroSelector<span style="color: #66cc66;">.</span>addCategory<span style="color: #66cc66;">&#40;</span>value<span style="color: #66cc66;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">,</span> value<span style="color: #66cc66;">&#91;</span><span style="color: #cc66cc;">2</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--read GUI, when the variable exist</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> udg_HeroSelectorUnitCode <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> index <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--add from index 1 all random only heroes</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">while</span> udg_HeroSelectorRandomOnly<span style="color: #66cc66;">&#91;</span>index<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">~=</span> <span style="color: #cc66cc;">0</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>addUnit<span style="color: #66cc66;">&#40;</span>udg_HeroSelectorRandomOnly<span style="color: #66cc66;">&#91;</span>index<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">,</span> <span style="color: #aa9900;">true</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; index <span style="color: #66cc66;">=</span> index <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--copy the setuped field</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> index <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>ButtonColCount<span style="color: #66cc66;">*</span>HeroSelector<span style="color: #66cc66;">.</span>ButtonRowCount<span style="color: #66cc66;">,</span><span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>addUnit<span style="color: #66cc66;">&#40;</span>udg_HeroSelectorUnitCode<span style="color: #66cc66;">&#91;</span>index<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> udg_HeroSelectorCategory<span style="color: #66cc66;">&#91;</span>index<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">~=</span> <span style="color: #cc66cc;">0</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>addUnitCategory<span style="color: #66cc66;">&#40;</span>udg_HeroSelectorUnitCode<span style="color: #66cc66;">&#91;</span>index<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">,</span> udg_HeroSelectorCategory<span style="color: #66cc66;">&#91;</span>index<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--kill the tables</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; udg_HeroSelectorUnitCode <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">nil</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; udg_HeroSelectorRandomOnly <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">nil</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; udg_HeroSelectorCategory <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">nil</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--adding further units when using the GUI Array does not make much sense, except you would add rows.</span><br />
<br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--skip further demo code</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900;">true</span> <span style="color: #aa9900; font-weight: bold;">then</span> <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>addUnit<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;Hgam&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #aa9900;">true</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span> <span style="color: #808080; font-style: italic;">--antonidas is an only random Hero that can only be randomed by team 0 (for users 1).</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>addUnit<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;Eevi&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #aa9900;">true</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#41;</span> <span style="color: #808080; font-style: italic;">--evil Illidan is an only random Hero that can only be randomed by team 1 (for users 2).</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--Adds requirments</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--when you have a ban phase it might be better to add the requirments after the ban phase is over, otherwise one can only ban own options.</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--human only work for human, as nightelf only for Nightelf</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>setUnitReq<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">'Hpal'</span><span style="color: #66cc66;">,</span> RACE_HUMAN<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>setUnitReq<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">'Hamg'</span><span style="color: #66cc66;">,</span> RACE_HUMAN<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>setUnitReq<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">'Hblm'</span><span style="color: #66cc66;">,</span> RACE_HUMAN<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>setUnitReq<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">'Hmkg'</span><span style="color: #66cc66;">,</span> RACE_HUMAN<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--HeroSelector.setUnitReq('Ofar', RACE_ORC)</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--HeroSelector.setUnitReq('Oshd', RACE_ORC)</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--HeroSelector.setUnitReq('Otch', RACE_ORC)</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--HeroSelector.setUnitReq('Obla', RACE_ORC)</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>setUnitReq<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">'Emoo'</span><span style="color: #66cc66;">,</span> RACE_NIGHTELF<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>setUnitReq<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">'Edem'</span><span style="color: #66cc66;">,</span> RACE_NIGHTELF<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>setUnitReq<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">'Ekee'</span><span style="color: #66cc66;">,</span> RACE_NIGHTELF<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>setUnitReq<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">'Ewar'</span><span style="color: #66cc66;">,</span> RACE_NIGHTELF<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--HeroSelector.setUnitReq('Udea', RACE_UNDEAD)</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--HeroSelector.setUnitReq('Ulic', RACE_UNDEAD)</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--HeroSelector.setUnitReq('Udre', RACE_UNDEAD)</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--HeroSelector.setUnitReq('Ucrl', RACE_UNDEAD)</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--[[<br />
&nbsp; &nbsp; local categoryMelee = 1 --autodetected<br />
&nbsp; &nbsp; local categoryRanged = 2 --autodetected<br />
&nbsp; &nbsp; local categoryStr = 4<br />
&nbsp; &nbsp; local categoryAgi = 8<br />
&nbsp; &nbsp; local categoryInt = 16<br />
&nbsp; &nbsp; HeroSelector.addUnitCategory('Hpal', categoryStr)<br />
&nbsp; &nbsp; HeroSelector.addUnitCategory('Hamg', categoryInt)<br />
&nbsp; &nbsp; HeroSelector.addUnitCategory('Hblm', categoryInt)<br />
&nbsp; &nbsp; HeroSelector.addUnitCategory('Hmkg', categoryStr)<br />
&nbsp; &nbsp; HeroSelector.addUnitCategory('Ofar', categoryInt)<br />
&nbsp; &nbsp; HeroSelector.addUnitCategory('Oshd', categoryAgi)<br />
&nbsp; &nbsp; HeroSelector.addUnitCategory('Otch', categoryAgi)<br />
&nbsp; &nbsp; HeroSelector.addUnitCategory('Obla', categoryAgi)<br />
&nbsp; &nbsp; HeroSelector.addUnitCategory('Emoo', categoryAgi)<br />
&nbsp; &nbsp; HeroSelector.addUnitCategory('Edem', categoryAgi)<br />
&nbsp; &nbsp; HeroSelector.addUnitCategory('Ekee', categoryInt)<br />
&nbsp; &nbsp; HeroSelector.addUnitCategory('Ewar', categoryAgi)<br />
&nbsp; &nbsp; HeroSelector.addUnitCategory('Udea', categoryStr)<br />
&nbsp; &nbsp; HeroSelector.addUnitCategory('Ulic', categoryInt)<br />
&nbsp; &nbsp; HeroSelector.addUnitCategory('Udre', categoryStr)<br />
&nbsp; &nbsp; HeroSelector.addUnitCategory('Ucrl', categoryStr)<br />
<br />
&nbsp; &nbsp; HeroSelector.setUnitCategory('Hgam', categoryInt + categoryRanged)<br />
&nbsp; &nbsp; HeroSelector.setUnitCategory(&quot;Eevi&quot;, categoryAgi + categoryMelee)<br />
&nbsp; &nbsp; --]]</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--[[<br />
&nbsp; &nbsp; HeroSelector.addUnit('Hpal') --add paladin as selectable Hero<br />
&nbsp; &nbsp; HeroSelector.addUnit('Hamg')<br />
&nbsp; &nbsp; HeroSelector.addUnit('Hblm')<br />
&nbsp; &nbsp; HeroSelector.addUnit('Hmkg')<br />
&nbsp; &nbsp; HeroSelector.addUnit(&quot;Obla&quot;, true) --this unit can only be randomed<br />
&nbsp; &nbsp; HeroSelector.addUnit(&quot;Ofar&quot;)<br />
&nbsp; &nbsp; HeroSelector.addUnit(&quot;Otch&quot;, 1) --this unit can only be randomed<br />
&nbsp; &nbsp; HeroSelector.addUnit() --this is an empty box. It still takes a slot.<br />
&nbsp; &nbsp; HeroSelector.addUnit() --this is an empty box. It still takes a slot.<br />
&nbsp; &nbsp; HeroSelector.addUnit(&quot;Oshd&quot;)<br />
&nbsp; &nbsp; HeroSelector.addUnit(&quot;Edem&quot;)<br />
&nbsp; &nbsp; HeroSelector.addUnit() --this is an empty box. It still takes a slot.<br />
&nbsp; &nbsp; HeroSelector.addUnit() --this is an empty box. It still takes a slot.<br />
&nbsp; &nbsp; HeroSelector.addUnit(&quot;Ekee&quot;)<br />
&nbsp; &nbsp; HeroSelector.addUnit(&quot;Emoo&quot;)<br />
&nbsp; &nbsp; HeroSelector.addUnit(&quot;Ewar&quot;,true)<br />
&nbsp; &nbsp; HeroSelector.addUnit(&quot;Udea&quot;)<br />
&nbsp; &nbsp; HeroSelector.addUnit(&quot;Ulic&quot;)<br />
&nbsp; &nbsp; HeroSelector.addUnit(&quot;Udre&quot;)<br />
&nbsp; &nbsp; HeroSelector.addUnit(&quot;Ucrl&quot;,1)<br />
&nbsp; &nbsp; --]]</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>autoDetectCategory<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> IsUnitIdType<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">,</span> UNIT_TYPE_MELEE_ATTACKER<span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Category <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">1</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">elseif</span> IsUnitIdType<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">,</span> UNIT_TYPE_RANGED_ATTACKER<span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Category <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">2</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> HeroSelector<span style="color: #66cc66;">.</span>CategoryAutoDetectHero <span style="color: #aa9900; font-weight: bold;">and</span> IsUnitIdType<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">,</span> UNIT_TYPE_HERO<span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> unit <span style="color: #66cc66;">=</span> CreateUnit<span style="color: #66cc66;">&#40;</span>Player<span style="color: #66cc66;">&#40;</span>bj_PLAYER_NEUTRAL_EXTRA<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">,</span> unitCode<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">270</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> primaryAttribute <span style="color: #66cc66;">=</span> BlzGetUnitIntegerField<span style="color: #66cc66;">&#40;</span>unit<span style="color: #66cc66;">,</span> UNIT_IF_PRIMARY_ATTRIBUTE<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; RemoveUnit<span style="color: #66cc66;">&#40;</span>unit<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> ConvertHeroAttribute<span style="color: #66cc66;">&#40;</span>primaryAttribute<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> HERO_ATTRIBUTE_STR <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Category <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Category <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">4</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">elseif</span> ConvertHeroAttribute<span style="color: #66cc66;">&#40;</span>primaryAttribute<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> HERO_ATTRIBUTE_AGI <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Category <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Category <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">8</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">elseif</span> ConvertHeroAttribute<span style="color: #66cc66;">&#40;</span>primaryAttribute<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> HERO_ATTRIBUTE_INT <span style="color: #aa9900; font-weight: bold;">then</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Category <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Category <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">16</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #808080; font-style: italic;">--what happens to the unit beeing picked, player is the one having pressed the button</span><br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>unitCreated<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">,</span> unit<span style="color: #66cc66;">,</span> isRandom<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; bj_lastCreatedUnit <span style="color: #66cc66;">=</span> unit<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> isRandom <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--randomed</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--picked</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
&nbsp; &nbsp; SetUnitPosition<span style="color: #66cc66;">&#40;</span>unit<span style="color: #66cc66;">,</span> GetPlayerStartLocationX<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">,</span> GetPlayerStartLocationY<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> player <span style="color: #66cc66;">==</span> Player<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
&nbsp; &nbsp; PanCameraToTimedForPlayer<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">,</span> GetUnitX<span style="color: #66cc66;">&#40;</span>unit<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">,</span> GetUnitY<span style="color: #66cc66;">&#40;</span>unit<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">,</span><span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; SelectUnitForPlayerSingle<span style="color: #66cc66;">&#40;</span>unit<span style="color: #66cc66;">,</span> player<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>enablePick<span style="color: #66cc66;">&#40;</span><span style="color: #aa9900;">false</span><span style="color: #66cc66;">,</span> player<span style="color: #66cc66;">&#41;</span> <span style="color: #808080; font-style: italic;">--only one pick for this player</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--print(GetPlayerName(player),&quot;picks&quot;,GetUnitName(unit))</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #808080; font-style: italic;">--happens when the banButton is pressed, player is the one having pressed the button</span><br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>unitBaned<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">,</span> unitCode<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>enableBan<span style="color: #66cc66;">&#40;</span><span style="color: #aa9900;">false</span><span style="color: #66cc66;">,</span> player<span style="color: #66cc66;">&#41;</span> <span style="color: #808080; font-style: italic;">--only one ban</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--print(GetPlayerName(player),&quot;bans&quot;,GetObjectName(unitCode))</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>buttonSelected<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">,</span> unitCode<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--player who pressed the button</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--unitCode the unitCode selected</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--this is not picked.</span><br />
<br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--print(GetPlayerName(player),&quot;selects&quot;,GetObjectName(unitCode))</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>repick<span style="color: #66cc66;">&#40;</span>unit<span style="color: #66cc66;">,</span> player<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; UnitRemoveBuffsBJ<span style="color: #66cc66;">&#40;</span>bj_REMOVEBUFFS_ALL<span style="color: #66cc66;">,</span> unit<span style="color: #66cc66;">&#41;</span> <span style="color: #808080; font-style: italic;">--this is done to undo metamorph</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> unitCode <span style="color: #66cc66;">=</span> GetUnitTypeId<span style="color: #66cc66;">&#40;</span>unit<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> unitCode <span style="color: #66cc66;">==</span> <span style="color: #cc66cc;">0</span> <span style="color: #aa9900; font-weight: bold;">then</span> <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>counterChangeUnitCode<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> player<span style="color: #66cc66;">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900; font-weight: bold;">not</span> player <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; player <span style="color: #66cc66;">=</span> GetOwningPlayer<span style="color: #66cc66;">&#40;</span>unit<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>show<span style="color: #66cc66;">&#40;</span><span style="color: #aa9900;">true</span><span style="color: #66cc66;">,</span> player<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>enablePick<span style="color: #66cc66;">&#40;</span><span style="color: #aa9900;">true</span><span style="color: #66cc66;">,</span> player<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; RemoveUnit<span style="color: #66cc66;">&#40;</span>unit<span style="color: #66cc66;">&#41;</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<span style="color: #808080; font-style: italic;">--=====</span><br />
<span style="color: #808080; font-style: italic;">--code start</span><br />
<span style="color: #808080; font-style: italic;">--=====</span><br />
BlzLoadTOCFile<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;war3mapImported<span style="color: #000099; font-weight: bold;">\\</span>HeroSelector.toc&quot;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #808080; font-style: italic;">--ex/import also &quot;HeroSelector.fdf&quot;</span><br />
HeroSelector<span style="color: #66cc66;">.</span>HeroButtons &nbsp;<span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#125;</span> <span style="color: #808080; font-style: italic;">--the clickable Buttons</span><br />
HeroSelector<span style="color: #66cc66;">.</span>UnitData <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#125;</span> <span style="color: #808080; font-style: italic;">--all avaiable selections</span><br />
HeroSelector<span style="color: #66cc66;">.</span>UnitDataPool <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#125;</span> <span style="color: #808080; font-style: italic;">-- all possible random values</span><br />
HeroSelector<span style="color: #66cc66;">.</span>Trigger <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#125;</span><br />
HeroSelector<span style="color: #66cc66;">.</span>CategoryButton <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#125;</span><br />
<br />
HeroSelector<span style="color: #66cc66;">.</span>Events <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#125;</span><br />
HeroSelector<span style="color: #66cc66;">.</span>Frames <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#125;</span><br />
HeroSelector<span style="color: #66cc66;">.</span>BanDelayed <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#125;</span><br />
HeroSelector<span style="color: #66cc66;">.</span>CategoryClickTrigger <span style="color: #66cc66;">=</span> CreateTrigger<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><br />
HeroSelector<span style="color: #66cc66;">.</span>Trigger<span style="color: #66cc66;">&#91;</span>HeroSelector<span style="color: #66cc66;">.</span>CategoryClickTrigger<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> TriggerAddAction<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>CategoryClickTrigger<span style="color: #66cc66;">,</span> <span style="color: #aa9900; font-weight: bold;">function</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> button <span style="color: #66cc66;">=</span> BlzGetTriggerFrame<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> category <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>CategoryButton<span style="color: #66cc66;">&#91;</span>button<span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>frameLoseFocus<span style="color: #66cc66;">&#40;</span>BlzGetTriggerFrame<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> player <span style="color: #66cc66;">=</span> GetTriggerPlayer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> playerData <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>Category<span style="color: #66cc66;">&#91;</span>player<span style="color: #66cc66;">&#93;</span> <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900; font-weight: bold;">not</span> playerData <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; playerData <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--has this category already?</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> BlzBitAnd<span style="color: #66cc66;">&#40;</span>playerData<span style="color: #66cc66;">,</span> category<span style="color: #66cc66;">.</span>Value<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">~=</span> <span style="color: #cc66cc;">0</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--yes, unable</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; playerData <span style="color: #66cc66;">=</span> playerData <span style="color: #66cc66;">-</span> category<span style="color: #66cc66;">.</span>Value<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> GetLocalPlayer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> player <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetTexture<span style="color: #66cc66;">&#40;</span>category<span style="color: #66cc66;">.</span>Icon<span style="color: #66cc66;">,</span> category<span style="color: #66cc66;">.</span>TextureDisabled<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #aa9900;">true</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetTexture<span style="color: #66cc66;">&#40;</span>category<span style="color: #66cc66;">.</span>IconPushed<span style="color: #66cc66;">,</span> category<span style="color: #66cc66;">.</span>TextureDisabled<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #aa9900;">true</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900; font-weight: bold;">not</span> HeroSelector<span style="color: #66cc66;">.</span>CategoryMultiSelect <span style="color: #aa9900; font-weight: bold;">and</span> HeroSelector<span style="color: #66cc66;">.</span>CategoryButton<span style="color: #66cc66;">&#91;</span>player<span style="color: #66cc66;">&#93;</span> &nbsp;<span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> lastCategory <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>CategoryButton<span style="color: #66cc66;">&#91;</span>player<span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetTexture<span style="color: #66cc66;">&#40;</span>lastCategory<span style="color: #66cc66;">.</span>Icon<span style="color: #66cc66;">,</span> lastCategory<span style="color: #66cc66;">.</span>TextureDisabled<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #aa9900;">true</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetTexture<span style="color: #66cc66;">&#40;</span>lastCategory<span style="color: #66cc66;">.</span>IconPushed<span style="color: #66cc66;">,</span> lastCategory<span style="color: #66cc66;">.</span>Texture<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #aa9900;">true</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> playerData <span style="color: #66cc66;">~=</span> <span style="color: #cc66cc;">0</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; playerData <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--no, enable</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; playerData <span style="color: #66cc66;">=</span> playerData <span style="color: #66cc66;">+</span> category<span style="color: #66cc66;">.</span>Value<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> GetLocalPlayer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> player <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetTexture<span style="color: #66cc66;">&#40;</span>category<span style="color: #66cc66;">.</span>Icon<span style="color: #66cc66;">,</span> category<span style="color: #66cc66;">.</span>Texture<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #aa9900;">true</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetTexture<span style="color: #66cc66;">&#40;</span>category<span style="color: #66cc66;">.</span>IconPushed<span style="color: #66cc66;">,</span> category<span style="color: #66cc66;">.</span>Texture<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #aa9900;">true</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>CategoryButton<span style="color: #66cc66;">&#91;</span>player<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> category<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>Category<span style="color: #66cc66;">&#91;</span>player<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> playerData<br />
<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> GetLocalPlayer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> player <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--update all buttons</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--buttons not having at least 1 selected category becomes partly transparent</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> buttonIndex<span style="color: #66cc66;">,</span> value <span style="color: #aa9900; font-weight: bold;">in</span> <span style="color: #0000aa;">ipairs</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>HeroButtons<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> button <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>HeroButtons<span style="color: #66cc66;">&#91;</span>buttonIndex<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Frame<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> unitCode <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>buttonIndex<span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> unitCode <span style="color: #aa9900; font-weight: bold;">and</span> unitCode <span style="color: #66cc66;">&gt;</span> <span style="color: #cc66cc;">0</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> playerData <span style="color: #66cc66;">==</span> <span style="color: #cc66cc;">0</span> <span style="color: #aa9900; font-weight: bold;">or</span> BlzBitAnd<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Category<span style="color: #66cc66;">,</span> playerData<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&gt;</span> <span style="color: #cc66cc;">0</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetAlpha<span style="color: #66cc66;">&#40;</span>button<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">255</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetAlpha<span style="color: #66cc66;">&#40;</span>button<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>CategoryFilteredAlpha<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><span style="color: #66cc66;">&#41;</span><br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>getDisabledIcon<span style="color: #66cc66;">&#40;</span>icon<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--ReplaceableTextures\CommandButtons\BTNHeroPaladin.tga -&gt; ReplaceableTextures\CommandButtonsDisabled\DISBTNHeroPaladin.tga</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #0000aa;">string.sub</span><span style="color: #66cc66;">&#40;</span>icon<span style="color: #66cc66;">,</span><span style="color: #cc66cc;">35</span><span style="color: #66cc66;">,</span><span style="color: #cc66cc;">35</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">~=</span> <span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>&quot;</span> <span style="color: #aa9900; font-weight: bold;">then</span> <span style="color: #aa9900; font-weight: bold;">return</span> icon <span style="color: #aa9900; font-weight: bold;">end</span> <span style="color: #808080; font-style: italic;">--this string has not enough chars return it</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--string.len(icon) &lt; 35 then return icon end --this string has not enough chars return it</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> prefix <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">string.sub</span><span style="color: #66cc66;">&#40;</span>icon<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">34</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> sufix <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">string.sub</span><span style="color: #66cc66;">&#40;</span>icon<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">36</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> prefix <span style="color: #66cc66;">..</span><span style="color: #ff6666;">&quot;Disabled<span style="color: #000099; font-weight: bold;">\\</span>DIS&quot;</span><span style="color: #66cc66;">..</span>sufix<br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>updateTooltip<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> tooltipFrame <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>HeroButtons<span style="color: #66cc66;">&#91;</span>HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Index<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Tooltip <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> unitData <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> unitData<span style="color: #66cc66;">.</span>Count <span style="color: #66cc66;">&gt;</span> HeroSelector<span style="color: #66cc66;">.</span>UnitCount <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetText<span style="color: #66cc66;">&#40;</span>tooltipFrame<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>TooltipPrefix<span style="color: #66cc66;">..</span>GetObjectName<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">..</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\n</span>|r(&quot;</span><span style="color: #66cc66;">..</span>GetLocalizedString<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>BanTooltip<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">..</span><span style="color: #ff6666;">&quot;)&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> unitData<span style="color: #66cc66;">.</span>Count <span style="color: #66cc66;">==</span> HeroSelector<span style="color: #66cc66;">.</span>UnitCount <span style="color: #aa9900; font-weight: bold;">or</span> unitData<span style="color: #66cc66;">.</span>InTeam<span style="color: #66cc66;">&#91;</span>GetPlayerTeam<span style="color: #66cc66;">&#40;</span>GetLocalPlayer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">&gt;=</span> HeroSelector<span style="color: #66cc66;">.</span>UnitCountPerTeam <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetText<span style="color: #66cc66;">&#40;</span>tooltipFrame<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>TooltipPrefix<span style="color: #66cc66;">..</span>GetObjectName<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">..</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\n</span>|r(&quot;</span><span style="color: #66cc66;">..</span>GetLocalizedString<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>ToManyTooltip<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">..</span><span style="color: #ff6666;">&quot;)&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">elseif</span> <span style="color: #aa9900; font-weight: bold;">not</span> HeroSelector<span style="color: #66cc66;">.</span>buttonRequirementDone<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">,</span> GetLocalPlayer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetText<span style="color: #66cc66;">&#40;</span>tooltipFrame<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>TooltipPrefix<span style="color: #66cc66;">..</span>GetObjectName<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">..</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\n</span>|r(&quot;</span><span style="color: #66cc66;">..</span>GetLocalizedString<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>TooltipRequires<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">..</span><span style="color: #ff6666;">&quot;)&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetText<span style="color: #66cc66;">&#40;</span>tooltipFrame<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>TooltipPrefix<span style="color: #66cc66;">..</span>GetObjectName<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>addCategory<span style="color: #66cc66;">&#40;</span>icon<span style="color: #66cc66;">,</span> text<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> HeroSelector<span style="color: #66cc66;">.</span>CategoryHighest <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>CategoryHighest <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>CategoryHighest<span style="color: #66cc66;">*</span><span style="color: #cc66cc;">2</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>CategoryHighest <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">1</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> newObject <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; <span style="color: #0000aa;">table.insert</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>Category<span style="color: #66cc66;">,</span> newObject<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; newObject<span style="color: #66cc66;">.</span>Value <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>CategoryHighest<br />
&nbsp; &nbsp; newObject<span style="color: #66cc66;">.</span>Texture <span style="color: #66cc66;">=</span> icon<br />
&nbsp; &nbsp; newObject<span style="color: #66cc66;">.</span>TextureDisabled <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>getDisabledIcon<span style="color: #66cc66;">&#40;</span>icon<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; newObject<span style="color: #66cc66;">.</span>Text <span style="color: #66cc66;">=</span> text<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> HeroSelector<span style="color: #66cc66;">.</span>Box <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> box <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>Box<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> lastButton <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>CategoryButton<span style="color: #66cc66;">&#91;</span><span style="color: #66cc66;">#</span>HeroSelector<span style="color: #66cc66;">.</span>CategoryButton<span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> button <span style="color: #66cc66;">=</span> BlzCreateFrame<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;HeroSelectorCategoryButton&quot;</span><span style="color: #66cc66;">,</span> box<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> icon <span style="color: #66cc66;">=</span> BlzGetFrameByName<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;HeroSelectorCategoryButtonIcon&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> iconPushed <span style="color: #66cc66;">=</span> BlzGetFrameByName<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;HeroSelectorCategoryButtonIconPushed&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> tooltip <span style="color: #66cc66;">=</span> BlzCreateFrame<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;HeroSelectorText&quot;</span><span style="color: #66cc66;">,</span> box<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> buttonIndex<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetText<span style="color: #66cc66;">&#40;</span>tooltip<span style="color: #66cc66;">,</span> GetLocalizedString<span style="color: #66cc66;">&#40;</span>text<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; newObject<span style="color: #66cc66;">.</span>Text <span style="color: #66cc66;">=</span> tooltip <span style="color: #808080; font-style: italic;">--when this is reached overwritte textframe with the tooltip</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetTooltip<span style="color: #66cc66;">&#40;</span>button<span style="color: #66cc66;">,</span> tooltip<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetPoint<span style="color: #66cc66;">&#40;</span>tooltip<span style="color: #66cc66;">,</span> FRAMEPOINT_BOTTOM<span style="color: #66cc66;">,</span> button<span style="color: #66cc66;">,</span> FRAMEPOINT_TOP<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetSize<span style="color: #66cc66;">&#40;</span>button<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0.02</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0.02</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetTexture<span style="color: #66cc66;">&#40;</span>icon<span style="color: #66cc66;">,</span> newObject<span style="color: #66cc66;">.</span>TextureDisabled<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #aa9900;">true</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetTexture<span style="color: #66cc66;">&#40;</span>iconPushed<span style="color: #66cc66;">,</span> newObject<span style="color: #66cc66;">.</span>TextureDisabled<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #aa9900;">true</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>CategoryButton<span style="color: #66cc66;">&#91;</span>button<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> newObject<br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzTriggerRegisterFrameEvent<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>CategoryClickTrigger<span style="color: #66cc66;">,</span> button<span style="color: #66cc66;">,</span> FRAMEEVENT_CONTROL_CLICK<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; newObject<span style="color: #66cc66;">.</span>Icon <span style="color: #66cc66;">=</span> icon<br />
&nbsp; &nbsp; &nbsp; &nbsp; newObject<span style="color: #66cc66;">.</span>IconPushed <span style="color: #66cc66;">=</span> iconPushed<br />
&nbsp; &nbsp; &nbsp; &nbsp; newObject<span style="color: #66cc66;">.</span>Button <span style="color: #66cc66;">=</span> button<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900; font-weight: bold;">not</span> lastButton <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> titleSize <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0.015</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> borderSize <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>BorderSize<span style="color: #66cc66;">&#91;</span>GetPlayerRace<span style="color: #66cc66;">&#40;</span>GetLocalPlayer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> y <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">-</span>borderSize <span style="color: #66cc66;">-</span> titleSize <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">0.01</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> x <span style="color: #66cc66;">=</span> borderSize<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetPoint<span style="color: #66cc66;">&#40;</span>button<span style="color: #66cc66;">,</span> FRAMEPOINT_TOPLEFT<span style="color: #66cc66;">,</span> box<span style="color: #66cc66;">,</span> FRAMEPOINT_TOPLEFT<span style="color: #66cc66;">,</span> x<span style="color: #66cc66;">,</span> y<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetPoint<span style="color: #66cc66;">&#40;</span>button<span style="color: #66cc66;">,</span> FRAMEPOINT_LEFT<span style="color: #66cc66;">,</span> lastButton<span style="color: #66cc66;">,</span> FRAMEPOINT_RIGHT<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000aa;">table.insert</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>CategoryButton<span style="color: #66cc66;">,</span> button<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000aa;">table.insert</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>Frames<span style="color: #66cc66;">,</span> tooltip<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000aa;">table.insert</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>Frames<span style="color: #66cc66;">,</span> icon<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000aa;">table.insert</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>Frames<span style="color: #66cc66;">,</span> button<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>addUnit<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">,</span> onlyRandom<span style="color: #66cc66;">,</span> requirement<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--no unitCode =&gt; empty field</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900; font-weight: bold;">not</span> unitCode <span style="color: #aa9900; font-weight: bold;">or</span> unitCode <span style="color: #66cc66;">==</span> <span style="color: #cc66cc;">0</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000aa;">table.insert</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--'Hpal' -&gt; number?</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #0000aa;">type</span><span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> <span style="color: #ff6666;">&quot;string&quot;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unitCode <span style="color: #66cc66;">=</span> FourCC<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--Such an object Exist?</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> GetObjectName<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> <span style="color: #ff6666;">&quot;&quot;</span> <span style="color: #aa9900; font-weight: bold;">then</span> <span style="color: #0000aa;">print</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">'&gt;I4'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">:</span>pack<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">,</span> <span style="color: #ff6666;">&quot;is not an valid Object&quot;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--only unique</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span> <span style="color: #aa9900; font-weight: bold;">then</span> <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>UnitDataPool<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">true</span> <span style="color: #808080; font-style: italic;">-- add to random</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span>Index <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> Count <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> InTeam <span style="color: #66cc66;">=</span> __jarray<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">,</span> Category <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> Requirment <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>convertReq<span style="color: #66cc66;">&#40;</span>requirement<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">,</span> RequirmentData <span style="color: #66cc66;">=</span> requirement<span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>autoDetectCategory<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900; font-weight: bold;">not</span> onlyRandom <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000aa;">table.insert</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">,</span> unitCode<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Index <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">#</span>HeroSelector<span style="color: #66cc66;">.</span>UnitData &nbsp; <span style="color: #808080; font-style: italic;">--remember the index for the unitCode</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>setFrameText<span style="color: #66cc66;">&#40;</span>frame<span style="color: #66cc66;">,</span> text<span style="color: #66cc66;">,</span> who<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> HeroSelector<span style="color: #66cc66;">.</span>includesPlayer<span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">,</span> GetLocalPlayer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetText<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>Title<span style="color: #66cc66;">,</span> text<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>setTitleText<span style="color: #66cc66;">&#40;</span>text<span style="color: #66cc66;">,</span> who<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>setFrameText<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>Title<span style="color: #66cc66;">,</span> text<span style="color: #66cc66;">,</span> who<span style="color: #66cc66;">&#41;</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>setAcceptButtonText<span style="color: #66cc66;">&#40;</span>text<span style="color: #66cc66;">,</span> who<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>setFrameText<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>AcceptButton<span style="color: #66cc66;">,</span> text<span style="color: #66cc66;">,</span> who<span style="color: #66cc66;">&#41;</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>setBanButtonText<span style="color: #66cc66;">&#40;</span>text<span style="color: #66cc66;">,</span> who<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>setFrameText<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>BanButton<span style="color: #66cc66;">,</span> text<span style="color: #66cc66;">,</span> who<span style="color: #66cc66;">&#41;</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>isPlayerRace<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">,</span> player<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>RequirmentData <span style="color: #66cc66;">==</span> GetPlayerRace<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span> <br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>IsPlayerForce<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">,</span> player<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> BlzForceHasPlayer<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>RequirmentData<span style="color: #66cc66;">,</span> player<span style="color: #66cc66;">&#41;</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>IsPlayerTeamNr<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">,</span> player<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>RequirmentData <span style="color: #66cc66;">==</span> GetPlayerTeam<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>isPlayer<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">,</span> player<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>RequirmentData <span style="color: #66cc66;">==</span> player<br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>HasPlayerTechLevel<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">,</span> player<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> GetPlayerTechCount<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>RequirmentData<span style="color: #66cc66;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">,</span> <span style="color: #aa9900;">true</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&gt;=</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>RequirmentData<span style="color: #66cc66;">&#91;</span><span style="color: #cc66cc;">2</span><span style="color: #66cc66;">&#93;</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>convertReq<span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900; font-weight: bold;">not</span> who <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #aa9900;">nil</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">elseif</span> <span style="color: #0000aa;">type</span><span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> <span style="color: #ff6666;">&quot;number&quot;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> HeroSelector<span style="color: #66cc66;">.</span>IsPlayerTeamNr<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">elseif</span> <span style="color: #0000aa;">type</span><span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> <span style="color: #ff6666;">&quot;table&quot;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> HeroSelector<span style="color: #66cc66;">.</span>HasPlayerTechLevel<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">elseif</span> <span style="color: #0000aa;">tostring</span><span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">:</span>sub<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">5</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> <span style="color: #ff6666;">&quot;race:&quot;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> HeroSelector<span style="color: #66cc66;">.</span>isPlayerRace<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">elseif</span> <span style="color: #0000aa;">tostring</span><span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">:</span>sub<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">7</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> <span style="color: #ff6666;">&quot;player:&quot;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> HeroSelector<span style="color: #66cc66;">.</span>isPlayer<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">elseif</span> <span style="color: #0000aa;">tostring</span><span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">:</span>sub<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">6</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> <span style="color: #ff6666;">&quot;force:&quot;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> HeroSelector<span style="color: #66cc66;">.</span>IsPlayerForce<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #aa9900;">nil</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>setUnitReq<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">,</span> who<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #0000aa;">type</span><span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> <span style="color: #ff6666;">&quot;string&quot;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; unitCode <span style="color: #66cc66;">=</span> FourCC<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--Such an object Exist?</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900; font-weight: bold;">not</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span> <span style="color: #aa9900; font-weight: bold;">then</span> <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>RequirmentData <span style="color: #66cc66;">=</span> who<br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Requirment <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>convertReq<span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">&#41;</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>setUnitCategory<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">,</span> category<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #0000aa;">type</span><span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> <span style="color: #ff6666;">&quot;string&quot;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; unitCode <span style="color: #66cc66;">=</span> FourCC<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--Such an object Exist?</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900; font-weight: bold;">not</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span> <span style="color: #aa9900; font-weight: bold;">then</span> <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Category <span style="color: #66cc66;">=</span> category<br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>addUnitCategory<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">,</span> category<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #0000aa;">type</span><span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> <span style="color: #ff6666;">&quot;string&quot;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; unitCode <span style="color: #66cc66;">=</span> FourCC<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--Such an object Exist?</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900; font-weight: bold;">not</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span> <span style="color: #aa9900; font-weight: bold;">then</span> <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Category <span style="color: #66cc66;">=</span> BlzBitOr<span style="color: #66cc66;">&#40;</span>category<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Category<span style="color: #66cc66;">&#41;</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>deselectButtons<span style="color: #66cc66;">&#40;</span>buttonIndex<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> buttonIndex <span style="color: #aa9900; font-weight: bold;">and</span> buttonIndex <span style="color: #66cc66;">&gt;</span> <span style="color: #cc66cc;">0</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> HeroSelector<span style="color: #66cc66;">.</span>HeroButtons<span style="color: #66cc66;">&#91;</span>GetLocalPlayer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">==</span> buttonIndex <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetVisible<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>SelectedIndikator<span style="color: #66cc66;">,</span> <span style="color: #aa9900;">false</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> index<span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> GetBJMaxPlayers<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span><span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> HeroSelector<span style="color: #66cc66;">.</span>HeroButtons<span style="color: #66cc66;">&#91;</span>Player<span style="color: #66cc66;">&#40;</span>index<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">==</span> buttonIndex <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>HeroButtons<span style="color: #66cc66;">&#91;</span>Player<span style="color: #66cc66;">&#40;</span>index<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> index<span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> GetBJMaxPlayers<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span><span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>HeroButtons<span style="color: #66cc66;">&#91;</span>Player<span style="color: #66cc66;">&#40;</span>index<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetVisible<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>SelectedIndikator<span style="color: #66cc66;">,</span> <span style="color: #aa9900;">false</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>buttonRequirementDone<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">,</span> player<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--true when no requirement is set or the requirment call is successful</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #aa9900; font-weight: bold;">not</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Requirment <span style="color: #aa9900; font-weight: bold;">or</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Requirment<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">,</span> player<span style="color: #66cc66;">&#41;</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>disableButtonIndex<span style="color: #66cc66;">&#40;</span>buttonIndex<span style="color: #66cc66;">,</span> teamNr<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> buttonIndex <span style="color: #66cc66;">&gt;</span> <span style="color: #cc66cc;">0</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> HeroSelector<span style="color: #66cc66;">.</span>includesPlayer<span style="color: #66cc66;">&#40;</span>teamNr<span style="color: #66cc66;">,</span> GetLocalPlayer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetEnable<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>HeroButtons<span style="color: #66cc66;">&#91;</span>buttonIndex<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Frame<span style="color: #66cc66;">,</span> <span style="color: #aa9900;">false</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> HeroSelector<span style="color: #66cc66;">.</span>HeroButtons<span style="color: #66cc66;">&#91;</span>GetLocalPlayer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">==</span> buttonIndex <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetVisible<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>SelectedIndikator<span style="color: #66cc66;">,</span> <span style="color: #aa9900;">false</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--deselect this Button from all players or the team</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> index<span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> GetBJMaxPlayers<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span><span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> player <span style="color: #66cc66;">=</span> Player<span style="color: #66cc66;">&#40;</span>index<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #66cc66;">&#40;</span><span style="color: #aa9900; font-weight: bold;">not</span> teamNr <span style="color: #aa9900; font-weight: bold;">or</span> teamNr <span style="color: #66cc66;">==</span> GetPlayerTeam<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">and</span> HeroSelector<span style="color: #66cc66;">.</span>HeroButtons<span style="color: #66cc66;">&#91;</span>player<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">==</span> buttonIndex <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>HeroButtons<span style="color: #66cc66;">&#91;</span>player<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>enableButtonIndex<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">,</span> buttonIndex<span style="color: #66cc66;">,</span> teamNr<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> buttonIndex <span style="color: #66cc66;">&gt;</span> <span style="color: #cc66cc;">0</span> <span style="color: #aa9900; font-weight: bold;">and</span> <span style="color: #66cc66;">&#40;</span><span style="color: #aa9900; font-weight: bold;">not</span> teamNr <span style="color: #aa9900; font-weight: bold;">or</span> teamNr <span style="color: #66cc66;">==</span> GetPlayerTeam<span style="color: #66cc66;">&#40;</span>GetLocalPlayer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetEnable<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>HeroButtons<span style="color: #66cc66;">&#91;</span>buttonIndex<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Frame<span style="color: #66cc66;">,</span> <span style="color: #aa9900;">true</span> <span style="color: #aa9900; font-weight: bold;">and</span> <span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>BanIgnoreRequirment <span style="color: #aa9900; font-weight: bold;">and</span> BlzFrameIsVisible<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>BanButton<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">or</span> HeroSelector<span style="color: #66cc66;">.</span>buttonRequirementDone<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">,</span> GetLocalPlayer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>counterChangeUnitCode<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">,</span> add<span style="color: #66cc66;">,</span> player<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900; font-weight: bold;">not</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span> <span style="color: #aa9900; font-weight: bold;">then</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span>Count <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> InTeam <span style="color: #66cc66;">=</span> __jarray<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#125;</span> <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> buttonIndex <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Index<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900; font-weight: bold;">not</span> buttonIndex &nbsp;<span style="color: #aa9900; font-weight: bold;">then</span> buttonIndex <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0</span> <span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> teamNr <span style="color: #66cc66;">=</span> GetPlayerTeam<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>InTeam<span style="color: #66cc66;">&#91;</span>teamNr<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>InTeam<span style="color: #66cc66;">&#91;</span>teamNr<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">+</span> add<br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Count <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Count <span style="color: #66cc66;">+</span> add<br />
<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Count <span style="color: #66cc66;">&gt;=</span> HeroSelector<span style="color: #66cc66;">.</span>UnitCount <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--disable for all</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>disableButtonIndex<span style="color: #66cc66;">&#40;</span>buttonIndex<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--enable for all</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>enableButtonIndex<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">,</span> buttonIndex<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>InTeam<span style="color: #66cc66;">&#91;</span>teamNr<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">&gt;=</span> HeroSelector<span style="color: #66cc66;">.</span>UnitCountPerTeam &nbsp;<span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--disable for this team</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>disableButtonIndex<span style="color: #66cc66;">&#40;</span>buttonIndex<span style="color: #66cc66;">,</span> teamNr<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>updateTooltip<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">&#41;</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>rollOption<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">,</span> includeRandomOnly<span style="color: #66cc66;">,</span> exculdedIndex<span style="color: #66cc66;">,</span> category<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900; font-weight: bold;">not</span> exculdedIndex <span style="color: #aa9900; font-weight: bold;">then</span> exculdedIndex <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0</span> <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900; font-weight: bold;">not</span> category <span style="color: #aa9900; font-weight: bold;">then</span> category <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0</span> <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> teamNr <span style="color: #66cc66;">=</span> GetPlayerTeam<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> options <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> unitCode<span style="color: #66cc66;">,</span> value <span style="color: #aa9900; font-weight: bold;">in</span> <span style="color: #0000aa;">pairs</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>UnitDataPool<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> allowed <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">true</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--total limited reached?</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Count <span style="color: #66cc66;">&gt;=</span> HeroSelector<span style="color: #66cc66;">.</span>UnitCount <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; allowed <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">false</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--print(GetObjectName(unitCode))</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--print(&quot;rejected total limit&quot;)</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--team limited reached?</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> allowed <span style="color: #aa9900; font-weight: bold;">and</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>InTeam<span style="color: #66cc66;">&#91;</span>teamNr<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">&gt;=</span> HeroSelector<span style="color: #66cc66;">.</span>UnitCountPerTeam &nbsp;<span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--print(GetObjectName(unitCode))</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--print(&quot;rejected team limit&quot;)</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; allowed <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">false</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--allow randomOnly?</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> allowed <span style="color: #aa9900; font-weight: bold;">and</span> <span style="color: #aa9900; font-weight: bold;">not</span> includeRandomOnly <span style="color: #aa9900; font-weight: bold;">and</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Index <span style="color: #66cc66;">==</span> <span style="color: #cc66cc;">0</span> &nbsp;<span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--print(GetObjectName(unitCode))</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--print(&quot;rejected random only&quot;)</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; allowed <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">false</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--this index is excluded? This can make sure you get another button.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> allowed <span style="color: #aa9900; font-weight: bold;">and</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Index <span style="color: #66cc66;">&gt;</span> <span style="color: #cc66cc;">0</span> <span style="color: #aa9900; font-weight: bold;">and</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Index <span style="color: #66cc66;">==</span> exculdedIndex <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--print(GetObjectName(unitCode))</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--print(&quot;rejected exclude&quot;)</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; allowed <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">false</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--fullfills the requirement?</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> allowed <span style="color: #aa9900; font-weight: bold;">and</span> <span style="color: #aa9900; font-weight: bold;">not</span> HeroSelector<span style="color: #66cc66;">.</span>buttonRequirementDone<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">,</span> player<span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--print(GetObjectName(unitCode))</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--print(&quot;rejected requirement&quot;)</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; allowed <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">false</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--when having an given an category only allow options having that category atleast partly</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> allowed <span style="color: #aa9900; font-weight: bold;">and</span> category <span style="color: #aa9900; font-weight: bold;">and</span> category <span style="color: #66cc66;">&gt;</span> <span style="color: #cc66cc;">0</span> <span style="color: #aa9900; font-weight: bold;">and</span> BlzBitAnd<span style="color: #66cc66;">&#40;</span>category<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Category<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> <span style="color: #cc66cc;">0</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--print(GetObjectName(unitCode))</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--print(&quot; &nbsp;rejected category&quot;, category, HeroSelector.UnitData[unitCode].Category)</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; allowed <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">false</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> allowed <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000aa;">table.insert</span><span style="color: #66cc66;">&#40;</span>options<span style="color: #66cc66;">,</span> unitCode<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--nothing is allwoed?</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #66cc66;">#</span>options <span style="color: #66cc66;">==</span> <span style="color: #cc66cc;">0</span> <span style="color: #aa9900; font-weight: bold;">then</span> <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #aa9900;">nil</span> <span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> options<span style="color: #66cc66;">&#91;</span>GetRandomInt<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">#</span>options<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#93;</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>doRandom<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> category <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> HeroSelector<span style="color: #66cc66;">.</span>CategoryAffectRandom <span style="color: #aa9900; font-weight: bold;">then</span> category <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>Category<span style="color: #66cc66;">&#91;</span>player<span style="color: #66cc66;">&#93;</span> <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> unitCode <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>rollOption<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">,</span> <span style="color: #aa9900;">true</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> category<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900; font-weight: bold;">not</span> unitCode <span style="color: #aa9900; font-weight: bold;">then</span> <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> unit <span style="color: #66cc66;">=</span> CreateUnit<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">,</span> unitCode<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>counterChangeUnitCode<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> player<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>unitCreated<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">,</span> unit<span style="color: #66cc66;">,</span> <span style="color: #aa9900;">true</span><span style="color: #66cc66;">&#41;</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>doPick<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--pick what currently is selected, returns true on success returns false when something went wrong,</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900; font-weight: bold;">not</span> HeroSelector<span style="color: #66cc66;">.</span>HeroButtons<span style="color: #66cc66;">&#91;</span>player<span style="color: #66cc66;">&#93;</span> <span style="color: #aa9900; font-weight: bold;">then</span> <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #aa9900;">false</span> <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> buttonIndex <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>HeroButtons<span style="color: #66cc66;">&#91;</span>player<span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> buttonIndex <span style="color: #66cc66;">&lt;=</span> <span style="color: #cc66cc;">0</span> <span style="color: #aa9900; font-weight: bold;">then</span> <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #aa9900;">false</span> <span style="color: #aa9900; font-weight: bold;">end</span> <span style="color: #808080; font-style: italic;">--reject nothing selected</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> unitCode <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>buttonIndex<span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900; font-weight: bold;">not</span> HeroSelector<span style="color: #66cc66;">.</span>buttonRequirementDone<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">,</span> player<span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">then</span> <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #aa9900;">false</span> <span style="color: #aa9900; font-weight: bold;">end</span> <span style="color: #808080; font-style: italic;">--requirment fullfilled</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> unit <span style="color: #66cc66;">=</span> CreateUnit<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">,</span> unitCode<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>counterChangeUnitCode<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> player<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>unitCreated<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">,</span> unit<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #aa9900;">true</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>forceRandom<span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--this is a wrapper for doRandom allowing different dataTypes</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900; font-weight: bold;">not</span> who <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> index<span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> GetBJMaxPlayers<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span><span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> GetPlayerSlotState<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> PLAYER_SLOT_STATE_PLAYING <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>doRandom<span style="color: #66cc66;">&#40;</span>Player<span style="color: #66cc66;">&#40;</span>index<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">elseif</span> <span style="color: #0000aa;">type</span><span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> <span style="color: #ff6666;">&quot;number&quot;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> index<span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> GetBJMaxPlayers<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span><span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> player <span style="color: #66cc66;">=</span> Player<span style="color: #66cc66;">&#40;</span>index<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> GetPlayerSlotState<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> PLAYER_SLOT_STATE_PLAYING <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> GetPlayerTeam<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> who <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>doRandom<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">elseif</span> <span style="color: #0000aa;">tostring</span><span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">:</span>sub<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">5</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> <span style="color: #ff6666;">&quot;race:&quot;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> index<span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> GetBJMaxPlayers<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span><span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> player <span style="color: #66cc66;">=</span> Player<span style="color: #66cc66;">&#40;</span>index<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> GetPlayerSlotState<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> PLAYER_SLOT_STATE_PLAYING <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> GetPlayerRace<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> who <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>doRandom<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">elseif</span> <span style="color: #0000aa;">tostring</span><span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">:</span>sub<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">7</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> <span style="color: #ff6666;">&quot;player:&quot;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>doRandom<span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">elseif</span> <span style="color: #0000aa;">tostring</span><span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">:</span>sub<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">6</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> <span style="color: #ff6666;">&quot;force:&quot;</span><span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; ForForce<span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">,</span> <span style="color: #aa9900; font-weight: bold;">function</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> HeroSelector<span style="color: #66cc66;">.</span>doRandom<span style="color: #66cc66;">&#40;</span>GetEnumPlayer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">end</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>forcePick<span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900; font-weight: bold;">not</span> who <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> index<span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> GetBJMaxPlayers<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span><span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> player <span style="color: #66cc66;">=</span> Player<span style="color: #66cc66;">&#40;</span>index<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> GetPlayerSlotState<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> PLAYER_SLOT_STATE_PLAYING <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900; font-weight: bold;">not</span> HeroSelector<span style="color: #66cc66;">.</span>doPick<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">then</span> <span style="color: #808080; font-style: italic;">--do picking, when that fails doRandom</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>doRandom<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">elseif</span> <span style="color: #0000aa;">type</span><span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> <span style="color: #ff6666;">&quot;number&quot;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> index<span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> GetBJMaxPlayers<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span><span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> player <span style="color: #66cc66;">=</span> Player<span style="color: #66cc66;">&#40;</span>index<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> GetPlayerSlotState<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> PLAYER_SLOT_STATE_PLAYING <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> GetPlayerTeam<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> who <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900; font-weight: bold;">not</span> HeroSelector<span style="color: #66cc66;">.</span>doPick<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>doRandom<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">elseif</span> <span style="color: #0000aa;">tostring</span><span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">:</span>sub<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">5</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> <span style="color: #ff6666;">&quot;race:&quot;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> index<span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> GetBJMaxPlayers<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span><span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> player <span style="color: #66cc66;">=</span> Player<span style="color: #66cc66;">&#40;</span>index<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> GetPlayerSlotState<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> PLAYER_SLOT_STATE_PLAYING <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> GetPlayerRace<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> who <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900; font-weight: bold;">not</span> HeroSelector<span style="color: #66cc66;">.</span>doPick<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>doRandom<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">elseif</span> <span style="color: #0000aa;">tostring</span><span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">:</span>sub<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">7</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> <span style="color: #ff6666;">&quot;player:&quot;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900; font-weight: bold;">not</span> HeroSelector<span style="color: #66cc66;">.</span>doPick<span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>doRandom<span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">&#41;</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">elseif</span> <span style="color: #0000aa;">tostring</span><span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">:</span>sub<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">6</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> <span style="color: #ff6666;">&quot;force:&quot;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; ForForce<span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">,</span> <span style="color: #aa9900; font-weight: bold;">function</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> player <span style="color: #66cc66;">=</span> GetEnumPlayer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900; font-weight: bold;">not</span> HeroSelector<span style="color: #66cc66;">.</span>doPick<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>doRandom<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>includesPlayer<span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">,</span> player<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900; font-weight: bold;">not</span> who <span style="color: #aa9900; font-weight: bold;">then</span> <span style="color: #808080; font-style: italic;">--there is no who -&gt; everyone</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #aa9900;">true</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">elseif</span> <span style="color: #0000aa;">type</span><span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> <span style="color: #ff6666;">&quot;number&quot;</span> <span style="color: #aa9900; font-weight: bold;">and</span> GetPlayerTeam<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> who <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #aa9900;">true</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">elseif</span> <span style="color: #0000aa;">tostring</span><span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">:</span>sub<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">5</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> <span style="color: #ff6666;">&quot;race:&quot;</span> <span style="color: #aa9900; font-weight: bold;">and</span> GetPlayerRace<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> who &nbsp;<span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #aa9900;">true</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">elseif</span> <span style="color: #0000aa;">tostring</span><span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">:</span>sub<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">7</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> <span style="color: #ff6666;">&quot;player:&quot;</span> <span style="color: #aa9900; font-weight: bold;">and</span> player <span style="color: #66cc66;">==</span> who <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #aa9900;">true</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">elseif</span> <span style="color: #0000aa;">tostring</span><span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">:</span>sub<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">6</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> <span style="color: #ff6666;">&quot;force:&quot;</span> <span style="color: #aa9900; font-weight: bold;">and</span> BlzForceHasPlayer<span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">,</span> player<span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #aa9900;">true</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #aa9900;">false</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>enablePick<span style="color: #66cc66;">&#40;</span>flag<span style="color: #66cc66;">,</span> who<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> index <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">#</span>HeroSelector<span style="color: #66cc66;">.</span>BanDelayed<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> ban <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">table.remove</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>BanDelayed<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>counterChangeUnitCode<span style="color: #66cc66;">&#40;</span>ban<span style="color: #66cc66;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>UnitCount <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> ban<span style="color: #66cc66;">&#91;</span><span style="color: #cc66cc;">2</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> HeroSelector<span style="color: #66cc66;">.</span>includesPlayer<span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">,</span> GetLocalPlayer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetVisible<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>AcceptButton<span style="color: #66cc66;">,</span> <span style="color: #aa9900;">true</span> <span style="color: #aa9900; font-weight: bold;">and</span> HeroSelector<span style="color: #66cc66;">.</span>AcceptButtonIsShown<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetVisible<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>RandomButton<span style="color: #66cc66;">,</span> <span style="color: #aa9900;">true</span> <span style="color: #aa9900; font-weight: bold;">and</span> HeroSelector<span style="color: #66cc66;">.</span>RandomButtonIsShown<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetVisible<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>BanButton<span style="color: #66cc66;">,</span> <span style="color: #aa9900;">false</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetEnable<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>AcceptButton<span style="color: #66cc66;">,</span> flag<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetEnable<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>RandomButton<span style="color: #66cc66;">,</span> flag<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetModel<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>SelectedIndikator<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>IndicatorPathPick<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> HeroSelector<span style="color: #66cc66;">.</span>BanIgnoreRequirment <span style="color: #aa9900; font-weight: bold;">then</span> HeroSelector<span style="color: #66cc66;">.</span>update<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>enableBan<span style="color: #66cc66;">&#40;</span>flag<span style="color: #66cc66;">,</span> who<span style="color: #66cc66;">&#41;</span> &nbsp;<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> HeroSelector<span style="color: #66cc66;">.</span>includesPlayer<span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">,</span> GetLocalPlayer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetVisible<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>AcceptButton<span style="color: #66cc66;">,</span> <span style="color: #aa9900;">false</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetVisible<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>RandomButton<span style="color: #66cc66;">,</span> <span style="color: #aa9900;">false</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetVisible<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>BanButton<span style="color: #66cc66;">,</span> <span style="color: #aa9900;">true</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetEnable<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>BanButton<span style="color: #66cc66;">,</span> flag<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetModel<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>SelectedIndikator<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>IndicatorPathBan<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> HeroSelector<span style="color: #66cc66;">.</span>BanIgnoreRequirment <span style="color: #aa9900; font-weight: bold;">then</span> HeroSelector<span style="color: #66cc66;">.</span>update<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span> &nbsp; &nbsp;<br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>destroy<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> key<span style="color: #66cc66;">,</span> value <span style="color: #aa9900; font-weight: bold;">in</span> <span style="color: #0000aa;">ipairs</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>Frames<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzDestroyFrame<span style="color: #66cc66;">&#40;</span>value<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>Frames <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">nil</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> key<span style="color: #66cc66;">,</span> value <span style="color: #aa9900; font-weight: bold;">in</span> <span style="color: #0000aa;">ipairs</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>HeroButtons<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzDestroyFrame<span style="color: #66cc66;">&#40;</span>value<span style="color: #66cc66;">.</span>Tooltip<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzDestroyFrame<span style="color: #66cc66;">&#40;</span>value<span style="color: #66cc66;">.</span>Icon<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzDestroyFrame<span style="color: #66cc66;">&#40;</span>value<span style="color: #66cc66;">.</span>IconDisabled<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzDestroyFrame<span style="color: #66cc66;">&#40;</span>value<span style="color: #66cc66;">.</span>Frame<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>HeroButtons <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">nil</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> key<span style="color: #66cc66;">,</span> value <span style="color: #aa9900; font-weight: bold;">in</span> <span style="color: #0000aa;">ipairs</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>Trigger<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; TriggerRemoveAction<span style="color: #66cc66;">&#40;</span>value<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>Trigger<span style="color: #66cc66;">&#91;</span>value<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; DestroyTrigger<span style="color: #66cc66;">&#40;</span>value<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>Trigger <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">nil</span><br />
<br />
&nbsp; &nbsp; BlzDestroyFrame<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>SelectedIndikator<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>UnitData <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">nil</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>BorderSize <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">nil</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>Events <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">nil</span><br />
&nbsp; &nbsp; HeroSelector <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">nil</span><br />
&nbsp; &nbsp; <br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>frameLoseFocus<span style="color: #66cc66;">&#40;</span>frame<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> BlzFrameGetEnable<span style="color: #66cc66;">&#40;</span>frame<span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetEnable<span style="color: #66cc66;">&#40;</span>frame<span style="color: #66cc66;">,</span> <span style="color: #aa9900;">false</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetEnable<span style="color: #66cc66;">&#40;</span>frame<span style="color: #66cc66;">,</span> <span style="color: #aa9900;">true</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>actionPressHeroButton<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> button <span style="color: #66cc66;">=</span> BlzGetTriggerFrame<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> player <span style="color: #66cc66;">=</span> GetTriggerPlayer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> buttonIndex <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>HeroButtons<span style="color: #66cc66;">&#91;</span>button<span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> unitCode <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>buttonIndex<span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>HeroButtons<span style="color: #66cc66;">&#91;</span>player<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> buttonIndex<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> GetLocalPlayer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> player <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>frameLoseFocus<span style="color: #66cc66;">&#40;</span>BlzGetTriggerFrame<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> GetLocalPlayer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> player <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetVisible<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>SelectedIndikator<span style="color: #66cc66;">,</span> <span style="color: #aa9900;">true</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetPoint<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>SelectedIndikator<span style="color: #66cc66;">,</span> FRAMEPOINT_TOPLEFT<span style="color: #66cc66;">,</span> button<span style="color: #66cc66;">,</span> FRAMEPOINT_TOPLEFT<span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">0.001</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0.001</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetPoint<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>SelectedIndikator<span style="color: #66cc66;">,</span> FRAMEPOINT_BOTTOMRIGHT<span style="color: #66cc66;">,</span> button<span style="color: #66cc66;">,</span> FRAMEPOINT_BOTTOMRIGHT<span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">0.0012</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">0.0016</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>buttonSelected<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">,</span> unitCode<span style="color: #66cc66;">&#41;</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>actionRandomButton<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> player <span style="color: #66cc66;">=</span> GetTriggerPlayer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>frameLoseFocus<span style="color: #66cc66;">&#40;</span>BlzGetTriggerFrame<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> HeroSelector<span style="color: #66cc66;">.</span>RandomButtonPick <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>doRandom<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> unitCode <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>rollOption<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">,</span> <span style="color: #aa9900;">false</span><span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>HeroButtons<span style="color: #66cc66;">&#91;</span>player<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>Category<span style="color: #66cc66;">&#91;</span>player<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> unitCode <span style="color: #aa9900; font-weight: bold;">and</span> GetLocalPlayer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> player <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> buttonIndex <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Index<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameClick<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>HeroButtons<span style="color: #66cc66;">&#91;</span>buttonIndex<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Frame<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>actionAcceptButton<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>frameLoseFocus<span style="color: #66cc66;">&#40;</span>BlzGetTriggerFrame<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>doPick<span style="color: #66cc66;">&#40;</span>GetTriggerPlayer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>actionBanButton<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> player <span style="color: #66cc66;">=</span> GetTriggerPlayer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>frameLoseFocus<span style="color: #66cc66;">&#40;</span>BlzGetTriggerFrame<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900; font-weight: bold;">not</span> HeroSelector<span style="color: #66cc66;">.</span>HeroButtons<span style="color: #66cc66;">&#91;</span>player<span style="color: #66cc66;">&#93;</span> <span style="color: #aa9900; font-weight: bold;">then</span> <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> buttonIndex <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>HeroButtons<span style="color: #66cc66;">&#91;</span>player<span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> buttonIndex <span style="color: #66cc66;">&lt;=</span> <span style="color: #cc66cc;">0</span> <span style="color: #aa9900; font-weight: bold;">then</span> <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #aa9900; font-weight: bold;">end</span> <span style="color: #808080; font-style: italic;">--reject nothing selected</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> unitCode <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>buttonIndex<span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900; font-weight: bold;">not</span> HeroSelector<span style="color: #66cc66;">.</span>DelayBanUntilPick <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>counterChangeUnitCode<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>UnitCount <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> player<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000aa;">table.insert</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>BanDelayed<span style="color: #66cc66;">,</span> <span style="color: #66cc66;">&#123;</span>unitCode<span style="color: #66cc66;">,</span> player<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>unitBaned<span style="color: #66cc66;">&#40;</span>player<span style="color: #66cc66;">,</span> unitCode<span style="color: #66cc66;">&#41;</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>update<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> buttonIndex<span style="color: #66cc66;">,</span> value <span style="color: #aa9900; font-weight: bold;">in</span> <span style="color: #0000aa;">ipairs</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>HeroButtons<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--have data for this button?</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>buttonIndex<span style="color: #66cc66;">&#93;</span> <span style="color: #aa9900; font-weight: bold;">and</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>buttonIndex<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">&gt;</span> <span style="color: #cc66cc;">0</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> unitCode <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>buttonIndex<span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Count <span style="color: #66cc66;">&gt;=</span> HeroSelector<span style="color: #66cc66;">.</span>UnitCount <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--disable for all</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>disableButtonIndex<span style="color: #66cc66;">&#40;</span>buttonIndex<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--enable for all</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>enableButtonIndex<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">,</span> buttonIndex<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> teamNr<span style="color: #66cc66;">,</span> inTeamCount <span style="color: #aa9900; font-weight: bold;">in</span> <span style="color: #0000aa;">pairs</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>InTeam<span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>unitCode<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>InTeam<span style="color: #66cc66;">&#91;</span>teamNr<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">&gt;=</span> HeroSelector<span style="color: #66cc66;">.</span>UnitCountPerTeam &nbsp;<span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--disable for this team</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>disableButtonIndex<span style="color: #66cc66;">&#40;</span>buttonIndex<span style="color: #66cc66;">,</span> teamNr<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetTexture<span style="color: #66cc66;">&#40;</span>value<span style="color: #66cc66;">.</span>Icon<span style="color: #66cc66;">,</span> BlzGetAbilityIcon<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>ButtonBlendAll<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetTexture<span style="color: #66cc66;">&#40;</span>value<span style="color: #66cc66;">.</span>IconPushed<span style="color: #66cc66;">,</span> BlzGetAbilityIcon<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>ButtonBlendAll<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetTexture<span style="color: #66cc66;">&#40;</span>value<span style="color: #66cc66;">.</span>IconDisabled<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>getDisabledIcon<span style="color: #66cc66;">&#40;</span>BlzGetAbilityIcon<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>ButtonBlendAll<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--BlzFrameSetText(value.Tooltip, HeroSelector.TooltipPrefix..GetObjectName(unitCode))</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>updateTooltip<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--no, make it unclickable and empty</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetEnable<span style="color: #66cc66;">&#40;</span>value<span style="color: #66cc66;">.</span>Frame<span style="color: #66cc66;">,</span> <span style="color: #aa9900;">false</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetTexture<span style="color: #66cc66;">&#40;</span>value<span style="color: #66cc66;">.</span>Icon<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>EmptyButtonPath<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #aa9900;">true</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetTexture<span style="color: #66cc66;">&#40;</span>value<span style="color: #66cc66;">.</span>IconPushed<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>EmptyButtonPath<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #aa9900;">true</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetTexture<span style="color: #66cc66;">&#40;</span>value<span style="color: #66cc66;">.</span>IconDisabled<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>EmptyButtonPath<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #aa9900;">true</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>showFrame<span style="color: #66cc66;">&#40;</span>frame<span style="color: #66cc66;">,</span> flag<span style="color: #66cc66;">,</span> who<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> HeroSelector<span style="color: #66cc66;">.</span>includesPlayer<span style="color: #66cc66;">&#40;</span>who<span style="color: #66cc66;">,</span> GetLocalPlayer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetVisible<span style="color: #66cc66;">&#40;</span>frame<span style="color: #66cc66;">,</span> flag<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">function</span> HeroSelector<span style="color: #66cc66;">.</span>show<span style="color: #66cc66;">&#40;</span>flag<span style="color: #66cc66;">,</span> who<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>showFrame<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>Box<span style="color: #66cc66;">,</span> flag<span style="color: #66cc66;">,</span> who<span style="color: #66cc66;">&#41;</span><br />
<span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
<span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> backUp <span style="color: #66cc66;">=</span> MarkGameStarted<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> MarkGameStarted<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; backUp<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; backUp <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">nil</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>initHeroes<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> &nbsp; &nbsp;<br />
<br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--for key, value in ipairs(HeroSelector.UnitData)</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--do</span><br />
<span style="color: #808080; font-style: italic;">-- &nbsp; &nbsp; &nbsp; &nbsp;print(key, ('&gt;I4'):pack(value), GetObjectName(value))</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--end</span><br />
<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> titleSize <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0.015</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> buttonSize <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>ButtonSize<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> borderSize <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>BorderSize<span style="color: #66cc66;">&#91;</span>GetPlayerRace<span style="color: #66cc66;">&#40;</span>GetLocalPlayer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> colCount <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>ButtonColCount<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> rowCount <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>ButtonRowCount<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> box <span style="color: #66cc66;">=</span> BlzCreateFrame<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>BoxFrameName<span style="color: #66cc66;">,</span> BlzGetOriginFrame<span style="color: #66cc66;">&#40;</span>ORIGIN_FRAME_GAME_UI<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--local boxTitle = BlzCreateFrame(HeroSelector.BoxFrameName, box, 0, 0)</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> boxBottom <span style="color: #66cc66;">=</span> BlzCreateFrame<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;HeroSelectorRaceTopBox&quot;</span><span style="color: #66cc66;">,</span> box<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> titel <span style="color: #66cc66;">=</span> BlzCreateFrame<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;HeroSelectorTitle&quot;</span><span style="color: #66cc66;">,</span> box<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> onClickTrigger <span style="color: #66cc66;">=</span> CreateTrigger<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>Trigger<span style="color: #66cc66;">&#91;</span>onClickTrigger<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> TriggerAddAction<span style="color: #66cc66;">&#40;</span>onClickTrigger<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>actionPressHeroButton<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>Title <span style="color: #66cc66;">=</span> titel<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> indicatorParent <span style="color: #66cc66;">=</span> BlzCreateFrameByType<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;BUTTON&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #ff6666;">&quot;MyHeroIndikatorParent&quot;</span><span style="color: #66cc66;">,</span> box<span style="color: #66cc66;">,</span> <span style="color: #ff6666;">&quot;&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>SelectedIndikator <span style="color: #66cc66;">=</span> BlzCreateFrameByType<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;SPRITE&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #ff6666;">&quot;MyHeroIndikator&quot;</span><span style="color: #66cc66;">,</span> indicatorParent<span style="color: #66cc66;">,</span> <span style="color: #ff6666;">&quot;&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; BlzFrameSetLevel<span style="color: #66cc66;">&#40;</span>indicatorParent<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">9</span><span style="color: #66cc66;">&#41;</span><br />
<br />
&nbsp; &nbsp; BlzFrameSetModel<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>SelectedIndikator<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>IndicatorPathPick<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; BlzFrameSetScale<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>SelectedIndikator<span style="color: #66cc66;">,</span> buttonSize<span style="color: #66cc66;">/</span><span style="color: #cc66cc;">0.036</span><span style="color: #66cc66;">&#41;</span> <span style="color: #808080; font-style: italic;">--scale the model to the button size.</span><br />
&nbsp; &nbsp; <br />
<br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--BlzFrameSetPoint(boxTitle, FRAMEPOINT_TOPLEFT, box, FRAMEPOINT_TOPLEFT, 0, -(titleSize - 0.003 + 0.9*borderSize))</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--BlzFrameSetPoint(boxTitle, FRAMEPOINT_BOTTOMRIGHT, box, FRAMEPOINT_TOPRIGHT, 0, - 0.9*borderSize - titleSize - 0.003 -HeroSelector.CategorySize)</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--BlzFrameSetSize(boxTitle, 0.01, 0.1)</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">-- human UI size differs much, needs other numbers</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> GetPlayerRace<span style="color: #66cc66;">&#40;</span>GetLocalPlayer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> RACE_HUMAN <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetPoint<span style="color: #66cc66;">&#40;</span>boxBottom<span style="color: #66cc66;">,</span> FRAMEPOINT_TOPLEFT<span style="color: #66cc66;">,</span> box<span style="color: #66cc66;">,</span> FRAMEPOINT_TOPLEFT<span style="color: #66cc66;">,</span> borderSize<span style="color: #66cc66;">*</span><span style="color: #cc66cc;">0.055</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">0.9</span><span style="color: #66cc66;">*</span>borderSize <span style="color: #66cc66;">-</span> titleSize <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">0.003</span> <span style="color: #66cc66;">-</span>HeroSelector<span style="color: #66cc66;">.</span>CategorySize<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetPoint<span style="color: #66cc66;">&#40;</span>boxBottom<span style="color: #66cc66;">,</span> FRAMEPOINT_TOPRIGHT<span style="color: #66cc66;">,</span> box<span style="color: #66cc66;">,</span> FRAMEPOINT_TOPRIGHT<span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span>borderSize<span style="color: #66cc66;">*</span><span style="color: #cc66cc;">0.055</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">0.9</span><span style="color: #66cc66;">*</span>borderSize <span style="color: #66cc66;">-</span> titleSize <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">0.003</span> <span style="color: #66cc66;">-</span>HeroSelector<span style="color: #66cc66;">.</span>CategorySize<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetPoint<span style="color: #66cc66;">&#40;</span>boxBottom<span style="color: #66cc66;">,</span> FRAMEPOINT_TOPLEFT<span style="color: #66cc66;">,</span> box<span style="color: #66cc66;">,</span> FRAMEPOINT_TOPLEFT<span style="color: #66cc66;">,</span> borderSize<span style="color: #66cc66;">*</span><span style="color: #cc66cc;">0.25</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">0.9</span><span style="color: #66cc66;">*</span>borderSize <span style="color: #66cc66;">-</span> titleSize <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">0.003</span> <span style="color: #66cc66;">-</span>HeroSelector<span style="color: #66cc66;">.</span>CategorySize<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetPoint<span style="color: #66cc66;">&#40;</span>boxBottom<span style="color: #66cc66;">,</span> FRAMEPOINT_TOPRIGHT<span style="color: #66cc66;">,</span> box<span style="color: #66cc66;">,</span> FRAMEPOINT_TOPRIGHT<span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span>borderSize<span style="color: #66cc66;">*</span><span style="color: #cc66cc;">0.25</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">0.9</span><span style="color: #66cc66;">*</span>borderSize <span style="color: #66cc66;">-</span> titleSize <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">0.003</span> <span style="color: #66cc66;">-</span>HeroSelector<span style="color: #66cc66;">.</span>CategorySize<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; BlzFrameSetSize<span style="color: #66cc66;">&#40;</span>boxBottom<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0.01</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0.1</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; BlzFrameSetVisible<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>SelectedIndikator<span style="color: #66cc66;">,</span> <span style="color: #aa9900;">false</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; BlzFrameSetAbsPoint<span style="color: #66cc66;">&#40;</span>box<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>BoxPosPoint<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>BoxPosX<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>BoxPosY<span style="color: #66cc66;">&#41;</span> &nbsp; <br />
&nbsp; &nbsp; BlzFrameSetSize<span style="color: #66cc66;">&#40;</span>box<span style="color: #66cc66;">,</span> borderSize<span style="color: #66cc66;">*</span><span style="color: #cc66cc;">2</span> <span style="color: #66cc66;">+</span> buttonSize<span style="color: #66cc66;">*</span>colCount <span style="color: #66cc66;">+</span> HeroSelector<span style="color: #66cc66;">.</span>SpaceBetweenX<span style="color: #66cc66;">*</span><span style="color: #66cc66;">&#40;</span>colCount<span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">,</span> borderSize<span style="color: #66cc66;">*</span><span style="color: #cc66cc;">2</span> <span style="color: #66cc66;">+</span> buttonSize<span style="color: #66cc66;">*</span>rowCount <span style="color: #66cc66;">+</span> HeroSelector<span style="color: #66cc66;">.</span>SpaceBetweenY<span style="color: #66cc66;">*</span><span style="color: #66cc66;">&#40;</span>rowCount <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">+</span> titleSize <span style="color: #66cc66;">+</span> HeroSelector<span style="color: #66cc66;">.</span>CategorySize <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">0.0145</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; BlzFrameSetTextAlignment<span style="color: #66cc66;">&#40;</span>titel<span style="color: #66cc66;">,</span> TEXT_JUSTIFY_MIDDLE<span style="color: #66cc66;">,</span> TEXT_JUSTIFY_CENTER<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; BlzFrameSetPoint<span style="color: #66cc66;">&#40;</span>titel<span style="color: #66cc66;">,</span> FRAMEPOINT_TOP<span style="color: #66cc66;">,</span> box<span style="color: #66cc66;">,</span> FRAMEPOINT_TOP<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span>borderSize<span style="color: #66cc66;">*</span><span style="color: #cc66cc;">0.6</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; BlzFrameSetSize<span style="color: #66cc66;">&#40;</span>titel<span style="color: #66cc66;">,</span> BlzFrameGetWidth<span style="color: #66cc66;">&#40;</span>box<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">-</span> borderSize<span style="color: #66cc66;">*</span><span style="color: #cc66cc;">2</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0.03</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; BlzFrameSetText<span style="color: #66cc66;">&#40;</span>titel<span style="color: #66cc66;">,</span> <span style="color: #ff6666;">&quot;Hero Selection&quot;</span><span style="color: #66cc66;">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> rowRemaining <span style="color: #66cc66;">=</span> colCount<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> colCount<span style="color: #66cc66;">*</span>rowCount <span style="color: #66cc66;">&lt;</span> <span style="color: #66cc66;">#</span>HeroSelector<span style="color: #66cc66;">.</span>UnitData <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000aa;">print</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;FieldCount:&quot;</span><span style="color: #66cc66;">,</span>colCount<span style="color: #66cc66;">*</span>rowCount<span style="color: #66cc66;">,</span> <span style="color: #ff6666;">&quot;HeroCount&quot;</span><span style="color: #66cc66;">,#</span>HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> y <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">-</span>borderSize <span style="color: #66cc66;">-</span> titleSize <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">0.0125</span> <span style="color: #66cc66;">-</span> HeroSelector<span style="color: #66cc66;">.</span>CategorySize<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> x <span style="color: #66cc66;">=</span> borderSize<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> buttonIndex <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> colCount<span style="color: #66cc66;">*</span>rowCount<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> button <span style="color: #66cc66;">=</span> BlzCreateFrame<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;HeroSelectorButton&quot;</span><span style="color: #66cc66;">,</span> box<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> buttonIndex<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> icon <span style="color: #66cc66;">=</span> BlzGetFrameByName<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;HeroSelectorButtonIcon&quot;</span><span style="color: #66cc66;">,</span> buttonIndex<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> iconPushed <span style="color: #66cc66;">=</span> BlzGetFrameByName<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;HeroSelectorButtonIconPushed&quot;</span><span style="color: #66cc66;">,</span> buttonIndex<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> iconDisabled <span style="color: #66cc66;">=</span> BlzGetFrameByName<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;HeroSelectorButtonIconDisabled&quot;</span><span style="color: #66cc66;">,</span> buttonIndex<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> tooltipBox <span style="color: #66cc66;">=</span> BlzCreateFrame<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;HeroSelectorTextBox&quot;</span><span style="color: #66cc66;">,</span> box<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> buttonIndex<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> tooltip <span style="color: #66cc66;">=</span> BlzCreateFrame<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;HeroSelectorText&quot;</span><span style="color: #66cc66;">,</span> tooltipBox<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> buttonIndex<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetTooltip<span style="color: #66cc66;">&#40;</span>button<span style="color: #66cc66;">,</span> tooltipBox<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900; font-weight: bold;">not</span> HeroSelector<span style="color: #66cc66;">.</span>TooltipRelativIsBox <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetPoint<span style="color: #66cc66;">&#40;</span>tooltip<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>TooltipPoint<span style="color: #66cc66;">,</span> button<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>TooltipRelativePoint<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>TooltipOffsetX <span style="color: #66cc66;">,</span>HeroSelector<span style="color: #66cc66;">.</span>TooltipOffsetY<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetPoint<span style="color: #66cc66;">&#40;</span>tooltip<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>TooltipPoint<span style="color: #66cc66;">,</span> box<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>TooltipRelativePoint<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>TooltipOffsetX <span style="color: #66cc66;">,</span>HeroSelector<span style="color: #66cc66;">.</span>TooltipOffsetY<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetPoint<span style="color: #66cc66;">&#40;</span>tooltipBox<span style="color: #66cc66;">,</span> FRAMEPOINT_BOTTOMLEFT<span style="color: #66cc66;">,</span> tooltip<span style="color: #66cc66;">,</span> FRAMEPOINT_BOTTOMLEFT<span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">0.007</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">0.007</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetPoint<span style="color: #66cc66;">&#40;</span>tooltipBox<span style="color: #66cc66;">,</span> FRAMEPOINT_TOPRIGHT<span style="color: #66cc66;">,</span> tooltip<span style="color: #66cc66;">,</span> FRAMEPOINT_TOPRIGHT<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0.007</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0.007</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000aa;">table.insert</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>Events<span style="color: #66cc66;">,</span> BlzTriggerRegisterFrameEvent<span style="color: #66cc66;">&#40;</span>onClickTrigger<span style="color: #66cc66;">,</span> button<span style="color: #66cc66;">,</span> FRAMEEVENT_CONTROL_CLICK<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetSize<span style="color: #66cc66;">&#40;</span>button<span style="color: #66cc66;">,</span> buttonSize<span style="color: #66cc66;">,</span> buttonSize<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>buttonIndex<span style="color: #66cc66;">&#93;</span> <span style="color: #aa9900; font-weight: bold;">and</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>buttonIndex<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">&gt;</span> <span style="color: #cc66cc;">0</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> unitCode <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>UnitData<span style="color: #66cc66;">&#91;</span>buttonIndex<span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetTexture<span style="color: #66cc66;">&#40;</span>icon<span style="color: #66cc66;">,</span> BlzGetAbilityIcon<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>ButtonBlendAll<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetTexture<span style="color: #66cc66;">&#40;</span>iconPushed<span style="color: #66cc66;">,</span> BlzGetAbilityIcon<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>ButtonBlendAll<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetTexture<span style="color: #66cc66;">&#40;</span>iconDisabled<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>getDisabledIcon<span style="color: #66cc66;">&#40;</span>BlzGetAbilityIcon<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>ButtonBlendAll<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetText<span style="color: #66cc66;">&#40;</span>tooltip<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>TooltipPrefix<span style="color: #66cc66;">..</span>GetObjectName<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetEnable<span style="color: #66cc66;">&#40;</span>button<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>buttonRequirementDone<span style="color: #66cc66;">&#40;</span>unitCode<span style="color: #66cc66;">,</span> GetLocalPlayer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetEnable<span style="color: #66cc66;">&#40;</span>button<span style="color: #66cc66;">,</span> <span style="color: #aa9900;">false</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetTexture<span style="color: #66cc66;">&#40;</span>icon<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>EmptyButtonPath<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #aa9900;">true</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetTexture<span style="color: #66cc66;">&#40;</span>iconPushed<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>EmptyButtonPath<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #aa9900;">true</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetTexture<span style="color: #66cc66;">&#40;</span>iconDisabled<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>EmptyButtonPath<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #aa9900;">true</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> heroButton <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>HeroButtons<span style="color: #66cc66;">&#91;</span>buttonIndex<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> heroButton<br />
&nbsp; &nbsp; &nbsp; &nbsp; heroButton<span style="color: #66cc66;">.</span>Frame <span style="color: #66cc66;">=</span> button<br />
&nbsp; &nbsp; &nbsp; &nbsp; heroButton<span style="color: #66cc66;">.</span>Icon <span style="color: #66cc66;">=</span> icon<br />
&nbsp; &nbsp; &nbsp; &nbsp; heroButton<span style="color: #66cc66;">.</span>IconPushed <span style="color: #66cc66;">=</span> icon<br />
&nbsp; &nbsp; &nbsp; &nbsp; heroButton<span style="color: #66cc66;">.</span>IconDisabled <span style="color: #66cc66;">=</span> iconDisabled<br />
&nbsp; &nbsp; &nbsp; &nbsp; heroButton<span style="color: #66cc66;">.</span>Tooltip <span style="color: #66cc66;">=</span> tooltip<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>HeroButtons<span style="color: #66cc66;">&#91;</span>button<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> buttonIndex<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> HeroSelector<span style="color: #66cc66;">.</span>ChainedButtons <span style="color: #aa9900; font-weight: bold;">then</span> <span style="color: #808080; font-style: italic;">--buttons are connected to the previous one or the previous row</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> buttonIndex <span style="color: #66cc66;">==</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetPoint<span style="color: #66cc66;">&#40;</span>button<span style="color: #66cc66;">,</span> FRAMEPOINT_TOPLEFT<span style="color: #66cc66;">,</span> box<span style="color: #66cc66;">,</span> FRAMEPOINT_TOPLEFT<span style="color: #66cc66;">,</span> borderSize<span style="color: #66cc66;">,</span> y<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">elseif</span> rowRemaining <span style="color: #66cc66;">&lt;=</span> <span style="color: #cc66cc;">0</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetPoint<span style="color: #66cc66;">&#40;</span>button<span style="color: #66cc66;">,</span> FRAMEPOINT_TOPLEFT<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>HeroButtons<span style="color: #66cc66;">&#91;</span>buttonIndex <span style="color: #66cc66;">-</span> colCount<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Frame<span style="color: #66cc66;">,</span> FRAMEPOINT_BOTTOMLEFT<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span>HeroSelector<span style="color: #66cc66;">.</span>SpaceBetweenY<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rowRemaining <span style="color: #66cc66;">=</span> colCount<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetPoint<span style="color: #66cc66;">&#40;</span>button<span style="color: #66cc66;">,</span> FRAMEPOINT_LEFT<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>HeroButtons<span style="color: #66cc66;">&#91;</span>buttonIndex <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>Frame<span style="color: #66cc66;">,</span> FRAMEPOINT_RIGHT<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>SpaceBetweenX<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span> <span style="color: #808080; font-style: italic;">--buttons have an offset to the TopLeft of the box</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> rowRemaining <span style="color: #66cc66;">&lt;=</span> <span style="color: #cc66cc;">0</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; x <span style="color: #66cc66;">=</span> borderSize<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rowRemaining <span style="color: #66cc66;">=</span> colCount<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; y <span style="color: #66cc66;">=</span> y <span style="color: #66cc66;">-</span> HeroSelector<span style="color: #66cc66;">.</span>SpaceBetweenY <span style="color: #66cc66;">-</span> buttonSize<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">elseif</span> buttonIndex <span style="color: #66cc66;">~=</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; x <span style="color: #66cc66;">=</span> x <span style="color: #66cc66;">+</span> buttonSize <span style="color: #66cc66;">+</span> HeroSelector<span style="color: #66cc66;">.</span>SpaceBetweenX<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetPoint<span style="color: #66cc66;">&#40;</span>button<span style="color: #66cc66;">,</span> FRAMEPOINT_TOPLEFT<span style="color: #66cc66;">,</span> box<span style="color: #66cc66;">,</span> FRAMEPOINT_TOPLEFT<span style="color: #66cc66;">,</span> x<span style="color: #66cc66;">,</span> y<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; rowRemaining <span style="color: #66cc66;">=</span> rowRemaining <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> y <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">0.9</span><span style="color: #66cc66;">*</span>borderSize <span style="color: #66cc66;">-</span> titleSize <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">0.0025</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> x <span style="color: #66cc66;">=</span> borderSize<span style="color: #66cc66;">*</span><span style="color: #cc66cc;">0.65</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--create category buttons added before the box was created</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> buttonIndex<span style="color: #66cc66;">,</span> value <span style="color: #aa9900; font-weight: bold;">in</span> <span style="color: #0000aa;">ipairs</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>Category<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> button <span style="color: #66cc66;">=</span> BlzCreateFrame<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;HeroSelectorCategoryButton&quot;</span><span style="color: #66cc66;">,</span> box<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> icon <span style="color: #66cc66;">=</span> BlzGetFrameByName<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;HeroSelectorCategoryButtonIcon&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> iconPushed <span style="color: #66cc66;">=</span> BlzGetFrameByName<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;HeroSelectorCategoryButtonIconPushed&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> tooltipBox <span style="color: #66cc66;">=</span> BlzCreateFrame<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;HeroSelectorTextBox&quot;</span><span style="color: #66cc66;">,</span> box<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> buttonIndex<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> tooltip <span style="color: #66cc66;">=</span> BlzCreateFrame<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;HeroSelectorText&quot;</span><span style="color: #66cc66;">,</span> tooltipBox<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> buttonIndex<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetPoint<span style="color: #66cc66;">&#40;</span>tooltipBox<span style="color: #66cc66;">,</span> FRAMEPOINT_BOTTOMLEFT<span style="color: #66cc66;">,</span> tooltip<span style="color: #66cc66;">,</span> FRAMEPOINT_BOTTOMLEFT<span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">0.007</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">0.007</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetPoint<span style="color: #66cc66;">&#40;</span>tooltipBox<span style="color: #66cc66;">,</span> FRAMEPOINT_TOPRIGHT<span style="color: #66cc66;">,</span> tooltip<span style="color: #66cc66;">,</span> FRAMEPOINT_TOPRIGHT<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0.007</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0.007</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetText<span style="color: #66cc66;">&#40;</span>tooltip<span style="color: #66cc66;">,</span> GetLocalizedString<span style="color: #66cc66;">&#40;</span>value<span style="color: #66cc66;">.</span>Text<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; value<span style="color: #66cc66;">.</span>Text <span style="color: #66cc66;">=</span> tooltip<br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetPoint<span style="color: #66cc66;">&#40;</span>tooltip<span style="color: #66cc66;">,</span> FRAMEPOINT_BOTTOM<span style="color: #66cc66;">,</span> button<span style="color: #66cc66;">,</span> FRAMEPOINT_TOP<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0.007</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetTooltip<span style="color: #66cc66;">&#40;</span>button<span style="color: #66cc66;">,</span> tooltipBox<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetSize<span style="color: #66cc66;">&#40;</span>button<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>CategorySize<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>CategorySize<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetTexture<span style="color: #66cc66;">&#40;</span>icon<span style="color: #66cc66;">,</span> value<span style="color: #66cc66;">.</span>TextureDisabled<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #aa9900;">true</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetTexture<span style="color: #66cc66;">&#40;</span>iconPushed<span style="color: #66cc66;">,</span> value<span style="color: #66cc66;">.</span>TextureDisabled<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #aa9900;">true</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>CategoryButton<span style="color: #66cc66;">&#91;</span>button<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> value<br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzTriggerRegisterFrameEvent<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>CategoryClickTrigger<span style="color: #66cc66;">,</span> button<span style="color: #66cc66;">,</span> FRAMEEVENT_CONTROL_CLICK<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; value<span style="color: #66cc66;">.</span>Icon <span style="color: #66cc66;">=</span> icon<br />
&nbsp; &nbsp; &nbsp; &nbsp; value<span style="color: #66cc66;">.</span>IconPushed <span style="color: #66cc66;">=</span> iconPushed<br />
&nbsp; &nbsp; &nbsp; &nbsp; value<span style="color: #66cc66;">.</span>Button <span style="color: #66cc66;">=</span> button<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> lastButton <span style="color: #66cc66;">=</span> HeroSelector<span style="color: #66cc66;">.</span>CategoryButton<span style="color: #66cc66;">&#91;</span>buttonIndex <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900; font-weight: bold;">not</span> lastButton <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetPoint<span style="color: #66cc66;">&#40;</span>button<span style="color: #66cc66;">,</span> FRAMEPOINT_TOPLEFT<span style="color: #66cc66;">,</span> box<span style="color: #66cc66;">,</span> FRAMEPOINT_TOPLEFT<span style="color: #66cc66;">,</span> x<span style="color: #66cc66;">,</span> y<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetPoint<span style="color: #66cc66;">&#40;</span>button<span style="color: #66cc66;">,</span> FRAMEPOINT_LEFT<span style="color: #66cc66;">,</span> lastButton<span style="color: #66cc66;">,</span> FRAMEPOINT_RIGHT<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>CategorySpaceX<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000aa;">table.insert</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>CategoryButton<span style="color: #66cc66;">,</span> button<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000aa;">table.insert</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>Frames<span style="color: #66cc66;">,</span> tooltip<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000aa;">table.insert</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>Frames<span style="color: #66cc66;">,</span> icon<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000aa;">table.insert</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>Frames<span style="color: #66cc66;">,</span> button<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> acceptButton <span style="color: #66cc66;">=</span> BlzCreateFrame<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;HeroSelectorTextButton&quot;</span><span style="color: #66cc66;">,</span> box<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> acceptTrigger <span style="color: #66cc66;">=</span> CreateTrigger<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> randomButton <span style="color: #66cc66;">=</span> BlzCreateFrame<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;HeroSelectorTextButton&quot;</span><span style="color: #66cc66;">,</span> box<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> randomTrigger <span style="color: #66cc66;">=</span> CreateTrigger<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> banButton <span style="color: #66cc66;">=</span> BlzCreateFrame<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;HeroSelectorTextButton&quot;</span><span style="color: #66cc66;">,</span> box<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">2</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> banTrigger <span style="color: #66cc66;">=</span> CreateTrigger<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>Trigger<span style="color: #66cc66;">&#91;</span>acceptTrigger<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> TriggerAddAction<span style="color: #66cc66;">&#40;</span>acceptTrigger<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>actionAcceptButton<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>Trigger<span style="color: #66cc66;">&#91;</span>randomTrigger<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> TriggerAddAction<span style="color: #66cc66;">&#40;</span>randomTrigger<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>actionRandomButton<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>Trigger<span style="color: #66cc66;">&#91;</span>banTrigger<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> TriggerAddAction<span style="color: #66cc66;">&#40;</span>banTrigger<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>actionBanButton<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #0000aa;">table.insert</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>Events<span style="color: #66cc66;">,</span> BlzTriggerRegisterFrameEvent<span style="color: #66cc66;">&#40;</span>acceptTrigger<span style="color: #66cc66;">,</span> acceptButton<span style="color: #66cc66;">,</span> FRAMEEVENT_CONTROL_CLICK<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #0000aa;">table.insert</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>Events<span style="color: #66cc66;">,</span> BlzTriggerRegisterFrameEvent<span style="color: #66cc66;">&#40;</span>randomTrigger<span style="color: #66cc66;">,</span> randomButton<span style="color: #66cc66;">,</span> FRAMEEVENT_CONTROL_CLICK<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #0000aa;">table.insert</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>Events<span style="color: #66cc66;">,</span> BlzTriggerRegisterFrameEvent<span style="color: #66cc66;">&#40;</span>banTrigger<span style="color: #66cc66;">,</span> banButton<span style="color: #66cc66;">,</span> FRAMEEVENT_CONTROL_CLICK<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; BlzFrameSetSize<span style="color: #66cc66;">&#40;</span>acceptButton<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>AcceptButtonSizeX<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>AcceptButtonSizeY<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; BlzFrameSetSize<span style="color: #66cc66;">&#40;</span>randomButton<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>RandomButtonSizeX<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>RandomButtonSizeY<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; BlzFrameSetSize<span style="color: #66cc66;">&#40;</span>banButton<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>BanButtonSizeX<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>BanButtonSizeY<span style="color: #66cc66;">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--OK, READY, ACCEPT</span><br />
&nbsp; &nbsp; BlzFrameSetText<span style="color: #66cc66;">&#40;</span>acceptButton<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>AcceptButtonTextPrefix <span style="color: #66cc66;">..</span> GetLocalizedString<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>AcceptButtonText<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; BlzFrameSetText<span style="color: #66cc66;">&#40;</span>randomButton<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>RandomButtonTextPrefix <span style="color: #66cc66;">..</span> GetLocalizedString<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>RandomButtonText<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; BlzFrameSetText<span style="color: #66cc66;">&#40;</span>banButton<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>BanButtonTextPrefix <span style="color: #66cc66;">..</span> GetLocalizedString<span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>BanButtonText<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; BlzFrameSetPoint<span style="color: #66cc66;">&#40;</span>acceptButton<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>AcceptButtonAnchor<span style="color: #66cc66;">,</span> box<span style="color: #66cc66;">,</span> FRAMEPOINT_BOTTOM<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; BlzFrameSetPoint<span style="color: #66cc66;">&#40;</span>randomButton<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>RandomButtonAnchor<span style="color: #66cc66;">,</span> box<span style="color: #66cc66;">,</span> FRAMEPOINT_BOTTOM<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; BlzFrameSetPoint<span style="color: #66cc66;">&#40;</span>banButton<span style="color: #66cc66;">,</span> FRAMEPOINT_BOTTOM<span style="color: #66cc66;">,</span> box<span style="color: #66cc66;">,</span> FRAMEPOINT_BOTTOM<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>AcceptButton <span style="color: #66cc66;">=</span> acceptButton<br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>RandomButton <span style="color: #66cc66;">=</span> randomButton<br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>BanButton <span style="color: #66cc66;">=</span> banButton<br />
&nbsp; &nbsp; BlzFrameSetVisible<span style="color: #66cc66;">&#40;</span>banButton<span style="color: #66cc66;">,</span> <span style="color: #aa9900;">false</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; BlzFrameSetVisible<span style="color: #66cc66;">&#40;</span>acceptButton<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>AcceptButtonIsShown<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; BlzFrameSetVisible<span style="color: #66cc66;">&#40;</span>randomButton<span style="color: #66cc66;">,</span> HeroSelector<span style="color: #66cc66;">.</span>RandomButtonIsShown<span style="color: #66cc66;">&#41;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #0000aa;">table.insert</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>Trigger<span style="color: #66cc66;">,</span> randomTrigger<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #0000aa;">table.insert</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>Trigger<span style="color: #66cc66;">,</span> acceptTrigger<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #0000aa;">table.insert</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>Trigger<span style="color: #66cc66;">,</span> onClickTrigger<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #0000aa;">table.insert</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>Trigger<span style="color: #66cc66;">,</span> banTrigger<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #0000aa;">table.insert</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>Frames<span style="color: #66cc66;">,</span> randomButton<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #0000aa;">table.insert</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>Frames<span style="color: #66cc66;">,</span> acceptButton<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #0000aa;">table.insert</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>Frames<span style="color: #66cc66;">,</span> titel<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #0000aa;">table.insert</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>Frames<span style="color: #66cc66;">,</span> box<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #0000aa;">table.insert</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>Frames<span style="color: #66cc66;">,</span> banButton<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #0000aa;">table.insert</span><span style="color: #66cc66;">&#40;</span>HeroSelector<span style="color: #66cc66;">.</span>Frames<span style="color: #66cc66;">,</span> indicatorParent<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>Box <span style="color: #66cc66;">=</span> box<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #aa9900; font-weight: bold;">not</span> HeroSelector<span style="color: #66cc66;">.</span>AutoShow <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; BlzFrameSetVisible<span style="color: #66cc66;">&#40;</span>box<span style="color: #66cc66;">,</span> <span style="color: #aa9900;">false</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>AutoShow <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">nil</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--clean of globals</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>BoxPosPoint <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">nil</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>BoxPosX <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">nil</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>BoxPosY <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">nil</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>AcceptButtonTextPrefix <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">nil</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>RandomButtonTextPrefix <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">nil</span><br />
&nbsp; &nbsp; HeroSelector<span style="color: #66cc66;">.</span>BanButtonTextPrefix <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">nil</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> TeamViewer <span style="color: #aa9900; font-weight: bold;">then</span> TeamViewer<span style="color: #66cc66;">.</span>Init<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> HeroInfo <span style="color: #aa9900; font-weight: bold;">then</span> HeroInfo<span style="color: #66cc66;">.</span>Init<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span> <br />
<span style="color: #aa9900; font-weight: bold;">end</span></div></div></div></div><br />
<div style="margin: 20px; margin-top: 5px; font-size: 11px"><div class="smallfont" style="margin-bottom: 2px"><b>HeroSelector Jass API</b> <input type="button" class="button" value="Show" style="width: 45px; font-size: 10px; margin: 0px; padding: 0px;" onclick="if (this.parentNode.nextSibling.firstChild.style.display != '') { this.parentNode.nextSibling.firstChild.style.display = ''; this.value = 'Hide'; } else { parentNode.nextSibling.firstChild.style.display = 'none'; this.value = 'Show'; }"></div><div class="alt2" style="margin: 0px; padding: 6px; border: 1px inset; border-style: solid; border-left-width: 1px; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px"><div style="display: none"><br />
<div style="margin: 1em auto" title="Code"><span style="font-weight: bold">library</span> HeroSelector<br />
<span style="color: #009933;">//HeroSelector V1.5b</span><br />
<span style="color: #009933;">//API</span><br />
<span style="color: #009933;">//=====</span><br />
<span style="color: #009933;">//HeroSelectorForcePick()</span><br />
<span style="color: #009933;">//HeroSelectorForcePickPlayer(player p)</span><br />
<span style="color: #009933;">//HeroSelectorForcePickRace(race r)</span><br />
<span style="color: #009933;">//HeroSelectorForcePickTeam(integer teamNr)</span><br />
<br />
<span style="color: #009933;">//HeroSelectorForceRandom()</span><br />
<span style="color: #009933;">//HeroSelectorForceRandomRace(race r)</span><br />
<span style="color: #009933;">//HeroSelectorForceRandomTeam(integer teamNr)</span><br />
<br />
<span style="color: #009933;">//HeroSelectorDoPick(player p)</span><br />
<span style="color: #009933;">//HeroSelectorDoRandom(player p)</span><br />
<br />
<span style="color: #009933;">//HeroSelectorShow(boolean flag)</span><br />
<span style="color: #009933;">//HeroSelectorShowForce(boolean flag, force f)</span><br />
<span style="color: #009933;">//HeroSelectorShowRace(boolean flag, race r)</span><br />
<span style="color: #009933;">//HeroSelectorShowPlayer(boolean flag, player p)</span><br />
<span style="color: #009933;">//HeroSelectorShowTeam(boolean flag, integer teamNr)</span><br />
<br />
<span style="color: #009933;">//HeroSelectorEnableBan(boolean flag)</span><br />
<span style="color: #009933;">//HeroSelectorEnableBanRace</span><br />
<span style="color: #009933;">//HeroSelectorEnableBanTeam</span><br />
<span style="color: #009933;">//HeroSelectorEnableBanPlayer</span><br />
<span style="color: #009933;">//HeroSelectorEnableBanForce</span><br />
<br />
<span style="color: #009933;">//HeroSelectorEnablePick(boolean flag)</span><br />
<span style="color: #009933;">//HeroSelectorEnablePickForce</span><br />
<span style="color: #009933;">//HeroSelectorEnablePickPlayer</span><br />
<span style="color: #009933;">//HeroSelectorEnablePickTeam</span><br />
<span style="color: #009933;">//HeroSelectorEnablePickRace</span><br />
<br />
<span style="color: #009933;">//HeroSelectorRollOption(player p, boolean includeRandomOnly, integer exculdedIndex, integer category) returns integer</span><br />
<span style="color: #009933;">//HeroSelectorCounterChangeUnitCode(integer unitCode, integer add, player p)</span><br />
<span style="color: #009933;">//HeroSelectorEnableButtonIndex(integer unitCode, integer buttonIndex)</span><br />
<span style="color: #009933;">//HeroSelectorDisableButtonIndex(integer buttonIndex, integer teamNr)</span><br />
<span style="color: #009933;">//HeroSelectorButtonRequirementDone(integer unitCode, player p) returns boolean</span><br />
<span style="color: #009933;">//HeroSelectorDeselectButton(integer buttonIndex)</span><br />
<br />
<span style="color: #009933;">//HeroSelectorAddUnit(integer unitCode, boolean onlyRandom)</span><br />
<span style="color: #009933;">//HeroSelectorAddUnitCategory(integer unitCode, integer category)</span><br />
<span style="color: #009933;">//HeroSelectorSetUnitCategory(integer unitCode, integer category)</span><br />
<span style="color: #009933;">//HeroSelectorSetUnitReqPlayer(integer unitCode, player p)</span><br />
<span style="color: #009933;">//HeroSelectorSetUnitReqRace(integer unitCode, race r)</span><br />
<span style="color: #009933;">//HeroSelectorSetUnitReqForce(integer unitCode, force f)</span><br />
<span style="color: #009933;">//HeroSelectorSetUnitReqTeam(integer unitCode, integer teamNr)</span><br />
<span style="color: #009933;">//HeroSelectorSetUnitReqTechLevel(integer unitCode, integer techCode, integer techLevel)</span><br />
<br />
<span style="color: #009933;">//HeroSelectorSetFrameText(framehandle frame, string text)</span><br />
<span style="color: #009933;">//HeroSelectorSetFrameTextPlayer</span><br />
<span style="color: #009933;">//HeroSelectorSetFrameTextForce</span><br />
<span style="color: #009933;">//HeroSelectorSetFrameTextTeam</span><br />
<span style="color: #009933;">//HeroSelectorSetFrameTextRace</span><br />
<br />
<span style="color: #009933;">//HeroSelectorSetTitleText(string text)</span><br />
<span style="color: #009933;">//HeroSelectorSetTitleTextRace</span><br />
<span style="color: #009933;">//HeroSelectorSetTitleTextPlayer</span><br />
<span style="color: #009933;">//HeroSelectorSetTitleTextForce</span><br />
<span style="color: #009933;">//HeroSelectorSetTitleTextTeam</span><br />
<br />
<span style="color: #009933;">//HeroSelectorSetBanButtonText</span><br />
<span style="color: #009933;">//HeroSelectorSetBanButtonTextPlayer</span><br />
<span style="color: #009933;">//HeroSelectorSetBanButtonTextRace</span><br />
<span style="color: #009933;">//HeroSelectorSetBanButtonTextForce</span><br />
<span style="color: #009933;">//HeroSelectorSetBanButtonTextTeam</span><br />
<br />
<span style="color: #009933;">//HeroSelectorSetRandomButtonText</span><br />
<span style="color: #009933;">//HeroSelectorSetRandomButtonTextPlayer</span><br />
<span style="color: #009933;">//HeroSelectorSetRandomButtonTextForce</span><br />
<span style="color: #009933;">//HeroSelectorSetRandomButtonTextTeam</span><br />
<span style="color: #009933;">//HeroSelectorSetRandomButtonTextRace</span><br />
<br />
<span style="color: #009933;">//HeroSelectorSetAcceptButtonText</span><br />
<span style="color: #009933;">//HeroSelectorSetAcceptButtonTextPlayer</span><br />
<span style="color: #009933;">//HeroSelectorSetAcceptButtonTextForce</span><br />
<span style="color: #009933;">//HeroSelectorSetAcceptButtonTextTeam</span><br />
<span style="color: #009933;">//HeroSelectorSetAcceptButtonTextRace</span><br />
<br />
<span style="color: #009933;">//HeroSelectorAddCategory(string icon, string text) //should only be used before the category Buttons are created</span><br />
<br />
<span style="color: #009933;">//HeroSelectorGetDisabledIcon(string iconPath)</span><br />
<br />
<span style="color: #009933;">//HeroSelectorUpdate()</span><br />
<br />
<span style="color: #009933;">//=====</span><br />
<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="font-weight: bold">globals</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//Setup</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//Box</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">string</span> BoxFrameName &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: sienna;">=</span> <span style="color: blue;">&quot;HeroSelectorRaceBox&quot;</span> <span style="color: #009933;">//this is the background box being created</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">real</span> BoxPosX &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: sienna;">=</span> <span style="color: #3333FF;">0.3</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">real</span> BoxPosY &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: sienna;">=</span> <span style="color: #3333FF;">0.4</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> framepointtype BoxPosPoint &nbsp; &nbsp; <span style="color: sienna;">=</span> FRAMEPOINT_CENTER<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">boolean</span> AutoShow &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: sienna;">=</span> <span style="color: #3333ff">true</span> <span style="color: #009933;">//(true) shows the box and the Selection at 0.0 for all players</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//Unique Picks</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">integer</span> UnitCount &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: sienna;">=</span> <span style="color: #3333FF;">2</span> <span style="color: #009933;">//each hero is in total allowed to be picked this amount of times (includes random, repicking allows a hero again).</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">integer</span> UnitCountPerTeam &nbsp; &nbsp; &nbsp; <span style="color: sienna;">=</span> <span style="color: #3333FF;">1</span> <span style="color: #009933;">//Each Team is allowed to pick this amount of each unitType</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">string</span> &nbsp;ToManyTooltip &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: sienna;">=</span> <span style="color: blue;">&quot;OUTOFSTOCKTOOLTIP&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//Ban</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">boolean</span> DelayBanUntilPick &nbsp; &nbsp; &nbsp;<span style="color: sienna;">=</span> <span style="color: #3333ff">false</span> <span style="color: #009933;">//(true) baning will not be applied instantly, instead it is applied when HeroSelectorEnablePick is called the next time.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//Category</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">boolean</span> CategoryAffectRandom &nbsp; <span style="color: sienna;">=</span> <span style="color: #3333ff">true</span> &nbsp;<span style="color: #009933;">//(false) random will not care about selected category</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">boolean</span> CategoryMultiSelect &nbsp; &nbsp;<span style="color: sienna;">=</span> <span style="color: #3333ff">false</span> <span style="color: #009933;">//(false) deselect other category when selecting one, (true) can selected multiple categories and all heroes having any of them are not filtered.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">real</span> CategorySize &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: sienna;">=</span> <span style="color: #3333FF;">0.02</span> &nbsp;<span style="color: #009933;">//the size of the Category Button</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">real</span> CategorySpaceX &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: sienna;">=</span> <span style="color: #3333FF;">0.0008</span> <span style="color: #009933;">//space between 2 category Buttons, it is meant to need only one line of Categoryy Buttons.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">integer</span> CategoryFilteredAlpha &nbsp;<span style="color: sienna;">=</span> <span style="color: #3333FF;">45</span> &nbsp; &nbsp; <span style="color: #009933;">// Alpha value of Heroes being filtered by unselected categories</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">boolean</span> CategoryAutoDetectHero <span style="color: sienna;">=</span> <span style="color: #3333ff">true</span> <span style="color: #009933;">// Will create and remove added Heroes to read and setup the Category for the primary Attribute Str(4) Agi(8) Int(16)</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//Icon path, tooltip Text (tries to localize)</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//Indicator</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> framehandle IndicatorSelected<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> framehandle IndicatorSelectedParent<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">string</span> IndicatorPathPick &nbsp; &nbsp; &nbsp; <span style="color: sienna;">=</span> <span style="color: blue;">&quot;UI<span style="">\\</span>Feedback<span style="">\\</span>Autocast<span style="">\\</span>UI-ModalButtonOn.mdl&quot;</span> <span style="color: #009933;">//this model is used by the indicator during picking</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">string</span> IndicatorPathBan &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: sienna;">=</span> <span style="color: blue;">&quot;war3mapImported<span style="">\\</span>HeroSelectorBan.mdl&quot;</span> <span style="color: #009933;">//this model is used by the indicator during baning</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//Grid</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">real</span> SpaceBetweenX &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: sienna;">=</span> <span style="color: #3333FF;">0.008</span> <span style="color: #009933;">//space between 2 buttons in one row</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">real</span> SpaceBetweenY &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: sienna;">=</span> <span style="color: #3333FF;">0.008</span> <span style="color: #009933;">//space between 2 rows</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">integer</span> ButtonColCount &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: sienna;">=</span> <span style="color: #3333FF;">4</span> <span style="color: #009933;">//amount of buttons in one row</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">integer</span> ButtonRowCount &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: sienna;">=</span> <span style="color: #3333FF;">4</span> <span style="color: #009933;">//amount of rows</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">boolean</span> ChainedButtons &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: sienna;">=</span> <span style="color: #3333ff">true</span> <span style="color: #009933;">//(true) connect to the previous button/ or row, (false) have a offset to the box topLeft in this moving a button has no effect on other buttons.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//Button</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">real</span> ButtonSize &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: sienna;">=</span> <span style="color: #3333FF;">0.036</span> <span style="color: #009933;">//size of each button</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">boolean</span> ButtonBlendAll &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: sienna;">=</span> <span style="color: #3333ff">false</span> <span style="color: #009933;">//(true) when a hero icon uses transparenzy</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">string</span> EmptyButtonPath &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: sienna;">=</span> <span style="color: blue;">&quot;UI<span style="">\\</span>Widgets<span style="">\\</span>EscMenu<span style="">\\</span>Human<span style="">\\</span>blank-background.blp&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//Ban Button</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">string</span> BanButtonTextPrefix &nbsp; &nbsp; <span style="color: sienna;">=</span> <span style="color: blue;">&quot;|cffcf2084&quot;</span> <span style="color: #009933;">//Prefix Text for the Ban Button</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">string</span> BanButtonText &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: sienna;">=</span> <span style="color: blue;">&quot;CHAT_ACTION_BAN&quot;</span> <span style="color: #009933;">//tries to get a Localized String</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">real</span> BanButtonSizeX &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: sienna;">=</span> <span style="color: #3333FF;">0.13</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">real</span> BanButtonSizeY &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: sienna;">=</span> <span style="color: #3333FF;">0.03</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">string</span> BanTooltip &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: sienna;">=</span> <span style="color: blue;">&quot;DISALLOWED&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">boolean</span> BanIgnoreRequirment &nbsp; &nbsp;<span style="color: sienna;">=</span> <span style="color: #3333ff">true</span> <span style="color: #009933;">// (true) Ban is not restricted by Requirments</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//Accept Button</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">string</span> AcceptButtonTextPrefix &nbsp; &nbsp; &nbsp; <span style="color: sienna;">=</span> <span style="color: blue;">&quot;&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">string</span> AcceptButtonText &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: sienna;">=</span> <span style="color: blue;">&quot;ACCEPT&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">real</span> AcceptButtonSizeX &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: sienna;">=</span> <span style="color: #3333FF;">0.085</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">real</span> AcceptButtonSizeY &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: sienna;">=</span> <span style="color: #3333FF;">0.03</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">boolean</span> AcceptButtonIsShown &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: sienna;">=</span> <span style="color: #3333ff">true</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> framepointtype AcceptButtonAnchor &nbsp; <span style="color: sienna;">=</span> FRAMEPOINT_BOTTOMRIGHT <span style="color: #009933;">//places the Accept button with which Point to the bottom, with right he is at the left</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//Random Button</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">string</span> RandomButtonTextPrefix &nbsp; &nbsp; &nbsp; <span style="color: sienna;">=</span> <span style="color: blue;">&quot;&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">string</span> RandomButtonText &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: sienna;">=</span> <span style="color: blue;">&quot;RANDOM&quot;</span> <span style="color: #009933;">//tries Localizing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">real</span> RandomButtonSizeX &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: sienna;">=</span> <span style="color: #3333FF;">0.085</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">real</span> RandomButtonSizeY &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: sienna;">=</span> <span style="color: #3333FF;">0.03</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">boolean</span> RandomButtonIsShown &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: sienna;">=</span> <span style="color: #3333ff">true</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> framepointtype RandomButtonAnchor &nbsp; <span style="color: sienna;">=</span> FRAMEPOINT_BOTTOMLEFT<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">boolean</span> RandomButtonPick &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: sienna;">=</span> <span style="color: #3333ff">false</span> <span style="color: #009933;">//(true) pressing the random button will pick the option. (false) pressing the random button will select a button, random only heroes can not be selected, but that does not matter. This weak random and randomonly should not be combined.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//Tooltip</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">string</span> TooltipPrefix &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: sienna;">=</span> <span style="color: blue;">&quot;|cffffcc00&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">real</span> TooltipOffsetX &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: sienna;">=</span> <span style="color: #3333FF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">real</span> TooltipOffsetY &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: sienna;">=</span> <span style="color: #3333FF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> framepointtype TooltipPoint &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: sienna;">=</span> FRAMEPOINT_BOTTOM <span style="color: #009933;">//pos the Tooltip with which Point</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> framepointtype TooltipRelativePoint &nbsp; <span style="color: sienna;">=</span> FRAMEPOINT_TOP <span style="color: #009933;">//pos the Tooltip to which Point of the Relative</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">boolean</span> TooltipRelativIsBox &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: sienna;">=</span> <span style="color: #3333ff">false</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #009933;">//(true) use the box as anchor, (false) use the button as anchor</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">string</span> TooltipRequires &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: sienna;">=</span> <span style="color: blue;">&quot;QUESTCOMPONENTS&quot;</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//System variables, Do not touch</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">public</span> <span style="color: #4477aa; font-weight: bold">integer</span> HeroButtonCount &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: sienna;">=</span> ButtonRowCount<span style="color: sienna;">*</span>ButtonColCount<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">trigger</span> CategoryClickTrigger &nbsp; <span style="color: sienna;">=</span> <span style="color: purple">CreateTrigger</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">trigger</span> AcceptButtonTrigger &nbsp;<span style="color: sienna;">=</span> <span style="color: purple">CreateTrigger</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">trigger</span> BanButtonTrigger &nbsp; &nbsp; &nbsp;<span style="color: sienna;">=</span> <span style="color: purple">CreateTrigger</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">trigger</span> RandomButtonTrigger &nbsp;<span style="color: sienna;">=</span> <span style="color: purple">CreateTrigger</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> framehandle BanButton<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> framehandle AcceptButton<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> framehandle RandomButton<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">player</span> <span style="color: #4477aa; font-weight: bold">array</span> DelayBanPlayer<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">integer</span> <span style="color: #4477aa; font-weight: bold">array</span> DelayBanUnitCode<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">integer</span> DelayBanCount <span style="color: sienna;">=</span> <span style="color: #3333FF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">public</span> framehandle <span style="color: #4477aa; font-weight: bold">array</span> CategoryButton<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">public</span> framehandle <span style="color: #4477aa; font-weight: bold">array</span> CategoryIconFrame<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">public</span> framehandle <span style="color: #4477aa; font-weight: bold">array</span> CategoryIconPushedFrame &nbsp; &nbsp; &nbsp; &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">public</span> framehandle <span style="color: #4477aa; font-weight: bold">array</span> CategoryTooltipFrame<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">public</span> framehandle <span style="color: #4477aa; font-weight: bold">array</span> CategoryTooltipFrameBox<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">public</span> <span style="color: #4477aa; font-weight: bold">string</span> <span style="color: #4477aa; font-weight: bold">array</span> CategoryText<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">public</span> <span style="color: #4477aa; font-weight: bold">string</span> <span style="color: #4477aa; font-weight: bold">array</span> CategoryTexture<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">public</span> <span style="color: #4477aa; font-weight: bold">string</span> <span style="color: #4477aa; font-weight: bold">array</span> CategoryTextureDisabled<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">integer</span> <span style="color: #4477aa; font-weight: bold">array</span> CategoryButtonValue<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">public</span> <span style="color: #4477aa; font-weight: bold">integer</span> CategoryButtonCount <span style="color: sienna;">=</span> <span style="color: #3333FF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">integer</span> <span style="color: #4477aa; font-weight: bold">array</span> UsedTeamNr<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">integer</span> UsedTeamNrCount <span style="color: sienna;">=</span> <span style="color: #3333FF;">0</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">integer</span> ButtonHeroCount <span style="color: sienna;">=</span> <span style="color: #3333FF;">0</span> &nbsp; &nbsp; &nbsp; &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">integer</span> <span style="color: #4477aa; font-weight: bold">array</span> ButtonHeroUnitCode<br />
<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">integer</span> <span style="color: #4477aa; font-weight: bold">array</span> HeroTotalCount<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">public</span> <span style="color: #4477aa; font-weight: bold">integer</span> <span style="color: #4477aa; font-weight: bold">array</span> HeroCategory<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">integer</span> <span style="color: #4477aa; font-weight: bold">array</span> HeroRegType<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">player</span> <span style="color: #4477aa; font-weight: bold">array</span> HeroRegPlayer<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">force</span> <span style="color: #4477aa; font-weight: bold">array</span> HeroRegForce<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">integer</span> <span style="color: #4477aa; font-weight: bold">array</span> HeroRegNumber<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">integer</span> <span style="color: #4477aa; font-weight: bold">array</span> HeroRegNumber2<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">race</span> <span style="color: #4477aa; font-weight: bold">array</span> HeroRegRace<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">integer</span> HeroCount <span style="color: sienna;">=</span> <span style="color: #3333FF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">integer</span> <span style="color: #4477aa; font-weight: bold">array</span> HeroUnitCode<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">integer</span> <span style="color: #4477aa; font-weight: bold">array</span> HeroButtonIndex<br />
<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">public</span> <span style="color: #4477aa; font-weight: bold">hashtable</span> Hash <span style="color: sienna;">=</span> <span style="color: purple">InitHashtable</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; framehandle HeroSelectorBox<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> framehandle HeroSelectorBoxSeperator<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> framehandle HeroSelectorBoxTitle<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">integer</span> <span style="color: #4477aa; font-weight: bold">array</span> HeroButtonUnitCode<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">integer</span> HeroButtonUnitCodeCount <span style="color: sienna;">=</span> <span style="color: #3333FF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> framehandle <span style="color: #4477aa; font-weight: bold">array</span> HeroButtonIcon<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> framehandle <span style="color: #4477aa; font-weight: bold">array</span> HeroButtonIconPushed &nbsp; &nbsp; &nbsp; &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> framehandle <span style="color: #4477aa; font-weight: bold">array</span> HeroButtonIconDisabled<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> framehandle <span style="color: #4477aa; font-weight: bold">array</span> HeroButtonTooltip<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> framehandle <span style="color: #4477aa; font-weight: bold">array</span> HeroButtonTooltipBox<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> framehandle <span style="color: #4477aa; font-weight: bold">array</span> HeroButtonFrame<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">trigger</span> HeroButtonClickTrigger <span style="color: sienna;">=</span> <span style="color: purple">CreateTrigger</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">integer</span> <span style="color: #4477aa; font-weight: bold">array</span> PlayerSelectedButtonIndex<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">integer</span> <span style="color: #4477aa; font-weight: bold">array</span> PlayerSelectedCategory<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="color: #4477aa; font-weight: bold">integer</span> <span style="color: #4477aa; font-weight: bold">array</span> PlayerLastSelectedCategoryIndex<br />
&nbsp; &nbsp; <span style="font-weight: bold">endglobals</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="font-weight: bold">function</span> AutoDetectCategory <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">integer</span> unitCode <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">integer</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> value <span style="color: sienna;">=</span> <span style="color: #3333FF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">unit</span> u<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> primaryAttribute<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">IsUnitIdType</span><span style="color: sienna;">&#40;</span>unitCode<span style="color: sienna;">,</span> <span style="color: #4477aa">UNIT_TYPE_MELEE_ATTACKER</span><span style="color: sienna;">&#41;</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> value <span style="color: sienna;">=</span> <span style="color: #3333FF;">1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">elseif</span> <span style="color: purple">IsUnitIdType</span><span style="color: sienna;">&#40;</span>unitCode<span style="color: sienna;">,</span> <span style="color: #4477aa">UNIT_TYPE_RANGED_ATTACKER</span><span style="color: sienna;">&#41;</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> value <span style="color: sienna;">=</span> <span style="color: #3333FF;">2</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> CategoryAutoDetectHero <span style="font-weight: bold">and</span> <span style="color: purple">IsUnitIdType</span><span style="color: sienna;">&#40;</span>unitCode<span style="color: sienna;">,</span> <span style="color: #4477aa">UNIT_TYPE_HERO</span><span style="color: sienna;">&#41;</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> u <span style="color: sienna;">=</span> <span style="color: purple">CreateUnit</span><span style="color: sienna;">&#40;</span><span style="color: purple">Player</span><span style="color: sienna;">&#40;</span><span style="color: #4477aa">bj_PLAYER_NEUTRAL_EXTRA</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">,</span> unitCode<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">270</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> primaryAttribute <span style="color: sienna;">=</span> BlzGetUnitIntegerField<span style="color: sienna;">&#40;</span>u<span style="color: sienna;">,</span> UNIT_IF_PRIMARY_ATTRIBUTE<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> <span style="color: purple">RemoveUnit</span><span style="color: sienna;">&#40;</span>u<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> u <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> ConvertHeroAttribute<span style="color: sienna;">&#40;</span>primaryAttribute<span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> HERO_ATTRIBUTE_STR <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> value <span style="color: sienna;">=</span> value <span style="color: sienna;">+</span> <span style="color: #3333FF;">4</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">elseif</span> ConvertHeroAttribute<span style="color: sienna;">&#40;</span>primaryAttribute<span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> HERO_ATTRIBUTE_AGI <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> value <span style="color: sienna;">=</span> value <span style="color: sienna;">+</span> <span style="color: #3333FF;">8</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">elseif</span> ConvertHeroAttribute<span style="color: sienna;">&#40;</span>primaryAttribute<span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> HERO_ATTRIBUTE_INT <span style="font-weight: bold">then</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> value <span style="color: sienna;">=</span> value <span style="color: sienna;">+</span> <span style="color: #3333FF;">16</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">return</span> value<br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">private</span> <span style="font-weight: bold">function</span> GetBorderSize <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">nothing</span> <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">real</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">GetPlayerRace</span><span style="color: sienna;">&#40;</span><span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> <span style="color: #4477aa">RACE_HUMAN</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">return</span> <span style="color: #3333FF;">0.029</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">elseif</span> <span style="color: purple">GetPlayerRace</span><span style="color: sienna;">&#40;</span><span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> <span style="color: #4477aa">RACE_ORC</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">return</span> <span style="color: #3333FF;">0.029</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">elseif</span> <span style="color: purple">GetPlayerRace</span><span style="color: sienna;">&#40;</span><span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> <span style="color: #4477aa">RACE_UNDEAD</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">return</span> <span style="color: #3333FF;">0.035</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">elseif</span> <span style="color: purple">GetPlayerRace</span><span style="color: sienna;">&#40;</span><span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> <span style="color: #4477aa">RACE_NIGHTELF</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">return</span> <span style="color: #3333FF;">0.035</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">elseif</span> <span style="color: purple">GetPlayerRace</span><span style="color: sienna;">&#40;</span><span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> <span style="color: #4477aa">RACE_DEMON</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">return</span> <span style="color: #3333FF;">0.024</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">else</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">return</span> <span style="color: #3333FF;">0.0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorDestroy <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">nothing</span> <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> buttonIndex <span style="color: sienna;">=</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">loop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">exitwhen</span> buttonIndex <span style="color: sienna;">&gt;</span> HeroButtonCount<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzDestroyFrame<span style="color: sienna;">&#40;</span>HeroButtonIcon<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzDestroyFrame<span style="color: sienna;">&#40;</span>HeroButtonIconDisabled<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzDestroyFrame<span style="color: sienna;">&#40;</span>HeroButtonFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzDestroyFrame<span style="color: sienna;">&#40;</span>HeroButtonTooltip<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzDestroyFrame<span style="color: sienna;">&#40;</span>HeroButtonTooltipBox<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroButtonTooltip<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroButtonTooltipBox<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroButtonFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroButtonIcon<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> buttonIndex <span style="color: sienna;">=</span> buttonIndex <span style="color: sienna;">+</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endloop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> buttonIndex <span style="color: sienna;">=</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">loop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">exitwhen</span> buttonIndex <span style="color: sienna;">&gt;</span> CategoryButtonCount<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzDestroyFrame<span style="color: sienna;">&#40;</span>CategoryButton<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzDestroyFrame<span style="color: sienna;">&#40;</span>CategoryIconFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzDestroyFrame<span style="color: sienna;">&#40;</span>CategoryTooltipFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzDestroyFrame<span style="color: sienna;">&#40;</span>CategoryTooltipFrameBox<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> CategoryButton<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> CategoryIconFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> CategoryTooltipFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> CategoryTooltipFrameBox<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> buttonIndex <span style="color: sienna;">=</span> buttonIndex <span style="color: sienna;">+</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endloop</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzDestroyFrame<span style="color: sienna;">&#40;</span>HeroSelectorBox<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzDestroyFrame<span style="color: sienna;">&#40;</span>HeroSelectorBoxSeperator<span style="color: sienna;">&#41;</span> &nbsp; &nbsp; &nbsp; &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzDestroyFrame<span style="color: sienna;">&#40;</span>HeroSelectorBoxTitle<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzDestroyFrame<span style="color: sienna;">&#40;</span>BanButton<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzDestroyFrame<span style="color: sienna;">&#40;</span>RandomButton<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzDestroyFrame<span style="color: sienna;">&#40;</span>AcceptButton<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzDestroyFrame<span style="color: sienna;">&#40;</span>IndicatorSelected<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzDestroyFrame<span style="color: sienna;">&#40;</span>IndicatorSelectedParent<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroSelectorBox <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroSelectorBoxTitle <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroSelectorBoxSeperator <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> BanButton <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> RandomButton <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> AcceptButton <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> IndicatorSelected <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> <span style="color: purple">DestroyTrigger</span><span style="color: sienna;">&#40;</span>CategoryClickTrigger<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> <span style="color: purple">DestroyTrigger</span><span style="color: sienna;">&#40;</span>BanButtonTrigger<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> <span style="color: purple">DestroyTrigger</span><span style="color: sienna;">&#40;</span>RandomButtonTrigger<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> <span style="color: purple">DestroyTrigger</span><span style="color: sienna;">&#40;</span>HeroButtonClickTrigger<span style="color: sienna;">&#41;</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> CategoryClickTrigger <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> BanButtonTrigger <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> RandomButtonTrigger <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroButtonClickTrigger <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="color: #009933;">//=====</span><br />
&nbsp; &nbsp; <span style="color: #009933;">//code start</span><br />
&nbsp; &nbsp; <span style="color: #009933;">//=====</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorGetDisabledIcon <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">string</span> icon <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">string</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//ReplaceableTextures\CommandButtons\BTNHeroPaladin.tga -&gt; ReplaceableTextures\CommandButtonsDisabled\DISBTNHeroPaladin.tga</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">SubString</span><span style="color: sienna;">&#40;</span>icon<span style="color: sienna;">,</span> <span style="color: #3333FF;">34</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">35</span><span style="color: sienna;">&#41;</span> !<span style="color: sienna;">=</span> <span style="color: blue;">&quot;<span style="">\\</span>&quot;</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">return</span> icon<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span> <span style="color: #009933;">//this string has not enough chars return it</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//string.len(icon) &lt; 34 then return icon end //this string has not enough chars return it</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">return</span> <span style="color: purple">SubString</span><span style="color: sienna;">&#40;</span>icon<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">34</span><span style="color: sienna;">&#41;</span> <span style="color: sienna;">+</span> <span style="color: blue;">&quot;Disabled<span style="">\\</span>DIS&quot;</span> <span style="color: sienna;">+</span> <span style="color: purple">SubString</span><span style="color: sienna;">&#40;</span>icon<span style="color: sienna;">,</span> <span style="color: #3333FF;">35</span><span style="color: sienna;">,</span> <span style="color: purple">StringLength</span><span style="color: sienna;">&#40;</span>icon<span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorAddCategory <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">string</span> icon<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">string</span> text <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//adds an data category construct</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> CategoryButtonCount <span style="color: sienna;">=</span> CategoryButtonCount <span style="color: sienna;">+</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> CategoryText<span style="color: sienna;">&#91;</span>CategoryButtonCount<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> text<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> CategoryTexture<span style="color: sienna;">&#91;</span>CategoryButtonCount<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> icon<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> CategoryTextureDisabled<span style="color: sienna;">&#91;</span>CategoryButtonCount<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> HeroSelectorGetDisabledIcon<span style="color: sienna;">&#40;</span>icon<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> CategoryButtonCount <span style="color: sienna;">&gt;</span> <span style="color: #3333FF;">1</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> CategoryButtonValue<span style="color: sienna;">&#91;</span>CategoryButtonCount<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> CategoryButtonValue<span style="color: sienna;">&#91;</span>CategoryButtonCount <span style="color: sienna;">-</span> <span style="color: #3333FF;">1</span><span style="color: sienna;">&#93;</span><span style="color: sienna;">*</span><span style="color: #3333FF;">2</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> CategoryButtonValue<span style="color: sienna;">&#91;</span>CategoryButtonCount<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetFrameText <span style="font-weight: bold">takes</span> framehandle frame<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">string</span> text <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetText<span style="color: sienna;">&#40;</span>frame<span style="color: sienna;">,</span> text<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetFrameTextPlayer <span style="font-weight: bold">takes</span> framehandle frame<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">string</span> text<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">player</span> p <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> p <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetText<span style="color: sienna;">&#40;</span>frame<span style="color: sienna;">,</span> text<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetFrameTextTeam <span style="font-weight: bold">takes</span> framehandle frame<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">string</span> text<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">integer</span> teamNr <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">GetPlayerTeam</span><span style="color: sienna;">&#40;</span><span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> teamNr <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetText<span style="color: sienna;">&#40;</span>frame<span style="color: sienna;">,</span> text<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetFrameTextRace <span style="font-weight: bold">takes</span> framehandle frame<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">string</span> text<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">race</span> r <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">GetPlayerRace</span><span style="color: sienna;">&#40;</span><span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> r <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetText<span style="color: sienna;">&#40;</span>frame<span style="color: sienna;">,</span> text<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetFrameTextForce <span style="font-weight: bold">takes</span> framehandle frame<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">string</span> text<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">force</span> f <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> BlzForceHasPlayer<span style="color: sienna;">&#40;</span>f<span style="color: sienna;">,</span> <span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetText<span style="color: sienna;">&#40;</span>frame<span style="color: sienna;">,</span> text<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
&nbsp; &nbsp; <br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetTitleText <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">string</span> text <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorSetFrameText<span style="color: sienna;">&#40;</span>HeroSelectorBoxTitle<span style="color: sienna;">,</span> text<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetTitleTextPlayer <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">string</span> text<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">player</span> who <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorSetFrameTextPlayer<span style="color: sienna;">&#40;</span>HeroSelectorBoxTitle<span style="color: sienna;">,</span> text<span style="color: sienna;">,</span> who<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetTitleTextForce <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">string</span> text<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">force</span> who <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorSetFrameTextForce<span style="color: sienna;">&#40;</span>HeroSelectorBoxTitle<span style="color: sienna;">,</span> text<span style="color: sienna;">,</span> who<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetTitleTextTeam <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">string</span> text<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">integer</span> who <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorSetFrameTextTeam<span style="color: sienna;">&#40;</span>HeroSelectorBoxTitle<span style="color: sienna;">,</span> text<span style="color: sienna;">,</span> who<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetTitleTextRace <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">string</span> text<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">race</span> who <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorSetFrameTextRace<span style="color: sienna;">&#40;</span>HeroSelectorBoxTitle<span style="color: sienna;">,</span> text<span style="color: sienna;">,</span> who<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetBanButtonText <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">string</span> text <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorSetFrameText<span style="color: sienna;">&#40;</span>BanButton<span style="color: sienna;">,</span> text<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetBanButtonTextPlayer <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">string</span> text<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">player</span> who <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorSetFrameTextPlayer<span style="color: sienna;">&#40;</span>BanButton<span style="color: sienna;">,</span> text<span style="color: sienna;">,</span> who<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetBanButtonTextForce <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">string</span> text<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">force</span> who <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorSetFrameTextForce<span style="color: sienna;">&#40;</span>BanButton<span style="color: sienna;">,</span> text<span style="color: sienna;">,</span> who<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetBanButtonTextTeam <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">string</span> text<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">integer</span> who <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorSetFrameTextTeam<span style="color: sienna;">&#40;</span>BanButton<span style="color: sienna;">,</span> text<span style="color: sienna;">,</span> who<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetBanButtonTextRace <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">string</span> text<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">race</span> who <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorSetFrameTextRace<span style="color: sienna;">&#40;</span>BanButton<span style="color: sienna;">,</span> text<span style="color: sienna;">,</span> who<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetRandomButtonText <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">string</span> text <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorSetFrameText<span style="color: sienna;">&#40;</span>RandomButton<span style="color: sienna;">,</span> text<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetRandomButtonTextPlayer <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">string</span> text<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">player</span> who <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorSetFrameTextPlayer<span style="color: sienna;">&#40;</span>RandomButton<span style="color: sienna;">,</span> text<span style="color: sienna;">,</span> who<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetRandomButtonTextForce <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">string</span> text<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">force</span> who <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorSetFrameTextForce<span style="color: sienna;">&#40;</span>RandomButton<span style="color: sienna;">,</span> text<span style="color: sienna;">,</span> who<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetRandomButtonTextTeam <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">string</span> text<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">integer</span> who <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorSetFrameTextTeam<span style="color: sienna;">&#40;</span>RandomButton<span style="color: sienna;">,</span> text<span style="color: sienna;">,</span> who<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetRandomButtonTextRace <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">string</span> text<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">race</span> who <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorSetFrameTextRace<span style="color: sienna;">&#40;</span>RandomButton<span style="color: sienna;">,</span> text<span style="color: sienna;">,</span> who<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetAcceptButtonText <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">string</span> text <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorSetFrameText<span style="color: sienna;">&#40;</span>AcceptButton<span style="color: sienna;">,</span> text<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetAcceptButtonTextPlayer <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">string</span> text<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">player</span> who <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorSetFrameTextPlayer<span style="color: sienna;">&#40;</span>AcceptButton<span style="color: sienna;">,</span> text<span style="color: sienna;">,</span> who<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetAcceptButtonTextForce <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">string</span> text<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">force</span> who <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorSetFrameTextForce<span style="color: sienna;">&#40;</span>AcceptButton<span style="color: sienna;">,</span> text<span style="color: sienna;">,</span> who<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetAcceptButtonTextTeam <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">string</span> text<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">integer</span> who <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorSetFrameTextTeam<span style="color: sienna;">&#40;</span>AcceptButton<span style="color: sienna;">,</span> text<span style="color: sienna;">,</span> who<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetAcceptButtonTextRace <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">string</span> text<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">race</span> who <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorSetFrameTextRace<span style="color: sienna;">&#40;</span>AcceptButton<span style="color: sienna;">,</span> text<span style="color: sienna;">,</span> who<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetUnitCategory <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">integer</span> unitCode<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">integer</span> category <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> index <span style="color: sienna;">=</span> &nbsp;<span style="color: purple">LoadInteger</span><span style="color: sienna;">&#40;</span>Hash<span style="color: sienna;">,</span> unitCode<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroCategory<span style="color: sienna;">&#91;</span>index<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> &nbsp;category<br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorAddUnitCategory <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">integer</span> unitCode<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">integer</span> category <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> index <span style="color: sienna;">=</span> &nbsp;<span style="color: purple">LoadInteger</span><span style="color: sienna;">&#40;</span>Hash<span style="color: sienna;">,</span> unitCode<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroCategory<span style="color: sienna;">&#91;</span>index<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> &nbsp;BlzBitOr<span style="color: sienna;">&#40;</span>category<span style="color: sienna;">,</span> HeroCategory<span style="color: sienna;">&#91;</span>index<span style="color: sienna;">&#93;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorDeselectButton <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">integer</span> buttonIndex <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> playerIndex <span style="color: sienna;">=</span> <span style="color: #3333FF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> buttonIndex <span style="color: sienna;">&gt;</span> <span style="color: #3333FF;">0</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> PlayerSelectedButtonIndex<span style="color: sienna;">&#91;</span><span style="color: purple">GetPlayerId</span><span style="color: sienna;">&#40;</span><span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#93;</span> <span style="color: sienna;">==</span> buttonIndex <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="font-weight: bold">call</span> BlzFrameSetVisible<span style="color: sienna;">&#40;</span>IndicatorSelected<span style="color: sienna;">,</span> <span style="color: #3333ff">false</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">loop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">exitwhen</span> playerIndex <span style="color: sienna;">==</span> GetBJMaxPlayers<span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> PlayerSelectedButtonIndex<span style="color: sienna;">&#91;</span>playerIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">==</span> buttonIndex <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> PlayerSelectedButtonIndex<span style="color: sienna;">&#91;</span>playerIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> <span style="color: #3333FF;">0</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> playerIndex <span style="color: sienna;">=</span> playerIndex <span style="color: sienna;">+</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endloop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">loop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">exitwhen</span> playerIndex <span style="color: sienna;">==</span> GetBJMaxPlayers<span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> PlayerSelectedButtonIndex<span style="color: sienna;">&#91;</span>playerIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> <span style="color: #3333FF;">0</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> playerIndex <span style="color: sienna;">=</span> playerIndex <span style="color: sienna;">+</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endloop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetVisible<span style="color: sienna;">&#40;</span>IndicatorSelected<span style="color: sienna;">,</span> <span style="color: #3333ff">false</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetUnitReqRace <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">integer</span> unitCode<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">race</span> r <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> index <span style="color: sienna;">=</span> &nbsp;<span style="color: purple">LoadInteger</span><span style="color: sienna;">&#40;</span>Hash<span style="color: sienna;">,</span> unitCode<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroRegType<span style="color: sienna;">&#91;</span>index<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroRegRace<span style="color: sienna;">&#91;</span>index<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> r<br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetUnitReqForce <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">integer</span> unitCode<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">force</span> f <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> index <span style="color: sienna;">=</span> &nbsp;<span style="color: purple">LoadInteger</span><span style="color: sienna;">&#40;</span>Hash<span style="color: sienna;">,</span> unitCode<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroRegType<span style="color: sienna;">&#91;</span>index<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> <span style="color: #3333FF;">4</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroRegForce<span style="color: sienna;">&#91;</span>index<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> f<br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetUnitReqPlayer <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">integer</span> unitCode<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">player</span> p <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> index <span style="color: sienna;">=</span> &nbsp;<span style="color: purple">LoadInteger</span><span style="color: sienna;">&#40;</span>Hash<span style="color: sienna;">,</span> unitCode<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroRegType<span style="color: sienna;">&#91;</span>index<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> <span style="color: #3333FF;">3</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroRegPlayer<span style="color: sienna;">&#91;</span>index<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> p<br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetUnitReqTeam <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">integer</span> unitCode<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">integer</span> teamNr <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> index <span style="color: sienna;">=</span> &nbsp;<span style="color: purple">LoadInteger</span><span style="color: sienna;">&#40;</span>Hash<span style="color: sienna;">,</span> unitCode<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroRegType<span style="color: sienna;">&#91;</span>index<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> <span style="color: #3333FF;">2</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroRegNumber<span style="color: sienna;">&#91;</span>index<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> teamNr<br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorSetUnitReqTechLevel <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">integer</span> unitCode<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">integer</span> techCode<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">integer</span> techLevel <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> index <span style="color: sienna;">=</span> &nbsp;<span style="color: purple">LoadInteger</span><span style="color: sienna;">&#40;</span>Hash<span style="color: sienna;">,</span> unitCode<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroRegType<span style="color: sienna;">&#91;</span>index<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> <span style="color: #3333FF;">5</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroRegNumber<span style="color: sienna;">&#91;</span>index<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> techCode<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroRegNumber2<span style="color: sienna;">&#91;</span>index<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> techLevel<br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorButtonRequirementDone <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">integer</span> unitCode<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">player</span> p <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">boolean</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//true when no requirement is set or the requirment call is successful</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> index <span style="color: sienna;">=</span> &nbsp;<span style="color: purple">LoadInteger</span><span style="color: sienna;">&#40;</span>Hash<span style="color: sienna;">,</span> unitCode<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> HeroRegType<span style="color: sienna;">&#91;</span>index<span style="color: sienna;">&#93;</span> <span style="color: sienna;">==</span> <span style="color: #3333FF;">0</span> <span style="font-weight: bold">then</span> <span style="color: #009933;">//no requirement</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">return</span> <span style="color: #3333ff">true</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">elseif</span> HeroRegType<span style="color: sienna;">&#91;</span>index<span style="color: sienna;">&#93;</span> <span style="color: sienna;">==</span> <span style="color: #3333FF;">1</span> <span style="font-weight: bold">and</span> HeroRegRace<span style="color: sienna;">&#91;</span>index<span style="color: sienna;">&#93;</span> <span style="color: sienna;">==</span> <span style="color: purple">GetPlayerRace</span><span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">return</span> <span style="color: #3333ff">true</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">elseif</span> HeroRegType<span style="color: sienna;">&#91;</span>index<span style="color: sienna;">&#93;</span> <span style="color: sienna;">==</span> <span style="color: #3333FF;">2</span> <span style="font-weight: bold">and</span> HeroRegNumber<span style="color: sienna;">&#91;</span>index<span style="color: sienna;">&#93;</span> <span style="color: sienna;">==</span> <span style="color: purple">GetPlayerTeam</span><span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">return</span> <span style="color: #3333ff">true</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">elseif</span> HeroRegType<span style="color: sienna;">&#91;</span>index<span style="color: sienna;">&#93;</span> <span style="color: sienna;">==</span> <span style="color: #3333FF;">3</span> <span style="font-weight: bold">and</span> HeroRegPlayer<span style="color: sienna;">&#91;</span>index<span style="color: sienna;">&#93;</span> <span style="color: sienna;">==</span> p <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">return</span> <span style="color: #3333ff">true</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">elseif</span> HeroRegType<span style="color: sienna;">&#91;</span>index<span style="color: sienna;">&#93;</span> <span style="color: sienna;">==</span> <span style="color: #3333FF;">4</span> <span style="font-weight: bold">and</span> BlzForceHasPlayer<span style="color: sienna;">&#40;</span>HeroRegForce<span style="color: sienna;">&#91;</span>index<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> p<span style="color: sienna;">&#41;</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">return</span> <span style="color: #3333ff">true</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">elseif</span> HeroRegType<span style="color: sienna;">&#91;</span>index<span style="color: sienna;">&#93;</span> <span style="color: sienna;">==</span> <span style="color: #3333FF;">5</span> <span style="font-weight: bold">and</span> <span style="color: purple">GetPlayerTechCount</span><span style="color: sienna;">&#40;</span>p<span style="color: sienna;">,</span> HeroRegNumber<span style="color: sienna;">&#91;</span>index<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> <span style="color: #3333ff">true</span><span style="color: sienna;">&#41;</span> <span style="color: sienna;">&gt;=</span> HeroRegNumber2<span style="color: sienna;">&#91;</span>index<span style="color: sienna;">&#93;</span> <span style="font-weight: bold">then</span> &nbsp; &nbsp; &nbsp; &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">return</span> <span style="color: #3333ff">true</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">return</span> <span style="color: #3333ff">false</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorDisableButtonIndex <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">integer</span> buttonIndex<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">integer</span> teamNr <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> playerIndex <span style="color: sienna;">=</span> <span style="color: #3333FF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> buttonIndex <span style="color: sienna;">&gt;</span> <span style="color: #3333FF;">0</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> teamNr <span style="color: sienna;">==</span> <span style="color: sienna;">-</span><span style="color: #3333FF;">1</span> <span style="font-weight: bold">or</span> teamNr <span style="color: sienna;">==</span> <span style="color: purple">GetPlayerTeam</span><span style="color: sienna;">&#40;</span><span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="font-weight: bold">call</span> BlzFrameSetEnable<span style="color: sienna;">&#40;</span>HeroButtonFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> <span style="color: #3333ff">false</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> PlayerSelectedButtonIndex<span style="color: sienna;">&#91;</span><span style="color: purple">GetPlayerId</span><span style="color: sienna;">&#40;</span><span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#93;</span> <span style="color: sienna;">==</span> buttonIndex <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetVisible<span style="color: sienna;">&#40;</span>IndicatorSelected<span style="color: sienna;">,</span> <span style="color: #3333ff">false</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//deselect this Button from all players or the team</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">loop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">exitwhen</span> playerIndex <span style="color: sienna;">==</span> GetBJMaxPlayers<span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: sienna;">&#40;</span>teamNr <span style="color: sienna;">==</span> <span style="color: sienna;">-</span><span style="color: #3333FF;">1</span> <span style="font-weight: bold">or</span> teamNr <span style="color: sienna;">==</span> <span style="color: purple">GetPlayerTeam</span><span style="color: sienna;">&#40;</span><span style="color: purple">Player</span><span style="color: sienna;">&#40;</span>playerIndex<span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span> <span style="font-weight: bold">and</span> PlayerSelectedButtonIndex<span style="color: sienna;">&#91;</span>playerIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">==</span> buttonIndex <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> PlayerSelectedButtonIndex<span style="color: sienna;">&#91;</span>playerIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> <span style="color: #3333FF;">0</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> playerIndex <span style="color: sienna;">=</span> playerIndex <span style="color: sienna;">+</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endloop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorEnableButtonIndex <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">integer</span> unitCode<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">integer</span> buttonIndex <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> buttonIndex <span style="color: sienna;">&gt;</span> <span style="color: #3333FF;">0</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetEnable<span style="color: sienna;">&#40;</span>HeroButtonFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> <span style="color: #3333ff">true</span> <span style="font-weight: bold">and</span> <span style="color: sienna;">&#40;</span>BanIgnoreRequirment <span style="font-weight: bold">and</span> BlzFrameIsVisible<span style="color: sienna;">&#40;</span>BanButton<span style="color: sienna;">&#41;</span> <span style="color: sienna;">&#41;</span> <span style="font-weight: bold">or</span> HeroSelectorButtonRequirementDone<span style="color: sienna;">&#40;</span>unitCode<span style="color: sienna;">,</span> <span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorUpdateTooltip <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">integer</span> unitCode <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> unitCodeIndex <span style="color: sienna;">=</span> <span style="color: purple">LoadInteger</span><span style="color: sienna;">&#40;</span>Hash<span style="color: sienna;">,</span> unitCode<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> buttonIndex <span style="color: sienna;">=</span> HeroButtonIndex<span style="color: sienna;">&#91;</span>unitCodeIndex<span style="color: sienna;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> framehandle frame <span style="color: sienna;">=</span> HeroButtonTooltip<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> teamKey <span style="color: sienna;">=</span> <span style="color: purple">StringHash</span><span style="color: sienna;">&#40;</span><span style="color: blue;">&quot;TeamCount&quot;</span><span style="color: sienna;">+</span><span style="color: purple">I2S</span><span style="color: sienna;">&#40;</span><span style="color: purple">GetPlayerTeam</span><span style="color: sienna;">&#40;</span><span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> HeroTotalCount<span style="color: sienna;">&#91;</span>unitCodeIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">&gt;</span> UnitCount <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetText<span style="color: sienna;">&#40;</span>frame<span style="color: sienna;">,</span> TooltipPrefix <span style="color: sienna;">+</span> <span style="color: purple">GetObjectName</span><span style="color: sienna;">&#40;</span>unitCode<span style="color: sienna;">&#41;</span> <span style="color: sienna;">+</span> <span style="color: blue;">&quot;<span style="">\n</span>|r(&quot;</span> <span style="color: sienna;">+</span> <span style="color: purple">GetLocalizedString</span><span style="color: sienna;">&#40;</span>BanTooltip<span style="color: sienna;">&#41;</span> <span style="color: sienna;">+</span> <span style="color: blue;">&quot;)&quot;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> HeroTotalCount<span style="color: sienna;">&#91;</span>unitCodeIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">==</span> UnitCount <span style="font-weight: bold">or</span> <span style="color: purple">LoadInteger</span><span style="color: sienna;">&#40;</span>Hash<span style="color: sienna;">,</span> unitCode<span style="color: sienna;">,</span> teamKey<span style="color: sienna;">&#41;</span> <span style="color: sienna;">&gt;=</span> UnitCountPerTeam <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetText<span style="color: sienna;">&#40;</span>frame<span style="color: sienna;">,</span> TooltipPrefix <span style="color: sienna;">+</span> <span style="color: purple">GetObjectName</span><span style="color: sienna;">&#40;</span>unitCode<span style="color: sienna;">&#41;</span> <span style="color: sienna;">+</span> <span style="color: blue;">&quot;<span style="">\n</span>|r(&quot;</span> <span style="color: sienna;">+</span> <span style="color: purple">GetLocalizedString</span><span style="color: sienna;">&#40;</span>ToManyTooltip<span style="color: sienna;">&#41;</span> <span style="color: sienna;">+</span> <span style="color: blue;">&quot;)&quot;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">elseif</span> <span style="font-weight: bold">not</span> HeroSelectorButtonRequirementDone<span style="color: sienna;">&#40;</span>unitCode<span style="color: sienna;">,</span> <span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetText<span style="color: sienna;">&#40;</span>frame<span style="color: sienna;">,</span> TooltipPrefix <span style="color: sienna;">+</span> <span style="color: purple">GetObjectName</span><span style="color: sienna;">&#40;</span>unitCode<span style="color: sienna;">&#41;</span> <span style="color: sienna;">+</span> <span style="color: blue;">&quot;<span style="">\n</span>|r(&quot;</span> <span style="color: sienna;">+</span> <span style="color: purple">GetLocalizedString</span><span style="color: sienna;">&#40;</span>TooltipRequires<span style="color: sienna;">&#41;</span> <span style="color: sienna;">+</span> <span style="color: blue;">&quot;)&quot;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetText<span style="color: sienna;">&#40;</span>frame<span style="color: sienna;">,</span> TooltipPrefix <span style="color: sienna;">+</span> <span style="color: purple">GetObjectName</span><span style="color: sienna;">&#40;</span>unitCode<span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorCounterChangeUnitCode <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">integer</span> unitCode<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">integer</span> add<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">player</span> p <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> unitCodeIndex <span style="color: sienna;">=</span> <span style="color: purple">LoadInteger</span><span style="color: sienna;">&#40;</span>Hash<span style="color: sienna;">,</span> unitCode<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> buttonIndex <span style="color: sienna;">=</span> HeroButtonIndex<span style="color: sienna;">&#91;</span>unitCodeIndex<span style="color: sienna;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> teamNr <span style="color: sienna;">=</span> <span style="color: purple">GetPlayerTeam</span><span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> teamKey <span style="color: sienna;">=</span> <span style="color: purple">StringHash</span><span style="color: sienna;">&#40;</span><span style="color: blue;">&quot;TeamCount&quot;</span><span style="color: sienna;">+</span><span style="color: purple">I2S</span><span style="color: sienna;">&#40;</span>teamNr<span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroTotalCount<span style="color: sienna;">&#91;</span>unitCodeIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> HeroTotalCount<span style="color: sienna;">&#91;</span>unitCodeIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">+</span> add<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> <span style="color: purple">SaveInteger</span><span style="color: sienna;">&#40;</span>Hash<span style="color: sienna;">,</span> unitCode<span style="color: sienna;">,</span> teamKey<span style="color: sienna;">,</span> <span style="color: purple">LoadInteger</span><span style="color: sienna;">&#40;</span>Hash<span style="color: sienna;">,</span> unitCode<span style="color: sienna;">,</span> teamKey<span style="color: sienna;">&#41;</span> <span style="color: sienna;">+</span> add<span style="color: sienna;">&#41;</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> HeroTotalCount<span style="color: sienna;">&#91;</span>unitCodeIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">&gt;=</span> UnitCount <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//disable for all</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorDisableButtonIndex<span style="color: sienna;">&#40;</span>buttonIndex<span style="color: sienna;">,</span> <span style="color: sienna;">-</span><span style="color: #3333FF;">1</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//enable for all</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorEnableButtonIndex<span style="color: sienna;">&#40;</span>unitCode<span style="color: sienna;">,</span> buttonIndex<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">LoadInteger</span><span style="color: sienna;">&#40;</span>Hash<span style="color: sienna;">,</span> unitCode<span style="color: sienna;">,</span> teamKey<span style="color: sienna;">&#41;</span> <span style="color: sienna;">&gt;=</span> UnitCountPerTeam &nbsp;<span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//disable for this team</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorDisableButtonIndex<span style="color: sienna;">&#40;</span>buttonIndex<span style="color: sienna;">,</span> teamNr<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorUpdateTooltip<span style="color: sienna;">&#40;</span>unitCode<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorRollOption <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">player</span> p<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">boolean</span> includeRandomOnly<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">integer</span> exculdedIndex<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">integer</span> category <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">integer</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> teamNr <span style="color: sienna;">=</span> <span style="color: purple">GetPlayerTeam</span><span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> <span style="color: #4477aa; font-weight: bold">array</span> options<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> optionCount <span style="color: sienna;">=</span> <span style="color: #3333FF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> teamKey <span style="color: sienna;">=</span> <span style="color: purple">StringHash</span><span style="color: sienna;">&#40;</span><span style="color: blue;">&quot;TeamCount&quot;</span><span style="color: sienna;">+</span><span style="color: purple">I2S</span><span style="color: sienna;">&#40;</span>teamNr<span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">boolean</span> allowed<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> index <span style="color: sienna;">=</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> unitCode<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> unitCodeIndex<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">loop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">exitwhen</span> index <span style="color: sienna;">&gt;</span> HeroCount<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> unitCode <span style="color: sienna;">=</span> HeroUnitCode<span style="color: sienna;">&#91;</span>index<span style="color: sienna;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> unitCodeIndex <span style="color: sienna;">=</span> <span style="color: purple">LoadInteger</span><span style="color: sienna;">&#40;</span>Hash<span style="color: sienna;">,</span> unitCode<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> allowed <span style="color: sienna;">=</span> <span style="color: #3333ff">true</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//total limited reached?</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> HeroTotalCount<span style="color: sienna;">&#91;</span>unitCodeIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">&gt;=</span> UnitCount <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> allowed <span style="color: sienna;">=</span> <span style="color: #3333ff">false</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//print(GetObjectName(unitCode))</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//print(&quot;rejected total limit&quot;)</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//team limited reached?</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> allowed <span style="font-weight: bold">and</span> <span style="color: purple">LoadInteger</span><span style="color: sienna;">&#40;</span>Hash<span style="color: sienna;">,</span> unitCode<span style="color: sienna;">,</span> teamKey<span style="color: sienna;">&#41;</span> <span style="color: sienna;">&gt;=</span> UnitCountPerTeam &nbsp;<span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//print(GetObjectName(unitCode))</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//print(&quot;rejected team limit&quot;)</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> allowed <span style="color: sienna;">=</span> <span style="color: #3333ff">false</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//allow randomOnly?</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> allowed <span style="font-weight: bold">and</span> <span style="font-weight: bold">not</span> includeRandomOnly <span style="font-weight: bold">and</span> HeroButtonIndex<span style="color: sienna;">&#91;</span>unitCodeIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">==</span> <span style="color: #3333FF;">0</span> &nbsp;<span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//print(GetObjectName(unitCode))</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//print(&quot;rejected random only&quot;)</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> allowed <span style="color: sienna;">=</span> <span style="color: #3333ff">false</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//this index is excluded? This can make sure you get another button.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> allowed <span style="font-weight: bold">and</span> HeroButtonIndex<span style="color: sienna;">&#91;</span>unitCodeIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">&gt;</span> <span style="color: #3333FF;">0</span> <span style="font-weight: bold">and</span> HeroButtonIndex<span style="color: sienna;">&#91;</span>unitCodeIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">==</span> exculdedIndex <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//print(GetObjectName(unitCode))</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//print(&quot;rejected exclude&quot;)</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> allowed <span style="color: sienna;">=</span> <span style="color: #3333ff">false</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//fullfills the requirement?</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> allowed <span style="font-weight: bold">and</span> <span style="font-weight: bold">not</span> HeroSelectorButtonRequirementDone<span style="color: sienna;">&#40;</span>unitCode<span style="color: sienna;">,</span> p<span style="color: sienna;">&#41;</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//print(GetObjectName(unitCode))</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//print(&quot;rejected requirement&quot;)</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> allowed <span style="color: sienna;">=</span> <span style="color: #3333ff">false</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//when having an given an category only allow options having that category atleast partly</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> allowed <span style="font-weight: bold">and</span> category <span style="color: sienna;">&gt;</span> <span style="color: #3333FF;">0</span> <span style="font-weight: bold">and</span> BlzBitAnd<span style="color: sienna;">&#40;</span>category<span style="color: sienna;">,</span> HeroCategory<span style="color: sienna;">&#91;</span>unitCodeIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> <span style="color: #3333FF;">0</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//print(GetObjectName(unitCode))</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//print(&quot; &nbsp;rejected category&quot;, category, HeroSelector.UnitData[unitCode].Category)</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> allowed <span style="color: sienna;">=</span> <span style="color: #3333ff">false</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> allowed <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> optionCount <span style="color: sienna;">=</span> optionCount <span style="color: sienna;">+</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> options<span style="color: sienna;">&#91;</span>optionCount<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> unitCode<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> index <span style="color: sienna;">=</span> index <span style="color: sienna;">+</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endloop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//nothing is allwoed?</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> optionCount <span style="color: sienna;">==</span> <span style="color: #3333FF;">0</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">return</span> <span style="color: #3333FF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">return</span> options<span style="color: sienna;">&#91;</span><span style="color: purple">GetRandomInt</span><span style="color: sienna;">&#40;</span><span style="color: #3333FF;">1</span><span style="color: sienna;">,</span> optionCount<span style="color: sienna;">&#41;</span><span style="color: sienna;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorEnablePickDelayBanAction <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">nothing</span> <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">loop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">exitwhen</span> DelayBanCount <span style="color: sienna;">&lt;=</span> <span style="color: #3333FF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorCounterChangeUnitCode<span style="color: sienna;">&#40;</span>DelayBanUnitCode<span style="color: sienna;">&#91;</span>DelayBanCount<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> UnitCount <span style="color: sienna;">+</span> <span style="color: #3333FF;">1</span><span style="color: sienna;">,</span> DelayBanPlayer<span style="color: sienna;">&#91;</span>DelayBanCount<span style="color: sienna;">&#93;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> DelayBanCount <span style="color: sienna;">=</span> DelayBanCount <span style="color: sienna;">-</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endloop</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorUpdate <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">nothing</span> <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> buttonIndex <span style="color: sienna;">=</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> unitCodeIndex<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> teamNr<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> teamIndex <span style="color: sienna;">=</span> <span style="color: #3333FF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> teamKey<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">loop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">exitwhen</span> buttonIndex <span style="color: sienna;">&gt;</span> HeroButtonCount<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//have data for this button?</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> HeroButtonUnitCode<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">&gt;</span> <span style="color: #3333FF;">0</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> unitCodeIndex <span style="color: sienna;">=</span> <span style="color: purple">LoadInteger</span><span style="color: sienna;">&#40;</span>Hash<span style="color: sienna;">,</span> HeroButtonUnitCode<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span><span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> HeroTotalCount<span style="color: sienna;">&#91;</span>unitCodeIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">&gt;=</span> UnitCount <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//disable for all</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorDisableButtonIndex<span style="color: sienna;">&#40;</span>buttonIndex<span style="color: sienna;">,</span> <span style="color: sienna;">-</span><span style="color: #3333FF;">1</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//enable for all</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorEnableButtonIndex<span style="color: sienna;">&#40;</span>HeroButtonUnitCode<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> buttonIndex<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> teamIndex <span style="color: sienna;">=</span> <span style="color: #3333FF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">loop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">exitwhen</span> teamIndex <span style="color: sienna;">&gt;</span> UsedTeamNrCount<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> teamNr <span style="color: sienna;">=</span> UsedTeamNr<span style="color: sienna;">&#91;</span>teamIndex<span style="color: sienna;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> teamKey <span style="color: sienna;">=</span> <span style="color: purple">StringHash</span><span style="color: sienna;">&#40;</span><span style="color: blue;">&quot;TeamCount&quot;</span><span style="color: sienna;">+</span><span style="color: purple">I2S</span><span style="color: sienna;">&#40;</span>teamNr<span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">LoadInteger</span><span style="color: sienna;">&#40;</span>Hash<span style="color: sienna;">,</span> HeroButtonUnitCode<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> teamKey<span style="color: sienna;">&#41;</span> <span style="color: sienna;">&gt;=</span> UnitCountPerTeam &nbsp;<span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//disable for this team</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorDisableButtonIndex<span style="color: sienna;">&#40;</span>buttonIndex<span style="color: sienna;">,</span> teamNr<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> teamIndex <span style="color: sienna;">=</span> teamIndex <span style="color: sienna;">+</span> <span style="color: #3333FF;">1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endloop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetTexture<span style="color: sienna;">&#40;</span>HeroButtonIcon<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> BlzGetAbilityIcon<span style="color: sienna;">&#40;</span>HeroButtonUnitCode<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> ButtonBlendAll<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetTexture<span style="color: sienna;">&#40;</span>HeroButtonIconPushed<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> BlzGetAbilityIcon<span style="color: sienna;">&#40;</span>HeroButtonUnitCode<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> ButtonBlendAll<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetTexture<span style="color: sienna;">&#40;</span>HeroButtonIconDisabled<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> HeroSelectorGetDisabledIcon<span style="color: sienna;">&#40;</span>BlzGetAbilityIcon<span style="color: sienna;">&#40;</span>HeroButtonUnitCode<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> ButtonBlendAll<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//call BlzFrameSetText(HeroButtonTooltip[buttonIndex], TooltipPrefix + GetObjectName(HeroButtonUnitCode[buttonIndex]))</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorUpdateTooltip<span style="color: sienna;">&#40;</span>HeroButtonUnitCode<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//no, make it unclickable and empty</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetEnable<span style="color: sienna;">&#40;</span>HeroButtonFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> <span style="color: #3333ff">false</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetTexture<span style="color: sienna;">&#40;</span>HeroButtonIcon<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> EmptyButtonPath<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333ff">true</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetTexture<span style="color: sienna;">&#40;</span>HeroButtonIconPushed<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> EmptyButtonPath<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333ff">true</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetTexture<span style="color: sienna;">&#40;</span>HeroButtonIconDisabled<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> EmptyButtonPath<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333ff">true</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> buttonIndex <span style="color: sienna;">=</span> buttonIndex <span style="color: sienna;">+</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endloop</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorEnablePickAction <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">boolean</span> flag <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetVisible<span style="color: sienna;">&#40;</span>AcceptButton<span style="color: sienna;">,</span> <span style="color: #3333ff">true</span> <span style="font-weight: bold">and</span> AcceptButtonIsShown<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetVisible<span style="color: sienna;">&#40;</span>RandomButton<span style="color: sienna;">,</span> <span style="color: #3333ff">true</span> <span style="font-weight: bold">and</span> RandomButtonIsShown<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetVisible<span style="color: sienna;">&#40;</span>BanButton<span style="color: sienna;">,</span> <span style="color: #3333ff">false</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetEnable<span style="color: sienna;">&#40;</span>AcceptButton<span style="color: sienna;">,</span> flag<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetEnable<span style="color: sienna;">&#40;</span>RandomButton<span style="color: sienna;">,</span> flag<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetModel<span style="color: sienna;">&#40;</span>IndicatorSelected<span style="color: sienna;">,</span> IndicatorPathPick<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> BanIgnoreRequirment <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorUpdate<span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorEnablePick <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">boolean</span> flag <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorEnablePickDelayBanAction<span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorEnablePickAction<span style="color: sienna;">&#40;</span>flag<span style="color: sienna;">&#41;</span> &nbsp; &nbsp;<br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorEnablePickPlayer <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">boolean</span> flag<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">player</span> p <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorEnablePickDelayBanAction<span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> p <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorEnablePickAction<span style="color: sienna;">&#40;</span>flag<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorEnablePickTeam <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">boolean</span> flag<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">integer</span> teamNr <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorEnablePickDelayBanAction<span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">GetPlayerTeam</span><span style="color: sienna;">&#40;</span><span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> teamNr <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorEnablePickAction<span style="color: sienna;">&#40;</span>flag<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorEnablePickRace <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">boolean</span> flag<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">race</span> r <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorEnablePickDelayBanAction<span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">GetPlayerRace</span><span style="color: sienna;">&#40;</span><span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> r <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorEnablePickAction<span style="color: sienna;">&#40;</span>flag<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorEnablePickForce <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">boolean</span> flag<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">force</span> f <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorEnablePickDelayBanAction<span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> BlzForceHasPlayer<span style="color: sienna;">&#40;</span>f<span style="color: sienna;">,</span> <span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorEnablePickAction<span style="color: sienna;">&#40;</span>flag<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorEnableBanPlayerAction <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">boolean</span> flag <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span> &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetVisible<span style="color: sienna;">&#40;</span>AcceptButton<span style="color: sienna;">,</span> <span style="color: #3333ff">false</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetVisible<span style="color: sienna;">&#40;</span>RandomButton<span style="color: sienna;">,</span> <span style="color: #3333ff">false</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetVisible<span style="color: sienna;">&#40;</span>BanButton<span style="color: sienna;">,</span> <span style="color: #3333ff">true</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetEnable<span style="color: sienna;">&#40;</span>BanButton<span style="color: sienna;">,</span> flag<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetModel<span style="color: sienna;">&#40;</span>IndicatorSelected<span style="color: sienna;">,</span> IndicatorPathBan<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> BanIgnoreRequirment <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorUpdate<span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorEnableBanPlayer <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">boolean</span> flag<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">player</span> p <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span> &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> p <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorEnableBanPlayerAction<span style="color: sienna;">&#40;</span>flag<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorEnableBanForce <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">boolean</span> flag<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">force</span> f <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span> &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> BlzForceHasPlayer<span style="color: sienna;">&#40;</span>f<span style="color: sienna;">,</span> <span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorEnableBanPlayerAction<span style="color: sienna;">&#40;</span>flag<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorEnableBanTeam <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">boolean</span> flag<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">integer</span> teamNr <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span> &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">GetPlayerTeam</span><span style="color: sienna;">&#40;</span><span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> teamNr <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorEnableBanPlayerAction<span style="color: sienna;">&#40;</span>flag<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorEnableBanRace <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">boolean</span> flag<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">race</span> r <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span> &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">GetPlayerRace</span><span style="color: sienna;">&#40;</span><span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> r <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorEnableBanPlayerAction<span style="color: sienna;">&#40;</span>flag<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorEnableBan <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">boolean</span> flag <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span> &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorEnableBanPlayerAction<span style="color: sienna;">&#40;</span>flag<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorframeLoseFocus <span style="font-weight: bold">takes</span> framehandle frame <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> BlzFrameGetEnable<span style="color: sienna;">&#40;</span>frame<span style="color: sienna;">&#41;</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetEnable<span style="color: sienna;">&#40;</span>frame<span style="color: sienna;">,</span> <span style="color: #3333ff">false</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetEnable<span style="color: sienna;">&#40;</span>frame<span style="color: sienna;">,</span> <span style="color: #3333ff">true</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorShowFramePlayer <span style="font-weight: bold">takes</span> framehandle frame<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">boolean</span> flag<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">player</span> p <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> p <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetVisible<span style="color: sienna;">&#40;</span>frame<span style="color: sienna;">,</span> flag<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorShowFrameForce <span style="font-weight: bold">takes</span> framehandle frame<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">boolean</span> flag<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">force</span> f <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> BlzForceHasPlayer<span style="color: sienna;">&#40;</span>f<span style="color: sienna;">,</span> <span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetVisible<span style="color: sienna;">&#40;</span>frame<span style="color: sienna;">,</span> flag<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorShowFrameTeam <span style="font-weight: bold">takes</span> framehandle frame<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">boolean</span> flag<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">integer</span> teamNr <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">GetPlayerTeam</span><span style="color: sienna;">&#40;</span><span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> teamNr <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetVisible<span style="color: sienna;">&#40;</span>frame<span style="color: sienna;">,</span> flag<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorShowFrameRace <span style="font-weight: bold">takes</span> framehandle frame<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">boolean</span> flag<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">race</span> r <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">GetPlayerRace</span><span style="color: sienna;">&#40;</span><span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> r <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetVisible<span style="color: sienna;">&#40;</span>frame<span style="color: sienna;">,</span> flag<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorShowPlayer <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">boolean</span> flag<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">player</span> who <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorShowFramePlayer<span style="color: sienna;">&#40;</span>HeroSelectorBox<span style="color: sienna;">,</span> flag<span style="color: sienna;">,</span> who<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorShowTeam <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">boolean</span> flag<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">integer</span> who <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorShowFrameTeam<span style="color: sienna;">&#40;</span>HeroSelectorBox<span style="color: sienna;">,</span> flag<span style="color: sienna;">,</span> who<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorShowRace <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">boolean</span> flag<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">race</span> who <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorShowFrameRace<span style="color: sienna;">&#40;</span>HeroSelectorBox<span style="color: sienna;">,</span> flag<span style="color: sienna;">,</span> who<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorShowForce <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">boolean</span> flag<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">force</span> who <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorShowFrameForce<span style="color: sienna;">&#40;</span>HeroSelectorBox<span style="color: sienna;">,</span> flag<span style="color: sienna;">,</span> who<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorShow <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">boolean</span> flag <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetVisible<span style="color: sienna;">&#40;</span>HeroSelectorBox<span style="color: sienna;">,</span> flag<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorAddUnit <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">integer</span> unitCode<span style="color: sienna;">,</span> <span style="color: #4477aa; font-weight: bold">boolean</span> onlyRandom <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//no unitCode =&gt; empty field</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> unitCode <span style="color: sienna;">==</span> <span style="color: #3333FF;">0</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> ButtonHeroCount <span style="color: sienna;">=</span> ButtonHeroCount <span style="color: sienna;">+</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//Such an object Exist? not unique?</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">GetObjectName</span><span style="color: sienna;">&#40;</span>unitCode<span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> <span style="color: blue;">&quot;&quot;</span> <span style="font-weight: bold">or</span> <span style="color: purple">HaveSavedBoolean</span><span style="color: sienna;">&#40;</span>Hash<span style="color: sienna;">,</span> unitCode<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">return</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroCount <span style="color: sienna;">=</span> HeroCount <span style="color: sienna;">+</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroUnitCode<span style="color: sienna;">&#91;</span>HeroCount<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> unitCode<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> <span style="color: purple">SaveBoolean</span><span style="color: sienna;">&#40;</span>Hash<span style="color: sienna;">,</span> unitCode<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333ff">true</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> <span style="color: purple">SaveInteger</span><span style="color: sienna;">&#40;</span>Hash<span style="color: sienna;">,</span> unitCode<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> HeroCount<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroCategory<span style="color: sienna;">&#91;</span>HeroCount<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> AutoDetectCategory<span style="color: sienna;">&#40;</span>unitCode<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="font-weight: bold">not</span> onlyRandom <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> ButtonHeroCount <span style="color: sienna;">=</span> ButtonHeroCount <span style="color: sienna;">+</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroButtonIndex<span style="color: sienna;">&#91;</span>HeroCount<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> ButtonHeroCount<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> ButtonHeroUnitCode<span style="color: sienna;">&#91;</span>ButtonHeroCount<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> unitCode &nbsp; &nbsp; &nbsp; &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorDoRandom <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">player</span> p <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> category <span style="color: sienna;">=</span> <span style="color: #3333FF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> unitCode<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">unit</span> u<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> CategoryAffectRandom <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> category <span style="color: sienna;">=</span> PlayerSelectedCategory<span style="color: sienna;">&#91;</span><span style="color: purple">GetPlayerId</span><span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span><span style="color: sienna;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> unitCode <span style="color: sienna;">=</span> HeroSelectorRollOption<span style="color: sienna;">&#40;</span>p<span style="color: sienna;">,</span> <span style="color: #3333ff">true</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> category<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> unitCode <span style="color: sienna;">==</span> <span style="color: #3333FF;">0</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">return</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> u <span style="color: sienna;">=</span> <span style="color: purple">CreateUnit</span><span style="color: sienna;">&#40;</span>p<span style="color: sienna;">,</span> unitCode<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorCounterChangeUnitCode<span style="color: sienna;">&#40;</span>unitCode<span style="color: sienna;">,</span> <span style="color: #3333FF;">1</span><span style="color: sienna;">,</span> p<span style="color: sienna;">&#41;</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> udg_HeroSelectorEventUnit <span style="color: sienna;">=</span> u<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> udg_HeroSelectorEventIsRandom <span style="color: sienna;">=</span> <span style="color: #3333ff">true</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> udg_HeroSelectorEventUnitCode <span style="color: sienna;">=</span> unitCode<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> udg_HeroSelectorEventPlayer <span style="color: sienna;">=</span> p<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> udg_HeroSelectorEvent <span style="color: sienna;">=</span> <span style="color: #3333FF;">0.0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> udg_HeroSelectorEvent <span style="color: sienna;">=</span> <span style="color: #3333FF;">1.0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> udg_HeroSelectorEvent <span style="color: sienna;">=</span> <span style="color: #3333FF;">0.0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> u <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorDoPick <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">player</span> p <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">boolean</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> unitCode<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">unit</span> u<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//pick what currently is selected, returns true on success returns false when something went wrong,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> buttonIndex <span style="color: sienna;">=</span> PlayerSelectedButtonIndex<span style="color: sienna;">&#91;</span><span style="color: purple">GetPlayerId</span><span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span><span style="color: sienna;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> buttonIndex <span style="color: sienna;">&lt;=</span> <span style="color: #3333FF;">0</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">return</span> <span style="color: #3333ff">false</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span> <span style="color: #009933;">//reject nothing selected</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> unitCode <span style="color: sienna;">=</span> HeroButtonUnitCode<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="font-weight: bold">not</span> HeroSelectorButtonRequirementDone<span style="color: sienna;">&#40;</span>unitCode<span style="color: sienna;">,</span> p<span style="color: sienna;">&#41;</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">return</span> <span style="color: #3333ff">false</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span> <span style="color: #009933;">//reject requirment not fullfilled</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> u <span style="color: sienna;">=</span> <span style="color: purple">CreateUnit</span><span style="color: sienna;">&#40;</span>p<span style="color: sienna;">,</span> unitCode<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorCounterChangeUnitCode<span style="color: sienna;">&#40;</span>unitCode<span style="color: sienna;">,</span> <span style="color: #3333FF;">1</span><span style="color: sienna;">,</span> p<span style="color: sienna;">&#41;</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> udg_HeroSelectorEventUnit <span style="color: sienna;">=</span> u<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> udg_HeroSelectorEventIsRandom <span style="color: sienna;">=</span> <span style="color: #3333ff">false</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> udg_HeroSelectorEventUnitCode <span style="color: sienna;">=</span> unitCode<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> udg_HeroSelectorEventPlayer <span style="color: sienna;">=</span> p<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> udg_HeroSelectorEvent <span style="color: sienna;">=</span> <span style="color: #3333FF;">0.0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> udg_HeroSelectorEvent <span style="color: sienna;">=</span> <span style="color: #3333FF;">1.0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> udg_HeroSelectorEvent <span style="color: sienna;">=</span> <span style="color: #3333FF;">0.0</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> u <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">return</span> <span style="color: #3333ff">true</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorForceRandom <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">nothing</span> <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//this is a wrapper for doRandom allowing different dataTypes</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">player</span> p<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> playerIndex <span style="color: sienna;">=</span> <span style="color: #3333FF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">loop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">exitwhen</span> playerIndex <span style="color: sienna;">==</span> GetBJMaxPlayers<span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> p <span style="color: sienna;">=</span> <span style="color: purple">Player</span><span style="color: sienna;">&#40;</span>playerIndex<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">GetPlayerSlotState</span><span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> <span style="color: #4477aa">PLAYER_SLOT_STATE_PLAYING</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorDoRandom<span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> playerIndex <span style="color: sienna;">=</span> playerIndex <span style="color: sienna;">+</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endloop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> p <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorForceRandomTeam <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">integer</span> who <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//this is a wrapper for doRandom allowing different dataTypes</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">player</span> p<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> playerIndex <span style="color: sienna;">=</span> <span style="color: #3333FF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">loop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">exitwhen</span> playerIndex <span style="color: sienna;">==</span> GetBJMaxPlayers<span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> p <span style="color: sienna;">=</span> <span style="color: purple">Player</span><span style="color: sienna;">&#40;</span>playerIndex<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">GetPlayerSlotState</span><span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> <span style="color: #4477aa">PLAYER_SLOT_STATE_PLAYING</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">GetPlayerTeam</span><span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> who <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorDoRandom<span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> playerIndex <span style="color: sienna;">=</span> playerIndex <span style="color: sienna;">+</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endloop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> p <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorForceRandomRace <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">race</span> who <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//this is a wrapper for doRandom allowing different dataTypes</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">player</span> p<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> playerIndex <span style="color: sienna;">=</span> <span style="color: #3333FF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">loop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">exitwhen</span> playerIndex <span style="color: sienna;">==</span> GetBJMaxPlayers<span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> p <span style="color: sienna;">=</span> <span style="color: purple">Player</span><span style="color: sienna;">&#40;</span>playerIndex<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">GetPlayerSlotState</span><span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> <span style="color: #4477aa">PLAYER_SLOT_STATE_PLAYING</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">GetPlayerRace</span><span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> who <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorDoRandom<span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> playerIndex <span style="color: sienna;">=</span> playerIndex <span style="color: sienna;">+</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endloop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> p <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorForcePick <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">nothing</span> <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//this is a wrapper for doRandom allowing different dataTypes</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">player</span> p<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> playerIndex <span style="color: sienna;">=</span> <span style="color: #3333FF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">loop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">exitwhen</span> playerIndex <span style="color: sienna;">==</span> GetBJMaxPlayers<span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> p <span style="color: sienna;">=</span> <span style="color: purple">Player</span><span style="color: sienna;">&#40;</span>playerIndex<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">GetPlayerSlotState</span><span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> <span style="color: #4477aa">PLAYER_SLOT_STATE_PLAYING</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="font-weight: bold">not</span> HeroSelectorDoPick<span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorDoRandom<span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> playerIndex <span style="color: sienna;">=</span> playerIndex <span style="color: sienna;">+</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endloop</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorForcePickTeam <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">integer</span> who <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//this is a wrapper for doRandom allowing different dataTypes</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">player</span> p<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> playerIndex <span style="color: sienna;">=</span> <span style="color: #3333FF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">loop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">exitwhen</span> playerIndex <span style="color: sienna;">==</span> GetBJMaxPlayers<span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> p <span style="color: sienna;">=</span> <span style="color: purple">Player</span><span style="color: sienna;">&#40;</span>playerIndex<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">GetPlayerSlotState</span><span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> <span style="color: #4477aa">PLAYER_SLOT_STATE_PLAYING</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">GetPlayerTeam</span><span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> who <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="font-weight: bold">not</span> HeroSelectorDoPick<span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorDoRandom<span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> playerIndex <span style="color: sienna;">=</span> playerIndex <span style="color: sienna;">+</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endloop</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorForcePickRace <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">race</span> r <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//this is a wrapper for doRandom allowing different dataTypes</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">player</span> p<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> playerIndex <span style="color: sienna;">=</span> <span style="color: #3333FF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">loop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">exitwhen</span> playerIndex <span style="color: sienna;">==</span> GetBJMaxPlayers<span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> p <span style="color: sienna;">=</span> <span style="color: purple">Player</span><span style="color: sienna;">&#40;</span>playerIndex<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">GetPlayerSlotState</span><span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> <span style="color: #4477aa">PLAYER_SLOT_STATE_PLAYING</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">GetPlayerRace</span><span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> r <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="font-weight: bold">not</span> HeroSelectorDoPick<span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorDoRandom<span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> playerIndex <span style="color: sienna;">=</span> playerIndex <span style="color: sienna;">+</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endloop</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorForcePickPlayer <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">player</span> p <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="font-weight: bold">not</span> HeroSelectorDoPick<span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorDoRandom<span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorActionPressHeroButton <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">nothing</span> <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> framehandle fh <span style="color: sienna;">=</span> BlzGetTriggerFrame<span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">player</span> p <span style="color: sienna;">=</span> <span style="color: purple">GetTriggerPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> buttonIndex <span style="color: sienna;">=</span> <span style="color: purple">LoadInteger</span><span style="color: sienna;">&#40;</span>Hash<span style="color: sienna;">,</span> <span style="color: purple">GetHandleId</span><span style="color: sienna;">&#40;</span>fh<span style="color: sienna;">&#41;</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> unitCode <span style="color: sienna;">=</span> HeroButtonUnitCode<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> PlayerSelectedButtonIndex<span style="color: sienna;">&#91;</span><span style="color: purple">GetPlayerId</span><span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span><span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> buttonIndex<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorframeLoseFocus<span style="color: sienna;">&#40;</span>BlzGetTriggerFrame<span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> p <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetVisible<span style="color: sienna;">&#40;</span>IndicatorSelected<span style="color: sienna;">,</span> <span style="color: #3333ff">true</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetPoint<span style="color: sienna;">&#40;</span>IndicatorSelected<span style="color: sienna;">,</span> FRAMEPOINT_TOPLEFT<span style="color: sienna;">,</span> fh<span style="color: sienna;">,</span> FRAMEPOINT_TOPLEFT<span style="color: sienna;">,</span> <span style="color: sienna;">-</span><span style="color: #3333FF;">0.001</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0.001</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetPoint<span style="color: sienna;">&#40;</span>IndicatorSelected<span style="color: sienna;">,</span> FRAMEPOINT_BOTTOMRIGHT<span style="color: sienna;">,</span> fh<span style="color: sienna;">,</span> FRAMEPOINT_BOTTOMRIGHT<span style="color: sienna;">,</span> <span style="color: sienna;">-</span><span style="color: #3333FF;">0.0012</span><span style="color: sienna;">,</span> <span style="color: sienna;">-</span><span style="color: #3333FF;">0.0016</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> udg_HeroSelectorEventUnit <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> udg_HeroSelectorEventUnitCode <span style="color: sienna;">=</span> unitCode<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> udg_HeroSelectorEventPlayer <span style="color: sienna;">=</span> p<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> udg_HeroSelectorEvent <span style="color: sienna;">=</span> <span style="color: #3333FF;">0.0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> udg_HeroSelectorEvent <span style="color: sienna;">=</span> <span style="color: #3333FF;">2.0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> udg_HeroSelectorEvent <span style="color: sienna;">=</span> <span style="color: #3333FF;">0.0</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> fh <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> p <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorActionRandomButton <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">nothing</span> <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">player</span> p <span style="color: sienna;">=</span> <span style="color: purple">GetTriggerPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> playerIndex <span style="color: sienna;">=</span> <span style="color: purple">GetPlayerId</span><span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> unitCode<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> unitCodeIndex<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> buttonIndex<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorframeLoseFocus<span style="color: sienna;">&#40;</span>BlzGetTriggerFrame<span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> RandomButtonPick <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorDoRandom<span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> unitCode <span style="color: sienna;">=</span> HeroSelectorRollOption<span style="color: sienna;">&#40;</span>p<span style="color: sienna;">,</span> <span style="color: #3333ff">false</span><span style="color: sienna;">,</span> PlayerSelectedButtonIndex<span style="color: sienna;">&#91;</span>playerIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> PlayerSelectedCategory<span style="color: sienna;">&#91;</span>playerIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> unitCode <span style="color: sienna;">&gt;</span> <span style="color: #3333FF;">0</span> <span style="font-weight: bold">and</span> <span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> p <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> unitCodeIndex <span style="color: sienna;">=</span> <span style="color: purple">LoadInteger</span><span style="color: sienna;">&#40;</span>Hash<span style="color: sienna;">,</span> unitCode<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> buttonIndex <span style="color: sienna;">=</span> HeroButtonIndex<span style="color: sienna;">&#91;</span>unitCodeIndex<span style="color: sienna;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameClick<span style="color: sienna;">&#40;</span>HeroButtonFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> p <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorActionAcceptButton <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">nothing</span> <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorframeLoseFocus<span style="color: sienna;">&#40;</span>BlzGetTriggerFrame<span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorDoPick<span style="color: sienna;">&#40;</span><span style="color: purple">GetTriggerPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorActionBanButton <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">nothing</span> <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">player</span> p <span style="color: sienna;">=</span> <span style="color: purple">GetTriggerPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> playerIndex <span style="color: sienna;">=</span> <span style="color: purple">GetPlayerId</span><span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> buttonIndex <span style="color: sienna;">=</span> PlayerSelectedButtonIndex<span style="color: sienna;">&#91;</span>playerIndex<span style="color: sienna;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> unitCode <span style="color: sienna;">=</span> HeroButtonUnitCode<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorframeLoseFocus<span style="color: sienna;">&#40;</span>BlzGetTriggerFrame<span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> buttonIndex <span style="color: sienna;">&gt;</span> <span style="color: #3333FF;">0</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="font-weight: bold">not</span> DelayBanUntilPick <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorCounterChangeUnitCode<span style="color: sienna;">&#40;</span>unitCode<span style="color: sienna;">,</span> UnitCount <span style="color: sienna;">+</span> <span style="color: #3333FF;">1</span><span style="color: sienna;">,</span> p<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> DelayBanCount <span style="color: sienna;">=</span> DelayBanCount <span style="color: sienna;">+</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> DelayBanPlayer<span style="color: sienna;">&#91;</span>DelayBanCount<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> p<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> DelayBanUnitCode<span style="color: sienna;">&#91;</span>DelayBanCount<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> unitCode<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> udg_HeroSelectorEventUnit <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> udg_HeroSelectorEventUnitCode <span style="color: sienna;">=</span> unitCode<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> udg_HeroSelectorEventPlayer <span style="color: sienna;">=</span> p<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> udg_HeroSelectorEvent <span style="color: sienna;">=</span> <span style="color: #3333FF;">0.0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> udg_HeroSelectorEvent <span style="color: sienna;">=</span> <span style="color: #3333FF;">3.0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> udg_HeroSelectorEvent <span style="color: sienna;">=</span> <span style="color: #3333FF;">0.0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> p <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorActionCategoryButton <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">nothing</span> <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> buttonIndex<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> framehandle fh <span style="color: sienna;">=</span> BlzGetTriggerFrame<span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> categoryIndex <span style="color: sienna;">=</span> <span style="color: purple">LoadInteger</span><span style="color: sienna;">&#40;</span>Hash<span style="color: sienna;">,</span> <span style="color: purple">GetHandleId</span><span style="color: sienna;">&#40;</span>fh<span style="color: sienna;">&#41;</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> lastCategoryIndex<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">player</span> p <span style="color: sienna;">=</span> <span style="color: purple">GetTriggerPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> playerIndex <span style="color: sienna;">=</span> <span style="color: purple">GetPlayerId</span><span style="color: sienna;">&#40;</span>p<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> unitCodeIndex<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> HeroSelectorframeLoseFocus<span style="color: sienna;">&#40;</span>fh<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//has this category already?</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> BlzBitAnd<span style="color: sienna;">&#40;</span>PlayerSelectedCategory<span style="color: sienna;">&#91;</span>playerIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> CategoryButtonValue<span style="color: sienna;">&#91;</span>categoryIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">&#41;</span> !<span style="color: sienna;">=</span> <span style="color: #3333FF;">0</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//yes, unable</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> PlayerSelectedCategory<span style="color: sienna;">&#91;</span>playerIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> PlayerSelectedCategory<span style="color: sienna;">&#91;</span>playerIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">-</span> CategoryButtonValue<span style="color: sienna;">&#91;</span>categoryIndex<span style="color: sienna;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> p <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetTexture<span style="color: sienna;">&#40;</span>CategoryIconFrame<span style="color: sienna;">&#91;</span>categoryIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> CategoryTextureDisabled<span style="color: sienna;">&#91;</span>categoryIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333ff">true</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetTexture<span style="color: sienna;">&#40;</span>CategoryIconPushedFrame<span style="color: sienna;">&#91;</span>categoryIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> CategoryTextureDisabled<span style="color: sienna;">&#91;</span>categoryIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333ff">true</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="font-weight: bold">not</span> CategoryMultiSelect <span style="font-weight: bold">and</span> PlayerSelectedCategory<span style="color: sienna;">&#91;</span>playerIndex<span style="color: sienna;">&#93;</span> !<span style="color: sienna;">=</span> <span style="color: #3333FF;">0</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> lastCategoryIndex <span style="color: sienna;">=</span> PlayerLastSelectedCategoryIndex<span style="color: sienna;">&#91;</span>playerIndex<span style="color: sienna;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetTexture<span style="color: sienna;">&#40;</span>CategoryIconFrame<span style="color: sienna;">&#91;</span>lastCategoryIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> CategoryTextureDisabled<span style="color: sienna;">&#91;</span>lastCategoryIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333ff">true</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetTexture<span style="color: sienna;">&#40;</span>CategoryIconPushedFrame<span style="color: sienna;">&#91;</span>lastCategoryIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> CategoryTextureDisabled<span style="color: sienna;">&#91;</span>lastCategoryIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333ff">true</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> PlayerSelectedCategory<span style="color: sienna;">&#91;</span>playerIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> <span style="color: #3333FF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//no, enable</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> PlayerSelectedCategory<span style="color: sienna;">&#91;</span>playerIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> PlayerSelectedCategory<span style="color: sienna;">&#91;</span>playerIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">+</span> CategoryButtonValue<span style="color: sienna;">&#91;</span>categoryIndex<span style="color: sienna;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> p <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetTexture<span style="color: sienna;">&#40;</span>CategoryIconFrame<span style="color: sienna;">&#91;</span>categoryIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> CategoryTexture<span style="color: sienna;">&#91;</span>categoryIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333ff">true</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetTexture<span style="color: sienna;">&#40;</span>CategoryIconPushedFrame<span style="color: sienna;">&#91;</span>categoryIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> CategoryTexture<span style="color: sienna;">&#91;</span>categoryIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333ff">true</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> PlayerLastSelectedCategoryIndex<span style="color: sienna;">&#91;</span>playerIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> categoryIndex<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> p <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//update all buttons</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//buttons not having at least 1 selected category becomes partly transparent</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> buttonIndex <span style="color: sienna;">=</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">loop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">exitwhen</span> buttonIndex <span style="color: sienna;">&gt;</span> HeroButtonCount<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> HeroButtonUnitCode<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">&gt;</span> <span style="color: #3333FF;">0</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> unitCodeIndex <span style="color: sienna;">=</span> <span style="color: purple">LoadInteger</span><span style="color: sienna;">&#40;</span>Hash<span style="color: sienna;">,</span> HeroButtonUnitCode<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span><span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> PlayerSelectedCategory<span style="color: sienna;">&#91;</span>playerIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">==</span> <span style="color: #3333FF;">0</span> <span style="font-weight: bold">or</span> BlzBitAnd<span style="color: sienna;">&#40;</span>HeroCategory<span style="color: sienna;">&#91;</span>unitCodeIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> PlayerSelectedCategory<span style="color: sienna;">&#91;</span>playerIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">&#41;</span> <span style="color: sienna;">&gt;</span> <span style="color: #3333FF;">0</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetAlpha<span style="color: sienna;">&#40;</span>HeroButtonFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">255</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetAlpha<span style="color: sienna;">&#40;</span>HeroButtonFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> CategoryFilteredAlpha<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> buttonIndex <span style="color: sienna;">=</span> buttonIndex <span style="color: sienna;">+</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endloop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> fh <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> p <span style="color: sienna;">=</span> <span style="color: #3333ff">null</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
&nbsp; &nbsp; <span style="font-weight: bold">function</span> HeroSelectorInit <span style="font-weight: bold">takes</span> <span style="color: #4477aa; font-weight: bold">nothing</span> <span style="font-weight: bold">returns</span> <span style="color: #4477aa; font-weight: bold">nothing</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">boolean</span> loaded <span style="color: sienna;">=</span> BlzLoadTOCFile<span style="color: sienna;">&#40;</span><span style="color: blue;">&quot;war3mapImported<span style="">\\</span>HeroSelector.toc&quot;</span><span style="color: sienna;">&#41;</span> <span style="color: #009933;">//ex/import also &quot;HeroSelector.fdf&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> buttonIndex<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">real</span> titleSize <span style="color: sienna;">=</span> <span style="color: #3333FF;">0.015</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">real</span> borderSize <span style="color: sienna;">=</span> GetBorderSize<span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> colCount <span style="color: sienna;">=</span> ButtonColCount<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> rowCount <span style="color: sienna;">=</span> ButtonRowCount<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> framehandle box <span style="color: sienna;">=</span> BlzCreateFrame<span style="color: sienna;">&#40;</span>BoxFrameName<span style="color: sienna;">,</span> BlzGetOriginFrame<span style="color: sienna;">&#40;</span>ORIGIN_FRAME_GAME_UI<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> framehandle boxBottom <span style="color: sienna;">=</span> BlzCreateFrame<span style="color: sienna;">&#40;</span><span style="color: blue;">&quot;HeroSelectorRaceTopBox&quot;</span><span style="color: sienna;">,</span> box<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> rowRemaining <span style="color: sienna;">=</span> colCount<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">real</span> y <span style="color: sienna;">=</span> <span style="color: sienna;">-</span>borderSize <span style="color: sienna;">-</span> titleSize <span style="color: sienna;">-</span> <span style="color: #3333FF;">0.0125</span> <span style="color: sienna;">-</span> CategorySize<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">real</span> x <span style="color: sienna;">=</span> borderSize<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> playerIndex <span style="color: sienna;">=</span> <span style="color: #3333FF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> teamIndexLoop<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">local</span> <span style="color: #4477aa; font-weight: bold">integer</span> teamNr<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> <span style="color: purple">ExecuteFunc</span><span style="color: sienna;">&#40;</span><span style="color: blue;">&quot;HeroSelectorAction_InitHeroes&quot;</span><span style="color: sienna;">&#41;</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//find all Teams in usage</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">loop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">exitwhen</span> playerIndex <span style="color: sienna;">==</span> GetBJMaxPlayers<span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> teamNr <span style="color: sienna;">=</span> <span style="color: purple">GetPlayerTeam</span><span style="color: sienna;">&#40;</span><span style="color: purple">Player</span><span style="color: sienna;">&#40;</span>playerIndex<span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> teamNr !<span style="color: sienna;">=</span> <span style="color: sienna;">-</span><span style="color: #3333FF;">1</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> teamIndexLoop <span style="color: sienna;">=</span> UsedTeamNrCount<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">loop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">exitwhen</span> teamIndexLoop <span style="color: sienna;">==</span> <span style="color: #3333FF;">0</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">exitwhen</span> UsedTeamNr<span style="color: sienna;">&#91;</span>teamIndexLoop<span style="color: sienna;">&#93;</span> <span style="color: sienna;">==</span> teamNr<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> teamIndexLoop <span style="color: sienna;">=</span> teamIndexLoop <span style="color: sienna;">-</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endloop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> teamIndexLoop <span style="color: sienna;">==</span> <span style="color: #3333FF;">0</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> UsedTeamNrCount <span style="color: sienna;">=</span> UsedTeamNrCount <span style="color: sienna;">+</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> UsedTeamNr<span style="color: sienna;">&#91;</span>UsedTeamNrCount<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> teamNr<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> playerIndex <span style="color: sienna;">=</span> playerIndex <span style="color: sienna;">+</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endloop</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> <span style="color: purple">TriggerAddAction</span><span style="color: sienna;">&#40;</span>HeroButtonClickTrigger<span style="color: sienna;">,</span> <span style="font-weight: bold">function</span> HeroSelectorActionPressHeroButton<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroSelectorBoxTitle <span style="color: sienna;">=</span> BlzCreateFrame<span style="color: sienna;">&#40;</span><span style="color: blue;">&quot;HeroSelectorTitle&quot;</span><span style="color: sienna;">,</span> box<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> IndicatorSelectedParent <span style="color: sienna;">=</span> BlzCreateFrameByType<span style="color: sienna;">&#40;</span><span style="color: blue;">&quot;BUTTON&quot;</span><span style="color: sienna;">,</span> <span style="color: blue;">&quot;MyHeroIndikatorParent&quot;</span><span style="color: sienna;">,</span> box<span style="color: sienna;">,</span> <span style="color: blue;">&quot;&quot;</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetLevel<span style="color: sienna;">&#40;</span>IndicatorSelectedParent<span style="color: sienna;">,</span> <span style="color: #3333FF;">9</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> IndicatorSelected <span style="color: sienna;">=</span> BlzCreateFrameByType<span style="color: sienna;">&#40;</span><span style="color: blue;">&quot;SPRITE&quot;</span><span style="color: sienna;">,</span> <span style="color: blue;">&quot;MyHeroIndikator&quot;</span><span style="color: sienna;">,</span> IndicatorSelectedParent<span style="color: sienna;">,</span> <span style="color: blue;">&quot;&quot;</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroSelectorBox <span style="color: sienna;">=</span> box &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroSelectorBoxSeperator <span style="color: sienna;">=</span> boxBottom<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetModel<span style="color: sienna;">&#40;</span>IndicatorSelected<span style="color: sienna;">,</span> IndicatorPathPick<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetScale<span style="color: sienna;">&#40;</span>IndicatorSelected<span style="color: sienna;">,</span> ButtonSize<span style="color: sienna;">/</span><span style="color: #3333FF;">0.036</span><span style="color: sienna;">&#41;</span> <span style="color: #009933;">//scale the model to the button size.</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetVisible<span style="color: sienna;">&#40;</span>IndicatorSelected<span style="color: sienna;">,</span> <span style="color: #3333ff">false</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetAbsPoint<span style="color: sienna;">&#40;</span>box<span style="color: sienna;">,</span> BoxPosPoint<span style="color: sienna;">,</span> BoxPosX<span style="color: sienna;">,</span> BoxPosY<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetSize<span style="color: sienna;">&#40;</span>box<span style="color: sienna;">,</span> borderSize<span style="color: sienna;">*</span><span style="color: #3333FF;">2</span> <span style="color: sienna;">+</span> ButtonSize<span style="color: sienna;">*</span>colCount <span style="color: sienna;">+</span> SpaceBetweenX<span style="color: sienna;">*</span><span style="color: sienna;">&#40;</span>colCount<span style="color: sienna;">-</span><span style="color: #3333FF;">1</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">,</span> borderSize<span style="color: sienna;">*</span><span style="color: #3333FF;">2</span> <span style="color: sienna;">+</span> ButtonSize<span style="color: sienna;">*</span>rowCount <span style="color: sienna;">+</span> SpaceBetweenY<span style="color: sienna;">*</span><span style="color: sienna;">&#40;</span>rowCount <span style="color: sienna;">-</span> <span style="color: #3333FF;">1</span><span style="color: sienna;">&#41;</span> <span style="color: sienna;">+</span> titleSize <span style="color: sienna;">+</span> CategorySize <span style="color: sienna;">+</span> <span style="color: #3333FF;">0.0145</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetPoint<span style="color: sienna;">&#40;</span>HeroSelectorBoxTitle<span style="color: sienna;">,</span> FRAMEPOINT_TOP<span style="color: sienna;">,</span> box<span style="color: sienna;">,</span> FRAMEPOINT_TOP<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: sienna;">-</span>borderSize<span style="color: sienna;">*</span><span style="color: #3333FF;">0.6</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetText<span style="color: sienna;">&#40;</span>HeroSelectorBoxTitle<span style="color: sienna;">,</span> <span style="color: blue;">&quot;Hero Selection&quot;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetTextAlignment<span style="color: sienna;">&#40;</span>HeroSelectorBoxTitle<span style="color: sienna;">,</span> TEXT_JUSTIFY_MIDDLE<span style="color: sienna;">,</span> TEXT_JUSTIFY_CENTER<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetSize<span style="color: sienna;">&#40;</span>HeroSelectorBoxTitle<span style="color: sienna;">,</span> BlzFrameGetWidth<span style="color: sienna;">&#40;</span>box<span style="color: sienna;">&#41;</span> <span style="color: sienna;">-</span> borderSize<span style="color: sienna;">*</span><span style="color: #3333FF;">2</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0.03</span><span style="color: sienna;">&#41;</span><br />
<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">// human UI size differs much, needs other numbers</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="color: purple">GetPlayerRace</span><span style="color: sienna;">&#40;</span><span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span> <span style="color: sienna;">==</span> <span style="color: #4477aa">RACE_HUMAN</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetPoint<span style="color: sienna;">&#40;</span>boxBottom<span style="color: sienna;">,</span> FRAMEPOINT_TOPLEFT<span style="color: sienna;">,</span> box<span style="color: sienna;">,</span> FRAMEPOINT_TOPLEFT<span style="color: sienna;">,</span> borderSize<span style="color: sienna;">*</span><span style="color: #3333FF;">0.055</span><span style="color: sienna;">,</span> <span style="color: sienna;">-</span> <span style="color: #3333FF;">0.9</span><span style="color: sienna;">*</span>borderSize <span style="color: sienna;">-</span> titleSize <span style="color: sienna;">-</span> <span style="color: #3333FF;">0.003</span> <span style="color: sienna;">-</span>CategorySize<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetPoint<span style="color: sienna;">&#40;</span>boxBottom<span style="color: sienna;">,</span> FRAMEPOINT_TOPRIGHT<span style="color: sienna;">,</span> box<span style="color: sienna;">,</span> FRAMEPOINT_TOPRIGHT<span style="color: sienna;">,</span> <span style="color: sienna;">-</span>borderSize<span style="color: sienna;">*</span><span style="color: #3333FF;">0.055</span><span style="color: sienna;">,</span> <span style="color: sienna;">-</span> <span style="color: #3333FF;">0.9</span><span style="color: sienna;">*</span>borderSize <span style="color: sienna;">-</span> titleSize <span style="color: sienna;">-</span> <span style="color: #3333FF;">0.003</span> <span style="color: sienna;">-</span>CategorySize<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetPoint<span style="color: sienna;">&#40;</span>boxBottom<span style="color: sienna;">,</span> FRAMEPOINT_TOPLEFT<span style="color: sienna;">,</span> box<span style="color: sienna;">,</span> FRAMEPOINT_TOPLEFT<span style="color: sienna;">,</span> borderSize<span style="color: sienna;">*</span><span style="color: #3333FF;">0.25</span><span style="color: sienna;">,</span> <span style="color: sienna;">-</span> <span style="color: #3333FF;">0.9</span><span style="color: sienna;">*</span>borderSize <span style="color: sienna;">-</span> titleSize <span style="color: sienna;">-</span> <span style="color: #3333FF;">0.003</span> <span style="color: sienna;">-</span>CategorySize<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetPoint<span style="color: sienna;">&#40;</span>boxBottom<span style="color: sienna;">,</span> FRAMEPOINT_TOPRIGHT<span style="color: sienna;">,</span> box<span style="color: sienna;">,</span> FRAMEPOINT_TOPRIGHT<span style="color: sienna;">,</span> <span style="color: sienna;">-</span>borderSize<span style="color: sienna;">*</span><span style="color: #3333FF;">0.25</span><span style="color: sienna;">,</span> <span style="color: sienna;">-</span> <span style="color: #3333FF;">0.9</span><span style="color: sienna;">*</span>borderSize <span style="color: sienna;">-</span> titleSize <span style="color: sienna;">-</span> <span style="color: #3333FF;">0.003</span> <span style="color: sienna;">-</span>CategorySize<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetSize<span style="color: sienna;">&#40;</span>boxBottom<span style="color: sienna;">,</span> <span style="color: #3333FF;">0.01</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0.1</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> colCount<span style="color: sienna;">*</span>rowCount <span style="color: sienna;">&lt;</span> ButtonHeroCount &nbsp;<span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> <span style="color: #dd4444">BJDebugMsg</span><span style="color: sienna;">&#40;</span><span style="color: blue;">&quot;FieldCount:&quot;</span><span style="color: sienna;">+</span> <span style="color: purple">I2S</span><span style="color: sienna;">&#40;</span>colCount<span style="color: sienna;">*</span>rowCount<span style="color: sienna;">&#41;</span> <span style="color: sienna;">+</span> <span style="color: blue;">&quot;HeroCount&quot;</span> <span style="color: sienna;">+</span> <span style="color: purple">I2S</span><span style="color: sienna;">&#40;</span>ButtonHeroCount<span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> buttonIndex <span style="color: sienna;">=</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">loop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">exitwhen</span> buttonIndex <span style="color: sienna;">&gt;</span> &nbsp;HeroButtonCount<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroButtonFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> BlzCreateFrame<span style="color: sienna;">&#40;</span><span style="color: blue;">&quot;HeroSelectorButton&quot;</span><span style="color: sienna;">,</span> box<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> buttonIndex<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroButtonIcon<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> BlzGetFrameByName<span style="color: sienna;">&#40;</span><span style="color: blue;">&quot;HeroSelectorButtonIcon&quot;</span><span style="color: sienna;">,</span> buttonIndex<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroButtonIconPushed<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> BlzGetFrameByName<span style="color: sienna;">&#40;</span><span style="color: blue;">&quot;HeroSelectorButtonIconPushed&quot;</span><span style="color: sienna;">,</span> buttonIndex<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroButtonIconDisabled<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> BlzGetFrameByName<span style="color: sienna;">&#40;</span><span style="color: blue;">&quot;HeroSelectorButtonIconDisabled&quot;</span><span style="color: sienna;">,</span> buttonIndex<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroButtonUnitCode<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> ButtonHeroUnitCode<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> <span style="color: purple">SaveInteger</span><span style="color: sienna;">&#40;</span>Hash<span style="color: sienna;">,</span> <span style="color: purple">GetHandleId</span><span style="color: sienna;">&#40;</span>HeroButtonFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> buttonIndex<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroButtonTooltipBox<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> BlzCreateFrame<span style="color: sienna;">&#40;</span><span style="color: blue;">&quot;HeroSelectorTextBox&quot;</span><span style="color: sienna;">,</span> box<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> buttonIndex<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> HeroButtonTooltip<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> BlzCreateFrame<span style="color: sienna;">&#40;</span><span style="color: blue;">&quot;HeroSelectorText&quot;</span><span style="color: sienna;">,</span> HeroButtonTooltipBox<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> buttonIndex<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetTooltip<span style="color: sienna;">&#40;</span>HeroButtonFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> HeroButtonTooltipBox<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="font-weight: bold">not</span> TooltipRelativIsBox <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="font-weight: bold">call</span> BlzFrameSetPoint<span style="color: sienna;">&#40;</span>HeroButtonTooltip<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> TooltipPoint<span style="color: sienna;">,</span> HeroButtonFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> TooltipRelativePoint<span style="color: sienna;">,</span> TooltipOffsetX <span style="color: sienna;">,</span>TooltipOffsetY<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetPoint<span style="color: sienna;">&#40;</span>HeroButtonTooltip<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> TooltipPoint<span style="color: sienna;">,</span> box<span style="color: sienna;">,</span> TooltipRelativePoint<span style="color: sienna;">,</span> TooltipOffsetX <span style="color: sienna;">,</span>TooltipOffsetY<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetPoint<span style="color: sienna;">&#40;</span>HeroButtonTooltipBox<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> FRAMEPOINT_BOTTOMLEFT<span style="color: sienna;">,</span> HeroButtonTooltip<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> FRAMEPOINT_BOTTOMLEFT<span style="color: sienna;">,</span> <span style="color: sienna;">-</span><span style="color: #3333FF;">0.007</span><span style="color: sienna;">,</span> <span style="color: sienna;">-</span><span style="color: #3333FF;">0.007</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetPoint<span style="color: sienna;">&#40;</span>HeroButtonTooltipBox<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> FRAMEPOINT_TOPRIGHT<span style="color: sienna;">,</span> HeroButtonTooltip<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> FRAMEPOINT_TOPRIGHT<span style="color: sienna;">,</span> <span style="color: #3333FF;">0.007</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0.007</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzTriggerRegisterFrameEvent<span style="color: sienna;">&#40;</span>HeroButtonClickTrigger<span style="color: sienna;">,</span> HeroButtonFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> FRAMEEVENT_CONTROL_CLICK<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetSize<span style="color: sienna;">&#40;</span>HeroButtonFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> ButtonSize<span style="color: sienna;">,</span> ButtonSize<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> HeroButtonUnitCode<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">&gt;</span> <span style="color: #3333FF;">0</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetTexture<span style="color: sienna;">&#40;</span>HeroButtonIcon<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> BlzGetAbilityIcon<span style="color: sienna;">&#40;</span>HeroButtonUnitCode<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> ButtonBlendAll<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetTexture<span style="color: sienna;">&#40;</span>HeroButtonIconPushed<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> BlzGetAbilityIcon<span style="color: sienna;">&#40;</span>HeroButtonUnitCode<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> ButtonBlendAll<span style="color: sienna;">&#41;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetTexture<span style="color: sienna;">&#40;</span>HeroButtonIconDisabled<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> HeroSelectorGetDisabledIcon<span style="color: sienna;">&#40;</span>BlzGetAbilityIcon<span style="color: sienna;">&#40;</span>HeroButtonUnitCode<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> ButtonBlendAll<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetText<span style="color: sienna;">&#40;</span>HeroButtonTooltip<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> TooltipPrefix <span style="color: sienna;">+</span> <span style="color: purple">GetObjectName</span><span style="color: sienna;">&#40;</span>HeroButtonUnitCode<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetEnable<span style="color: sienna;">&#40;</span>HeroButtonFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> HeroSelectorButtonRequirementDone<span style="color: sienna;">&#40;</span>HeroButtonUnitCode<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> <span style="color: purple">GetLocalPlayer</span><span style="color: sienna;">&#40;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetEnable<span style="color: sienna;">&#40;</span>HeroButtonFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> <span style="color: #3333ff">false</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetTexture<span style="color: sienna;">&#40;</span>HeroButtonIcon<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> EmptyButtonPath<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333ff">true</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetTexture<span style="color: sienna;">&#40;</span>HeroButtonIconPushed<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> EmptyButtonPath<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333ff">true</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetTexture<span style="color: sienna;">&#40;</span>HeroButtonIconDisabled<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> EmptyButtonPath<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333ff">true</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> ChainedButtons <span style="font-weight: bold">then</span> <span style="color: #009933;">//buttons are connected to the previous one or the previous row</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> buttonIndex <span style="color: sienna;">==</span> <span style="color: #3333FF;">1</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetPoint<span style="color: sienna;">&#40;</span>HeroButtonFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> FRAMEPOINT_TOPLEFT<span style="color: sienna;">,</span> box<span style="color: sienna;">,</span> FRAMEPOINT_TOPLEFT<span style="color: sienna;">,</span> borderSize<span style="color: sienna;">,</span> y<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">elseif</span> rowRemaining <span style="color: sienna;">&lt;=</span> <span style="color: #3333FF;">0</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetPoint<span style="color: sienna;">&#40;</span>HeroButtonFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> FRAMEPOINT_TOPLEFT<span style="color: sienna;">,</span> HeroButtonFrame<span style="color: sienna;">&#91;</span>buttonIndex <span style="color: sienna;">-</span> colCount<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> FRAMEPOINT_BOTTOMLEFT<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: sienna;">-</span>SpaceBetweenY<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> rowRemaining <span style="color: sienna;">=</span> colCount<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetPoint<span style="color: sienna;">&#40;</span>HeroButtonFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> FRAMEPOINT_LEFT<span style="color: sienna;">,</span> HeroButtonFrame<span style="color: sienna;">&#91;</span>buttonIndex <span style="color: sienna;">-</span> <span style="color: #3333FF;">1</span><span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> FRAMEPOINT_RIGHT<span style="color: sienna;">,</span> SpaceBetweenX<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">else</span> <span style="color: #009933;">//buttons have an offset to the TopLeft of the box</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> rowRemaining <span style="color: sienna;">&lt;=</span> <span style="color: #3333FF;">0</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> x <span style="color: sienna;">=</span> borderSize<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> rowRemaining <span style="color: sienna;">=</span> colCount<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> y <span style="color: sienna;">=</span> y <span style="color: sienna;">-</span> SpaceBetweenY <span style="color: sienna;">-</span> ButtonSize<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">elseif</span> buttonIndex !<span style="color: sienna;">=</span> <span style="color: #3333FF;">1</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> x <span style="color: sienna;">=</span> x <span style="color: sienna;">+</span> ButtonSize <span style="color: sienna;">+</span> SpaceBetweenX<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetPoint<span style="color: sienna;">&#40;</span>HeroButtonFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> FRAMEPOINT_TOPLEFT<span style="color: sienna;">,</span> box<span style="color: sienna;">,</span> FRAMEPOINT_TOPLEFT<span style="color: sienna;">,</span> x<span style="color: sienna;">,</span> y<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> rowRemaining <span style="color: sienna;">=</span> rowRemaining <span style="color: sienna;">-</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> buttonIndex <span style="color: sienna;">=</span> buttonIndex <span style="color: sienna;">+</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endloop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> y <span style="color: sienna;">=</span> <span style="color: sienna;">-</span><span style="color: #3333FF;">0.9</span><span style="color: sienna;">*</span>borderSize <span style="color: sienna;">-</span> titleSize <span style="color: sienna;">-</span> <span style="color: #3333FF;">0.0025</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> x <span style="color: sienna;">=</span> borderSize<span style="color: sienna;">*</span><span style="color: #3333FF;">0.65</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//create category buttons added before the box was created</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> buttonIndex <span style="color: sienna;">=</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">loop</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">exitwhen</span> buttonIndex <span style="color: sienna;">&gt;</span> CategoryButtonCount<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> CategoryButton<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> BlzCreateFrame<span style="color: sienna;">&#40;</span><span style="color: blue;">&quot;HeroSelectorCategoryButton&quot;</span><span style="color: sienna;">,</span> box<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> CategoryIconFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> BlzGetFrameByName<span style="color: sienna;">&#40;</span><span style="color: blue;">&quot;HeroSelectorCategoryButtonIcon&quot;</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> CategoryIconPushedFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> BlzGetFrameByName<span style="color: sienna;">&#40;</span><span style="color: blue;">&quot;HeroSelectorCategoryButtonIconPushed&quot;</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> CategoryTooltipFrameBox<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> BlzCreateFrame<span style="color: sienna;">&#40;</span><span style="color: blue;">&quot;HeroSelectorTextBox&quot;</span><span style="color: sienna;">,</span> box<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> buttonIndex<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> CategoryTooltipFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span> <span style="color: sienna;">=</span> BlzCreateFrame<span style="color: sienna;">&#40;</span><span style="color: blue;">&quot;HeroSelectorText&quot;</span><span style="color: sienna;">,</span> CategoryTooltipFrameBox<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> buttonIndex<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetText<span style="color: sienna;">&#40;</span>CategoryTooltipFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> <span style="color: purple">GetLocalizedString</span><span style="color: sienna;">&#40;</span>CategoryText<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetPoint<span style="color: sienna;">&#40;</span>CategoryTooltipFrameBox<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> FRAMEPOINT_BOTTOMLEFT<span style="color: sienna;">,</span> CategoryTooltipFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> FRAMEPOINT_BOTTOMLEFT<span style="color: sienna;">,</span> <span style="color: sienna;">-</span><span style="color: #3333FF;">0.007</span><span style="color: sienna;">,</span> <span style="color: sienna;">-</span><span style="color: #3333FF;">0.007</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetPoint<span style="color: sienna;">&#40;</span>CategoryTooltipFrameBox<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> FRAMEPOINT_TOPRIGHT<span style="color: sienna;">,</span> CategoryTooltipFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> FRAMEPOINT_TOPRIGHT<span style="color: sienna;">,</span> <span style="color: #3333FF;">0.007</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0.007</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetPoint<span style="color: sienna;">&#40;</span>CategoryTooltipFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> FRAMEPOINT_BOTTOM<span style="color: sienna;">,</span> CategoryButton<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> FRAMEPOINT_TOP<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetTooltip<span style="color: sienna;">&#40;</span>CategoryButton<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> CategoryTooltipFrameBox<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetSize<span style="color: sienna;">&#40;</span>CategoryButton<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> CategorySize<span style="color: sienna;">,</span> CategorySize<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetTexture<span style="color: sienna;">&#40;</span>CategoryIconFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> CategoryTextureDisabled<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333ff">true</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetTexture<span style="color: sienna;">&#40;</span>CategoryIconPushedFrame<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> CategoryTextureDisabled<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333ff">true</span><span style="color: sienna;">&#41;</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzTriggerRegisterFrameEvent<span style="color: sienna;">&#40;</span>CategoryClickTrigger<span style="color: sienna;">,</span> CategoryButton<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> FRAMEEVENT_CONTROL_CLICK<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> buttonIndex <span style="color: sienna;">==</span> <span style="color: #3333FF;">1</span> <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetPoint<span style="color: sienna;">&#40;</span>CategoryButton<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> FRAMEPOINT_TOPLEFT<span style="color: sienna;">,</span> box<span style="color: sienna;">,</span> FRAMEPOINT_TOPLEFT<span style="color: sienna;">,</span> x<span style="color: sienna;">,</span> y<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetPoint<span style="color: sienna;">&#40;</span>CategoryButton<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> FRAMEPOINT_LEFT<span style="color: sienna;">,</span> CategoryButton<span style="color: sienna;">&#91;</span>buttonIndex <span style="color: sienna;">-</span> <span style="color: #3333FF;">1</span><span style="color: sienna;">&#93;</span><span style="color: sienna;">,</span> FRAMEPOINT_RIGHT<span style="color: sienna;">,</span> CategorySpaceX<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> <span style="color: purple">SaveInteger</span><span style="color: sienna;">&#40;</span>Hash<span style="color: sienna;">,</span> <span style="color: purple">GetHandleId</span><span style="color: sienna;">&#40;</span>CategoryButton<span style="color: sienna;">&#91;</span>buttonIndex<span style="color: sienna;">&#93;</span><span style="color: sienna;">&#41;</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> buttonIndex<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> buttonIndex <span style="color: sienna;">=</span> buttonIndex <span style="color: sienna;">+</span> <span style="color: #3333FF;">1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endloop</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> <span style="color: purple">TriggerAddAction</span><span style="color: sienna;">&#40;</span>CategoryClickTrigger<span style="color: sienna;">,</span> <span style="font-weight: bold">function</span> HeroSelectorActionCategoryButton<span style="color: sienna;">&#41;</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> AcceptButton <span style="color: sienna;">=</span> BlzCreateFrame<span style="color: sienna;">&#40;</span><span style="color: blue;">&quot;HeroSelectorTextButton&quot;</span><span style="color: sienna;">,</span> box<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> RandomButton <span style="color: sienna;">=</span> BlzCreateFrame<span style="color: sienna;">&#40;</span><span style="color: blue;">&quot;HeroSelectorTextButton&quot;</span><span style="color: sienna;">,</span> box<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">1</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">set</span> BanButton <span style="color: sienna;">=</span> BlzCreateFrame<span style="color: sienna;">&#40;</span><span style="color: blue;">&quot;HeroSelectorTextButton&quot;</span><span style="color: sienna;">,</span> box<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">2</span><span style="color: sienna;">&#41;</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> <span style="color: purple">TriggerAddAction</span><span style="color: sienna;">&#40;</span>AcceptButtonTrigger<span style="color: sienna;">,</span> <span style="font-weight: bold">function</span> HeroSelectorActionAcceptButton<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> <span style="color: purple">TriggerAddAction</span><span style="color: sienna;">&#40;</span>RandomButtonTrigger<span style="color: sienna;">,</span> <span style="font-weight: bold">function</span> HeroSelectorActionRandomButton<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> <span style="color: purple">TriggerAddAction</span><span style="color: sienna;">&#40;</span>BanButtonTrigger<span style="color: sienna;">,</span> <span style="font-weight: bold">function</span> HeroSelectorActionBanButton<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzTriggerRegisterFrameEvent<span style="color: sienna;">&#40;</span>AcceptButtonTrigger<span style="color: sienna;">,</span> AcceptButton<span style="color: sienna;">,</span> FRAMEEVENT_CONTROL_CLICK<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzTriggerRegisterFrameEvent<span style="color: sienna;">&#40;</span>RandomButtonTrigger<span style="color: sienna;">,</span> RandomButton<span style="color: sienna;">,</span> FRAMEEVENT_CONTROL_CLICK<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzTriggerRegisterFrameEvent<span style="color: sienna;">&#40;</span>BanButtonTrigger<span style="color: sienna;">,</span> BanButton<span style="color: sienna;">,</span> FRAMEEVENT_CONTROL_CLICK<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetSize<span style="color: sienna;">&#40;</span>AcceptButton<span style="color: sienna;">,</span> AcceptButtonSizeX<span style="color: sienna;">,</span> AcceptButtonSizeY<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetSize<span style="color: sienna;">&#40;</span>RandomButton<span style="color: sienna;">,</span> RandomButtonSizeX<span style="color: sienna;">,</span> RandomButtonSizeY<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetSize<span style="color: sienna;">&#40;</span>BanButton<span style="color: sienna;">,</span> BanButtonSizeX<span style="color: sienna;">,</span> BanButtonSizeY<span style="color: sienna;">&#41;</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009933;">//OK, READY, ACCEPT</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetText<span style="color: sienna;">&#40;</span>AcceptButton<span style="color: sienna;">,</span> AcceptButtonTextPrefix <span style="color: sienna;">+</span> <span style="color: purple">GetLocalizedString</span><span style="color: sienna;">&#40;</span>AcceptButtonText<span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetText<span style="color: sienna;">&#40;</span>RandomButton<span style="color: sienna;">,</span> RandomButtonTextPrefix <span style="color: sienna;">+</span> <span style="color: purple">GetLocalizedString</span><span style="color: sienna;">&#40;</span>RandomButtonText<span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetText<span style="color: sienna;">&#40;</span>BanButton<span style="color: sienna;">,</span> BanButtonTextPrefix <span style="color: sienna;">+</span> <span style="color: purple">GetLocalizedString</span><span style="color: sienna;">&#40;</span>BanButtonText<span style="color: sienna;">&#41;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetPoint<span style="color: sienna;">&#40;</span>AcceptButton<span style="color: sienna;">,</span> AcceptButtonAnchor<span style="color: sienna;">,</span> box<span style="color: sienna;">,</span> FRAMEPOINT_BOTTOM<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetPoint<span style="color: sienna;">&#40;</span>RandomButton<span style="color: sienna;">,</span> RandomButtonAnchor<span style="color: sienna;">,</span> box<span style="color: sienna;">,</span> FRAMEPOINT_BOTTOM<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetPoint<span style="color: sienna;">&#40;</span>BanButton<span style="color: sienna;">,</span> FRAMEPOINT_BOTTOM<span style="color: sienna;">,</span> box<span style="color: sienna;">,</span> FRAMEPOINT_BOTTOM<span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">,</span> <span style="color: #3333FF;">0</span><span style="color: sienna;">&#41;</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetVisible<span style="color: sienna;">&#40;</span>BanButton<span style="color: sienna;">,</span> <span style="color: #3333ff">false</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetVisible<span style="color: sienna;">&#40;</span>AcceptButton<span style="color: sienna;">,</span> AcceptButtonIsShown<span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetVisible<span style="color: sienna;">&#40;</span>RandomButton<span style="color: sienna;">,</span> RandomButtonIsShown<span style="color: sienna;">&#41;</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">if</span> <span style="font-weight: bold">not</span> AutoShow <span style="font-weight: bold">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> BlzFrameSetVisible<span style="color: sienna;">&#40;</span>box<span style="color: sienna;">,</span> <span style="color: #3333ff">false</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">endif</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> <span style="color: purple">ExecuteFunc</span><span style="color: sienna;">&#40;</span><span style="color: blue;">&quot;HeroInfoInit&quot;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-weight: bold">call</span> <span style="color: purple">ExecuteFunc</span><span style="color: sienna;">&#40;</span><span style="color: blue;">&quot;TeamViewerInit&quot;</span><span style="color: sienna;">&#41;</span><br />
&nbsp; &nbsp; <span style="font-weight: bold">endfunction</span><br />
<br />
<span style="font-weight: bold">endlibrary</span></div><br />
</div></div></div><br />
<br />
<div style="margin: 20px; margin-top: 5px; font-size: 11px"><div class="smallfont" style="margin-bottom: 2px"><b>GUI Examples</b> <input type="button" class="button" value="Show" style="width: 45px; font-size: 10px; margin: 0px; padding: 0px;" onclick="if (this.parentNode.nextSibling.firstChild.style.display != '') { this.parentNode.nextSibling.firstChild.style.display = ''; this.value = 'Hide'; } else { parentNode.nextSibling.firstChild.style.display = 'none'; this.value = 'Show'; }"></div><div class="alt2" style="margin: 0px; padding: 6px; border: 1px inset; border-style: solid; border-left-width: 1px; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px"><div style="display: none"><br />
<div style="margin: 1em auto" title="TRIGGER">Embedded trigger</div><br />
<br />
<div style="margin: 1em auto" title="TRIGGER">Embedded trigger</div><br />
<br />
<div style="margin: 1em auto" title="TRIGGER">Embedded trigger</div><br />
<div style="margin: 1em auto" title="TRIGGER">Embedded trigger</div><br />
</div></div></div><br />
<br />
changelog:<br />
1.5b)<br />
<div style="padding-left: 30px">Changed Fdf<br />
Added visual Feedback while pushing Hero/Category Buttons<br />
Bann/Random/Accept Button play a clicked sound.&#8203;</div>1.5)<br />
<div style="padding-left: 30px">Improved Teamviewer and added a non Teambased one<br />
Improved Tooltips<br />
Disabled Options show the reason (out of stock / not allowed / requirment)<br />
HeroSelector box border became smaller and a seperator was added<br />
Title Text is limited to the HeroSelector box<br />
Banning can now ignore Requirments (on default enable)<br />
The vJass version allowed to select Heroes which were above the Team limit after HeroSelectorUpdate was called<br />
Requires a new fdf&#8203;</div>1.4)<br />
<div style="padding-left: 30px">Supports TechCode Level as req<br />
GUI can setup manual category mods.<br />
Skips example code in InitHeroes right after the GUI Loader&#8203;</div>1.3b) Various fixes for the demo map Triggers<br />
1.3a) Teamviewer showed non-Allies, when one didn&#039;t wanted that.<br />
1.3) Autodetects Primary Attribute of heroes, can be disabled<br />
1.2.1 only vJass) Seperated the Action functions from the main Code, the functions are now evoked by a real Event System.<br />
1.2)<br />
<div style="padding-left: 30px">RandomButton can now select, if wanted.<br />
Added Category<br />
Increased BorderSize HUMAN, ORC<br />
Some Bugfixes<br />
TeamViewer the TextFrame Button posing was replaced with a Left2Right boolean&#8203;</div>1.1)<br />
<div style="padding-left: 30px">Heroes can now have requirements<br />
Replaced how Random works internally.<br />
Added Settings for Random and Accept Button<br />
The HeroButtons can now be created without being bound together.<br />
Renamed: enablePicking, DelayBannUntilPicking<br />
Teamviewer and HeroInfo overlap now HeroSelector.destroy<br />
bug fixes.&#8203;</div></p>
